
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{_ as le}from"./index.vue_vue_type_script_setup_true_lang-DCSa_W1a.js";import{_ as ne}from"./index.vue_vue_type_script_setup_true_lang-DyfmR9QV.js";import{r as N,a9 as E,d as se,k as re,u as ie,H as ue,a$ as I,ag as de,cl as H,l as m,cd as pe,b as me,o as z,i as a,f as k,h as A,w as s,e as V,V as d,j as l,Y as D,Z as T,p as fe,v as O,$ as L,n as ce,cf as ge,bI as be,t as ve}from"./bootstrap-DTzpk8a9.js";import{_ as _e}from"./index.vue_vue_type_script_setup_true_lang-CvxDANHv.js";import{c as F}from"./standardModuleExample-6zbpOPYx.js";import{A as K}from"./index.vue_vue_type_script_setup_true_lang-XFxYfcp-.js";import{_ as ye}from"./index.vue_vue_type_script_setup_true_lang-Cf3sdE2B.js";import"./index-Ce4LrBVu.js";function Ee(){const f=N({page:1,size:10,total:0,sizes:[2,10,20,50,100],layout:"total, sizes, ->, prev, pager, next, jumper"}),_=N({});function g(n){const o={};for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){const r=n[i];typeof r=="string"&&r.trim()===""?o[i]=void 0:Array.isArray(r)?o[i]=r.map(M=>typeof M=="object"&&M!==null?g(M):M):typeof r=="object"&&r!==null?o[i]=g(r):o[i]=r}return o}function c(n,o){const i={current:E(f).page,size:E(f).size,model:{...g(E(n))},extra:{}};return o&&(Array.isArray(o)?o.forEach(r=>{r.prop=r.prop||r.name,r.type==="daterange"?n[r.name]&&(n[r.name][0]&&(i.extra[`${r.prop}_st`]=n[r.name][0]),n[r.name][1]&&(i.extra[`${r.prop}_ed`]=n[r.name][1])):i.extra[r.prop]=n[r.name],delete i.model[r.name]}):(o.prop=o.prop||o.name,o.type==="daterange"?n[o.name]&&(n[o.name][0]&&(i.extra[`${o.prop}_st`]=n[o.name][0]),n[o.name][1]&&(i.extra[`${o.prop}_ed`]=n[o.name][1])):i.extra[o.prop]=n[o.name],delete i.model[o.name])),E(f).sort&&E(f).order&&(i.sort=E(f).sort,i.order=E(f).order),i}function $(n){return new Promise(o=>{f.value.size=n,o()})}function w(n){return new Promise(o=>{f.value.page=n,o()})}function C(n,o){return new Promise(i=>{f.value.sort=n,f.value.order=o==="ascending"?"asc":"desc",i()})}function t(n){const o=_.value;n?Object.assign(o,n):o&&Object.keys(o).forEach(i=>{o[i]=void 0})}return{pagination:f,search:_,getParams:c,onSizeChange:$,onCurrentChange:w,onSortChange:C,resetQuery:t}}const Me={style:{display:"flex","align-items":"center"}},Ve={style:{display:"flex","align-items":"center"}},xe=se({__name:"list",setup(f){const _=re(),g=ie(),{pagination:c,getParams:$,onSizeChange:w,onCurrentChange:C}=Ee(),t=N({loading:!1,tableAutoHeight:!1,formMode:"router",formModeProps:{visible:!1,id:"",type:void 0},search:{productName:"",title2:"",title3:"",title4:""},batch:{enable:!0,selectionDataList:[]},dataList:[]});ue(()=>{n(),t.value.formMode==="router"&&I.on("get-data-list",()=>{n()})}),de(()=>{t.value.formMode==="router"&&I.off("get-data-list")});async function n(p){p&&p===1&&(c.value.page=p),t.value.loading=!0;const e=$({...t.value.search}),y=await F.page(e);t.value.dataList=H(y,"records",[]),c.value.total=Number(y.total),c.value.page=Number(H(y,"current",1)),setTimeout(()=>{t.value.loading=!1},100)}function o(p){w(p).then(()=>n())}function i(p=1){C(p).then(()=>n())}function r(){t.value.formMode==="router"?g.settings.tabbar.enable&&g.settings.tabbar.mergeTabsBy!=="activeMenu"?_.push({name:"standardModuleExampleCreate",params:{type:"add"}}):_.push({name:"standardModuleExampleCreate",params:{type:"add"}}):(t.value.formModeProps.id="",t.value.formModeProps.visible=!0,t.value.formModeProps.type=K.ADD)}function M(p){t.value.formMode==="router"?g.settings.tabbar.enable&&g.settings.tabbar.mergeTabsBy!=="activeMenu"?_.push({name:"standardModuleExampleEdit",params:{id:p.id,type:"edit"}}):_.push({name:"standardModuleExampleEdit",params:{id:p.id,type:"edit"}}):(t.value.formModeProps.id=p.id,t.value.formModeProps.visible=!0,t.value.formModeProps.type=K.EDIT)}function R(p){let e=[];p?e.push(p.id):e=t.value.batch.selectionDataList.map(y=>y.id),ge.confirm(`确认删除数量「${e.length}」吗？`,"确认信息").then(()=>{F.remove(e).then(()=>{n(),be.success({message:"删除成功",center:!0})})}).catch(()=>{})}return(p,e)=>{const y=m("ElTag"),x=m("el-radio-button"),U=m("el-radio-group"),G=_e,h=m("ElInput"),P=m("ElFormItem"),B=fe,b=m("ElButton"),q=m("ElForm"),Q=ne,Y=m("ElDivider"),Z=m("ElButtonGroup"),J=m("ElSpace"),W=m("el-table-column"),j=m("ElTableColumn"),X=m("ElPopconfirm"),ee=m("ElTable"),te=m("el-pagination"),ae=le,oe=pe("loading");return z(),me("div",{class:ce({"absolute-container":l(t).tableAutoHeight})},[a(G,{title:"标准模块"},{description:s(()=>[V("p",null,[e[11]||(e[11]=d("标准模块即包含 CRUD (增查改删) 操作的基础模块，开发者可通过 ")),a(y,null,{default:s(()=>e[10]||(e[10]=[d("pnpm run new")])),_:1}),e[12]||(e[12]=d(" 命令快速生成一个标准模块，并在此基础上完善业务模块所需要的功能。"))]),e[20]||(e[20]=V("p",null," 同时，标准模块还提供了两个优秀的特性： ",-1)),V("p",Me,[e[15]||(e[15]=V("span",{style:{"margin-inline-end":"20px"}},"特性1：列表展示模式",-1)),a(U,{modelValue:l(t).tableAutoHeight,"onUpdate:modelValue":e[0]||(e[0]=u=>l(t).tableAutoHeight=u),size:"large"},{default:s(()=>[a(x,{value:!1},{default:s(()=>e[13]||(e[13]=[d(" 默认 ")])),_:1}),a(x,{value:!0},{default:s(()=>e[14]||(e[14]=[d(" 列表高度自适应 ")])),_:1})]),_:1},8,["modelValue"])]),V("p",Ve,[e[19]||(e[19]=V("span",{style:{"margin-inline-end":"20px"}},"特性2：表单展示模式",-1)),a(U,{modelValue:l(t).formMode,"onUpdate:modelValue":e[1]||(e[1]=u=>l(t).formMode=u),size:"large"},{default:s(()=>[a(x,{value:"router"},{default:s(()=>e[16]||(e[16]=[d(" 路由跳转 ")])),_:1}),a(x,{value:"dialog"},{default:s(()=>e[17]||(e[17]=[d(" 对话框 ")])),_:1}),a(x,{value:"drawer"},{default:s(()=>e[18]||(e[18]=[d(" 抽屉 ")])),_:1})]),_:1},8,["modelValue"])])]),_:1}),a(ae,null,{default:s(()=>[a(Q,{class:"relative","show-toggle":!1},{default:s(({fold:u,toggle:S})=>[a(q,{model:l(t).search,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:s(()=>[a(P,{label:"标题"},{default:s(()=>[a(h,{modelValue:l(t).search.productName,"onUpdate:modelValue":e[2]||(e[2]=v=>l(t).search.productName=v),placeholder:"请输入标题，支持模糊查询",clearable:""},null,8,["modelValue"])]),_:1}),D(a(P,{label:"标题2"},{default:s(()=>[a(h,{modelValue:l(t).search.title2,"onUpdate:modelValue":e[3]||(e[3]=v=>l(t).search.title2=v),placeholder:"请输入标题，支持模糊查询",clearable:""},null,8,["modelValue"])]),_:2},1536),[[T,u]]),D(a(P,{label:"标题3"},{default:s(()=>[a(h,{modelValue:l(t).search.title3,"onUpdate:modelValue":e[4]||(e[4]=v=>l(t).search.title3=v),placeholder:"请输入标题，支持模糊查询",clearable:""},null,8,["modelValue"])]),_:2},1536),[[T,u]]),D(a(P,{label:"标题4"},{default:s(()=>[a(h,{modelValue:l(t).search.title4,"onUpdate:modelValue":e[5]||(e[5]=v=>l(t).search.title4=v),placeholder:"请输入标题，支持模糊查询",clearable:""},null,8,["modelValue"])]),_:2},1536),[[T,u]]),a(P,null,{default:s(()=>[a(b,{type:"primary",onClick:e[6]||(e[6]=v=>n())},{icon:s(()=>[a(B,{name:"i-ep:search"})]),default:s(()=>[e[21]||(e[21]=d(" 筛选 "))]),_:1}),a(b,{link:"",onClick:S},{icon:s(()=>[a(B,{name:u?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:s(()=>[d(" "+O(u?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),a(Y),a(J,null,{default:s(()=>[a(b,{type:"primary",onClick:e[7]||(e[7]=u=>r())},{icon:s(()=>[a(B,{name:"ep:plus"})]),default:s(()=>[d(" "+O(l(L)("common.title.addRoot")),1)]),_:1}),a(b,{disabled:!l(t).batch.selectionDataList.length},{default:s(()=>e[22]||(e[22]=[d(" 单个批量操作按钮 ")])),_:1},8,["disabled"]),l(t).batch.enable?(z(),k(Z,{key:0},{default:s(()=>[a(b,{disabled:!l(t).batch.selectionDataList.length},{default:s(()=>e[23]||(e[23]=[d(" 单个批量操作按钮1 ")])),_:1},8,["disabled"]),a(b,{disabled:!l(t).batch.selectionDataList.length},{default:s(()=>e[24]||(e[24]=[d(" 单个批量操作按钮2 ")])),_:1},8,["disabled"])]),_:1})):A("",!0)]),_:1}),D((z(),k(ee,{class:"list-table",data:l(t).dataList,stripe:"","highlight-current-row":"",border:"",onSelectionChange:e[8]||(e[8]=u=>l(t).batch.selectionDataList=u)},{default:s(()=>[l(t).batch.enable?(z(),k(W,{key:0,type:"selection",align:"center",fixed:""})):A("",!0),a(j,{prop:"productName",label:l(L)("system.resource.title"),"min-width":"200",fixed:"left"},null,8,["label"]),a(j,{align:"center",fixed:"right",label:"操作",width:"350"},{default:s(u=>[a(b,{link:"",size:"small",type:"primary",onClick:S=>M(u.row)},{default:s(()=>e[25]||(e[25]=[d(" 编辑 ")])),_:2},1032,["onClick"]),a(X,{title:l(L)("common.tips.confirmDelete"),onConfirm:S=>R(u.row)},{reference:s(()=>[a(b,{link:"",size:"small",type:"danger"},{default:s(()=>e[26]||(e[26]=[d(" 刪除 ")])),_:1})]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"])),[[oe,l(t).loading]]),a(te,{"current-page":l(c).page,total:l(c).total,"page-size":l(c).size,"page-sizes":l(c).sizes,layout:l(c).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:o,onCurrentChange:i},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),["dialog","drawer"].includes(l(t).formMode)?(z(),k(ye,{key:0,id:l(t).formModeProps.id,modelValue:l(t).formModeProps.visible,"onUpdate:modelValue":e[9]||(e[9]=u=>l(t).formModeProps.visible=u),type:l(t).formModeProps.type,mode:l(t).formMode,onSuccess:n},null,8,["id","modelValue","type","mode"])):A("",!0)],2)}}}),Be=ve(xe,[["__scopeId","data-v-964958f8"]]);export{Be as default};
