
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{d as u,A as w,B as _,r as h,f as d,o as p,w as c,y as f,j as s,P as v,z as g,h as $,H as A,am as x,D as b,Y as k,Z as B,n as y,R,L as z,M as L,O as M,bA as P,i as C,V as j,v as I}from"./bootstrap-DTzpk8a9.js";const[S,D]=w("AvatarRoot"),F=u({__name:"AvatarRoot",props:{asChild:{type:Boolean},as:{default:"span"}},setup(t){return _(),D({imageLoadingStatus:h("loading")}),(e,a)=>(p(),d(s(v),{"as-child":e.asChild,as:e.as},{default:c(()=>[f(e.$slots,"default")]),_:3},8,["as-child","as"]))}}),N=u({__name:"AvatarFallback",props:{delayMs:{default:0},asChild:{type:Boolean},as:{default:"span"}},setup(t){const e=t,a=S();_();const o=h(!1);let r;return g(a.imageLoadingStatus,l=>{l==="loading"&&(o.value=!1,e.delayMs?r=setTimeout(()=>{o.value=!0,clearTimeout(r)},e.delayMs):o.value=!0)},{immediate:!0}),(l,m)=>o.value&&s(a).imageLoadingStatus.value!=="loaded"?(p(),d(s(v),{key:0,"as-child":l.asChild,as:l.as},{default:c(()=>[f(l.$slots,"default")]),_:3},8,["as-child","as"])):$("",!0)}});function T(t,e){const a=h("idle"),o=h(!1),r=l=>()=>{o.value&&(a.value=l)};return A(()=>{o.value=!0,g([()=>t.value,()=>e==null?void 0:e.value],([l,m])=>{if(!l)a.value="error";else{const n=new window.Image;a.value="loading",n.onload=r("loaded"),n.onerror=r("error"),n.src=l,m&&(n.referrerPolicy=m)}},{immediate:!0})}),x(()=>{o.value=!1}),a}const V=u({__name:"AvatarImage",props:{src:{},referrerPolicy:{},asChild:{type:Boolean},as:{default:"img"}},emits:["loadingStatusChange"],setup(t,{emit:e}){const a=t,o=e,{src:r,referrerPolicy:l}=b(a);_();const m=S(),n=T(r,l);return g(n,i=>{o("loadingStatusChange",i),i!=="idle"&&(m.imageLoadingStatus.value=i)},{immediate:!0}),(i,U)=>k((p(),d(s(v),{role:"img","as-child":i.asChild,as:i.as,src:s(r),"referrer-policy":s(l)},{default:c(()=>[f(i.$slots,"default")]),_:3},8,["as-child","as","src","referrer-policy"])),[[B,s(n)==="loaded"]])}}),q=u({__name:"Avatar",props:{class:{},size:{default:"sm"},shape:{default:"circle"}},setup(t){const e=t;return(a,o)=>(p(),d(s(F),{class:y(s(R)(s(O)({size:a.size,shape:a.shape}),e.class))},{default:c(()=>[f(a.$slots,"default")]),_:3},8,["class"]))}}),E=u({__name:"AvatarFallback",props:{delayMs:{},asChild:{type:Boolean},as:{}},setup(t){const e=t;return(a,o)=>(p(),d(s(N),z(L(e)),{default:c(()=>[f(a.$slots,"default")]),_:3},16))}}),H=u({__name:"AvatarImage",props:{src:{},referrerPolicy:{},asChild:{type:Boolean},as:{}},setup(t){const e=t;return(a,o)=>(p(),d(s(V),M(e,{class:"h-full w-full object-cover"}),null,16))}}),O=P("inline-flex items-center justify-center font-normal text-foreground select-none shrink-0 bg-secondary overflow-hidden",{variants:{size:{sm:"h-10 w-10 text-xs",base:"h-16 w-16 text-2xl",lg:"h-32 w-32 text-5xl"},shape:{circle:"rounded-full",square:"rounded-md"}}}),Z=u({__name:"index",props:{src:{},fallback:{},shape:{},class:{}},setup(t){const e=t;return(a,o)=>(p(),d(s(q),{shape:a.shape,class:y(e.class)},{default:c(()=>[C(s(H),{src:a.src},null,8,["src"]),C(s(E),{class:"inline-flex"},{default:c(()=>[f(a.$slots,"default",{},()=>[j(I(a.fallback),1)])]),_:3})]),_:3},8,["shape","class"]))}});export{Z as _};
