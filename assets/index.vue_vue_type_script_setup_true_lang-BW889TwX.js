
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{A as q,d as V,B as R,C as P,c as v,f as b,o as m,w as f,y as C,h as A,j as e,O as g,J as I,a3 as K,a4 as N,P as E,i as h,a2 as j,N as O,p as z,R as D,a5 as J,a6 as L,a7 as T,b as U,e as H}from"./bootstrap-DTzpk8a9.js";import{i as _,a as k}from"./nullish-7k-Mr_-W.js";import{u as Q}from"./useFormControl-Bfdwftmu.js";import{_ as W}from"./RovingFocusItem-RuKDMxCS.js";import{_ as X}from"./VisuallyHiddenInput-BWgIjf8G.js";function $(s,d){return _(s)?!1:Array.isArray(s)?s.some(a=>k(a,d)):k(s,d)}const[Y,ue]=q("CheckboxGroupRoot");function y(s){return s==="indeterminate"}function S(s){return y(s)?"indeterminate":s?"checked":"unchecked"}const[Z,G]=q("CheckboxRoot"),ee=V({inheritAttrs:!1,__name:"CheckboxRoot",props:{defaultValue:{type:[Boolean,String]},modelValue:{type:[Boolean,String,null],default:void 0},disabled:{type:Boolean},value:{default:"on"},id:{},asChild:{type:Boolean},as:{default:"button"},name:{},required:{type:Boolean}},emits:["update:modelValue"],setup(s,{emit:d}){const a=s,l=d,{forwardRef:n,currentElement:u}=R(),o=Y(null),r=P(a,"modelValue",l,{defaultValue:a.defaultValue,passive:a.modelValue===void 0}),i=v(()=>(o==null?void 0:o.disabled.value)||a.disabled),c=v(()=>_(o==null?void 0:o.modelValue.value)?r.value==="indeterminate"?"indeterminate":r.value:$(o.modelValue.value,a.value));function x(){if(_(o==null?void 0:o.modelValue.value))r.value=y(r.value)?!0:!r.value;else{const t=[...o.modelValue.value||[]];if($(t,a.value)){const B=t.findIndex(p=>k(p,a.value));t.splice(B,1)}else t.push(a.value);o.modelValue.value=t}}const M=Q(u),F=v(()=>{var t;return a.id&&u.value?(t=document.querySelector(`[for="${a.id}"]`))==null?void 0:t.innerText:void 0});return G({disabled:i,state:c}),(t,B)=>{var p,w;return m(),b(N((p=e(o))!=null&&p.rovingFocus.value?e(W):e(E)),g(t.$attrs,{id:t.id,ref:e(n),role:"checkbox","as-child":t.asChild,as:t.as,type:t.as==="button"?"button":void 0,"aria-checked":e(y)(c.value)?"mixed":c.value,"aria-required":t.required,"aria-label":t.$attrs["aria-label"]||F.value,"data-state":e(S)(c.value),"data-disabled":i.value?"":void 0,disabled:i.value,focusable:(w=e(o))!=null&&w.rovingFocus.value?!i.value:void 0,onKeydown:I(K(()=>{},["prevent"]),["enter"]),onClick:x}),{default:f(()=>[C(t.$slots,"default",{modelValue:e(r),state:c.value}),e(M)&&t.name&&!e(o)?(m(),b(e(X),{key:0,type:"checkbox",checked:!!c.value,name:t.name,value:t.value,disabled:i.value,required:t.required},null,8,["checked","name","value","disabled","required"])):A("",!0)]),_:3},16,["id","as-child","as","type","aria-checked","aria-required","aria-label","data-state","data-disabled","disabled","focusable","onKeydown"])}}}),ae=V({__name:"CheckboxIndicator",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{default:"span"}},setup(s){const{forwardRef:d}=R(),a=Z();return(l,n)=>(m(),b(e(j),{present:l.forceMount||e(y)(e(a).state.value)||e(a).state.value===!0},{default:f(()=>[h(e(E),g({ref:e(d),"data-state":e(S)(e(a).state.value),"data-disabled":e(a).disabled.value?"":void 0,style:{pointerEvents:"none"},"as-child":l.asChild,as:l.as},l.$attrs),{default:f(()=>[C(l.$slots,"default")]),_:3},16,["data-state","data-disabled","as-child","as"])]),_:3},8,["present"]))}}),te=V({__name:"Checkbox",props:{defaultValue:{type:[Boolean,String]},modelValue:{type:[Boolean,String,null]},disabled:{type:Boolean},value:{},id:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue"],setup(s,{emit:d}){const a=s,l=d,n=v(()=>{const{class:o,...r}=a;return r}),u=O(n,l);return(o,r)=>{const i=z;return m(),b(e(ee),g(e(u),{class:e(D)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a.class)}),{default:f(()=>[h(e(ae),{class:"h-full w-full flex items-center justify-center text-current"},{default:f(()=>[C(o.$slots,"default",{},()=>[h(i,{name:"i-lucide:check",size:16})])]),_:3})]),_:3},16,["class"])}}}),oe={class:"flex-center-start gap-2"},se=["for"],ce=V({name:"KCheckbox",__name:"index",props:J({disabled:{type:Boolean}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(s){const d=L(s,"modelValue"),a=T();return(l,n)=>(m(),U("div",oe,[h(e(te),{id:e(a),modelValue:d.value,"onUpdate:modelValue":n[0]||(n[0]=u=>d.value=u),disabled:l.disabled},null,8,["id","modelValue","disabled"]),H("label",{for:e(a),class:"cursor-pointer text-sm"},[C(l.$slots,"default")],8,se)]))}});export{ce as _};
