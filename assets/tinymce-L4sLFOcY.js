
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{_ as CY}from"./index.vue_vue_type_script_setup_true_lang-DCSa_W1a.js";import{_ as wY}from"./index.vue_vue_type_script_setup_true_lang-CvxDANHv.js";import{z as mG,d as cY,D as SY,r as fG,H as aY,ag as xY,c8 as EY,cc as TY,ac as Kq,K as Yq,g as kY,u as _Y,l as iG,b as AY,o as OY,i as ry,w as $w,V as z4,p as DY,e as lG,j as _I,G as RY,t as MY}from"./bootstrap-DTzpk8a9.js";import NY from"./alert-B1ZQreqZ.js";import{b as Xq}from"./route-block-B_A1xBdJ.js";import"./index-Ce4LrBVu.js";var PY=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCommentChange","onCompositionEnd","onCompositionStart","onCompositionUpdate","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],BY=function(an){return PY.map(function(Co){return Co.toLowerCase()}).indexOf(an.toLowerCase())!==-1},$Y=function(an,Co,Un){Object.keys(Co).filter(BY).forEach(function(mo){var oo=Co[mo];typeof oo=="function"&&(mo==="onInit"?oo(an,Un):Un.on(mo.substring(2),function(In){return oo(In,Un)}))})},FY=function(an,Co,Un,mo){var oo=an.modelEvents?an.modelEvents:null,In=Array.isArray(oo)?oo.join(" "):oo;mG(mo,function(fn,je){Un&&typeof fn=="string"&&fn!==je&&fn!==Un.getContent({format:an.outputFormat})&&Un.setContent(fn)}),Un.on(In||"change input undo redo",function(){Co.emit("update:modelValue",Un.getContent({format:an.outputFormat}))})},IY=function(an,Co,Un,mo,oo,In){mo.setContent(In()),Un.attrs["onUpdate:modelValue"]&&FY(Co,Un,mo,oo),$Y(an,Un.attrs,mo)},Jq=0,iY=function(an){var Co=Date.now(),Un=Math.floor(Math.random()*1e9);return Jq++,an+"_"+Un+Jq+String(Co)},LY=function(an){return an!==null&&an.tagName.toLowerCase()==="textarea"},Qq=function(an){return typeof an>"u"||an===""?[]:Array.isArray(an)?an:an.split(" ")},HY=function(an,Co){return Qq(an).concat(Qq(Co))},zY=function(an){return an==null},eK=function(){return{listeners:[],scriptId:iY("tiny-script"),scriptLoaded:!1}},VY=function(){var an=eK(),Co=function(oo,In,fn,je){var yn=In.createElement("script");yn.referrerPolicy="origin",yn.type="application/javascript",yn.id=oo,yn.src=fn;var Ro=function(){yn.removeEventListener("load",Ro),je()};yn.addEventListener("load",Ro),In.head&&In.head.appendChild(yn)},Un=function(oo,In,fn){an.scriptLoaded?fn():(an.listeners.push(fn),oo.getElementById(an.scriptId)||Co(an.scriptId,oo,In,function(){an.listeners.forEach(function(je){return je()}),an.scriptLoaded=!0}))},mo=function(){an=eK()};return{load:Un,reinitialize:mo}},UY=VY(),WY=function(){return typeof window<"u"?window:global},Fw=function(){var an=WY();return an&&an.tinymce?an.tinymce:null},ZY={apiKey:String,licenseKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(an){return an==="html"||an==="text"}}},s1=function(){return s1=Object.assign||function(an){for(var Co,Un=1,mo=arguments.length;Un<mo;Un++){Co=arguments[Un];for(var oo in Co)Object.prototype.hasOwnProperty.call(Co,oo)&&(an[oo]=Co[oo])}return an},s1.apply(this,arguments)},jY=function(an,Co,Un,mo){return an(mo||"div",{id:Co,ref:Un})},GY=function(an,Co,Un){return an("textarea",{id:Co,visibility:"hidden",ref:Un})},uG={selector:void 0,target:void 0},qY=cY({props:ZY,setup:function(an,Co){var Un=an.init?s1(s1({},an.init),uG):s1({},uG),mo=SY(an),oo=mo.disabled,In=mo.modelValue,fn=mo.tagName,je=fG(null),yn=null,Ro=an.id||iY("tiny-vue"),Ko=an.init&&an.init.inline||an.inline,jo=!!Co.attrs["onUpdate:modelValue"],Wo=!0,Yo=an.initialValue?an.initialValue:"",Ps="",io=function(Ze){return jo?function(){return In!=null&&In.value?In.value:""}:function(){return Ze?Yo:Ps}},Rt=function(){var Ze=io(Wo),oe=s1(s1({},Un),{readonly:an.disabled,target:je.value,plugins:HY(Un.plugins,an.plugins),toolbar:an.toolbar||Un.toolbar,inline:Ko,license_key:an.licenseKey,setup:function(it){yn=it,it.on("init",function(Zo){return IY(Zo,an,Co,it,In,Ze)}),typeof Un.setup=="function"&&Un.setup(it)}});LY(je.value)&&(je.value.style.visibility=""),Fw().init(oe),Wo=!1};mG(oo,function(Ze){var oe;yn!==null&&(typeof((oe=yn.mode)===null||oe===void 0?void 0:oe.set)=="function"?yn.mode.set(Ze?"readonly":"design"):yn.setMode(Ze?"readonly":"design"))}),mG(fn,function(Ze){var oe;jo||(Ps=yn.getContent()),(oe=Fw())===null||oe===void 0||oe.remove(yn),Yq(function(){return Rt()})}),aY(function(){if(Fw()!==null)Rt();else if(je.value&&je.value.ownerDocument){var Ze=an.cloudChannel?an.cloudChannel:"7",oe=an.apiKey?an.apiKey:"no-api-key",it=zY(an.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(oe,"/tinymce/").concat(Ze,"/tinymce.min.js"):an.tinymceScriptSrc;UY.load(je.value.ownerDocument,it,Rt)}}),xY(function(){Fw()!==null&&Fw().remove(yn)}),Ko||(EY(function(){Wo||Rt()}),TY(function(){var Ze;jo||(Ps=yn.getContent()),(Ze=Fw())===null||Ze===void 0||Ze.remove(yn)}));var jn=function(Ze){var oe;Ps=yn.getContent(),(oe=Fw())===null||oe===void 0||oe.remove(yn),Un=s1(s1(s1({},Un),Ze),uG),Yq(function(){return Rt()})};return Co.expose({rerender:jn,getEditor:function(){return yn}}),function(){return Ko?jY(Kq,Ro,je,an.tagName):GY(Kq,Ro,je)}}}),dG={exports:{}},tK;function KY(){return tK||(tK=1,function(an){(function(){var Co=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},Un=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},mo=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},oo=function(e,n){return In(function(o,r){return e.eq(n(o),n(r))})},In=function(e){return{eq:e}},fn=In(function(e,n){return e===n}),je=fn,yn=function(e){return In(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,a=0;a<r;a++)if(!e.eq(n[a],o[a]))return!1;return!0})},Ro=function(e,n){return oo(yn(e),function(o){return mo(o,n)})},Ko=function(e){return In(function(n,o){var r=Object.keys(n),a=Object.keys(o);if(!Ro(je).eq(r,a))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(n[b],o[b]))return!1}return!0})},jo=In(function(e,n){if(e===n)return!0;var o=Co(e),r=Co(n);return o!==r?!1:Un(o)?e===n:o==="array"?yn(jo).eq(e,n):o==="object"?Ko(jo).eq(e,n):!1});const Wo=Object.getPrototypeOf,Yo=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},Ps=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&Yo(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},io=e=>n=>Ps(n)===e,Rt=e=>n=>typeof n===e,jn=e=>n=>e===n,Ze=(e,n)=>it(e)&&Yo(e,n,(o,r)=>Wo(o)===r),oe=io("string"),it=io("object"),Zo=e=>Ze(e,Object),mt=io("array"),Z=jn(null),Mt=Rt("boolean"),ln=jn(void 0),On=e=>e==null,De=e=>!On(e),ie=Rt("function"),Go=Rt("number"),eo=(e,n)=>{if(mt(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},Bt=()=>{},A=(e,n)=>(...o)=>e(n.apply(null,o)),To=(e,n)=>o=>e(n(o)),yt=e=>()=>e,Mo=e=>e,dn=(e,n)=>e===n;function Qe(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const fo=e=>n=>!e(n),Bs=e=>()=>{throw new Error(e)},St=e=>e(),Tn=e=>{e()},Re=yt(!1),ot=yt(!0);class F{constructor(n,o){this.tag=n,this.value=o}static some(n){return new F(!0,n)}static none(){return F.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?F.some(n(this.value)):F.none()}bind(n){return this.tag?n(this.value):F.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:F.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return De(n)?F.some(n):F.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}F.singletonNone=new F(!1);const _s=Array.prototype.slice,to=Array.prototype.indexOf,wo=Array.prototype.push,No=(e,n)=>to.call(e,n),Ic=(e,n)=>{const o=No(e,n);return o===-1?F.none():F.some(o)},We=(e,n)=>No(e,n)>-1,Tt=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];if(n(a,o))return!0}return!1},et=(e,n)=>{const o=e.length,r=new Array(o);for(let a=0;a<o;a++){const u=e[a];r[a]=n(u,a)}return r},fe=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];n(a,o)}},bo=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},ko=(e,n)=>{const o=[],r=[];for(let a=0,u=e.length;a<u;a++){const f=e[a];(n(f,a)?o:r).push(f)}return{pass:o,fail:r}},jt=(e,n)=>{const o=[];for(let r=0,a=e.length;r<a;r++){const u=e[r];n(u,r)&&o.push(u)}return o},hs=(e,n,o)=>(bo(e,(r,a)=>{o=n(o,r,a)}),o),Wn=(e,n,o)=>(fe(e,(r,a)=>{o=n(o,r,a)}),o),Xs=(e,n,o)=>{for(let r=0,a=e.length;r<a;r++){const u=e[r];if(n(u,r))return F.some(u);if(o(u,r))break}return F.none()},Ho=(e,n)=>Xs(e,n,Re),As=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];if(n(a,o))return F.some(o)}return F.none()},Oc=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!mt(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);wo.apply(n,e[o])}return n},Js=(e,n)=>Oc(et(e,n)),ps=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const a=e[o];if(n(a,o)!==!0)return!1}return!0},os=e=>{const n=_s.call(e,0);return n.reverse(),n},Nr=(e,n)=>jt(e,o=>!We(n,o)),xs=(e,n)=>{const o={};for(let r=0,a=e.length;r<a;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Ke=(e,n)=>{const o=_s.call(e,0);return o.sort(n),o},Gt=(e,n)=>n>=0&&n<e.length?F.some(e[n]):F.none(),Ht=e=>Gt(e,0),Jt=e=>Gt(e,e.length-1),lo=ie(Array.from)?Array.from:e=>_s.call(e),bs=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return F.none()},ur=(e,n)=>{const o=[],r=ie(n)?a=>Tt(o,u=>n(u,a)):a=>We(o,a);for(let a=0,u=e.length;a<u;a++){const f=e[a];r(f)||o.push(f)}return o},Yn=Object.keys,Er=Object.hasOwnProperty,Ct=(e,n)=>{const o=Yn(e);for(let r=0,a=o.length;r<a;r++){const u=o[r],f=e[u];n(f,u)}},uo=(e,n)=>dr(e,(o,r)=>({k:r,v:n(o,r)})),dr=(e,n)=>{const o={};return Ct(e,(r,a)=>{const u=n(r,a);o[u.k]=u.v}),o},vr=e=>(n,o)=>{e[o]=n},dc=(e,n,o,r)=>{Ct(e,(a,u)=>{(n(a,u)?o:r)(a,u)})},Dc=(e,n)=>{const o={},r={};return dc(e,n,vr(o),vr(r)),{t:o,f:r}},us=(e,n)=>{const o={};return dc(e,n,vr(o),Bt),o},Qr=(e,n)=>{const o=[];return Ct(e,(r,a)=>{o.push(n(r,a))}),o},mc=e=>Qr(e,Mo),is=(e,n)=>Cn(e,n)?F.from(e[n]):F.none(),Cn=(e,n)=>Er.call(e,n),Ls=(e,n)=>Cn(e,n)&&e[n]!==void 0&&e[n]!==null,qr=(e,n,o=jo)=>Ko(o).eq(e,n),Ca=e=>{const n={};return fe(e,o=>{n[o]={}}),Yn(n)},ci=e=>e.length!==void 0,mr=Array.isArray,vs=e=>{if(mr(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},$s=(e,n,o)=>{if(!e)return!1;if(o=o||e,ci(e)){for(let r=0,a=e.length;r<a;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(Cn(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},ec=(e,n)=>{const o=[];return $s(e,(r,a)=>{o.push(n(r,a,e))}),o},Rc=(e,n)=>{const o=[];return $s(e,(r,a)=>{(!n||n(r,a,e))&&o.push(r)}),o},Qs=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},le=(e,n,o,r)=>{let a=ln(o)?e[0]:o;for(let u=0;u<e.length;u++)a=n.call(r,a,e[u],u);return a},re=(e,n,o)=>{for(let r=0,a=e.length;r<a;r++)if(n.call(o,e[r],r,e))return r;return-1},Ne=e=>e[e.length-1],Ve=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},xn=(e,n,o,r)=>{const a=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!a,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),y=a||!u&&f&&r("(min-device-width:768px)"),x=u||f&&!y,R=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,N=!x&&!y&&!R;return{isiPad:yt(a),isiPhone:yt(u),isTablet:yt(y),isPhone:yt(x),isTouch:yt(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:yt(R),isDesktop:yt(N)}},Fn=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},so=(e,n)=>{const o=Fn(e,n);if(!o)return{major:0,minor:0};const r=a=>Number(n.replace(o,"$"+a));return ze(r(1),r(2))},Os=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?st():so(e,o)},st=()=>ze(0,0),ze=(e,n)=>({major:e,minor:n}),de={nu:ze,detect:Os,unknown:st},he=(e,n)=>bs(n.brands,o=>{const r=o.brand.toLowerCase();return Ho(e,a=>{var u;return r===((u=a.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(a=>({current:a.name,version:de.nu(parseInt(o.version,10),0)}))}),ct=(e,n)=>{const o=String(n).toLowerCase();return Ho(e,r=>r.search(o))},pt=(e,n)=>ct(e,n).map(o=>{const r=de.detect(o.versionRegexes,n);return{current:o.name,version:r}}),zt=(e,n)=>ct(e,n).map(o=>{const r=de.detect(o.versionRegexes,n);return{current:o.name,version:r}}),gn=(e,n)=>e.substring(n),hn=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,on=(e,n)=>Ln(e,n)?gn(e,n.length):e,Rn=(e,n,o=0,r)=>{const a=e.indexOf(n,o);return a!==-1?ln(r)?!0:a+n.length<=r:!1},Ln=(e,n)=>hn(e,n,0),Po=(e,n)=>hn(e,n,e.length-n.length),Hs=e=>n=>n.replace(e,""),ss=Hs(/^\s+|\s+$/g),la=Hs(/^\s+/g),vc=Hs(/\s+$/g),Xn=e=>e.length>0,vo=e=>!Xn(e),So=(e,n)=>n<=0?"":new Array(n+1).join(e),tc=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?F.none():F.some(o)},nc=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,yc=e=>n=>Rn(n,e),Fs=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Rn(e,"edge/")&&Rn(e,"chrome")&&Rn(e,"safari")&&Rn(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,nc],search:e=>Rn(e,"chrome")&&!Rn(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Rn(e,"msie")||Rn(e,"trident")},{name:"Opera",versionRegexes:[nc,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:yc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:yc("firefox")},{name:"Safari",versionRegexes:[nc,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Rn(e,"safari")||Rn(e,"mobile/"))&&Rn(e,"applewebkit")}],Su=[{name:"Windows",search:yc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Rn(e,"iphone")||Rn(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:yc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:yc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:yc("linux"),versionRegexes:[]},{name:"Solaris",search:yc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:yc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:yc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ba={browsers:yt(Fs),oses:yt(Su)},Ol="Edge",Bo="Chromium",ai="IE",er="Opera",Dl="Firefox",$a="Safari",ii=()=>oc({current:void 0,version:de.unknown()}),oc=e=>{const n=e.current,o=e.version,r=a=>()=>n===a;return{current:n,version:o,isEdge:r(Ol),isChromium:r(Bo),isIE:r(ai),isOpera:r(er),isFirefox:r(Dl),isSafari:r($a)}},ol={unknown:ii,nu:oc},Fa="Windows",sl="iOS",zi="Android",xu="Linux",Lr="macOS",li="Solaris",Vi="FreeBSD",rl="ChromeOS",Rl=()=>Ia({current:void 0,version:de.unknown()}),Ia=e=>{const n=e.current,o=e.version,r=a=>()=>n===a;return{current:n,version:o,isWindows:r(Fa),isiOS:r(sl),isAndroid:r(zi),isMacOS:r(Lr),isLinux:r(xu),isSolaris:r(li),isFreeBSD:r(Vi),isChromeOS:r(rl)}},Or={unknown:Rl,nu:Ia},jc={detect:(e,n,o)=>{const r=Ba.browsers(),a=Ba.oses(),u=n.bind(y=>he(r,y)).orThunk(()=>pt(r,e)).fold(ol.unknown,ol.nu),f=zt(a,e).fold(Or.unknown,Or.nu),b=xn(f,u,e,o);return{browser:u,os:f,deviceType:b}}},cl=e=>window.matchMedia(e).matches;let al=Ve(()=>jc.detect(window.navigator.userAgent,F.from(window.navigator.userAgentData),cl));const Cc=()=>al(),U=window.navigator.userAgent,se=Cc(),ye=se.browser,Ge=se.os,Et=se.deviceType,Xe=U.indexOf("Windows Phone")!==-1,cn={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:ye.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!ye.isIE(),windowsPhone:Xe,browser:{current:ye.current,version:ye.version,isChromium:ye.isChromium,isEdge:ye.isEdge,isFirefox:ye.isFirefox,isIE:ye.isIE,isOpera:ye.isOpera,isSafari:ye.isSafari},os:{current:Ge.current,version:Ge.version,isAndroid:Ge.isAndroid,isChromeOS:Ge.isChromeOS,isFreeBSD:Ge.isFreeBSD,isiOS:Ge.isiOS,isLinux:Ge.isLinux,isMacOS:Ge.isMacOS,isSolaris:Ge.isSolaris,isWindows:Ge.isWindows},deviceType:{isDesktop:Et.isDesktop,isiPad:Et.isiPad,isiPhone:Et.isiPhone,isPhone:Et.isPhone,isTablet:Et.isTablet,isTouch:Et.isTouch,isWebView:Et.isWebView}},ho=/^\s*|\s*$/g,Gn=e=>On(e)?"":(""+e).replace(ho,""),$=(e,n)=>n?n==="array"&&mr(e)?!0:typeof e===n:e!==void 0,V=(e,n,o={})=>{const r=oe(e)?e.split(n||","):e||[];let a=r.length;for(;a--;)o[r[a]]={};return o},ue=Cn,Ae=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const a in r)if(Cn(r,a)){const u=r[a];u!==void 0&&(e[a]=u)}}return e},nn=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),$s(e,(a,u)=>n.call(r,a,u,o)===!1?!1:(nn(a,n,o,r),!0)))},at={trim:Gn,isArray:mr,is:$,toArray:vs,makeMap:V,each:$s,map:ec,grep:Rc,inArray:Qs,hasOwn:ue,extend:Ae,walk:nn,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,a=o.length;r<a&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>mt(e)?e:e===""?[]:ec(e.split(n||","),Gn),_addCacheSuffix:e=>{const n=cn.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},Lc=(e,n,o=dn)=>e.exists(r=>o(r,n)),Es=(e,n,o=dn)=>yr(e,n,o).getOr(e.isNone()&&n.isNone()),ki=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},yr=(e,n,o)=>e.isSome()&&n.isSome()?F.some(o(e.getOrDie(),n.getOrDie())):F.none(),xo=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?F.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):F.none(),Gc=(e,n)=>e?F.some(n):F.none(),sc=typeof window<"u"?window:Function("return this;")(),qc=(e,n)=>{let o=n??sc;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},Pr=(e,n)=>{const o=e.split(".");return qc(o,n)},il=(e,n)=>Pr(e,n),Nm=(e,n)=>{const o=il(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},xf=Object.getPrototypeOf,Zs=e=>Nm("HTMLElement",e),ll=e=>{const n=Pr("ownerDocument.defaultView",e);return it(e)&&(Zs(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(xf(e).constructor.name))},rc=8,wc=9,ua=11,Ml=1,Y=3,ee=e=>e.dom.nodeName.toLowerCase(),ke=e=>e.dom.nodeType,tt=e=>n=>ke(n)===e,wn=e=>ke(e)===rc||ee(e)==="#comment",$o=e=>po(e)&&ll(e.dom),po=tt(Ml),Is=tt(Y),zr=tt(wc),wa=tt(ua),Kc=e=>n=>po(n)&&ee(n)===e,sr=(e,n,o)=>{if(oe(o)||Mt(o)||Go(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},Rr=(e,n,o)=>{sr(e.dom,n,o)},Kr=(e,n)=>{const o=e.dom;Ct(n,(r,a)=>{sr(o,a,r)})},Hc=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},Tr=(e,n)=>F.from(Hc(e,n)),Sc=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Ts=(e,n)=>{e.dom.removeAttribute(n)},ul=e=>{const n=e.dom.attributes;return n==null||n.length===0},Pm=e=>Wn(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),su=(e,n)=>{const o=Hc(e,n);return o===void 0||o===""?[]:o.split(" ")},Hd=(e,n,o)=>{const a=su(e,n).concat([o]);return Rr(e,n,a.join(" ")),!0},zd=(e,n,o)=>{const r=jt(su(e,n),a=>a!==o);return r.length>0?Rr(e,n,r.join(" ")):Ts(e,n),!1},cd=e=>e.dom.classList!==void 0,ad=e=>su(e,"class"),_i=(e,n)=>Hd(e,"class",n),Sa=(e,n)=>zd(e,"class",n),Sh=(e,n)=>We(ad(e),n)?Sa(e,n):_i(e,n),Nl=(e,n)=>{cd(e)?e.dom.classList.add(n):_i(e,n)},Ef=e=>{(cd(e)?e.dom.classList:ad(e)).length===0&&Ts(e,"class")},Vd=(e,n)=>{cd(e)?e.dom.classList.remove(n):Sa(e,n),Ef(e)},vg=(e,n)=>{const o=cd(e)?e.dom.classList.toggle(n):Sh(e,n);return Ef(e),o},Tf=(e,n)=>cd(e)&&e.dom.classList.contains(n),Ud=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const a="HTML does not have a single root node";throw console.error(a,e),new Error(a)}return id(r.childNodes[0])},kf=(e,n)=>{const r=(n||document).createElement(e);return id(r)},yg=(e,n)=>{const r=(n||document).createTextNode(e);return id(r)},id=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},me={fromHtml:Ud,fromTag:kf,fromText:yg,fromDom:id,fromPoint:(e,n,o)=>F.from(e.dom.elementFromPoint(n,o)).map(id)},ld=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let a=n(e);do a=a.bind(r);while(a.isSome());return o},La=(e,n)=>{const o=e.dom;if(o.nodeType!==Ml)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},r1=e=>e.nodeType!==Ml&&e.nodeType!==wc&&e.nodeType!==ua||e.childElementCount===0,xh=(e,n)=>{const o=n===void 0?document:n.dom;return r1(o)?[]:et(o.querySelectorAll(e),me.fromDom)},Eu=(e,n)=>{const o=n===void 0?document:n.dom;return r1(o)?F.none():F.from(o.querySelector(e)).map(me.fromDom)},ns=(e,n)=>e.dom===n.dom,Mr=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},Yc=e=>me.fromDom(e.dom.ownerDocument),ru=e=>zr(e)?e:Yc(e),wg=e=>me.fromDom(ru(e).dom.documentElement),ud=e=>me.fromDom(ru(e).dom.defaultView),xa=e=>F.from(e.dom.parentNode).map(me.fromDom),_f=e=>F.from(e.dom.parentElement).map(me.fromDom),Af=(e,n)=>{const o=ie(n)?n:Re;let r=e.dom;const a=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=me.fromDom(u);if(a.push(f),o(f)===!0)break;r=u}return a},Tu=e=>{const n=o=>jt(o,r=>!ns(e,r));return xa(e).map(zc).map(n).getOr([])},ku=e=>F.from(e.dom.previousSibling).map(me.fromDom),Bm=e=>F.from(e.dom.nextSibling).map(me.fromDom),Ai=e=>os(ld(e,ku)),$m=e=>ld(e,Bm),zc=e=>et(e.dom.childNodes,me.fromDom),_u=(e,n)=>{const o=e.dom.childNodes;return F.from(o[n]).map(me.fromDom)},dl=e=>_u(e,0),Ea=e=>_u(e,e.dom.childNodes.length-1),dd=e=>e.dom.childNodes.length,c1=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return me.fromDom(n)},Of=e=>wa(e)&&De(e.dom.host),Pl=e=>me.fromDom(e.dom.getRootNode()),Wd=e=>Of(e)?e:c1(ru(e)),Eh=e=>Of(e)?e:me.fromDom(ru(e).dom.body),Df=e=>{const n=Pl(e);return Of(n)?F.some(n):F.none()},Th=e=>me.fromDom(e.dom.host),kh=e=>{if(De(e.target)){const n=me.fromDom(e.target);if(po(n)&&_h(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return Ht(o)}}return F.from(e.target)},_h=e=>De(e.dom.shadowRoot),Bl=e=>{const n=Is(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return Df(me.fromDom(n)).fold(()=>o.body.contains(n),To(Bl,Th))};var Sg=(e,n,o,r,a)=>e(o,r)?F.some(o):ie(a)&&a(o)?F.none():n(o,r,a);const ml=(e,n,o)=>{let r=e.dom;const a=ie(o)?o:Re;for(;r.parentNode;){r=r.parentNode;const u=me.fromDom(r);if(n(u))return F.some(u);if(a(u))break}return F.none()},kr=(e,n,o)=>Sg((a,u)=>u(a),ml,e,n,o),cc=(e,n)=>{const o=e.dom;return o.parentNode?ui(me.fromDom(o.parentNode),r=>!ns(e,r)&&n(r)):F.none()},ui=(e,n)=>{const o=a=>n(me.fromDom(a));return Ho(e.dom.childNodes,o).map(me.fromDom)},Zd=(e,n)=>{const o=r=>{for(let a=0;a<r.childNodes.length;a++){const u=me.fromDom(r.childNodes[a]);if(n(u))return F.some(u);const f=o(r.childNodes[a]);if(f.isSome())return f}return F.none()};return o(e.dom)},jd=(e,n,o)=>ml(e,r=>La(r,n),o),xc=(e,n)=>Eu(n,e),pn=(e,n,o)=>Sg((a,u)=>La(a,u),jd,e,n,o),xg=e=>pn(e,"[contenteditable]"),fl=(e,n=!1)=>Bl(e)?e.dom.isContentEditable:xg(e).fold(yt(n),o=>di(o)==="true"),di=e=>e.dom.contentEditable,ys=(e,n)=>{e.dom.contentEditable=n?"true":"false"},md=e=>e.style!==void 0&&ie(e.style.getPropertyValue),Fm=(e,n,o)=>{if(!oe(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);md(e)&&e.style.setProperty(n,o)},Im=(e,n)=>{md(e)&&e.style.removeProperty(n)},Ah=(e,n,o)=>{const r=e.dom;Fm(r,n,o)},ro=(e,n)=>{const o=e.dom;Ct(n,(r,a)=>{Fm(o,a,r)})},Vr=(e,n)=>{const o=e.dom,a=window.getComputedStyle(o).getPropertyValue(n);return a===""&&!Bl(e)?Gd(o,n):a},Gd=(e,n)=>md(e)?e.style.getPropertyValue(n):"",Xa=(e,n)=>{const o=e.dom,r=Gd(o,n);return F.from(r).filter(a=>a.length>0)},Ta=e=>{const n={},o=e.dom;if(md(o))for(let r=0;r<o.style.length;r++){const a=o.style.item(r);n[a]=o.style[a]}return n},mi=(e,n)=>{const o=e.dom;Im(o,n),Lc(Tr(e,"style").map(ss),"")&&Ts(e,"style")},Mc=e=>e.dom.offsetWidth,Ha=(e,n)=>{xa(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},Oi=(e,n)=>{Bm(e).fold(()=>{xa(e).each(a=>{Cr(a,n)})},r=>{Ha(r,n)})},qd=(e,n)=>{dl(e).fold(()=>{Cr(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},Cr=(e,n)=>{e.dom.appendChild(n.dom)},Rf=(e,n)=>{Ha(e,n),Cr(n,e)},Yr=(e,n)=>{fe(n,(o,r)=>{const a=r===0?e:n[r-1];Oi(a,o)})},$l=(e,n)=>{fe(n,o=>{Cr(e,o)})},Fl=e=>{e.dom.textContent="",fe(zc(e),n=>{zs(n)})},zs=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},Ja=e=>{const n=zc(e);n.length>0&&Yr(e,n),zs(e)},Lm=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,zc(me.fromDom(r))},fd=e=>et(e,me.fromDom),rr=e=>e.dom.innerHTML,Au=(e,n)=>{const r=Yc(e).dom,a=me.fromDom(r.createDocumentFragment()),u=Lm(n,r);$l(a,u),Fl(e),Cr(e,a)},gl=e=>{const n=me.fromTag("div"),o=me.fromDom(e.dom.cloneNode(!0));return Cr(n,o),rr(n)},Fo=(e,n,o,r,a,u,f)=>({target:e,x:n,y:o,stop:r,prevent:a,kill:u,raw:f}),Kd=e=>{const n=me.fromDom(kh(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),a=A(r,o);return Fo(n,e.clientX,e.clientY,o,r,a,e)},Mf=(e,n)=>o=>{e(o)&&n(Kd(o))},E=(e,n,o,r,a)=>{const u=Mf(o,r);return e.dom.addEventListener(n,u,a),{unbind:Qe(z,e,n,u,a)}},M=(e,n,o,r)=>E(e,n,o,r,!1),z=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},ae=(e,n)=>({left:e,top:n,translate:(r,a)=>ae(e+r,n+a)}),be=ae,gt=e=>{const n=e.getBoundingClientRect();return be(n.left,n.top)},Bn=(e,n)=>e!==void 0?e:n!==void 0?n:0,go=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,a=n.documentElement;if(o===e.dom)return be(o.offsetLeft,o.offsetTop);const u=Bn(r==null?void 0:r.pageYOffset,a.scrollTop),f=Bn(r==null?void 0:r.pageXOffset,a.scrollLeft),b=Bn(a.clientTop,o.clientTop),y=Bn(a.clientLeft,o.clientLeft);return ao(e).translate(f-y,u-b)},ao=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?be(r.offsetLeft,r.offsetTop):Bl(e)?gt(n):be(0,0)},bn=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return be(o,r)},cr=(e,n,o)=>{const a=(o!==void 0?o.dom:document).defaultView;a&&a.scrollTo(e,n)},Br=(e,n)=>{Cc().browser.isSafari()&&ie(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},Di=e=>{const n=e===void 0?window:e;return Cc().browser.isFirefox()?F.none():F.from(n.visualViewport)},fi=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),Oh=e=>{const n=e===void 0?window:e,o=n.document,r=bn(me.fromDom(o));return Di(n).fold(()=>{const a=n.document.documentElement,u=a.clientWidth,f=a.clientHeight;return fi(r.left,r.top,u,f)},a=>fi(Math.max(a.pageLeft,r.left),Math.max(a.pageTop,r.top),a.width,a.height))},Hm=(e,n)=>jt(zc(e),n),Eg=(e,n)=>{let o=[];return fe(zc(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(Eg(r,n))}),o},ka=(e,n)=>xh(n,e),Dh=(e,n,o)=>ml(e,n,o).isSome(),cy=(e,n)=>cc(e,n).isSome(),Rh=(e,n)=>Zd(e,n).isSome();class da{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,a){if(n){if(!a&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const a=n.parentNode;if(a&&a!==this.rootNode)return a}}}const Mh="\uFEFF",fc=" ",Nf=e=>e===Mh,_a=e=>e.replace(/\uFEFF/g,""),Vn=/^[ \t\r\n]*$/,hl=e=>Vn.test(e),Yd=e=>{for(const n of e)if(!Nf(n))return!1;return!0},Nh=e=>" \f	\v".indexOf(e)!==-1,Y0=e=>e===`
`||e==="\r",Ph=(e,n)=>n<e.length&&n>=0?Y0(e[n]):!1,Il=(e,n=4,o=!0,r=!0)=>{const a=So(" ",n),u=e.replace(/\t/g,a);return Wn(u,(b,y)=>Nh(y)||y===fc?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||Ph(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+fc}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:Y0(y),str:b.str+y},{pcIsSpace:!1,str:""}).str},Ou=e=>n=>!!n&&n.nodeType===e,Xd=e=>!!e&&!Object.getPrototypeOf(e),Vt=Ou(1),pl=e=>Vt(e)&&$o(me.fromDom(e)),a1=e=>Vt(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",zm=e=>{const n=e.toLowerCase();return o=>De(o)&&o.nodeName.toLowerCase()===n},Ll=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return We(n,r)}return!1}},Tg=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(Vt(r)){const a=r.ownerDocument.defaultView;if(a)for(let u=0;u<o.length;u++){const f=a.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},Jd=e=>n=>Vt(n)&&n.hasAttribute(e),Vm=e=>Vt(e)&&e.hasAttribute("data-mce-bogus"),kg=e=>Vt(e)&&e.getAttribute("data-mce-bogus")==="all",cu=e=>Vt(e)&&e.tagName==="TABLE",X0=e=>n=>!!(pl(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),_r=Ll(["textarea","input"]),wt=Ou(3),Qa=Ou(4),au=Ou(7),Nc=Ou(8),Pf=Ou(9),Pc=Ou(11),ls=zm("br"),Bh=zm("img"),nt=X0("true"),ds=X0("false"),i1=e=>pl(e)&&e.isContentEditable&&De(e.parentElement)&&!e.parentElement.isContentEditable,Xr=Ll(["td","th"]),Hl=Ll(["td","th","caption"]),Xc=Ll(["video","audio","object","embed"]),ay=zm("li"),Du=zm("details"),J0=zm("summary"),gi={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},ms=(e,n,o)=>{const r=me.fromDom(n),a=me.fromDom(e),u=o.getWhitespaceElements();return Dh(a,b=>Cn(u,ee(b)),Qe(ns,r))},Ru=e=>Vt(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),_g=(e,n)=>Vt(e)&&Cn(n.getNonEmptyElements(),e.nodeName),$r=Jd("data-mce-bookmark"),$h=e=>_f(me.fromDom(e)).exists(n=>!fl(n)),gd=(e,n,o)=>hl(e.data)&&!ms(e,n,o),l1=(e,n,o,r)=>wt(e)&&!gd(e,n,o)&&(!r.includeZwsp||!Yd(e.data)),Aa=(e,n,o,r)=>ie(r.isContent)&&r.isContent(n)||_g(n,e)||$r(n)||Ru(n)||l1(n,o,e,r)||ds(n)||nt(n)&&$h(n),Ui=(e,n,o)=>{const r={...gi,...o};if(r.checkRootAsContent&&Aa(e,n,n,r))return!1;let a=n.firstChild,u=0;if(!a)return!0;const f=new da(a,n);do{if(r.skipBogus&&Vt(a)){const b=a.getAttribute("data-mce-bogus");if(b){a=f.next(b==="all");continue}}if(Nc(a)){a=f.next(!0);continue}if(ls(a)){u++,a=f.next();continue}if(Aa(e,a,n,r))return!1;a=f.next()}while(a);return u<=1},Ee=(e,n,o)=>Ui(e,n.dom,{checkRootAsContent:!0,...o}),Wi=(e,n,o)=>Aa(e,n,n,{includeZwsp:gi.includeZwsp,...o}),Bc=e=>{let n=e;return{get:()=>n,set:a=>{n=a}}},ar=e=>{const n=Bc(F.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(F.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(F.some(b))}}},zl=e=>{const n=Bc(F.none()),o=()=>n.get().each(b=>clearInterval(b));return{clear:()=>{o(),n.set(F.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(F.some(setInterval(b,e)))}}},Ur=()=>{const e=ar(Bt);return{...e,on:o=>e.get().each(o)}},js=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},S=e=>js(e)!=="html",_=e=>S(e.nodeName),L=e=>js(e.nodeName),J=["svg","math"],ve=()=>{const e=Ur(),n=()=>e.get().map(L).getOr("html");return{track:a=>(_(a)?e.set(a):e.get().exists(u=>!u.contains(a))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},Je="data-mce-block",Ot=e=>jt(Yn(e),n=>!/[A-Z]/.test(n)),un=e=>et(Ot(e),n=>{const o=CSS.escape(n);return`${o}:`+et(J,r=>`not(${r} ${o})`).join(":")}).join(","),Jn=(e,n)=>De(n.querySelector(e))?(n.setAttribute(Je,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(Je),!1),Eo=(e,n)=>{const o=un(e.getTransparentElements()),r=un(e.getBlockElements());return jt(n.querySelectorAll(o),a=>Jn(r,a))},Ds=(e,n,o)=>{var r;const a=o?"lastChild":"firstChild";for(let u=n[a];u;u=u[a])if(Ui(e,u,{checkRootAsContent:!0})){(r=u.parentNode)===null||r===void 0||r.removeChild(u);return}},Rs=(e,n,o)=>{const r=document.createRange(),a=n.parentNode;if(a){r.setStartBefore(n),r.setEndBefore(o);const u=r.extractContents();Ds(e,u,!0),r.setStartAfter(o),r.setEndAfter(n);const f=r.extractContents();Ds(e,f,!1),Ui(e,u,{checkRootAsContent:!0})||a.insertBefore(u,n),Ui(e,o,{checkRootAsContent:!0})||a.insertBefore(o,n),Ui(e,f,{checkRootAsContent:!0})||a.insertBefore(f,n),a.removeChild(n)}},wr=(e,n,o)=>{const r=e.getBlockElements(),a=me.fromDom(n),u=b=>ee(b)in r,f=b=>ns(b,a);fe(fd(o),b=>{ml(b,u,f).each(y=>{const x=Hm(b,R=>u(R)&&!e.isValidChild(ee(y),ee(R)));if(x.length>0){const R=_f(y);fe(x,N=>{ml(N,u,f).each(B=>{Rs(e,B.dom,N.dom)})}),R.each(N=>Eo(e,N.dom))}})})},hi=(e,n,o)=>{fe([...o,...ei(e,n)?[n]:[]],r=>fe(ka(me.fromDom(r),r.nodeName.toLowerCase()),a=>{Fh(e,a.dom)&&Ja(a)}))},bl=(e,n)=>{const o=Eo(e,n);wr(e,n,o),hi(e,n,o)},hd=(e,n)=>{if(Wm(e,n)){const o=un(e.getBlockElements());Jn(o,n)}},Ri=(e,n,o)=>{const r=u=>ns(u,me.fromDom(n)),a=Af(me.fromDom(o),r);Gt(a,a.length-2).filter(po).fold(()=>bl(e,n),u=>bl(e,u.dom))},Qd=e=>e.hasAttribute(Je),Um=(e,n)=>Cn(e.getTransparentElements(),n),Wm=(e,n)=>Vt(n)&&Um(e,n.nodeName),ei=(e,n)=>Wm(e,n)&&Qd(n),Fh=(e,n)=>Wm(e,n)&&!Qd(n),Zm=(e,n)=>n.type===1&&Um(e,n.name)&&oe(n.attr(Je)),Ih=Cc().browser,Q0=e=>Ho(e,po),Vc=e=>Ih.isFirefox()&&ee(e)==="table"?Q0(zc(e)).filter(n=>ee(n)==="caption").bind(n=>Q0($m(n)).map(o=>{const r=o.dom.offsetTop,a=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=a?-u:0})).getOr(0):0,zo=(e,n)=>e.children&&We(e.children,n),fr=(e,n,o)=>{let r=0,a=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&Vr(me.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,a=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:a}}let f=n;for(;f&&f!==o&&f.nodeType&&!zo(f,o);){const b=f;r+=b.offsetLeft||0,a+=b.offsetTop||0,f=b.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!zo(f,o);)r-=f.scrollLeft||0,a-=f.scrollTop||0,f=f.parentNode;a+=Vc(me.fromDom(n))}return{x:r,y:a}},Ec=(e,n={})=>{let o=0;const r={},a=me.fromDom(e),u=ru(a),f=ge=>{n.referrerPolicy=ge},b=ge=>{n.contentCssCors=ge},y=ge=>{Cr(Wd(a),ge)},x=ge=>{const Se=Wd(a);xc(Se,"#"+ge).each(zs)},R=ge=>is(r,ge).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),N=ge=>new Promise((Se,Te)=>{let Me;const lt=at._addCacheSuffix(ge),At=R(lt);r[lt]=At,At.count++;const $t=(Qt,_n)=>{fe(Qt,Tn),At.status=_n,At.passed=[],At.failed=[],Me&&(Me.onload=null,Me.onerror=null,Me=null)},qe=()=>$t(At.passed,2),Le=()=>$t(At.failed,3);if(Se&&At.passed.push(Se),Te&&At.failed.push(Te),At.status===1)return;if(At.status===2){qe();return}if(At.status===3){Le();return}At.status=1;const dt=me.fromTag("link",u.dom);Kr(dt,{rel:"stylesheet",type:"text/css",id:At.id}),n.contentCssCors&&Rr(dt,"crossOrigin","anonymous"),n.referrerPolicy&&Rr(dt,"referrerpolicy",n.referrerPolicy),Me=dt.dom,Me.onload=qe,Me.onerror=Le,y(dt),Rr(dt,"href",lt)}),B=(ge,Se)=>{const Te=R(ge);r[ge]=Te,Te.count++;const Me=me.fromTag("style",u.dom);Kr(Me,{rel:"stylesheet",type:"text/css",id:Te.id,"data-mce-key":ge}),Me.dom.innerHTML=Se,y(Me)},W=ge=>Promise.allSettled(et(ge,Te=>N(Te).then(yt(Te)))).then(Te=>{const Me=ko(Te,lt=>lt.status==="fulfilled");return Me.fail.length>0?Promise.reject(et(Me.fail,lt=>lt.reason)):et(Me.pass,lt=>lt.value)}),X=ge=>{const Se=at._addCacheSuffix(ge);is(r,Se).each(Te=>{--Te.count===0&&(delete r[Se],x(Te.id))})};return{load:N,loadRawCss:B,loadAll:W,unload:X,unloadRawCss:ge=>{is(r,ge).each(Se=>{--Se.count===0&&(delete r[ge],x(Se.id))})},unloadAll:ge=>{fe(ge,Se=>{X(Se)})},_setReferrerPolicy:f,_setContentCssCors:b}},Mi=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=Pl(o).dom;return F.from(e.get(u)).getOrThunk(()=>{const f=Ec(u,r);return e.set(u,f),f})}}})(),Lh=e=>e.nodeName.toLowerCase()==="span",em=(e,n)=>De(e)&&(Wi(n,e)||n.isInline(e.nodeName.toLowerCase())),tm=(e,n,o)=>{const r=new da(e,n).prev(!1),a=new da(e,n).next(!1),u=ln(r)||em(r,o),f=ln(a)||em(a,o);return u&&f},Mu=e=>Lh(e)&&e.getAttribute("data-mce-type")==="bookmark",Nu=(e,n,o)=>wt(e)&&e.data.length>0&&tm(e,n,o),Iw=e=>Vt(e)?e.childNodes.length>0:!1,za=e=>Pc(e)||Pf(e),eb=(e,n,o,r)=>{var a;const u=r||n;if(Vt(n)&&Mu(n))return n;const f=n.childNodes;for(let b=f.length-1;b>=0;b--)eb(e,f[b],o,u);if(Vt(n)){const b=n.childNodes;b.length===1&&Mu(b[0])&&((a=n.parentNode)===null||a===void 0||a.insertBefore(b[0],n))}return!za(n)&&!Wi(o,n)&&!Iw(n)&&!Nu(n,u,o)&&e.remove(n),n},nm=at.makeMap,jm=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,om=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,V4=/[<>&\"\']/g,Hh=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,U4={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Bf={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},ac={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Lw=e=>{const n=me.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},sm=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let a=0;a<r.length;a+=2){const u=String.fromCharCode(parseInt(r[a],n));if(!Bf[u]){const f="&"+r[a+1]+";";o[u]=f,o[f]=u}}return o}else return},Gm=sm("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Ag=(e,n)=>e.replace(n?jm:om,o=>Bf[o]||o),Pu=e=>(""+e).replace(V4,n=>Bf[n]||n),ti=(e,n)=>e.replace(n?jm:om,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":Bf[o]||"&#"+o.charCodeAt(0)+";"),Og=(e,n,o)=>{const r=o||Gm;return e.replace(n?jm:om,a=>Bf[a]||r[a]||a)},rm={encodeRaw:Ag,encodeAllRaw:Pu,encodeNumeric:ti,encodeNamed:Og,getEncodeFunc:(e,n)=>{const o=sm(n)||Gm,r=(f,b)=>f.replace(b?jm:om,y=>Bf[y]!==void 0?Bf[y]:o[y]!==void 0?o[y]:y.length>1?"&#"+((y.charCodeAt(0)-55296)*1024+(y.charCodeAt(1)-56320)+65536)+";":"&#"+y.charCodeAt(0)+";"),a=(f,b)=>Og(f,b,o),u=nm(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?a:Og:u.numeric?ti:Ag},decode:e=>e.replace(Hh,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):U4[o]||String.fromCharCode(o)):ac[n]||Gm[n]||Lw(n))},Oa=(e,n)=>(e=at.trim(e),e?e.split(n||" "):[]),d1=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),W4=e=>it(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",Z4=e=>{const n=o=>mt(o)?et(o,n):W4(o)?new RegExp(o.source,o.flags):it(o)?uo(o,n):o;return n(e)},iy=e=>{const n=/^(~)?(.+)$/;return Js(Oa(e,","),o=>{const r=n.exec(o);if(r){const u=r[1]==="~"?"span":"div",f=r[2];return[{cloneName:u,name:f}]}else return[]})},zh=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),Bu=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},$u=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=Bu(e),a=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:a(n),phrasingContent:a(o),flowContent:a(r)})},$f={html4:Ve(()=>$u("html4")),html5:Ve(()=>$u("html5")),"html5-strict":Ve(()=>$u("html5-strict"))},Dg=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:a}=$f[e]();return n==="blocks"?F.some(o):n==="phrasing"?F.some(r):n==="flow"?F.some(a):F.none()},m1=e=>{const n=zh(e),{phrasingContent:o,flowContent:r}=Bu(e),a={},u=(y,x,R)=>{a[y]={attributes:xs(x,yt({})),attributesOrder:x,children:xs(R,yt({}))}},f=(y,x="",R="")=>{const N=Oa(R),B=Oa(y);let W=B.length;const X=[...n,...Oa(x)];for(;W--;)u(B[W],X.slice(),N)},b=(y,x)=>{const R=Oa(y),N=Oa(x);let B=R.length;for(;B--;){const W=a[R[B]];for(let X=0,q=N.length;X<q;X++)W.attributes[N[X]]={},W.attributesOrder.push(N[X])}};return e!=="html5-strict"&&(fe(Oa("acronym applet basefont big font strike tt"),R=>{f(R,"",o)}),fe(Oa("center dir isindex noframes"),R=>{f(R,"",r)})),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),f("dd div","",r),f("address dt caption","",e==="html4"?o:r),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),f("blockquote","cite",r),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",r),f("dl","","dt dd"),f("a","href target rel media hreflang type",e==="html4"?o:r),f("q","cite",o),f("ins del","cite datetime",r),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",r),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),f("param","name value"),f("map","name",[r,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",r),f("th","colspan rowspan headers scope abbr",r),f("form","accept-charset action autocomplete enctype method name novalidate target",r),f("fieldset","disabled form name",[r,"legend"].join(" ")),f("label","form for",o),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[r,"li"].join(" ")),f("noscript","",r),e!=="html4"&&(f("wbr"),f("ruby","",[o,"rt rp"].join(" ")),f("figcaption","",r),f("mark rt rp bdi","",o),f("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),f("canvas","width height",r),f("data","value",o),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[o,"option"].join(" ")),f("article section nav aside main header footer","",r),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[r,"figcaption"].join(" ")),f("time","datetime",o),f("dialog","open",r),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",o),f("progress","value max",o),f("meter","value min max low high optimum",o),f("details","open",[r,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&fe([a.video,a.audio],y=>{delete y.children.audio,delete y.children.video}),fe(Oa("a form meter progress dfn"),y=>{a[y]&&delete a[y].children[y]}),delete a.caption.children.table,delete a.script,a},Vh=e=>e==="-"?"remove":"add",qm=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return F.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},Ff=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Js(Oa(e,","),o=>{const r=n.exec(o);if(r){const a=r[1],u=a?Vh(a):"replace",f=r[2],b=Js(Oa(r[3],"|"),y=>qm(y).toArray());return[{operation:u,name:f,validChildren:b}]}else return[]})},f1=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:a,attributesOrder:u}=n;return fe(Oa(e,"|"),f=>{const b=o.exec(f);if(b){const y={},x=b[1],R=b[2].replace(/[\\:]:/g,":"),N=b[3],B=b[4];if(x==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(R),y.required=!0),x==="-"){delete a[R],u.splice(at.inArray(u,R),1);return}if(N&&(N==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:R,value:B}),y.defaultValue=B):N==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:R,value:B}),y.forcedValue=B):N==="<"&&(y.validValues=at.makeMap(B,"?"))),r.test(R)){const W=y;n.attributePatterns=n.attributePatterns||[],W.pattern=d1(R),n.attributePatterns.push(W)}else a[R]||u.push(R),a[R]=y}})},tb=(e,n)=>{Ct(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},nb=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Js(Oa(n,","),r=>{const a=o.exec(r);if(a){const u=a[1],f=a[2],b=a[3],y=a[4],x=a[5],R={attributes:{},attributesOrder:[]};if(e.each(N=>tb(N,R)),u==="#"?R.paddEmpty=!0:u==="-"&&(R.removeEmpty=!0),y==="!"&&(R.removeEmptyAttrs=!0),x&&f1(x,R),b&&(R.outputName=f),f==="@")if(e.isNone())e=F.some(R);else return[];return[b?{name:f,element:R,aliasName:b}:{name:f,element:R}]}else return[]})},Io={},kn=at.makeMap,Ni=at.each,ob=at.extend,sb=at.explode,rb=(e,n={})=>{const o=kn(e," ",kn(e.toUpperCase()," "));return ob(o,n)},ly=e=>rb("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),ir=(e,n)=>{if(e){const o={};return oe(e)&&(e={"*":e}),Ni(e,(r,a)=>{o[a]=o[a.toUpperCase()]=n==="map"?kn(r,/[, ]/):sb(r,/[, ]/)}),o}else return},Km=(e={})=>{var n;const o={},r={};let a=[];const u={},f={},b=(Mn,as,lc)=>{const aa=e[Mn];if(aa)return kn(aa,/[, ]/,kn(aa.toUpperCase(),/[, ]/));{let ya=Io[Mn];return ya||(ya=rb(as,lc),Io[Mn]=ya),ya}},y=(n=e.schema)!==null&&n!==void 0?n:"html5",x=m1(y);e.verify_html===!1&&(e.valid_elements="*[*]");const R=ir(e.valid_styles),N=ir(e.invalid_styles,"map"),B=ir(e.valid_classes,"map"),W=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),X=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),q=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),ne=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),ge="td th iframe video audio object script code",Se=b("non_empty_elements",ge+" pre svg textarea summary",q),Te=b("move_caret_before_on_enter_elements",ge+" table",q),Me="h1 h2 h3 h4 h5 h6",lt=b("text_block_elements",Me+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),At=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",lt),$t=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),qe=b("transparent_elements","a ins del canvas map"),Le=b("wrap_block_elements","pre "+Me);Ni("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Mn=>{f[Mn]=new RegExp("</"+Mn+"[^>]*>","gi")});const dt=Mn=>{const as=F.from(o["@"]),lc=/[*?+]/;fe(nb(as,Mn??""),({name:aa,element:ya,aliasName:Zc})=>{if(Zc&&(o[Zc]=ya),lc.test(aa)){const Zr=ya;Zr.pattern=d1(aa),a.push(Zr)}else o[aa]=ya})},Qt=Mn=>{a=[],fe(Yn(o),as=>{delete o[as]}),dt(Mn)},_n=(Mn,as)=>{var lc,aa;delete Io.text_block_elements,delete Io.block_elements;const ya=as.extends?!el(as.extends):!1,Zc=as.extends;if(r[Mn]=Zc?r[Zc]:{},u[Mn]=Zc??Mn,Se[Mn.toUpperCase()]={},Se[Mn]={},ya||(At[Mn.toUpperCase()]={},At[Mn]={}),Zc&&!o[Mn]&&o[Zc]){const Zr=Z4(o[Zc]);delete Zr.removeEmptyAttrs,delete Zr.removeEmpty,o[Mn]=Zr}else o[Mn]={attributesOrder:[],attributes:{}};if(mt(as.attributes)){const Zr=Hi=>{jr.attributesOrder.push(Hi),jr.attributes[Hi]={}},jr=(lc=o[Mn])!==null&&lc!==void 0?lc:{};delete jr.attributesDefault,delete jr.attributesForced,delete jr.attributePatterns,delete jr.attributesRequired,jr.attributesOrder=[],jr.attributes={},fe(as.attributes,Hi=>{const Fd=zh(y);qm(Hi).each(({preset:Cf,name:Dm})=>{Cf?Dm==="global"&&fe(Fd,Zr):Zr(Dm)})}),o[Mn]=jr}if(Mt(as.padEmpty)){const Zr=(aa=o[Mn])!==null&&aa!==void 0?aa:{};Zr.paddEmpty=as.padEmpty,o[Mn]=Zr}if(mt(as.children)){const Zr={},jr=Fd=>{Zr[Fd]={}},Hi=Fd=>{Dg(y,Fd).each(Cf=>{fe(Cf,jr)})};fe(as.children,Fd=>{qm(Fd).each(({preset:Cf,name:Dm})=>{Cf?Hi(Dm):jr(Dm)})}),r[Mn]=Zr}Zc&&Ct(r,(Zr,jr)=>{Zr[Zc]&&(r[jr]=Zr=ob({},r[jr]),Zr[Mn]=Zr[Zc])})},Oo=Mn=>{fe(iy(Mn??""),({name:as,cloneName:lc})=>{_n(as,{extends:lc})})},Lo=Mn=>{it(Mn)?Ct(Mn,(as,lc)=>_n(lc,as)):oe(Mn)&&Oo(Mn)},ks=Mn=>{fe(Ff(Mn??""),({operation:as,name:lc,validChildren:aa})=>{const ya=as==="replace"?{"#comment":{}}:r[lc],Zc=jr=>{as==="remove"?delete ya[jr]:ya[jr]={}},Zr=jr=>{Dg(y,jr).each(Hi=>{fe(Hi,Zc)})};fe(aa,({preset:jr,name:Hi})=>{jr?Zr(Hi):Zc(Hi)}),r[lc]=ya})},Us=Mn=>{const as=o[Mn];if(as)return as;let lc=a.length;for(;lc--;){const aa=a[lc];if(aa.pattern.test(Mn))return aa}},Ac=()=>{e.valid_elements?(Qt(e.valid_elements),Ni(x,(Mn,as)=>{r[as]=Mn.children})):(Ni(x,(Mn,as)=>{o[as]={attributes:Mn.attributes,attributesOrder:Mn.attributesOrder},r[as]=Mn.children}),Ni(Oa("strong/b em/i"),Mn=>{const as=Oa(Mn,"/");o[as[1]].outputName=as[0]}),Ni($t,(Mn,as)=>{o[as]&&(e.padd_empty_block_inline_children&&(o[as].paddInEmptyBlock=!0),o[as].removeEmpty=!0)}),Ni(Oa("ol ul blockquote a table tbody"),Mn=>{o[Mn]&&(o[Mn].removeEmpty=!0)}),Ni(Oa("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Mn=>{o[Mn]&&(o[Mn].paddEmpty=!0)}),Ni(Oa("span"),Mn=>{o[Mn].removeEmptyAttrs=!0})),delete o.svg,Lo(e.custom_elements),ks(e.valid_children),dt(e.extended_valid_elements),ks("+ol[ul|ol],+ul[ul|ol]"),Ni({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Mn,as)=>{o[as]&&(o[as].parentsRequired=Oa(Mn))}),e.invalid_elements&&Ni(sb(e.invalid_elements),Mn=>{o[Mn]&&delete o[Mn]}),Us("span")||dt("span[!data-mce-type|*]")},Na=yt(R),Pa=yt(N),It=yt(B),An=yt(ne),Ss=yt(At),tn=yt(lt),ut=yt($t),Yt=yt(Object.seal(q)),qn=yt(X),Ks=yt(Se),Xo=yt(Te),Ka=yt(W),Ql=yt(qe),Om=yt(Le),Al=yt(Object.seal(f)),Bd=(Mn,as)=>{const lc=r[Mn.toLowerCase()];return!!(lc&&lc[as.toLowerCase()])},Cu=(Mn,as)=>{const lc=Us(Mn);if(lc)if(as){if(lc.attributes[as])return!0;const aa=lc.attributePatterns;if(aa){let ya=aa.length;for(;ya--;)if(aa[ya].pattern.test(as))return!0}}else return!0;return!1},el=Mn=>Cn(Ss(),Mn),tl=Mn=>!Ln(Mn,"#")&&Cu(Mn)&&!el(Mn),$d=Mn=>Cn(Om(),Mn)||tl(Mn),Xp=yt(u);return Ac(),{type:y,children:r,elements:o,getValidStyles:Na,getValidClasses:It,getBlockElements:Ss,getInvalidStyles:Pa,getVoidElements:Yt,getTextBlockElements:tn,getTextInlineElements:ut,getBoolAttrs:An,getElementRule:Us,getSelfClosingElements:qn,getNonEmptyElements:Ks,getMoveCaretBeforeOnEnterElements:Xo,getWhitespaceElements:Ka,getTransparentElements:Ql,getSpecialElements:Al,isValidChild:Bd,isValid:Cu,isBlock:el,isInline:tl,isWrapper:$d,getCustomElements:Xp,addValidElements:dt,setValidElements:Qt,addCustomElements:Lo,addValidChildren:ks}},j4=e=>({value:Hw(e)}),Hw=e=>on(e,"#").toUpperCase(),Ye=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},uy=e=>{const n=Ye(e.red)+Ye(e.green)+Ye(e.blue);return j4(n)},dy=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Uh=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,G4=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),Rg=(e,n,o,r)=>{const a=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),b=parseFloat(r);return G4(a,u,f,b)},g1=e=>dy.test(e)?"rgb":Uh.test(e)?"rgba":"other",If=e=>{const n=dy.exec(e);if(n!==null)return F.some(Rg(n[1],n[2],n[3],"1"));const o=Uh.exec(e);return o!==null?F.some(Rg(o[1],o[2],o[3],o[4])):F.none()},cb=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,cm=e=>If(e).map(uy).map(n=>"#"+n.value).getOr(e),Gs=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,a=/\s+$/,u={};let f,b;const y=Mh;n&&(f=n.getValidStyles(),b=n.getInvalidStyles());const x=(`\\" \\' \\; \\: ; : `+y).split(" ");for(let N=0;N<x.length;N++)u[x[N]]=y+N,u[y+N]=x[N];const R={parse:N=>{const B={};let W=!1;const X=e.url_converter,q=e.url_converter_scope||R,ne=(qe,Le,dt)=>{const Qt=B[qe+"-top"+Le];if(!Qt)return;const _n=B[qe+"-right"+Le];if(!_n)return;const Oo=B[qe+"-bottom"+Le];if(!Oo)return;const Lo=B[qe+"-left"+Le];if(!Lo)return;const ks=[Qt,_n,Oo,Lo];let Us=ks.length-1;for(;Us--&&ks[Us]===ks[Us+1];);Us>-1&&dt||(B[qe+Le]=Us===-1?ks[0]:ks.join(" "),delete B[qe+"-top"+Le],delete B[qe+"-right"+Le],delete B[qe+"-bottom"+Le],delete B[qe+"-left"+Le])},ge=qe=>{const Le=B[qe];if(!Le)return;const dt=Le.indexOf(",")>-1?[Le]:Le.split(" ");let Qt=dt.length;for(;Qt--;)if(dt[Qt]!==dt[0])return!1;return B[qe]=dt[0],!0},Se=(qe,Le,dt,Qt)=>{ge(Le)&&ge(dt)&&ge(Qt)&&(B[qe]=B[Le]+" "+B[dt]+" "+B[Qt],delete B[Le],delete B[dt],delete B[Qt])},Te=qe=>(W=!0,u[qe]),Me=(qe,Le)=>(W&&(qe=qe.replace(/\uFEFF[0-9]/g,dt=>u[dt])),Le||(qe=qe.replace(/\\([\'\";:])/g,"$1")),qe),lt=qe=>String.fromCharCode(parseInt(qe.slice(1),16)),At=qe=>qe.replace(/\\[0-9a-f]+/gi,lt),$t=(qe,Le,dt,Qt,_n,Oo)=>{if(_n=_n||Oo,_n)return _n=Me(_n),"'"+_n.replace(/\'/g,"\\'")+"'";if(Le=Me(Le||dt||Qt||""),!e.allow_script_urls){const Lo=Le.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Lo)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Lo))return""}return X&&(Le=X.call(q,Le,"style")),"url('"+Le.replace(/\'/g,"\\'")+"')"};if(N){N=N.replace(/[\u0000-\u001F]/g,""),N=N.replace(/\\[\"\';:\uFEFF]/g,Te).replace(/\"[^\"]+\"|\'[^\']+\'/g,Le=>Le.replace(/[;:]/g,Te));let qe;for(;qe=r.exec(N);){r.lastIndex=qe.index+qe[0].length;let Le=qe[1].replace(a,"").toLowerCase(),dt=qe[2].replace(a,"");if(Le&&dt){if(Le=At(Le),dt=At(dt),Le.indexOf(y)!==-1||Le.indexOf('"')!==-1||!e.allow_script_urls&&(Le==="behavior"||/expression\s*\(|\/\*|\*\//.test(dt)))continue;Le==="font-weight"&&dt==="700"?dt="bold":(Le==="color"||Le==="background-color")&&(dt=dt.toLowerCase()),g1(dt)==="rgb"&&If(dt).each(Qt=>{dt=cm(cb(Qt)).toLowerCase()}),dt=dt.replace(o,$t),B[Le]=W?Me(dt,!0):dt}}ne("border","",!0),ne("border","-width"),ne("border","-color"),ne("border","-style"),ne("padding",""),ne("margin",""),Se("border","border-width","border-style","border-color"),B.border==="medium none"&&delete B.border,B["border-image"]==="none"&&delete B["border-image"]}return B},serialize:(N,B)=>{let W="";const X=(ne,ge)=>{const Se=ge[ne];if(Se)for(let Te=0,Me=Se.length;Te<Me;Te++){const lt=Se[Te],At=N[lt];At&&(W+=(W.length>0?" ":"")+lt+": "+At+";")}},q=(ne,ge)=>{if(!b||!ge)return!0;let Se=b["*"];return Se&&Se[ne]?!1:(Se=b[ge],!(Se&&Se[ne]))};return B&&f?(X("*",f),X(B,f)):Ct(N,(ne,ge)=>{ne&&q(ge,B)&&(W+=(W.length>0?" ":"")+ge+": "+ne+";")}),W}};return R},pd={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},zw=e=>e instanceof Event||ie(e.initEvent),Ym=e=>e.isDefaultPrevented===ot||e.isDefaultPrevented===Re,q4=e=>On(e.preventDefault)||zw(e),ab=(e,n)=>{const o=n??{};for(const r in e)Cn(pd,r)||(o[r]=e[r]);return De(e.composedPath)&&(o.composedPath=()=>e.composedPath()),De(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),De(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},h1=(e,n,o,r)=>{var a;const u=ab(n,r);return u.type=e,On(u.target)&&(u.target=(a=u.srcElement)!==null&&a!==void 0?a:o),q4(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=ot,ie(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=ot,ie(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=ot,u.stopPropagation()},Ym(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?ot:Re,u.isPropagationStopped=u.cancelBubble===!0?ot:Re,u.isImmediatePropagationStopped=Re)),u},K4="mce-data-",Fu=/^(?:mouse|contextmenu)|click/,ib=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},Wh=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},my=e=>De(e)&&Fu.test(e.type),Mg=(e,n)=>{const o=h1(e.type,e,document,n);if(my(e)&&ln(e.pageX)&&!ln(e.clientX)){const r=o.target.ownerDocument||document,a=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(a&&a.scrollLeft||u&&u.scrollLeft||0)-(a&&a.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(a&&a.scrollTop||u&&u.scrollTop||0)-(a&&a.clientTop||u&&u.clientTop||0)}return o},lb=(e,n,o)=>{const r=e.document,a={type:"ready"};if(o.domLoaded){n(a);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{Wh(e,"DOMContentLoaded",f),Wh(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(a)),e=null};u()?f():ib(e,"DOMContentLoaded",f),o.domLoaded||ib(e,"load",f)};class Xm{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=K4+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,a){const u=this;let f;const b=window,y=B=>{u.executeHandlers(Mg(B||b.event),x)};if(!n||wt(n)||Nc(n))return r;let x;n[u.expando]?x=n[u.expando]:(x=u.count++,n[u.expando]=x,u.events[x]={}),a=a||n;const R=o.split(" ");let N=R.length;for(;N--;){let B=R[N],W=y,X=!1,q=!1;if(B==="DOMContentLoaded"&&(B="ready"),u.domLoaded&&B==="ready"&&n.readyState==="complete"){r.call(a,Mg({type:B}));continue}!u.hasFocusIn&&(B==="focusin"||B==="focusout")&&(X=!0,q=B==="focusin"?"focus":"blur",W=ne=>{const ge=Mg(ne||b.event);ge.type=ge.type==="focus"?"focusin":"focusout",u.executeHandlers(ge,x)}),f=u.events[x][B],f?B==="ready"&&u.domLoaded?r(Mg({type:B})):f.push({func:r,scope:a}):(u.events[x][B]=f=[{func:r,scope:a}],f.fakeName=q,f.capture=X,f.nativeHandler=W,B==="ready"?lb(n,W,u):ib(n,q||B,W,X))}return n=f=null,r}unbind(n,o,r){if(!n||wt(n)||Nc(n))return this;const a=n[this.expando];if(a){let u=this.events[a];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const y=f[b],x=u[y];if(x){if(r){let R=x.length;for(;R--;)if(x[R].func===r){const N=x.nativeHandler,B=x.fakeName,W=x.capture,X=x.slice(0,R).concat(x.slice(R+1));X.nativeHandler=N,X.fakeName=B,X.capture=W,u[y]=X}}(!r||x.length===0)&&(delete u[y],Wh(n,x.fakeName||y,x.nativeHandler,x.capture))}}}else Ct(u,(f,b)=>{Wh(n,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(Cn(u,f))return this;delete this.events[a];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||wt(n)||Nc(n))return this;const a=Mg({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(a,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!a.isPropagationStopped());return this}clean(n){if(!n||wt(n)||Nc(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],a=r&&r[n.type];if(a)for(let u=0,f=a.length;u<f;u++){const b=a[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Xm.Event=new Xm;const fy=at.each,gy=at.grep,iu="data-mce-style",Vl=at.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),xt=(e,n,o)=>{On(o)||o===""?Ts(e,n):Rr(e,n,o)},Vw=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),gc=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,a=e.previousSibling;a;a=a.previousSibling){const u=a.nodeType;n&&wt(a)&&(u===r||!a.data.length)||(o++,r=u)}return o},Uw=(e,n)=>{const o=Hc(n,"style"),r=e.serialize(e.parse(o),ee(n));xt(n,iu,r)},Ww=(e,n)=>Go(e)?Cn(Vl,n)?e+"":e+"px":e,p1=(e,n,o)=>{const r=Vw(n);On(o)||o===""?mi(e,r):Ah(e,r,Ww(o,r))},hy=(e,n,o)=>{const r=n.keep_values,a={set:(f,b,y)=>{const x=me.fromDom(f);ie(n.url_converter)&&De(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),y,f));const R="data-mce-"+y;xt(x,R,b),xt(x,y,b)},get:(f,b)=>{const y=me.fromDom(f);return Hc(y,"data-mce-"+b)||Hc(y,b)}},u={style:{set:(f,b)=>{const y=me.fromDom(f);r&&xt(y,iu,b),Ts(y,"style"),oe(b)&&ro(y,e.parse(b))},get:f=>{const b=me.fromDom(f),y=Hc(b,iu)||Hc(b,"style");return e.serialize(e.parse(y),ee(b))}}};return r&&(u.href=u.src=a),u},Sr=(e,n={})=>{const o={},r=window,a={};let u=0;const f=!0,b=!0,y=Mi.forElement(me.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),x=[],R=n.schema?n.schema:Km({}),N=Gs({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),B=n.ownEvents?new Xm:Xm.Event,W=R.getBlockElements(),X=Oe=>oe(Oe)?Cn(W,Oe):Vt(Oe)&&(Cn(W,Oe.nodeName)||ei(R,Oe)),q=Oe=>Oe&&e&&oe(Oe)?e.getElementById(Oe):Oe,ne=Oe=>{const Be=q(Oe);return De(Be)?me.fromDom(Be):null},ge=(Oe,Be,Ft="")=>{let Dt;const Hn=ne(Oe);if(De(Hn)&&po(Hn)){const fs=Pw[Be];fs&&fs.get?Dt=fs.get(Hn.dom,Be):Dt=Hc(Hn,Be)}return De(Dt)?Dt:Ft},Se=Oe=>{const Be=q(Oe);return On(Be)?[]:Be.attributes},Te=(Oe,Be,Ft)=>{An(Oe,Dt=>{if(Vt(Dt)){const Hn=me.fromDom(Dt),fs=Ft===""?null:Ft,uc=Hc(Hn,Be),wf=Pw[Be];wf&&wf.set?wf.set(Hn.dom,fs,Be):xt(Hn,Be,fs),uc!==fs&&n.onSetAttrib&&n.onSetAttrib({attrElm:Hn.dom,attrName:Be,attrValue:fs})}})},Me=(Oe,Be)=>Oe.cloneNode(Be),lt=()=>n.root_element||e.body,At=Oe=>{const Be=Oh(Oe);return{x:Be.x,y:Be.y,w:Be.width,h:Be.height}},$t=(Oe,Be)=>fr(e.body,q(Oe),Be),qe=(Oe,Be,Ft)=>{An(Oe,Dt=>{const Hn=me.fromDom(Dt);p1(Hn,Be,Ft),n.update_styles&&Uw(N,Hn)})},Le=(Oe,Be)=>{An(Oe,Ft=>{const Dt=me.fromDom(Ft);Ct(Be,(Hn,fs)=>{p1(Dt,fs,Hn)}),n.update_styles&&Uw(N,Dt)})},dt=(Oe,Be,Ft)=>{const Dt=q(Oe);if(!(On(Dt)||!pl(Dt)&&!a1(Dt)))return Ft?Vr(me.fromDom(Dt),Vw(Be)):(Be=Be.replace(/-(\D)/g,(Hn,fs)=>fs.toUpperCase()),Be==="float"&&(Be="cssFloat"),Dt.style?Dt.style[Be]:void 0)},Qt=Oe=>{const Be=q(Oe);if(!Be)return{w:0,h:0};let Ft=dt(Be,"width"),Dt=dt(Be,"height");return(!Ft||Ft.indexOf("px")===-1)&&(Ft="0"),(!Dt||Dt.indexOf("px")===-1)&&(Dt="0"),{w:parseInt(Ft,10)||Be.offsetWidth||Be.clientWidth,h:parseInt(Dt,10)||Be.offsetHeight||Be.clientHeight}},_n=Oe=>{const Be=q(Oe),Ft=$t(Be),Dt=Qt(Be);return{x:Ft.x,y:Ft.y,w:Dt.w,h:Dt.h}},Oo=(Oe,Be)=>{if(!Oe)return!1;const Ft=mt(Oe)?Oe:[Oe];return Tt(Ft,Dt=>La(me.fromDom(Dt),Be))},Lo=(Oe,Be,Ft,Dt)=>{const Hn=[];let fs=q(Oe);Dt=Dt===void 0;const uc=Ft||(lt().nodeName!=="BODY"?lt().parentNode:null);if(oe(Be))if(Be==="*")Be=Vt;else{const wf=Be;Be=Ld=>Oo(Ld,wf)}for(;fs&&!(fs===uc||On(fs.nodeType)||Pf(fs)||Pc(fs));){if(!Be||Be(fs))if(Dt)Hn.push(fs);else return[fs];fs=fs.parentNode}return Dt?Hn:null},ks=(Oe,Be,Ft)=>{const Dt=Lo(Oe,Be,Ft,!1);return Dt&&Dt.length>0?Dt[0]:null},Us=(Oe,Be,Ft)=>{let Dt=Be;if(Oe){oe(Be)&&(Dt=Hn=>Oo(Hn,Be));for(let Hn=Oe[Ft];Hn;Hn=Hn[Ft])if(ie(Dt)&&Dt(Hn))return Hn}return null},Ac=(Oe,Be)=>Us(Oe,Be,"nextSibling"),Na=(Oe,Be)=>Us(Oe,Be,"previousSibling"),Pa=Oe=>ie(Oe.querySelectorAll),It=(Oe,Be)=>{var Ft,Dt;const Hn=(Dt=(Ft=q(Be))!==null&&Ft!==void 0?Ft:n.root_element)!==null&&Dt!==void 0?Dt:e;return Pa(Hn)?lo(Hn.querySelectorAll(Oe)):[]},An=function(Oe,Be,Ft){const Dt=Ft??this;if(mt(Oe)){const Hn=[];return fy(Oe,(fs,uc)=>{const wf=q(fs);wf&&Hn.push(Be.call(Dt,wf,uc))}),Hn}else{const Hn=q(Oe);return Hn?Be.call(Dt,Hn):!1}},Ss=(Oe,Be)=>{An(Oe,Ft=>{Ct(Be,(Dt,Hn)=>{Te(Ft,Hn,Dt)})})},tn=(Oe,Be)=>{An(Oe,Ft=>{const Dt=me.fromDom(Ft);Au(Dt,Be)})},ut=(Oe,Be,Ft,Dt,Hn)=>An(Oe,fs=>{const uc=oe(Be)?e.createElement(Be):Be;return De(Ft)&&Ss(uc,Ft),Dt&&(!oe(Dt)&&Dt.nodeType?uc.appendChild(Dt):oe(Dt)&&tn(uc,Dt)),Hn?uc:fs.appendChild(uc)}),Yt=(Oe,Be,Ft)=>ut(e.createElement(Oe),Oe,Be,Ft,!0),qn=rm.decode,Ks=rm.encodeAllRaw,Xo=(Oe,Be,Ft="")=>{let Dt="<"+Oe;for(const Hn in Be)Ls(Be,Hn)&&(Dt+=" "+Hn+'="'+Ks(Be[Hn])+'"');return vo(Ft)&&Cn(R.getVoidElements(),Oe)?Dt+" />":Dt+">"+Ft+"</"+Oe+">"},Ka=Oe=>{const Be=e.createElement("div"),Ft=e.createDocumentFragment();Ft.appendChild(Be),Oe&&(Be.innerHTML=Oe);let Dt;for(;Dt=Be.firstChild;)Ft.appendChild(Dt);return Ft.removeChild(Be),Ft},Ql=(Oe,Be)=>An(Oe,Ft=>{const Dt=me.fromDom(Ft);return Be&&fe(zc(Dt),Hn=>{Is(Hn)&&Hn.dom.length===0?zs(Hn):Ha(Dt,Hn)}),zs(Dt),Dt.dom}),Om=Oe=>An(Oe,Be=>{const Ft=Be.attributes;for(let Dt=Ft.length-1;Dt>=0;Dt--)Be.removeAttributeNode(Ft.item(Dt))}),Al=Oe=>N.parse(Oe),Bd=(Oe,Be)=>N.serialize(Oe,Be),Cu=Oe=>{if(hg!==Sr.DOM&&e===document){if(o[Oe])return;o[Oe]=!0}let Be=e.getElementById("mceDefaultStyles");if(!Be){Be=e.createElement("style"),Be.id="mceDefaultStyles",Be.type="text/css";const Ft=e.head;Ft.firstChild?Ft.insertBefore(Be,Ft.firstChild):Ft.appendChild(Be)}Be.styleSheet?Be.styleSheet.cssText+=Oe:Be.appendChild(e.createTextNode(Oe))},el=Oe=>{Oe||(Oe=""),fe(Oe.split(","),Be=>{a[Be]=!0,y.load(Be).catch(Bt)})},tl=(Oe,Be,Ft)=>{An(Oe,Dt=>{if(Vt(Dt)){const Hn=me.fromDom(Dt),fs=Be.split(" ");fe(fs,uc=>{De(Ft)?(Ft?Nl:Vd)(Hn,uc):vg(Hn,uc)})}})},$d=(Oe,Be)=>{tl(Oe,Be,!0)},Xp=(Oe,Be)=>{tl(Oe,Be,!1)},Mn=(Oe,Be)=>{const Ft=ne(Oe),Dt=Be.split(" ");return De(Ft)&&ps(Dt,Hn=>Tf(Ft,Hn))},as=Oe=>{An(Oe,Be=>mi(me.fromDom(Be),"display"))},lc=Oe=>{An(Oe,Be=>Ah(me.fromDom(Be),"display","none"))},aa=Oe=>{const Be=ne(Oe);return De(Be)&&Lc(Xa(Be,"display"),"none")},ya=Oe=>(Oe||"mce_")+u++,Zc=Oe=>{const Be=ne(Oe);return De(Be)?Vt(Be.dom)?Be.dom.outerHTML:gl(Be):""},Zr=(Oe,Be)=>{An(Oe,Ft=>{Vt(Ft)&&(Ft.outerHTML=Be)})},jr=(Oe,Be)=>{const Ft=q(Be);return An(Oe,Dt=>{const Hn=Ft==null?void 0:Ft.parentNode,fs=Ft==null?void 0:Ft.nextSibling;return Hn&&(fs?Hn.insertBefore(Dt,fs):Hn.appendChild(Dt)),Dt})},Hi=(Oe,Be,Ft)=>An(Be,Dt=>{var Hn;const fs=mt(Be)?Oe.cloneNode(!0):Oe;return Ft&&fy(gy(Dt.childNodes),uc=>{fs.appendChild(uc)}),(Hn=Dt.parentNode)===null||Hn===void 0||Hn.replaceChild(fs,Dt),Dt}),Fd=(Oe,Be)=>{if(Oe.nodeName!==Be.toUpperCase()){const Ft=Yt(Be);return fy(Se(Oe),Dt=>{Te(Ft,Dt.nodeName,ge(Oe,Dt.nodeName))}),Hi(Ft,Oe,!0),Ft}else return Oe},Cf=(Oe,Be)=>{let Ft=Oe;for(;Ft;){let Dt=Be;for(;Dt&&Ft!==Dt;)Dt=Dt.parentNode;if(Ft===Dt)break;Ft=Ft.parentNode}return!Ft&&Oe.ownerDocument?Oe.ownerDocument.documentElement:Ft},Dm=(Oe,Be,Ft)=>Zo(Be)?Ui(R,Oe,{...Ft,isContent:Hn=>{const fs=Hn.nodeName.toLowerCase();return!!Be[fs]}}):Ui(R,Oe,Ft),ty=()=>e.createRange(),ny=(Oe,Be,Ft)=>{let Dt=ty(),Hn,fs;if(Oe&&Be&&Oe.parentNode&&Be.parentNode){const uc=Oe.parentNode;return Dt.setStart(uc,gc(Oe)),Dt.setEnd(Be.parentNode,gc(Be)),Hn=Dt.extractContents(),Dt=ty(),Dt.setStart(Be.parentNode,gc(Be)+1),Dt.setEnd(uc,gc(Oe)+1),fs=Dt.extractContents(),uc.insertBefore(eb(hg,Hn,R),Oe),Ft?uc.insertBefore(Ft,Oe):uc.insertBefore(Be,Oe),uc.insertBefore(eb(hg,fs,R),Oe),Ql(Oe),Ft||Be}else return},Jp=(Oe,Be,Ft,Dt)=>{if(mt(Oe)){let Hn=Oe.length;const fs=[];for(;Hn--;)fs[Hn]=Jp(Oe[Hn],Be,Ft,Dt);return fs}else return n.collect&&(Oe===e||Oe===r)&&x.push([Oe,Be,Ft,Dt]),B.bind(Oe,Be,Ft,Dt||hg)},Id=(Oe,Be,Ft)=>{if(mt(Oe)){let Dt=Oe.length;const Hn=[];for(;Dt--;)Hn[Dt]=Id(Oe[Dt],Be,Ft);return Hn}else{if(x.length>0&&(Oe===e||Oe===r)){let Dt=x.length;for(;Dt--;){const[Hn,fs,uc]=x[Dt];Oe===Hn&&(!Be||Be===fs)&&(!Ft||Ft===uc)&&B.unbind(Hn,fs,uc)}}return B.unbind(Oe,Be,Ft)}},wh=(Oe,Be,Ft)=>B.dispatch(Oe,Be,Ft),oy=(Oe,Be,Ft)=>B.dispatch(Oe,Be,Ft),Qp=Oe=>{if(Oe&&pl(Oe)){const Be=Oe.getAttribute("data-mce-contenteditable");return Be&&Be!=="inherit"?Be:Oe.contentEditable!=="inherit"?Oe.contentEditable:null}else return null},hg={doc:e,settings:n,win:r,files:a,stdMode:f,boxModel:b,styleSheetLoader:y,boundEvents:x,styles:N,schema:R,events:B,isBlock:X,root:null,clone:Me,getRoot:lt,getViewPort:At,getRect:_n,getSize:Qt,getParent:ks,getParents:Lo,get:q,getNext:Ac,getPrev:Na,select:It,is:Oo,add:ut,create:Yt,createHTML:Xo,createFragment:Ka,remove:Ql,setStyle:qe,getStyle:dt,setStyles:Le,removeAllAttribs:Om,setAttrib:Te,setAttribs:Ss,getAttrib:ge,getPos:$t,parseStyle:Al,serializeStyle:Bd,addStyle:Cu,loadCSS:el,addClass:$d,removeClass:Xp,hasClass:Mn,toggleClass:tl,show:as,hide:lc,isHidden:aa,uniqueId:ya,setHTML:tn,getOuterHTML:Zc,setOuterHTML:Zr,decode:qn,encode:Ks,insertAfter:jr,replace:Hi,rename:Fd,findCommonAncestor:Cf,run:An,getAttribs:Se,isEmpty:Dm,createRng:ty,nodeIndex:gc,split:ny,bind:Jp,unbind:Id,fire:oy,dispatch:wh,getContentEditable:Qp,getContentEditableParent:Oe=>{const Be=lt();let Ft=null;for(let Dt=Oe;Dt&&Dt!==Be&&(Ft=Qp(Dt),Ft===null);Dt=Dt.parentNode);return Ft},isEditable:Oe=>{if(De(Oe)){const Be=Vt(Oe)?Oe:Oe.parentElement;return De(Be)&&pl(Be)&&fl(me.fromDom(Be))}else return!1},destroy:()=>{if(x.length>0){let Oe=x.length;for(;Oe--;){const[Be,Ft,Dt]=x[Oe];B.unbind(Be,Ft,Dt)}}Ct(a,(Oe,Be)=>{y.unload(Be),delete a[Be]})},isChildOf:(Oe,Be)=>Oe===Be||Be.contains(Oe),dumpRng:Oe=>"startContainer: "+Oe.startContainer.nodeName+", startOffset: "+Oe.startOffset+", endContainer: "+Oe.endContainer.nodeName+", endOffset: "+Oe.endOffset},Pw=hy(N,n,yt(hg));return hg};Sr.DOM=Sr(document),Sr.nodeIndex=gc;const py=Sr.DOM,Zh=0,b1=1,v1=2,by=3;class yl{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const a=py;let u;const f=()=>{a.remove(x),u&&(u.onerror=u.onload=u=null)},b=()=>{f(),o()},y=()=>{f(),r("Failed to load script: "+n)},x=a.uniqueId();u=document.createElement("script"),u.id=x,u.type="text/javascript",u.src=at._addCacheSuffix(n),this.settings.referrerPolicy&&a.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=b,u.onerror=y,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===v1}markDone(n){this.states[n]=v1}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=Zh),new Promise((a,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:a,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(y,x)=>{is(o.scriptLoadedCallbacks,x).each(R=>{fe(R,N=>N[y](x))}),delete o.scriptLoadedCallbacks[x]},a=y=>{const x=jt(y,R=>R.status==="rejected");return x.length>0?Promise.reject(Js(x,({reason:R})=>mt(R)?R:[R])):Promise.resolve()},u=y=>Promise.allSettled(et(y,x=>o.states[x]===v1?(r("resolve",x),Promise.resolve()):o.states[x]===by?(r("reject",x),Promise.reject(x)):(o.states[x]=b1,o.loadScript(x).then(()=>{o.states[x]=v1,r("resolve",x);const R=o.queue;return R.length>0?(o.queue=[],u(R).then(a)):Promise.resolve()},()=>(o.states[x]=by,r("reject",x),Promise.reject(x)))))),f=y=>(o.loading=!0,u(y).then(x=>{o.loading=!1;const R=o.queueLoadedCallbacks.shift();return F.from(R).each(Tn),a(x)})),b=Ca(n);return o.loading?new Promise((y,x)=>{o.queueLoadedCallbacks.push(()=>{f(b).then(y,x)})}):f(b)}}yl.ScriptLoader=new yl;const Jr=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},Zw=e=>it(e)&&Cn(e,"raw"),ic=e=>mt(e)&&e.length>1,y1={},ni=Bc("en"),Lf=()=>is(y1,ni.get()),Zi={getData:()=>uo(y1,e=>({...e})),setCode:e=>{e&&ni.set(e)},getCode:()=>ni.get(),add:(e,n)=>{let o=y1[e];o||(y1[e]=o={});const r=et(Yn(n),a=>a.toLowerCase());Ct(n,(a,u)=>{const f=u.toLowerCase();f!==u&&Jr(r,f)?(Cn(n,f)||(o[f]=a),o[u]=a):o[f]=a})},translate:e=>{const n=Lf().getOr({}),o=f=>ie(f)?Object.prototype.toString.call(f):r(f)?"":""+f,r=f=>f===""||f===null||f===void 0,a=f=>{const b=o(f);return Cn(n,b)?o(n[b]):is(n,b.toLowerCase()).map(o).getOr(b)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(Zw(e))return o(e.raw);if(ic(e)){const f=e.slice(1),b=a(e[0]).replace(/\{([0-9]+)\}/g,(y,x)=>Cn(f,x)?o(f[x]):y);return u(b)}return u(a(e))},isRtl:()=>Lf().bind(e=>is(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Cn(y1,e)},Va=()=>{const e=[],n={},o={},r=[],a=(q,ne)=>{const ge=jt(r,Se=>Se.name===q&&Se.state===ne);fe(ge,Se=>Se.resolve())},u=q=>Cn(n,q),f=q=>Cn(o,q),b=q=>{if(o[q])return o[q].instance},y=(q,ne)=>{const ge=Zi.getCode(),Se=","+(ne||"")+",";!ge||ne&&Se.indexOf(","+ge+",")===-1||yl.ScriptLoader.add(n[q]+"/langs/"+ge+".js")},x=(q,ne)=>{Va.languageLoad!==!1&&(u(q)?y(q,ne):X(q,"loaded").then(()=>y(q,ne)))},R=(q,ne)=>(e.push(ne),o[q]={instance:ne},a(q,"added"),ne),N=q=>{delete n[q],delete o[q]},B=(q,ne)=>oe(ne)?oe(q)?{prefix:"",resource:ne,suffix:""}:{prefix:q.prefix,resource:ne,suffix:q.suffix}:ne,W=(q,ne)=>{if(n[q])return Promise.resolve();let ge=oe(ne)?ne:ne.prefix+ne.resource+ne.suffix;ge.indexOf("/")!==0&&ge.indexOf("://")===-1&&(ge=Va.baseURL+"/"+ge),n[q]=ge.substring(0,ge.lastIndexOf("/"));const Se=()=>(a(q,"loaded"),Promise.resolve());return o[q]?Se():yl.ScriptLoader.add(ge).then(Se)},X=(q,ne="added")=>ne==="added"&&f(q)||ne==="loaded"&&u(q)?Promise.resolve():new Promise(ge=>{r.push({name:q,state:ne,resolve:ge})});return{items:e,urls:n,lookup:o,get:b,requireLangPack:x,add:R,remove:N,createUrl:B,load:W,waitFor:X}};Va.languageLoad=!0,Va.baseURL="",Va.PluginManager=Va(),Va.ThemeManager=Va(),Va.ModelManager=Va();const jh=(e,n)=>{let o=null;return{cancel:()=>{Z(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{Z(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},ub=(e,n)=>{let o=null;const r=()=>{Z(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},X4=(e,n,o)=>jd(e,n,o).isSome(),C1=yt("mce-annotation"),Hf=yt("data-mce-annotation"),Ng=yt("data-mce-annotation-uid"),am=yt("data-mce-annotation-active"),zf=yt("data-mce-annotation-classes"),Vf=yt("data-mce-annotation-attrs"),w1=e=>n=>ns(n,e),jw=(e,n)=>{const o=e.selection.getRng(),r=me.fromDom(o.startContainer),a=me.fromDom(e.getBody()),u=n.fold(()=>"."+C1(),y=>`[${Hf()}="${y}"]`),f=_u(r,o.startOffset).getOr(r);return pn(f,u,w1(a)).bind(y=>Tr(y,`${Ng()}`).bind(x=>Tr(y,`${Hf()}`).map(R=>{const N=Pg(e,x);return{uid:x,name:R,elements:N}})))},Gw=e=>po(e)&&Tf(e,C1()),db=(e,n)=>Sc(e,"data-mce-bogus")||X4(e,'[data-mce-bogus="all"]',w1(n)),Pg=(e,n)=>{const o=me.fromDom(e.getBody()),r=ka(o,`[${Ng()}="${n}"]`);return jt(r,a=>!db(a,o))},Gh=(e,n)=>{const o=me.fromDom(e.getBody()),r=ka(o,`[${Hf()}="${n}"]`),a={};return fe(r,u=>{if(!db(u,o)){const f=Hc(u,Ng()),b=is(a,f).getOr([]);a[f]=b.concat([u])}}),a},mb=(e,n)=>{const o=Bc({}),r=()=>({listeners:[],previous:Ur()}),a=(N,B)=>{u(N,W=>(B(W),W))},u=(N,B)=>{const W=o.get(),X=is(W,N).getOrThunk(r),q=B(X);W[N]=q,o.set(W)},f=(N,B,W)=>{a(N,X=>{fe(X.listeners,q=>q(!0,N,{uid:B,nodes:et(W,ne=>ne.dom)}))})},b=N=>{a(N,B=>{fe(B.listeners,W=>W(!1,N))})},y=(N,B)=>{fe(Pg(e,N),W=>{B?Rr(W,am(),"true"):Ts(W,am())})},x=ub(()=>{const N=Ke(n.getNames());fe(N,B=>{u(B,W=>{const X=W.previous.get();return jw(e,F.some(B)).fold(()=>{X.each(q=>{b(B),W.previous.clear(),y(q,!1)})},({uid:q,name:ne,elements:ge})=>{Lc(X,q)||(X.each(Se=>y(Se,!1)),f(ne,q,ge),W.previous.set(q),y(q,!0))}),{previous:W.previous,listeners:W.listeners}})})},30);return e.on("remove",()=>{x.cancel()}),e.on("NodeChange",()=>{x.throttle()}),{addListener:(N,B)=>{u(N,W=>({previous:W.previous,listeners:W.listeners.concat([B])}))}}},qw=(e,n)=>{const o=Hf(),r=u=>F.from(u.attr(o)).bind(n.lookup),a=u=>{var f,b;u.attr(Ng(),null),u.attr(Hf(),null),u.attr(am(),null);const y=F.from(u.attr(Vf())).map(B=>B.split(",")).getOr([]),x=F.from(u.attr(zf())).map(B=>B.split(",")).getOr([]);fe(y,B=>u.attr(B,null));const R=(b=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&b!==void 0?b:[],N=Nr(R,[C1()].concat(x));u.attr("class",N.length>0?N.join(" "):null),u.attr(zf(),null),u.attr(Vf(),null)};e.serializer.addTempAttr(am()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():a(f))})})},Kw=()=>{const e={};return{register:(a,u)=>{e[a]={name:a,settings:u}},lookup:a=>is(e,a).map(u=>u.settings),getNames:()=>Yn(e)}},S1=(e,n,o)=>Math.min(Math.max(e,n),o),Yw=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Xw=0;const Bg=e=>{const o=new Date().getTime(),r=Math.floor(Yw()*1e9);return Xw++,e+"_"+r+Xw+String(o)},vy=(e,n)=>{fe(n,o=>{Nl(e,o)})},Jw=(e,n)=>{fe(n,o=>{Vd(e,o)})},fb=(e,n)=>me.fromDom(e.dom.cloneNode(n)),im=e=>fb(e,!1),Qw=e=>fb(e,!0),J4=(e,n)=>{const o=me.fromTag(n),r=Pm(e);return Kr(o,r),o},x1=(e,n)=>{const o=J4(e,n);Oi(e,o);const r=zc(e);return $l(o,r),zs(e),o},qh=(e,n,o=Re)=>{const r=new da(e,n),a=u=>{let f;do f=r[u]();while(f&&!wt(f)&&!o(f));return F.from(f).filter(wt)};return{current:()=>F.from(r.current()).filter(wt),next:()=>a("next"),prev:()=>a("prev"),prev2:()=>a("prev2")}},Uf=(e,n)=>{const o=n||(f=>e.isBlock(f)||ls(f)||ds(f)),r=(f,b,y,x)=>{if(wt(f)){const R=x(f,b,f.data);if(R!==-1)return F.some({container:f,offset:R})}return y().bind(R=>r(R.container,R.offset,y,x))};return{backwards:(f,b,y,x)=>{const R=qh(f,x??e.getRoot(),o);return r(f,b,()=>R.prev().map(N=>({container:N,offset:N.length})),y).getOrNull()},forwards:(f,b,y,x)=>{const R=qh(f,x??e.getRoot(),o);return r(f,b,()=>R.next().map(N=>({container:N,offset:0})),y).getOrNull()}}},gb=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?F.from(u.dom.nodeValue):F.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}})(Is,"text"),Kh=e=>gb.get(e),Q4=e=>gb.getOption(e),eS=(e,n)=>gb.set(e,n),e3=["td","th"],WR=["thead","tbody","tfoot"],ZR=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],E1=["li","dd","dt"],jR=["ul","ol","dl"],hb=["pre","script","textarea","style"],Wf=e=>{let n;return o=>(n=n||xs(e,ot),Cn(n,ee(o)))},T1=e=>ee(e)==="table",Fr=e=>po(e)&&ee(e)==="br",tS=Wf(ZR),Yh=Wf(jR),Xh=Wf(E1),t3=Wf(WR),ji=Wf(e3),Gi=Wf(hb),nS=e=>{const n=[];let o=e.dom;for(;o;)n.push(me.fromDom(o)),o=o.lastChild;return n},$g=e=>{const n=ka(e,"br"),o=jt(nS(e).slice(-1),Fr);n.length===o.length&&fe(o,zs)},Zf=()=>{const e=me.fromTag("br");return Rr(e,"data-mce-bogus","1"),e},jf=e=>{Fl(e),Cr(e,Zf())},n3=(e,n)=>{Ea(e).each(o=>{ku(o).each(r=>{n.isBlock(ee(e))&&Fr(o)&&n.isBlock(ee(r))&&zs(o)})})},Jc=Mh,pb=Nf,Ul=_a,Cy=e=>e.insertContent(Jc,{preserve_zwsp:!0}),oS=Vt,Gf=wt,Fg=e=>(Gf(e)&&(e=e.parentNode),oS(e)&&e.hasAttribute("data-mce-caret")),vd=e=>Gf(e)&&pb(e.data),uu=e=>Fg(e)||vd(e),wy=e=>e.firstChild!==e.lastChild||!ls(e.firstChild),k1=(e,n)=>{var o;const a=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Jc),u=e.parentNode;if(n){const f=e.previousSibling;if(Gf(f)){if(uu(f))return f;if(Wl(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(a,e)}else{const f=e.nextSibling;if(Gf(f)){if(uu(f))return f;if(pi(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(a,e.nextSibling):u==null||u.appendChild(a)}return a},yd=e=>{const n=e.container();return wt(n)?n.data.charAt(e.offset())===Jc||e.isAtStart()&&vd(n.previousSibling):!1},Jh=e=>{const n=e.container();return wt(n)?n.data.charAt(e.offset()-1)===Jc||e.isAtEnd()&&vd(n.nextSibling):!1},rs=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(Zf().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},pi=e=>Gf(e)&&e.data[0]===Jc,Wl=e=>Gf(e)&&e.data[e.data.length-1]===Jc,Sy=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Vm(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},gr=e=>e&&e.hasAttribute("data-mce-caret")?(Sy(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,xy=e=>Fg(e.startContainer),qf=Math.round,Ig=e=>e?{left:qf(e.left),top:qf(e.top),bottom:qf(e.bottom),right:qf(e.right),width:qf(e.width),height:qf(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},sS=(e,n)=>(e=Ig(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),rS=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,xr=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,Qh=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:xr(n.top-e.bottom,e,n)},_1=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:xr(n.bottom-e.top,e,n),cS=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,ep=e=>Wn(e,(n,o)=>n.fold(()=>F.some(o),r=>{const a=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return F.some({top:u,right:f,bottom:b,left:a,width:f-a,height:b-u})}),F.none()),du=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),a=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-a)*(o-a))},o3=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),A1=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},Kt=(e,n)=>{if(Vt(e)&&e.hasChildNodes()){const o=e.childNodes,r=S1(n,0,o.length-1);return o[r]}else return e},s3=(e,n)=>{if(!(n<0&&Vt(e)&&e.hasChildNodes()))return Kt(e,n)},r3=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Ey=e=>oe(e)&&e.charCodeAt(0)>=768&&r3.test(e),aS=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},c3=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},O1=nt,Lg=ds,Hg=ls,a3=wt,D1=Ll(["script","style","textarea"]),iS=Ll(["img","input","textarea","hr","iframe","video","audio","object","embed"]),R1=Ll(["table"]),i3=uu,Pi=e=>i3(e)?!1:a3(e)?!D1(e.parentNode):iS(e)||Hg(e)||R1(e)||Cd(e),l3=e=>Vt(e)&&e.getAttribute("unselectable")==="true",Cd=e=>!l3(e)&&Lg(e),u3=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(Cd(o))return!1;if(O1(o))return!0}return!0},d3=e=>Cd(e)?!Wn(lo(e.getElementsByTagName("*")),(n,o)=>n||O1(o),!1):!1,m3=e=>iS(e)||d3(e),Ty=(e,n)=>Pi(e)&&u3(e,n),lS=Vt,f3=Pi,uS=Tg("display","block table"),g3=Tg("float","left right"),zg=c3(lS,f3,fo(g3)),bb=fo(Tg("white-space","pre pre-line pre-wrap")),tp=wt,ky=ls,dS=Sr.nodeIndex,Qm=s3,vb=e=>e?e.createRange():Sr.DOM.createRng(),yb=e=>oe(e)&&/[\r\n\t ]/.test(e),_y=e=>!!e.setStart&&!!e.setEnd,Ay=e=>{const n=e.startContainer,o=e.startOffset;if(yb(e.toString())&&bb(n.parentNode)&&wt(n)){const r=n.data;if(yb(r[o-1])||yb(r[o+1]))return!0}return!1},Vg=e=>{const n=e.ownerDocument,o=vb(n),r=n.createTextNode(fc),a=e.parentNode;a.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=Ig(o.getBoundingClientRect());return a.removeChild(r),u},h3=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,a=e.endOffset;if(n===o&&wt(o)&&r===0&&a===1){const u=e.cloneRange();return u.setEndAfter(o),Ug(u)}else return null},Oy=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Ug=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=Ig(r[0]):o=Ig(e.getBoundingClientRect()),!_y(e)&&ky(e)&&Oy(o)?Vg(e):Oy(o)&&_y(e)&&(n=h3(e))!==null&&n!==void 0?n:o},Da=(e,n)=>{const o=sS(e,n);return o.width=1,o.right=o.left+1,o},p3=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&rS(f,n[n.length-1])||n.push(f))},r=(f,b)=>{const y=vb(f.ownerDocument);if(b<f.data.length){if(Ey(f.data[b]))return;if(Ey(f.data[b-1])&&(y.setStart(f,b),y.setEnd(f,b+1),!Ay(y))){o(Da(Ug(y),!1));return}}b>0&&(y.setStart(f,b-1),y.setEnd(f,b),Ay(y)||o(Da(Ug(y),!1))),b<f.data.length&&(y.setStart(f,b),y.setEnd(f,b+1),Ay(y)||o(Da(Ug(y),!0)))},a=e.container(),u=e.offset();if(tp(a))return r(a,u),n;if(lS(a))if(e.isAtEnd()){const f=Qm(a,u);tp(f)&&r(f,f.data.length),zg(f)&&!ky(f)&&o(Da(Ug(f),!1))}else{const f=Qm(a,u);if(tp(f)&&r(f,0),zg(f)&&e.isAtEnd())return o(Da(Ug(f),!1)),n;const b=Qm(e.container(),e.offset()-1);zg(b)&&!ky(b)&&(uS(b)||uS(f)||!zg(f))&&o(Da(Ug(b),!1)),zg(f)&&o(Da(Ug(f),!0))}return n},Ue=(e,n,o)=>{const r=()=>(tp(e),n===0),a=()=>tp(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const R=vb(e.ownerDocument);return R.setStart(e,n),R.setEnd(e,n),R},f=()=>(o||(o=p3(Ue(e,n))),o),b=()=>f().length>0,y=R=>R&&e===R.container()&&n===R.offset(),x=R=>Qm(e,R?n-1:n);return{container:yt(e),offset:yt(n),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:a,isEqual:y,getNode:x}};Ue.fromRangeStart=e=>Ue(e.startContainer,e.startOffset),Ue.fromRangeEnd=e=>Ue(e.endContainer,e.endOffset),Ue.after=e=>Ue(e.parentNode,dS(e)+1),Ue.before=e=>Ue(e.parentNode,dS(e)),Ue.isAbove=(e,n)=>yr(Ht(n.getClientRects()),Jt(e.getClientRects()),Qh).getOr(!1),Ue.isBelow=(e,n)=>yr(Jt(n.getClientRects()),Ht(e.getClientRects()),_1).getOr(!1),Ue.isAtStart=e=>e?e.isAtStart():!1,Ue.isAtEnd=e=>e?e.isAtEnd():!1,Ue.isTextPosition=e=>e?wt(e.container()):!1,Ue.isElementPosition=e=>!Ue.isTextPosition(e);const lm=(e,n)=>{wt(n)&&n.data.length===0&&e.remove(n)},b3=(e,n,o)=>{n.insertNode(o),lm(e,o.previousSibling),lm(e,o.nextSibling)},Cb=(e,n,o)=>{const r=F.from(o.firstChild),a=F.from(o.lastChild);n.insertNode(o),r.each(u=>lm(e,u.previousSibling)),a.each(u=>lm(e,u.nextSibling))},np=(e,n,o)=>{Pc(o)?Cb(e,n,o):b3(e,n,o)},Iu=wt,mS=Vm,fS=Sr.nodeIndex,wb=e=>{const n=e.parentNode;return mS(n)?wb(n):n},Sb=e=>e?le(e.childNodes,(n,o)=>(mS(o)&&o.nodeName!=="BR"?n=n.concat(Sb(o)):n.push(o),n),[]):[],xb=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&Iu(o);)n+=o.data.length;return n},gS=e=>n=>e===n,v3=e=>{let n,o;n=Sb(wb(e)),o=re(n,gS(e),e),n=n.slice(0,o+1);const r=le(n,(a,u,f)=>(Iu(u)&&Iu(n[f-1])&&a++,a),0);return n=Rc(n,Ll([e.nodeName])),o=re(n,gS(e),e),o-r},Bi=e=>(Iu(e)?"text()":e.nodeName.toLowerCase())+"["+v3(e)+"]",Eb=(e,n,o)=>{const r=[];for(let a=n.parentNode;a&&a!==e;a=a.parentNode)r.push(a);return r},hS=(e,n)=>{let o=[],r=n.container(),a=n.offset(),u;if(Iu(r))u=xb(r,a);else{const b=r.childNodes;a>=b.length?(u="after",a=b.length-1):u="before",r=b[a]}o.push(Bi(r));let f=Eb(e,r);return f=Rc(f,fo(Vm)),o=o.concat(ec(f,b=>Bi(b))),o.reverse().join("/")+","+u},y3=(e,n,o)=>{let r=Sb(e);return r=Rc(r,(a,u)=>!Iu(a)||!Iu(r[u-1])),r=Rc(r,Ll([n])),r[o]},C3=(e,n)=>{let o=e,r=0;for(;Iu(o);){const a=o.data.length;if(n>=r&&n<=r+a){e=o,n=n-r;break}if(!Iu(o.nextSibling)){e=o,n=a;break}r+=a,o=o.nextSibling}return Iu(e)&&n>e.data.length&&(n=e.data.length),Ue(e,n)},pS=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),a=o.length>1?o[1]:"before",u=le(r,(f,b)=>{const y=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return y?(y[1]==="text()"&&(y[1]="#text"),y3(f,y[1],parseInt(y[2],10))):null},e);if(!u)return null;if(!Iu(u)&&u.parentNode){let f;return a==="after"?f=fS(u)+1:f=fS(u),Ue(u.parentNode,f)}return C3(u,parseInt(a,10))},Tb=ds,w3=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let a=n.previousSibling;a&&wt(a);a=a.previousSibling)r+=e(a.data).length;return r},bS=(e,n,o,r,a)=>{const u=a?r.startContainer:r.endContainer;let f=a?r.startOffset:r.endOffset;const b=[],y=e.getRoot();if(wt(u))b.push(o?w3(n,u,f):f);else{let x=0;const R=u.childNodes;f>=R.length&&R.length&&(x=1,f=Math.max(0,R.length-1)),b.push(e.nodeIndex(R[f],o)+x)}for(let x=u;x&&x!==y;x=x.parentNode)b.push(e.nodeIndex(x,o));return b},Ar=(e,n,o,r)=>{const a=n.dom,u=bS(a,e,o,r,!0),f=n.isForward(),b=xy(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...b};{const y=bS(a,e,o,r,!1);return{start:u,end:y,forward:f,...b}}},op=(e,n,o)=>{let r=0;return at.each(e.select(n),a=>{if(a.getAttribute("data-mce-bogus")!=="all"){if(a===o)return!1;r++;return}}),r},vS=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(Vt(o)&&o.nodeName==="TR"){const a=o.childNodes;o=a[Math.min(n?r:r-1,a.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},yS=e=>(vS(e,!0),vS(e,!1),e),kb=(e,n)=>{if(Vt(e)&&(e=Kt(e,n),Tb(e)))return e;if(uu(e)){wt(e)&&Fg(e)&&(e=e.parentNode);let o=e.previousSibling;if(Tb(o)||(o=e.nextSibling,Tb(o)))return o}},oi=e=>kb(e.startContainer,e.startOffset)||kb(e.endContainer,e.endOffset),Cl=(e,n,o)=>{const r=o.getNode(),a=o.getRng();if(r.nodeName==="IMG"||Tb(r)){const f=r.nodeName;return{name:f,index:op(o.dom,f,r)}}const u=oi(a);if(u){const f=u.tagName;return{name:f,index:op(o.dom,f,u)}}return Ar(e,o,n,a)},CS=e=>{const n=e.getRng();return{start:hS(e.dom.getRoot(),Ue.fromRangeStart(n)),end:hS(e.dom.getRoot(),Ue.fromRangeEnd(n)),forward:e.isForward()}},wS=e=>({rng:e.getRng(),forward:e.isForward()}),Dy=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},M1=(e,n)=>{const o=e.dom;let r=e.getRng();const a=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,y=e.isForward();if(b==="IMG")return{name:b,index:op(o,b,f)};const x=yS(r.cloneRange());if(!u){x.collapse(!1);const N=Dy(o,a+"_end",n);np(o,x,N)}r=yS(r),r.collapse(!0);const R=Dy(o,a+"_start",n);return np(o,r,R),e.moveToBookmark({id:a,keep:!0,forward:y}),{id:a,forward:y}},SS=(e,n,o=!1)=>n===2?Cl(Ul,o,e):n===3?CS(e):n?wS(e):M1(e,!1),Ry=Qe(Cl,Mo,!0),My=e=>{const n=u=>u(e),o=yt(e),r=()=>a,a={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:ot,isError:Re,map:u=>qi.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>F.some(e)};return a},xS=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,a)=>r(e),isValue:Re,isError:ot,map:n,mapError:r=>qi.error(r(e)),bind:n,exists:Re,forall:ot,getOr:Mo,or:Mo,getOrThunk:St,orThunk:St,getOrDie:Bs(String(e)),each:Bt,toOptional:F.none};return o},qi={value:My,error:xS,fromOption:(e,n)=>e.fold(()=>xS(n),My)},Cs={generate:e=>{if(!mt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return fe(e,(r,a)=>{const u=Yn(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!mt(b))throw new Error("case arguments must be an array");n.push(f),o[f]=(...y)=>{const x=y.length;if(x!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+x);return{fold:(...N)=>{if(N.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+N.length);return N[a].apply(null,y)},match:N=>{const B=Yn(N);if(n.length!==B.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+B.join(","));if(!ps(n,X=>We(B,X)))throw new Error("Not all branches were specified when using match. Specified: "+B.join(", ")+`
Required: `+n.join(", "));return N[f].apply(null,y)},log:N=>{console.log(N,{constructors:n,constructor:f,params:y})}}}}),o}};Cs.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Lu=e=>{const n=[],o=[];return fe(e,r=>{r.fold(a=>{n.push(a)},a=>{o.push(a)})}),{errors:n,values:o}},sp=e=>e.type==="inline-command"||e.type==="inline-format",TS=e=>e.type==="block-command"||e.type==="block-format",Ny=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,kS=e=>{var n;const o=a=>qi.error({message:a,pattern:e}),r=(a,u,f)=>{if(e.format!==void 0){let b;if(mt(e.format)){if(!ps(e.format,oe))return o(a+" pattern has non-string items in the `format` array");b=e.format}else if(oe(e.format))b=[e.format];else return o(a+" pattern has non-string `format` parameter");return qi.value(u(b))}else return e.cmd!==void 0?oe(e.cmd)?qi.value(f(e.cmd,e.value)):o(a+" pattern has non-string `cmd` parameter"):o(a+" pattern is missing both `format` and `cmd` parameters")};if(!it(e))return o("Raw pattern is not an object");if(!oe(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!oe(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let a=e.start,u=e.end;return u.length===0&&(u=a,a=""),r("Inline",f=>({type:"inline-format",start:a,end:u,format:f}),(f,b)=>({type:"inline-command",start:a,end:u,cmd:f,value:b}))}else{if(e.replacement!==void 0)return oe(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):qi.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const a=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",u=>({type:"block-format",start:e.start,format:u[0],trigger:a}),(u,f)=>({type:"block-command",start:e.start,cmd:u,value:f,trigger:a}))}}},Kf=e=>jt(e,TS),ma=e=>jt(e,sp),dm=(e,n)=>({inlinePatterns:ma(e),blockPatterns:Kf(e),dynamicPatternsLookup:n}),rp=(e,n)=>({...e,blockPatterns:jt(e.blockPatterns,o=>Ny(o,n))}),_S=e=>{const n=Lu(et(e,kS));return fe(n.errors,o=>console.error(o.message,o.pattern)),n.values},S3=e=>n=>{const o=e(n);return _S(o)},_b=(e,n)=>e.dispatch("PreProcess",n),Py=(e,n)=>e.dispatch("PostProcess",n),By=e=>{e.dispatch("remove")},$y=e=>{e.dispatch("detach")},AS=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},OS=(e,n,o,r,a)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:a})},DS=(e,n,o,r,a)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:a})},RS=e=>{e.dispatch("PreInit")},x3=e=>{e.dispatch("PostRender")},Ua=e=>{e.dispatch("Init")},E3=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},ef=(e,n,o)=>{e.dispatch(n,o)},Fy=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},Iy=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},MS=(e,n)=>e.dispatch("BeforeSetContent",n),Ab=(e,n)=>e.dispatch("SetContent",n),Ly=(e,n)=>e.dispatch("BeforeGetContent",n),Hy=(e,n)=>e.dispatch("GetContent",n),T3=(e,n)=>{e.dispatch("AutocompleterStart",n)},k3=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},Tc=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},$c=e=>{e.dispatch("AutocompleterEnd")},Ra=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),kc=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),Qc=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),Uc=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),zy=(e,n)=>e.dispatch("DisabledStateChange",{state:n}),N1=Cc().deviceType,P1=N1.isTouch(),fa=Sr.DOM,NS=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Wn(n,(o,r)=>{const a=r.split("="),u=a[0],f=a.length>1?a[1]:u;return o[ss(u)]=ss(f),o},{})},Ob=e=>Ze(e,RegExp),sn=e=>n=>n.options.get(e),Wg=e=>oe(e)||it(e),Vy=(e,n="")=>o=>{const r=oe(o);if(r)if(o.indexOf("=")!==-1){const a=NS(o);return{value:is(a,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},GR=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:Vy(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:Vy(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=oe(o)&&Xn(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=We(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>Mt(o)?{valid:!0,value:o}:oe(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||oe(o)||eo(o,oe);return r?oe(o)?{value:et(o.split(","),ss),valid:r}:mt(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:I1(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=oe(o)||eo(o,oe);return r?{value:mt(o)?o:et(o.split(","),ss),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=Mt(o)||oe(o);return r?o===!1||N1.isiPhone()||N1.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!P1}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||oe(o)||ie(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||oe(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("disabled",{processor:o=>Mt(o)?(e.initialized&&Jf(e)!==o&&Promise.resolve().then(()=>{zy(e,o)}),{valid:!0,value:o}):{valid:!1,message:"The value must be a boolean."},default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(e.hasPlugin("help")?". Press ALT-0 for help.":"")}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("allow_mathml_annotation_encodings",{processor:o=>{const r=eo(o,oe);return r?{value:o,valid:r}:{valid:!1,message:"Must be an array of strings."}},default:[]}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:Wg}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:Wg}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:Wg}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:Wg}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>oe(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>eo(o,it)||o===!1?{value:_S(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>ie(o)?{value:S3(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>eo(o,Ob)?{value:o,valid:!0}:Ob(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=We(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=We(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:Zi.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:fa.getAttrib(e.getElement(),"placeholder")})})},_3=sn("iframe_attrs"),A3=sn("doctype"),Ki=sn("document_base_url"),Db=sn("body_id"),PS=sn("body_class"),bi=sn("content_security_policy"),mm=sn("br_in_pre"),ea=sn("forced_root_block"),mu=sn("forced_root_block_attrs"),vi=sn("newline_behavior"),Uy=sn("br_newline_selector"),Rb=sn("no_newline_selector"),Wy=sn("keep_styles"),BS=sn("end_container_on_empty_block"),Mb=sn("automatic_uploads"),$S=sn("images_reuse_filename"),FS=sn("images_replace_blob_uris"),IS=sn("icons"),O3=sn("icons_url"),D3=sn("images_upload_url"),R3=sn("images_upload_base_path"),Zy=sn("images_upload_credentials"),Nb=sn("images_upload_handler"),LS=sn("content_css_cors"),B1=sn("referrer_policy"),cp=sn("language"),Yf=sn("language_url"),Pb=sn("indent_use_margin"),M3=sn("indentation"),HS=sn("content_css"),N3=sn("content_style"),zS=sn("font_css"),VS=sn("directionality"),$i=sn("inline_boundaries_selector"),Bb=sn("object_resizing"),US=sn("resize_img_proportional"),jy=sn("placeholder"),$1=sn("event_root"),P3=sn("service_message"),ap=sn("theme"),B3=sn("theme_url"),Gy=sn("model"),$3=sn("model_url"),F1=sn("inline_boundaries"),F3=sn("formats"),I3=sn("preview_styles"),$b=sn("format_empty_lines"),WS=sn("format_noneditable_selector"),qy=sn("custom_ui_selector"),I1=sn("inline"),ZS=sn("hidden_input"),Ky=sn("submit_patch"),Yy=sn("add_form_submit_trigger"),Xy=sn("add_unload_trigger"),Zg=sn("custom_undo_redo_levels"),jS=sn("disable_nodechange"),Jy=sn("readonly"),GS=sn("editable_root"),qS=sn("content_css_cors"),Fi=sn("plugins"),Fb=sn("external_plugins"),Ib=sn("block_unsupported_drop"),Qy=sn("visual"),e2=sn("visual_table_class"),fm=sn("visual_anchor_class"),Lb=sn("iframe_aria_text"),L3=sn("setup"),Xf=sn("init_instance_callback"),Hb=sn("urlconverter_callback"),Ii=sn("auto_focus"),qR=sn("browser_spellcheck"),ip=sn("protect"),H3=sn("paste_block_drop"),L1=sn("paste_data_images"),z3=sn("paste_preprocess"),V3=sn("paste_postprocess"),KS=sn("newdocument_content"),YS=sn("paste_webkit_styles"),zb=sn("paste_remove_styles_if_webkit"),U3=sn("paste_merge_formats"),W3=sn("smart_paste"),H1=sn("paste_as_text"),t2=sn("paste_tab_spaces"),n2=sn("allow_html_data_urls"),XS=sn("text_patterns"),JS=sn("text_patterns_lookup"),Vb=sn("noneditable_class"),KR=sn("editable_class"),lp=sn("noneditable_regexp"),AI=sn("preserve_cdata"),z1=sn("highlight_on_focus"),V1=sn("xss_sanitization"),Ub=sn("init_content_sync"),Z3=e=>e.options.isSet("text_patterns_lookup"),QS=e=>at.explode(e.options.get("font_size_style_values")),j3=e=>at.explode(e.options.get("font_size_classes")),o2=e=>e.options.get("encoding")==="xml",s2=e=>at.explode(e.options.get("images_file_types")),tf=sn("table_tab_navigation"),U1=sn("details_initial_state"),G3=sn("details_serialized_state"),r2=sn("sandbox_iframes"),ex=e=>e.options.get("sandbox_iframes_exclusions"),YR=sn("convert_unsafe_embeds"),tx=sn("license_key"),c2=sn("api_key"),Jf=sn("disabled"),q3=Vt,a2=wt,i2=e=>{const n=e.parentNode;n&&n.removeChild(e)},l2=e=>{const n=Ul(e);return{count:e.length-n.length,text:n}},Wb=e=>{let n;for(;(n=e.data.lastIndexOf(Jc))!==-1;)e.deleteData(n,1)},u2=(e,n)=>(jg(e),n),Zb=(e,n)=>{const o=l2(e.data.substr(0,n.offset())),r=l2(e.data.substr(n.offset()));return(o.text+r.text).length>0?(Wb(e),Ue(e,n.offset()-o.count)):n},up=(e,n)=>{const o=n.container(),r=Ic(lo(o.childNodes),e).map(a=>a<n.offset()?Ue(o,n.offset()-1):n).getOr(n);return jg(e),r},d2=(e,n)=>a2(e)&&n.container()===e?Zb(e,n):u2(e,n),K3=(e,n)=>n.container()===e.parentNode?up(e,n):u2(e,n),Y3=(e,n)=>Ue.isTextPosition(n)?d2(e,n):K3(e,n),jg=e=>{q3(e)&&uu(e)&&(wy(e)?e.removeAttribute("data-mce-caret"):i2(e)),a2(e)&&(Wb(e),e.data.length===0&&i2(e))},W1=ds,nx=Xc,Li=Xr,XR="*[contentEditable=false],video,audio,embed,object",X3=(e,n,o)=>{const r=sS(n.getBoundingClientRect(),o);let a,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;a=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();a=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=a,r.right+=a,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},dp=e=>{var n,o;const r=ka(me.fromDom(e),XR);for(let a=0;a<r.length;a++){const u=r[a].dom;let f=u.previousSibling;if(Wl(f)){const b=f.data;b.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,pi(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},ox=(e,n,o,r)=>{const a=Ur();let u,f;const b=ea(e),y=e.dom,x=(q,ne)=>{let ge;if(R(),Li(ne))return null;if(o(ne)){const Se=rs(b,ne,q),Te=X3(n,ne,q);y.setStyle(Se,"top",Te.top),y.setStyle(Se,"caret-color","transparent"),f=Se;const Me=y.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});y.setStyles(Me,{...Te}),y.add(n,Me),a.set({caret:Me,element:ne,before:q}),q&&y.addClass(Me,"mce-visual-caret-before"),N(),ge=ne.ownerDocument.createRange(),ge.setStart(Se,0),ge.setEnd(Se,0)}else return f=k1(ne,q),ge=ne.ownerDocument.createRange(),Z1(f.nextSibling)?(ge.setStart(f,0),ge.setEnd(f,0)):(ge.setStart(f,1),ge.setEnd(f,1)),ge;return ge},R=()=>{dp(n),f&&(jg(f),f=null),a.on(q=>{y.remove(q.caret),a.clear()}),u&&(clearInterval(u),u=void 0)},N=()=>{u=setInterval(()=>{a.on(q=>{r()?y.toggleClass(q.caret,"mce-visual-caret-hidden"):y.addClass(q.caret,"mce-visual-caret-hidden")})},500)};return{show:x,hide:R,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{a.on(q=>{const ne=X3(n,q.element,q.before);y.setStyles(q.caret,{...ne})})},destroy:()=>clearInterval(u)}},sx=()=>cn.browser.isFirefox(),Z1=e=>W1(e)||nx(e),Qf=e=>(Z1(e)||cu(e)&&sx())&&_f(me.fromDom(e)).exists(fl),m2=nt,rx=ds,J3=Xc,cx=Tg("display","block table table-cell table-row table-caption list-item"),j1=uu,ax=Fg,G1=Vt,mp=wt,f2=Pi,fp=e=>e===1,Gg=e=>e===-1,qg=(e,n)=>{let o;for(;o=e(n);)if(!ax(o))return o;return null},nf=(e,n,o,r,a)=>{const u=new da(e,r),f=rx(e)||ax(e);let b;if(Gg(n)){if(f&&(b=qg(u.prev.bind(u),!0),o(b)))return b;for(;b=qg(u.prev.bind(u),a);)if(o(b))return b}if(fp(n)){if(f&&(b=qg(u.next.bind(u),!0),o(b)))return b;for(;b=qg(u.next.bind(u),a);)if(o(b))return b}return null},g2=(e,n)=>{const o=a=>m2(a.dom),r=a=>a.dom===n;return ml(me.fromDom(e),o,r).map(a=>a.dom).getOr(n)},gm=(e,n)=>{for(;e&&e!==n;){if(cx(e))return e;e=e.parentNode}return null},Hu=(e,n,o)=>gm(e.container(),o)===gm(n.container(),o),hm=(e,n)=>{if(!n)return F.none();const o=n.container(),r=n.offset();return G1(o)?F.from(o.childNodes[r+e]):F.none()},h2=(e,n)=>{var o;const a=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)),a},wd=(e,n,o)=>gm(n,e)===gm(o,e),p2=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let a=o;for(;a&&a!==n;){let u=a[r];if(u&&j1(u)&&(u=u[r]),rx(u)||J3(u)){if(wd(n,u,a))return u;break}if(f2(u))break;a=a.parentNode}return null},Kg=Qe(h2,!0),gp=Qe(h2,!1),ix=(e,n,o)=>{let r;const a=Qe(p2,!0,n),u=Qe(p2,!1,n),f=o.startContainer,b=o.startOffset;if(Fg(f)){const y=mp(f)?f.parentNode:f,x=y.getAttribute("data-mce-caret");if(x==="before"&&(r=y.nextSibling,Qf(r)))return Kg(r);if(x==="after"&&(r=y.previousSibling,Qf(r)))return gp(r)}if(!o.collapsed)return o;if(wt(f)){if(j1(f)){if(e===1){if(r=u(f),r)return Kg(r);if(r=a(f),r)return gp(r)}if(e===-1){if(r=a(f),r)return gp(r);if(r=u(f),r)return Kg(r)}return o}if(Wl(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?Kg(r):o;if(pi(f)&&b<=1)return e===-1&&(r=a(f),r)?gp(r):o;if(b===f.data.length)return r=u(f),r?Kg(r):o;if(b===0)return r=a(f),r?gp(r):o}return o},lx=(e,n)=>hm(e?0:-1,n).filter(rx),q1=(e,n,o)=>{const r=ix(e,n,o);return e===-1?Ue.fromRangeStart(r):Ue.fromRangeEnd(r)},jb=e=>F.from(e.getNode()).map(me.fromDom),Q3=e=>F.from(e.getNode(!0)).map(me.fromDom),K1=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},Gb=(e,n)=>{const o=Hu(e,n);return!o&&ls(e.getNode())?!0:o},ux=ds,zu=wt,dx=Vt,qb=ls,Yg=Pi,mx=m3,Y1=Ty,JR=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},fx=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,Wa=(e,n)=>{if(fp(e)){if(Yg(n.previousSibling)&&!zu(n.previousSibling))return Ue.before(n);if(zu(n))return Ue(n,0)}if(Gg(e)){if(Yg(n.nextSibling)&&!zu(n.nextSibling))return Ue.after(n);if(zu(n))return Ue(n,n.data.length)}return Gg(e)?qb(n)?Ue.before(n):Ue.after(n):Ue.before(n)},Kb=(e,n)=>{const o=n.nextSibling;return o&&Yg(o)?zu(o)?Ue(o,0):Ue.before(o):eg(1,Ue.after(n),e)},eg=(e,n,o)=>{let r,a,u,f;if(!dx(o)||!n)return null;if(n.isEqual(Ue.after(o))&&o.lastChild){if(f=Ue.after(o.lastChild),Gg(e)&&Yg(o.lastChild)&&dx(o.lastChild))return qb(o.lastChild)?Ue.before(o.lastChild):f}else f=n;const b=f.container();let y=f.offset();if(zu(b)){if(Gg(e)&&y>0)return Ue(b,--y);if(fp(e)&&y<b.length)return Ue(b,++y);r=b}else{if(Gg(e)&&y>0&&(a=fx(b,y-1),Yg(a)))return!mx(a)&&(u=nf(a,e,Y1,a),u)?zu(u)?Ue(u,u.data.length):Ue.after(u):zu(a)?Ue(a,a.data.length):Ue.before(a);if(fp(e)&&y<b.childNodes.length&&(a=fx(b,y),Yg(a)))return qb(a)?Kb(o,a):!mx(a)&&(u=nf(a,e,Y1,a),u)?zu(u)?Ue(u,0):Ue.before(u):zu(a)?Ue(a,0):Ue.after(a);r=a||f.getNode()}if(r&&(fp(e)&&f.isAtEnd()||Gg(e)&&f.isAtStart())&&(r=nf(r,e,ot,o,!0),Y1(r,o)))return Wa(e,r);a=r&&nf(r,e,Y1,o);const x=Ne(jt(JR(b,o),ux));return x&&(!a||!x.contains(a))?(fp(e)?f=Ue.after(x):f=Ue.before(x),f):a?Wa(e,a):null},Zl=e=>({next:n=>eg(1,n,e),prev:n=>eg(-1,n,e)}),gx=(e,n,o)=>{const r=e?Ue.before(o):Ue.after(o);return jl(e,n,r)},Yb=e=>ls(e)?Ue.before(e):Ue.after(e),X1=e=>Ue.isTextPosition(e)?e.offset()===0:Pi(e.getNode()),hx=e=>{if(Ue.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return Pi(e.getNode(!0))},J1=(e,n)=>!Ue.isTextPosition(e)&&!Ue.isTextPosition(n)&&e.getNode()===n.getNode(!0),px=e=>!Ue.isTextPosition(e)&&ls(e.getNode()),Xg=(e,n,o)=>e?!J1(n,o)&&!px(n)&&hx(n)&&X1(o):!J1(o,n)&&X1(n)&&hx(o),jl=(e,n,o)=>{const r=Zl(n);return F.from(e?r.next(o):r.prev(o))},tg=(e,n,o)=>jl(e,n,o).bind(r=>Hu(o,r,n)&&Xg(e,o,r)?jl(e,n,r):F.some(r)),Sd=(e,n,o,r)=>tg(e,n,o).bind(a=>r(a)?Sd(e,n,a,r):F.some(a)),Vu=(e,n)=>{const o=e?n.firstChild:n.lastChild;return wt(o)?F.some(Ue(o,e?0:o.data.length)):o?Pi(o)?F.some(e?Ue.before(o):Yb(o)):gx(e,n,o):F.none()},Za=Qe(jl,!0),Ma=Qe(jl,!1),Wc=Qe(Vu,!0),Uu=Qe(Vu,!1),Xb="_mce_caret",Gl=e=>Vt(e)&&e.id===Xb,Jg=(e,n)=>{let o=n;for(;o&&o!==e;){if(Gl(o))return o;o=o.parentNode}return null},Jb=e=>oe(e.start),bx=e=>Cn(e,"rng"),vx=e=>Cn(e,"id"),yx=e=>Cn(e,"name"),Cx=e=>at.isArray(e.start),Qb=e=>!yx(e)&&Mt(e.forward)?e.forward:!0,wx=(e,n)=>(Vt(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),Sx=(e,n)=>{const o=F.from(pS(e.getRoot(),n.start)),r=F.from(pS(e.getRoot(),n.end));return yr(o,r,(a,u)=>{const f=e.createRng();return f.setStart(a.container(),a.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:Qb(n)}})},hp=(e,n)=>{var o;const a=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Jc);e.appendChild(a),n.setStart(a,0),n.setEnd(a,0)},xx=e=>!e.hasChildNodes(),ek=(e,n)=>Uu(e).fold(Re,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),tk=(e,n,o)=>xx(n)&&Jg(e,n)?(hp(n,o),!0):!1,Ex=(e,n,o,r)=>{const a=o[n?"start":"end"],u=e.getRoot();if(a){let f=u,b=a[0];for(let y=a.length-1;f&&y>=1;y--){const x=f.childNodes;if(tk(u,f,r))return!0;if(a[y]>x.length-1)return tk(u,f,r)?!0:ek(f,r);f=x[a[y]]}wt(f)&&(b=Math.min(a[0],f.data.length)),Vt(f)&&(b=Math.min(a[0],f.childNodes.length)),n?r.setStart(f,b):r.setEnd(f,b)}return!0},pp=e=>wt(e)&&e.data.length>0,nk=(e,n,o)=>{const r=e.get(o.id+"_"+n),a=r==null?void 0:r.parentNode,u=o.keep;if(r&&a){let f,b;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):pp(r.nextSibling)?(f=r.nextSibling,b=0):pp(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=a,b=e.nodeIndex(r)+1):(f=a,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):pp(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=a,b=e.nodeIndex(r)):(f=a,b=e.nodeIndex(r)),!u){const y=r.previousSibling,x=r.nextSibling;at.each(at.grep(r.childNodes),N=>{wt(N)&&(N.data=N.data.replace(/\uFEFF/g,""))});let R;for(;R=e.get(o.id+"_"+n);)e.remove(R,!0);if(wt(x)&&wt(y)&&!cn.browser.isOpera()){const N=y.data.length;y.appendData(x.data),e.remove(x),f=y,b=N}}return F.some(Ue(f,b))}else return F.none()},ok=(e,n)=>{const o=e.createRng();return Ex(e,!0,n,o)&&Ex(e,!1,n,o)?F.some({range:o,forward:Qb(n)}):F.none()},cs=(e,n)=>{const o=nk(e,"start",n),r=nk(e,"end",n);return yr(o,r.or(o),(a,u)=>{const f=e.createRng();return f.setStart(wx(e,a.container()),a.offset()),f.setEnd(wx(e,u.container()),u.offset()),{range:f,forward:Qb(n)}})},ng=(e,n)=>F.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),of=(e,n)=>{const o=e.dom;if(n){if(Cx(n))return ok(o,n);if(Jb(n))return Sx(o,n);if(vx(n))return cs(o,n);if(yx(n))return ng(o,n);if(bx(n))return F.some({range:n.rng,forward:Qb(n)})}return F.none()},ev=(e,n,o)=>SS(e,n,o),b2=(e,n)=>{of(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},wl=e=>Vt(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Qg=(e=>n=>e===n)(fc),pm=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Q1=e=>!pm(e)&&!Qg(e)&&!Nf(e),Tx=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},rk=e=>Js(e,n=>{const o=A1(n);return o?[me.fromDom(o)]:[]}),QR=e=>Tx(e).length>1,kx=e=>jt(rk(e),ji),e5=e=>ka(e,"td[data-mce-selected],th[data-mce-selected]"),_x=(e,n)=>{const o=e5(n);return o.length>0?o:kx(e)},eh=e=>_x(Tx(e.selection.getSel()),me.fromDom(e.getBody())),th=(e,n)=>jd(e,"table",n),nh=e=>{const n=e.startContainer,o=e.startOffset;return wt(n)?o===0?F.some(me.fromDom(n)):F.none():F.from(n.childNodes[o]).map(me.fromDom)},t5=e=>{const n=e.endContainer,o=e.endOffset;return wt(n)?o===n.data.length?F.some(me.fromDom(n)):F.none():F.from(n.childNodes[o-1]).map(me.fromDom)},v2=e=>dl(e).fold(yt([e]),n=>[e].concat(v2(n))),bp=e=>Ea(e).fold(yt([e]),n=>ee(n)==="br"?ku(n).map(o=>[e].concat(bp(o))).getOr([]):[e].concat(bp(n))),y2=(e,n)=>yr(nh(n),t5(n),(o,r)=>{const a=Ho(v2(e),Qe(ns,o)),u=Ho(bp(e),Qe(ns,r));return a.isSome()&&u.isSome()}).getOr(!1),C2=(e,n,o,r)=>{const a=o,u=new da(o,a),f=us(e.schema.getMoveCaretBeforeOnEnterElements(),(y,x)=>!We(["td","th","table"],x.toLowerCase()));let b=o;do{if(wt(b)&&at.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());a.nodeName==="BODY"&&(r?n.setStart(a,0):n.setEnd(a,a.childNodes.length))},vp=e=>{const n=e.selection.getSel();return De(n)&&n.rangeCount>0},w2=(e,n)=>{const o=eh(e);o.length>0?fe(o,r=>{const a=r.dom,u=e.dom.createRng();u.setStartBefore(a),u.setEndAfter(a),n(u,!0)}):n(e.selection.getRng(),!1)},Ax=(e,n,o)=>{const r=M1(e,n);o(r),e.moveToBookmark(r)},og=e=>Go(e==null?void 0:e.nodeType),S2=e=>Vt(e)&&!wl(e)&&!Gl(e)&&!Vm(e),ck=(e,n)=>{if(S2(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},Ox=(e,n,o)=>{const{selection:r,dom:a}=e,u=r.getNode(),f=ds(u);Ax(r,!0,()=>{n()}),f&&ds(u)&&a.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&sf(a,r)},sf=(e,n)=>{var o,r;const a=n.getRng(),{startContainer:u,startOffset:f}=a,b=n.getNode();if(!ck(e,b)&&Vt(u)){const y=u.childNodes,x=e.getRoot();let R;if(f<y.length){const N=y[f];R=new da(N,(o=e.getParent(N,e.isBlock))!==null&&o!==void 0?o:x)}else{const N=y[y.length-1];R=new da(N,(r=e.getParent(N,e.isBlock))!==null&&r!==void 0?r:x),R.next(!0)}for(let N=R.current();N;N=R.next()){if(e.getContentEditable(N)==="false")return;if(wt(N)&&!E2(N)){a.setStart(N,0),n.setRng(a);return}}}},Dx=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(Vt(e)||!E2(e))return e}},x2=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||ei(e,n),sg=(e,n,o)=>e.schema.isValidChild(n,o),E2=(e,n=!1)=>{if(De(e)&&wt(e)){const o=n?e.data.replace(/ /g," "):e.data;return hl(o)}else return!1},qt=e=>De(e)&&wt(e)&&e.length===0,ga=(e,n)=>{const o="[data-mce-cef-wrappable]",r=WS(e),a=vo(r)?o:`${o},${r}`;return La(me.fromDom(n),a)},tv=(e,n)=>{const o=e.dom;return S2(n)&&o.getContentEditable(n)==="false"&&ga(e,n)&&o.select('[contenteditable="true"]',n).length===0},hc=(e,n)=>ie(e)?e(n):(De(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),ql=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),nv=(e,n)=>{if(On(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=cm(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},oh=(e,n,o)=>{const r=e.getStyle(n,o);return nv(r,o)},ov=(e,n)=>{let o;return e.getParent(n,r=>Vt(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},sv=(e,n,o)=>e.getParents(n,o,e.getRoot()),T2=(e,n,o)=>{const r=e.formatter.get(n);return De(r)&&Tt(r,o)},Rx=(e,n)=>T2(e,n,r=>{const a=u=>ie(u)||u.length>1&&u.charAt(0)==="%";return Tt(["styles","attributes"],u=>is(r,u).exists(f=>{const b=mt(f)?f:mc(f);return Tt(b,a)}))}),ak=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],a=u=>us(u,(f,b)=>Tt(r,y=>y===b));return T2(e,n,u=>{const f=a(u);return T2(e,o,b=>{const y=a(b);return qr(f,y)})})},bm=e=>Ls(e,"block"),ik=e=>bm(e)&&e.wrapper===!0,k2=e=>bm(e)&&e.wrapper!==!0,fu=e=>Ls(e,"selector"),ta=e=>Ls(e,"inline"),rv=e=>fu(e)&&ta(e)&&Lc(is(e,"mixed"),!0),yp=e=>fu(e)&&e.expand!==!1&&!ta(e),_2=e=>{const n=[];let o=e;for(;o;){if(wt(o)&&o.data!==Jc||o.childNodes.length>1)return[];Vt(o)&&n.push(o),o=o.firstChild}return n},vm=e=>_2(e).length>0,rf=e=>Gl(e.dom)&&vm(e.dom),rg=wl,e0=sv,Yi=E2,sh=x2,lk=e=>ls(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,Cp=(e,n)=>{let o=n;for(;o;){if(Vt(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},Mx=(e,n,o,r)=>{const a=n.data;if(e){for(let u=o;u>0;u--)if(r(a.charAt(u-1)))return u}else for(let u=o;u<a.length;u++)if(r(a.charAt(u)))return u;return-1},Nx=(e,n,o)=>Mx(e,n,o,r=>Qg(r)||pm(r)),Px=(e,n,o)=>Mx(e,n,o,Q1),Bx=(e,n,o,r,a,u)=>{let f;const b=e.getParent(o,N=>i1(N)||e.isBlock(N)),y=De(b)?b:n,x=(N,B,W)=>{const X=Uf(e),q=a?X.backwards:X.forwards;return F.from(q(N,B,(ne,ge)=>rg(ne.parentNode)?-1:(f=ne,W(a,ne,ge)),y))};return x(o,r,Nx).bind(N=>u?x(N.container,N.offset+(a?-1:0),Px):F.some(N)).orThunk(()=>f?F.some({container:f,offset:a?0:f.length}):F.none())},t0=(e,n,o,r,a)=>{const u=r[a];wt(r)&&vo(r.data)&&u&&(r=u);const f=e0(e,r);for(let b=0;b<f.length;b++)for(let y=0;y<n.length;y++){const x=n[y];if(!(De(x.collapsed)&&x.collapsed!==o.collapsed)&&fu(x)&&e.is(f[b],x.selector))return f[b]}return r},ja=(e,n,o,r)=>{var a;let u=o;const f=e.getRoot(),b=n[0];if(bm(b)&&(u=b.wrapper?null:e.getParent(o,b.block,f)),!u){const y=(a=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&a!==void 0?a:f;u=e.getParent(wt(o)?o.parentNode:o,x=>x!==f&&sh(e.schema,x),y)}if(u&&bm(b)&&b.wrapper&&(u=e0(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!ql(u,"br")););return u||o},gu=(e,n,o,r)=>{const a=o.parentNode;return De(o[r])?!1:a===n||On(a)||e.isBlock(a)?!0:gu(e,n,a,r)},Xi=(e,n,o,r,a,u)=>{let f=o;const b=a?"previousSibling":"nextSibling",y=e.getRoot();if(wt(o)&&!Yi(o)&&(a?r>0:r<o.data.length))return o;for(;f;){if(i1(f))return o;if(!n[0].block_expand&&e.isBlock(f))return u?f:o;for(let x=f[b];x;x=x[b]){const R=wt(x)&&!gu(e,y,x,b);if(!rg(x)&&!lk(x)&&!Yi(x,R))return f}if(f===y||f.parentNode===y){o=f;break}f=f.parentNode}return o},rh=e=>rg(e.parentNode)||rg(e),cf=(e,n,o,r={})=>{const{includeTrailingSpace:a=!1,expandToBlock:u=!0}=r,f=e.getParent(n.commonAncestorContainer,W=>i1(W)),b=De(f)?f:e.getRoot();let{startContainer:y,startOffset:x,endContainer:R,endOffset:N}=n;const B=o[0];return Vt(y)&&y.hasChildNodes()&&(y=Kt(y,x),wt(y)&&(x=0)),Vt(R)&&R.hasChildNodes()&&(R=Kt(R,n.collapsed?N:N-1),wt(R)&&(N=R.data.length)),y=Cp(e,y),R=Cp(e,R),rh(y)&&(y=rg(y)?y:y.parentNode,n.collapsed?y=y.previousSibling||y:y=y.nextSibling||y,wt(y)&&(x=n.collapsed?y.length:0)),rh(R)&&(R=rg(R)?R:R.parentNode,n.collapsed?R=R.nextSibling||R:R=R.previousSibling||R,wt(R)&&(N=n.collapsed?0:R.length)),n.collapsed&&(Bx(e,b,y,x,!0,a).each(({container:q,offset:ne})=>{y=q,x=ne}),Bx(e,b,R,N,!1,a).each(({container:q,offset:ne})=>{R=q,N=ne})),(ta(B)||B.block_expand)&&((!ta(B)||!wt(y)||x===0)&&(y=Xi(e,o,y,x,!0,u)),(!ta(B)||!wt(R)||N===R.data.length)&&(R=Xi(e,o,R,N,!1,u))),yp(B)&&(y=t0(e,o,n,y,"previousSibling"),R=t0(e,o,n,R,"nextSibling")),(bm(B)||fu(B))&&(y=ja(e,o,y,"previousSibling"),R=ja(e,o,R,"nextSibling"),bm(B)&&(e.isBlock(y)||(y=Xi(e,o,y,x,!0,u),wt(y)&&(x=0)),e.isBlock(R)||(R=Xi(e,o,R,N,!1,u),wt(R)&&(N=R.data.length)))),Vt(y)&&y.parentNode&&(x=e.nodeIndex(y),y=y.parentNode),Vt(R)&&R.parentNode&&(N=e.nodeIndex(R)+1,R=R.parentNode),{startContainer:y,startOffset:x,endContainer:R,endOffset:N}},n0=(e,n,o)=>{var r;const a=n.startOffset,u=Kt(n.startContainer,a),f=n.endOffset,b=Kt(n.endContainer,f-1),y=ne=>{const ge=ne[0];wt(ge)&&ge===u&&a>=ge.data.length&&ne.splice(0,1);const Se=ne[ne.length-1];return f===0&&ne.length>0&&Se===b&&wt(Se)&&ne.splice(ne.length-1,1),ne},x=(ne,ge,Se)=>{const Te=[];for(;ne&&ne!==Se;ne=ne[ge])Te.push(ne);return Te},R=(ne,ge)=>e.getParent(ne,Se=>Se.parentNode===ge,ge),N=(ne,ge,Se)=>{const Te=Se?"nextSibling":"previousSibling";for(let Me=ne,lt=Me.parentNode;Me&&Me!==ge;Me=lt){lt=Me.parentNode;const At=x(Me===ne?Me:Me[Te],Te);At.length&&(Se||At.reverse(),o(y(At)))}};if(u===b)return o(y([u]));const B=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return N(u,B,!0);if(e.isChildOf(b,u))return N(b,B);const W=R(u,B)||u,X=R(b,B)||b;N(u,W,!0);const q=x(W===u?W:W.nextSibling,"nextSibling",X===b?X.nextSibling:X);q.length&&o(y(q)),N(b,X)},A2=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],uk=e=>Is(e)&&Kh(e)===Jc,O2=(e,n,o,r)=>xa(n).fold(()=>"skipping",a=>r==="br"||uk(n)?"valid":Gw(n)?"existing":Gl(n.dom)?"caret":Tt(A2,u=>La(n,u))?"valid-block":!sg(e,o,r)||!sg(e,ee(a),o)?"invalid-child":"valid"),dk=(e,n)=>{const o=cf(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},cv=(e,n,o,r,a,u)=>{const{uid:f=n,...b}=o;Nl(e,C1()),Rr(e,`${Ng()}`,f),Rr(e,`${Hf()}`,r);const{attributes:y={},classes:x=[]}=a(f,b);if(Kr(e,y),vy(e,x),u){x.length>0&&Rr(e,`${zf()}`,x.join(","));const R=Yn(y);R.length>0&&Rr(e,`${Vf()}`,R.join(","))}},D2=e=>{Vd(e,C1()),Ts(e,`${Ng()}`),Ts(e,`${Hf()}`),Ts(e,`${am()}`);const n=Tr(e,`${Vf()}`).map(r=>r.split(",")).getOr([]),o=Tr(e,`${zf()}`).map(r=>r.split(",")).getOr([]);fe(n,r=>Ts(e,r)),Jw(e,o),Ts(e,`${zf()}`),Ts(e,`${Vf()}`)},$x=(e,n,o,r,a)=>{const u=me.fromTag("span",e);return cv(u,n,o,r,a,!1),u},av=(e,n,o,r,a,u)=>{const f=[],b=$x(e.getDoc(),o,u,r,a),y=Ur(),x=()=>{y.clear()},R=()=>y.get().getOrThunk(()=>{const X=im(b);return f.push(X),y.set(X),X}),N=X=>{fe(X,B)},B=X=>{switch(O2(e,X,"span",ee(X))){case"invalid-child":{x();const ne=zc(X);N(ne),x();break}case"valid-block":{x(),cv(X,o,u,r,a,!0);break}case"valid":{const ne=R();Rf(X,ne);break}}},W=X=>{const q=et(X,me.fromDom);N(q)};return n0(e.dom,n,X=>{x(),W(X)}),f},R2=(e,n,o,r)=>{e.undoManager.transact(()=>{const a=e.selection,u=a.getRng(),f=eh(e).length>0,b=Bg("mce-annotation");if(u.collapsed&&!f&&dk(e,u),a.getRng().collapsed&&!f){const y=$x(e.getDoc(),b,r,n,o.decorate);Au(y,fc),a.getRng().insertNode(y.dom),a.select(y.dom)}else Ax(a,!1,()=>{w2(e,y=>{av(e,y,b,n,o.decorate,r)})})})},tr=e=>{const n=Kw();qw(e,n);const o=mb(e,n),r=Kc("span"),a=u=>{fe(u,f=>{r(f)?Ja(f):D2(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(b=>{R2(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{jw(e,F.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();a(f),e.selection.moveToBookmark(b)})},removeAll:u=>{const f=e.selection.getBookmark();Ct(Gh(e,u),(b,y)=>{a(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=Gh(e,u);return uo(f,b=>et(b,y=>y.dom))}}},xd=e=>({getBookmark:Qe(ev,e),moveToBookmark:Qe(b2,e)});xd.isBookmarkNode=wl;const Fx=(e,n,o)=>o.collapsed?!1:Tt(o.getClientRects(),r=>cS(r,e,n)),Ix=()=>me.fromDom(document),M2=(e,n=!1)=>e.dom.focus({preventScroll:n}),iv=e=>{const n=Pl(e).dom;return e.dom===n.activeElement},N2=(e=Ix())=>F.from(e.dom.activeElement).map(me.fromDom),wp=e=>N2(Pl(e)).filter(n=>e.dom.contains(n.dom)),Lx={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},lv=Cs.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),mk=(e,n,o,r)=>e.fold(n,o,r),o0=e=>e.fold(Mo,Mo,Mo),Hx=lv.before,P2=lv.on,zx=lv.after,af={before:Hx,on:P2,after:zx,cata:mk,getStart:o0},uv=Cs.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ji=e=>uv.exact(e.start,e.soffset,e.finish,e.foffset),si=e=>e.match({domRange:n=>me.fromDom(n.startContainer),relative:(n,o)=>af.getStart(n),exact:(n,o,r,a)=>n}),Sp=uv.domRange,o5=uv.relative,fk=uv.exact,B2=e=>{const n=si(e);return ud(n)},Qo=Lx.create,xp={domRange:Sp,relative:o5,exact:fk,exactFromRange:Ji,getWin:B2,range:Qo},$2=(e,n)=>{const o=Is(n)?Kh(n).length:zc(n).length+1;return e>o?o:e<0?0:e},F2=e=>xp.range(e.start,$2(e.soffset,e.start),e.finish,$2(e.foffset,e.finish)),Vx=(e,n)=>!Xd(n.dom)&&(Mr(e,n)||ns(e,n)),Ux=e=>n=>Vx(e,n.start)&&Vx(e,n.finish),gk=e=>e.inline||cn.browser.isFirefox(),s5=e=>xp.range(me.fromDom(e.startContainer),e.startOffset,me.fromDom(e.endContainer),e.endOffset),hk=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?F.none():F.from(n.getRangeAt(0))).map(s5)},pk=e=>{const n=ud(e);return hk(n.dom).filter(Ux(e))},dv=(e,n)=>F.from(n).filter(Ux(e)).map(F2),I2=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),F.some(n)}catch{return F.none()}},mv=e=>{const n=gk(e)?pk(me.fromDom(e.getBody())):F.none();e.bookmark=n.isSome()?n:e.bookmark},bk=e=>(e.bookmark?e.bookmark:F.none()).bind(o=>dv(me.fromDom(e.getBody()),o)).bind(I2),r5=e=>{bk(e).each(n=>e.selection.setRng(n))},L2={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},vk=(e,n)=>(Go(n)||(n=0),setTimeout(e,n)),yk=(e,n)=>(Go(n)||(n=0),setInterval(e,n)),rn={setEditorTimeout:(e,n,o)=>vk(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=yk(()=>{e.removed?clearInterval(r):n()},o);return r}},Wx=e=>e.type==="nodechange"&&e.selectionChange,Zx=(e,n)=>{const o=()=>{n.throttle()};Sr.DOM.bind(document,"mouseup",o),e.on("remove",()=>{Sr.DOM.unbind(document,"mouseup",o)})},H2=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},s0=(e,n)=>{H2(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{Wx(o)||mv(e)})},Ck=e=>{const n=jh(()=>{mv(e)},0);e.on("init",()=>{e.inline&&Zx(e,n),s0(e,n)}),e.on("remove",()=>{n.cancel()})};let Ep;const z2=Sr.DOM,wk=e=>Vt(e)&&L2.isEditorUIElement(e),r0=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},fv=(e,n)=>{const o=qy(e);return z2.getParent(n,a=>wk(a)||(o?e.dom.is(a,o):!1))!==null},V2=e=>{try{const n=Pl(me.fromDom(e.getElement()));return N2(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},l=(e,n)=>{const o=n.editor;Ck(o);const r=(a,u)=>{if(z1(a)&&a.inline!==!0){const f=me.fromDom(a.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",()=>{const a=e.focusedEditor;r0(V2(o))&&r(o,Nl),a!==o&&(a&&a.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:a}),o.focus(!0))}),o.on("focusout",()=>{rn.setEditorTimeout(o,()=>{const a=e.focusedEditor;(!r0(V2(o))||a!==o)&&r(o,Vd),!fv(o,V2(o))&&a===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Ep||(Ep=a=>{const u=e.activeEditor;u&&kh(a).each(f=>{const b=f;b.ownerDocument===document&&b!==document.body&&!fv(u,b)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},z2.bind(document,"focusin",Ep))},m=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&Ep&&(z2.unbind(document,"focusin",Ep),Ep=null)},p=e=>{e.on("AddEditor",Qe(l,e)),e.on("RemoveEditor",Qe(m,e))},v=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),T=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="false")!==null,D=e=>e.collapsed?F.from(Kt(e.startContainer,e.startOffset)).map(me.fromDom):F.none(),I=(e,n)=>D(n).bind(o=>t3(o)?F.some(o):Mr(e,o)?F.none():F.some(e)),G=(e,n)=>{I(me.fromDom(e.getBody()),n).bind(o=>Wc(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},K=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},pe=e=>iv(e)||wp(e).isSome(),_e=e=>De(e.iframeElement)&&iv(me.fromDom(e.iframeElement)),ft=e=>{const n=e.getBody();return n&&pe(me.fromDom(n))},Ut=e=>{const n=Pl(me.fromDom(e.getElement()));return N2(n).filter(o=>!r0(o.dom)&&fv(e,o.dom)).isSome()},kt=e=>e.inline?ft(e):_e(e),_t=e=>kt(e)||Ut(e),mn=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const a=f=>{bk(f).each(b=>{f.selection.setRng(b),r=b})};!kt(e)&&e.hasEditableRoot()&&a(e);const u=v(e,n.getNode());if(u&&e.dom.isChildOf(u,o)){T(e,u)||K(o),K(u),e.hasEditableRoot()||a(e),G(e,r),ht(e);return}e.inline||(cn.browser.isOpera()||K(o),e.getWin().focus()),(cn.browser.isFirefox()||e.inline)&&(K(o),G(e,r)),ht(e)},ht=e=>e.editorManager.setActive(e),$n=(e,n)=>{e.removed||(n?ht(e):mn(e))},rt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||rt.metaKeyPressed(e),metaKeyPressed:e=>cn.os.isMacOS()||cn.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Xt="data-mce-selected",Ms="table,img,figure.image,hr,video,span.mce-preview-object,details",Ns=Math.abs,Sn=Math.round,nr={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},yi=e=>e.type==="longpress"||e.type.indexOf("touch")===0,cg=(e,n)=>{const o=n.dom,r=n.getDoc(),a=document,u=n.getBody();let f,b,y,x,R,N,B,W,X,q,ne,ge,Se,Te,Me;const lt=ut=>De(ut)&&(Bh(ut)||o.is(ut,"figure.image")),At=ut=>Xc(ut)||o.hasClass(ut,"mce-preview-object"),$t=(ut,Yt)=>{if(yi(ut)){const qn=ut.touches[0];return lt(ut.target)&&!Fx(qn.clientX,qn.clientY,Yt)}else return lt(ut.target)&&!Fx(ut.clientX,ut.clientY,Yt)},qe=ut=>{const Yt=ut.target;$t(ut,n.selection.getRng())&&!ut.isDefaultPrevented()&&n.selection.select(Yt)},Le=ut=>o.hasClass(ut,"mce-preview-object")&&De(ut.firstElementChild)?[ut,ut.firstElementChild]:o.is(ut,"figure.image")?[ut.querySelector("img")]:[ut],dt=ut=>{const Yt=Bb(n);return!Yt||n.mode.isReadOnly()||ut.getAttribute("data-mce-resize")==="false"||ut===n.getBody()?!1:o.hasClass(ut,"mce-preview-object")&&De(ut.firstElementChild)?La(me.fromDom(ut.firstElementChild),Yt):La(me.fromDom(ut),Yt)},Qt=(ut,Yt)=>{if(At(Yt))return ut.create("img",{src:cn.transparentSrc});if(cu(Yt)){const Ks=Ln(x.name,"n")?Ht:Jt,Xo=Yt.cloneNode(!0);return Ks(ut.select("tr",Xo)).each(Ka=>{const Ql=ut.select("td,th",Ka);ut.setStyle(Ka,"height",null),fe(Ql,Om=>ut.setStyle(Om,"height",null))}),Xo}else return Yt.cloneNode(!0)},_n=(ut,Yt,qn)=>{if(De(qn)){const Ks=Le(ut);fe(Ks,Xo=>{Xo.style[Yt]||!n.schema.isValid(Xo.nodeName.toLowerCase(),Yt)?o.setStyle(Xo,Yt,qn):o.setAttrib(Xo,Yt,""+qn)})}},Oo=(ut,Yt,qn)=>{_n(ut,"width",Yt),_n(ut,"height",qn)},Lo=ut=>{let Yt,qn,Ks,Xo,Ka;Yt=ut.screenX-N,qn=ut.screenY-B,ge=Yt*x[2]+W,Se=qn*x[3]+X,ge=ge<5?5:ge,Se=Se<5?5:Se,(lt(f)||At(f))&&US(n)!==!1?Ks=!rt.modifierPressed(ut):Ks=rt.modifierPressed(ut),Ks&&(Ns(Yt)>Ns(qn)?(Se=Sn(ge*q),ge=Sn(Se/q)):(ge=Sn(Se/q),Se=Sn(ge*q))),Oo(b,ge,Se),Xo=x.startPos.x+Yt,Ka=x.startPos.y+qn,Xo=Xo>0?Xo:0,Ka=Ka>0?Ka:0,o.setStyles(y,{left:Xo,top:Ka,display:"block"}),y.innerHTML=ge+" &times; "+Se,Yt=u.scrollWidth-Te,qn=u.scrollHeight-Me,Yt+qn!==0&&o.setStyles(y,{left:Xo-Yt,top:Ka-qn}),ne||(OS(n,f,W,X,"corner-"+x.name),ne=!0)},ks=()=>{const ut=ne;ne=!1,ut&&(_n(f,"width",ge),_n(f,"height",Se)),o.unbind(r,"mousemove",Lo),o.unbind(r,"mouseup",ks),a!==r&&(o.unbind(a,"mousemove",Lo),o.unbind(a,"mouseup",ks)),o.remove(b),o.remove(y),o.remove(R),Us(f),ut&&(DS(n,f,ge,Se,"corner-"+x.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},Us=ut=>{An();const Yt=o.getPos(ut,u),qn=Yt.x,Ks=Yt.y,Xo=ut.getBoundingClientRect(),Ka=Xo.width||Xo.right-Xo.left,Ql=Xo.height||Xo.bottom-Xo.top;f!==ut&&(Na(),f=ut,ge=Se=0);const Om=n.dispatch("ObjectSelected",{target:ut});dt(ut)&&!Om.isDefaultPrevented()?Ct(nr,(Al,Bd)=>{const Cu=tl=>{const $d=Le(f)[0];N=tl.screenX,B=tl.screenY,W=$d.clientWidth,X=$d.clientHeight,q=X/W,x=Al,x.name=Bd,x.startPos={x:Ka*Al[0]+qn,y:Ql*Al[1]+Ks},Te=u.scrollWidth,Me=u.scrollHeight,R=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(R,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=Qt(o,f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:qn,top:Ks,margin:0}),Oo(b,Ka,Ql),b.removeAttribute(Xt),u.appendChild(b),o.bind(r,"mousemove",Lo),o.bind(r,"mouseup",ks),a!==r&&(o.bind(a,"mousemove",Lo),o.bind(a,"mouseup",ks)),y=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},W+" &times; "+X)};let el=o.get("mceResizeHandle"+Bd);el&&o.remove(el),el=o.add(u,"div",{id:"mceResizeHandle"+Bd,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Bd+"-resize; margin:0; padding:0"}),o.bind(el,"mousedown",tl=>{tl.stopImmediatePropagation(),tl.preventDefault(),Cu(tl)}),Al.elm=el,o.setStyles(el,{left:Ka*Al[0]+qn-el.offsetWidth/2,top:Ql*Al[1]+Ks-el.offsetHeight/2})}):Na(!1)},Ac=jh(Us,0),Na=(ut=!0)=>{Ac.cancel(),An(),f&&ut&&f.removeAttribute(Xt),Ct(nr,(Yt,qn)=>{const Ks=o.get("mceResizeHandle"+qn);Ks&&(o.unbind(Ks),o.remove(Ks))})},Pa=(ut,Yt)=>o.isChildOf(ut,Yt),It=ut=>{if(ne||n.removed||n.composing)return;const Yt=ut.type==="mousedown"?ut.target:e.getNode(),qn=pn(me.fromDom(Yt),Ms).map(Xo=>Xo.dom).filter(Xo=>o.isEditable(Xo.parentElement)||Xo.nodeName==="IMG"&&o.isEditable(Xo)).getOrUndefined(),Ks=De(qn)?o.getAttrib(qn,Xt,"1"):"1";if(fe(o.select(`img[${Xt}],hr[${Xt}]`),Xo=>{Xo.removeAttribute(Xt)}),De(qn)&&Pa(qn,u)&&_t(n)){Ss();const Xo=e.getStart(!0);if(Pa(Xo,qn)&&Pa(e.getEnd(!0),qn)){o.setAttrib(qn,Xt,Ks),Ac.throttle(qn);return}}Na()},An=()=>{Ct(nr,ut=>{ut.elm&&(o.unbind(ut.elm),delete ut.elm)})},Ss=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{Ss(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",It),n.on("keyup compositionend",ut=>{f&&f.nodeName==="TABLE"&&It(ut)}),n.on("hide blur",Na),n.on("contextmenu longpress",qe,!0)}),n.on("remove",An),{isResizable:dt,showResizeRect:Us,hideResizeRect:Na,updateResizeRect:It,destroy:()=>{Ac.cancel(),f=b=R=null}}},Wu=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},qo=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},Vs=(e,n,o)=>{const r=e.document.createRange();return Wu(r,n),qo(r,o),r},Ga=(e,n,o,r,a)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,a),u},na=Cs.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),hu=(e,n,o)=>n(me.fromDom(o.startContainer),o.startOffset,me.fromDom(o.endContainer),o.endOffset),qa=(e,n)=>n.match({domRange:o=>({ltr:yt(o),rtl:F.none}),relative:(o,r)=>({ltr:Ve(()=>Vs(e,o,r)),rtl:Ve(()=>F.some(Vs(e,r,o)))}),exact:(o,r,a,u)=>({ltr:Ve(()=>Ga(e,o,r,a,u)),rtl:Ve(()=>F.some(Ga(e,a,u,o,r)))})}),Zu=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(a=>a.collapsed===!1).map(a=>na.rtl(me.fromDom(a.endContainer),a.endOffset,me.fromDom(a.startContainer),a.startOffset)).getOrThunk(()=>hu(e,na.ltr,o)):hu(e,na.ltr,o)},Ci=(e,n)=>{const o=qa(e,n);return Zu(e,o)};na.ltr,na.rtl;const U2=(e,n,o)=>{var r;return F.from((r=e.caretPositionFromPoint)===null||r===void 0?void 0:r.call(e,n,o)).bind(a=>{if(a.offsetNode===null)return F.none();const u=e.createRange();return u.setStart(a.offsetNode,a.offset),u.collapse(),F.some(u)})},c0=(e,n,o)=>{var r;return F.from((r=e.caretRangeFromPoint)===null||r===void 0?void 0:r.call(e,n,o))},ym=(e,n,o)=>e.caretPositionFromPoint?U2(e,n,o):e.caretRangeFromPoint?c0(e,n,o):F.none(),oa=(e,n,o)=>{const r=e.document;return ym(r,n,o).map(a=>Lx.create(me.fromDom(a.startContainer),a.startOffset,me.fromDom(a.endContainer),a.endOffset))},lf=(e,n)=>{const o=ee(e);return o==="input"?af.after(e):We(["br","img"],o)?n===0?af.before(e):af.after(e):af.on(e,n)},Sk=(e,n)=>{const o=e.fold(af.before,lf,af.after),r=n.fold(af.before,lf,af.after);return xp.relative(o,r)},W2=(e,n,o,r)=>{const a=lf(e,n),u=lf(o,r);return xp.relative(a,u)},xk=e=>e.match({domRange:n=>{const o=me.fromDom(n.startContainer),r=me.fromDom(n.endContainer);return W2(o,n.startOffset,r,n.endOffset)},relative:Sk,exact:W2}),Z2=(e,n)=>{const r=document.createDocumentFragment();return fe(e,a=>{r.appendChild(a.dom)}),me.fromDom(r)},j2=e=>{const n=xp.getWin(e).dom,o=(a,u,f,b)=>Ga(n,a,u,f,b),r=xk(e);return Ci(n,r).match({ltr:o,rtl:o})},jx=(e,n,o)=>oa(e,n,o),a0=(e,n,o)=>{const r=ud(me.fromDom(o));return jx(r.dom,e,n).map(a=>{const u=o.createRange();return u.setStart(a.start.dom,a.soffset),u.setEnd(a.finish.dom,a.foffset),u}).getOrUndefined()},Ek=(e,n)=>De(e)&&De(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,c5=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},Gx=(e,n,o)=>c5(e,n,o)!==null,Tk=(e,n,o)=>Gx(e,n,r=>r.nodeName===o),kk=(e,n)=>uu(e)&&!Gx(e,n,Gl),_k=(e,n,o)=>{const r=n.parentNode;if(r){const a=new da(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=a[o?"prev":"next"]();)if(ls(u))return!0}return!1},a5=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},i5=(e,n)=>{let o=n;for(;o&&o!==e;){if(ds(o))return!0;o=o.parentNode}return!1},gv=(e,n,o,r,a)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=a.parentNode;let y,x;if(!b)return F.none();const R=e.getParent(b,e.isBlock)||u;if(r&&ls(a)&&n&&e.isEmpty(R))return F.some(Ue(b,e.nodeIndex(a)));const N=new da(a,R);for(;x=N[r?"prev":"next"]();){if(e.getContentEditableParent(x)==="false"||kk(x,u))return F.none();if(wt(x)&&x.data.length>0)return Tk(x,u,"A")?F.none():F.some(Ue(x,r?x.data.length:0));if(e.isBlock(x)||f[x.nodeName.toLowerCase()])return F.none();y=x}return Nc(y)?F.none():o&&y?F.some(Ue(y,0)):F.none()},l5=(e,n,o,r)=>{const a=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,y=o?r.startOffset:r.endOffset;const x=Vt(b)&&y===b.childNodes.length,R=e.schema.getNonEmptyElements();let N=o;if(uu(b))return F.none();if(Vt(b)&&y>b.childNodes.length-1&&(N=!1),Pf(b)&&(b=a,y=0),b===a){if(N&&(u=b.childNodes[y>0?y-1:0],u&&(uu(u)||R[u.nodeName]||cu(u))))return F.none();if(b.hasChildNodes()){if(y=Math.min(!N&&y>0?y-1:y,b.childNodes.length-1),b=b.childNodes[y],y=wt(b)&&x?b.data.length:0,!n&&b===a.lastChild&&cu(b)||i5(a,b)||uu(b)||Du(b))return F.none();if(b.hasChildNodes()&&!cu(b)){u=b;const B=new da(b,a);do{if(ds(u)||uu(u)){f=!1;break}if(wt(u)&&u.data.length>0){y=N?0:u.data.length,b=u,f=!0;break}if(R[u.nodeName.toLowerCase()]&&!Hl(u)){y=e.nodeIndex(u),b=u.parentNode,N||y++,f=!0;break}}while(u=N?B.next():B.prev())}}}return n&&(wt(b)&&y===0&&gv(e,x,n,!0,b).each(B=>{b=B.container(),y=B.offset(),f=!0}),Vt(b)&&(u=b.childNodes[y],u||(u=b.childNodes[y-1]),u&&ls(u)&&!a5(u,"A")&&!_k(e,u,!1)&&!_k(e,u,!0)&&gv(e,x,n,!0,u).each(B=>{b=B.container(),y=B.offset(),f=!0}))),N&&!n&&wt(b)&&y===b.data.length&&gv(e,x,n,!1,b).each(B=>{b=B.container(),y=B.offset(),f=!0}),f&&b?F.some(Ue(b,y)):F.none()},G2=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),a=Ue.fromRangeStart(n);return l5(e,o,!0,r).each(u=>{(!o||!Ue.isAbove(a,u))&&r.setStart(u.container(),u.offset())}),o||l5(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),Ek(n,r)?F.none():F.some(r)},qx=(e,n)=>e.splitText(n),q2=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,a=e.endOffset;if(n===r&&wt(n)){if(o>0&&o<n.data.length)if(r=qx(n,o),n=r.previousSibling,a>o){a=a-o;const u=qx(r,a).previousSibling;n=r=u,a=u.data.length,o=0}else a=0}else if(wt(n)&&o>0&&o<n.data.length&&(n=qx(n,o),o=0),wt(r)&&a>0&&a<r.data.length){const u=qx(r,a).previousSibling;r=u,a=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:a}},Tp=e=>({walk:(u,f)=>n0(e,u,f),split:q2,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=cf(e,u,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),y=e.createRng();return y.setStart(b.startContainer,b.startOffset),y.setEnd(b.endContainer,b.endOffset),y}return u},normalize:u=>G2(e,u).fold(Re,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});Tp.compareRanges=Ek,Tp.getCaretRangeFromPoint=a0,Tp.getSelectedNode=A1,Tp.getNode=Kt;const u5=((e,n)=>{const o=(b,y)=>{if(!Go(y)&&!y.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+y);const x=b.dom;md(x)&&(x.style[e]=y+"px")},r=b=>{const y=n(b);if(y<=0||y===null){const x=Vr(b,e);return parseFloat(x)||0}return y},a=r,u=(b,y)=>Wn(y,(x,R)=>{const N=Vr(b,R),B=N===void 0?0:parseInt(N,10);return isNaN(B)?x:x+B},0);return{set:o,get:r,getOuter:a,aggregate:u,max:(b,y,x)=>{const R=u(b,x);return y>R?y-R:0}}})("height",e=>{const n=e.dom;return Bl(e)?n.getBoundingClientRect().height:n.offsetHeight}),d5=e=>u5.get(e),m5=(e,n)=>e.view(n).fold(yt([]),r=>{const a=e.owner(r),u=m5(e,a);return[r].concat(u)}),DI=(e,n)=>{const o=n.owner(e);return m5(n,o)};var RI=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?F.none():F.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(me.fromDom)},owner:e=>ru(e)});const MI=e=>{const n=Ix(),o=bn(n),r=DI(e,RI),a=ao(e),u=hs(r,(f,b)=>{const y=ao(b);return{left:f.left+y.left,top:f.top+y.top}},{left:0,top:0});return be(u.left+a.left+o.left,u.top+a.top+o.top)},Ak=e=>ee(e)==="textarea",NI=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),Kx=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},f5=(e,n)=>{const o=zc(e);if(o.length===0||Ak(e))return{element:e,offset:n};if(n<o.length&&!Ak(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return Ak(r)?{element:e,offset:n}:ee(r)==="img"?{element:r,offset:1}:Is(r)?{element:r,offset:Kh(r).length}:{element:r,offset:zc(r).length}}},g5=(e,n)=>{const o=go(e),r=d5(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},h5=(e,n)=>{const o=f5(e,n),r=me.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Jc+"</span>");return Ha(o.element,r),g5(r,()=>zs(r))},p5=e=>g5(me.fromDom(e),Bt),b5=(e,n,o,r)=>{BI(e,(a,u)=>PI(e,n,o,r),o)},v5=(e,n,o,r,a)=>{const u={elm:r.element.dom,alignToTop:a};if(NI(e,u))return;const f=bn(n).top;o(e,n,f,r,a),Kx(e,u)},PI=(e,n,o,r)=>{const a=me.fromDom(e.getBody()),u=me.fromDom(e.getDoc());Mc(a);const f=h5(me.fromDom(o.startContainer),o.startOffset);v5(e,u,n,f,r),f.cleanup()},y5=(e,n,o,r)=>{const a=me.fromDom(e.getDoc());v5(e,a,o,p5(n),r)},BI=(e,n,o)=>{const r=o.startContainer,a=o.startOffset,u=o.endContainer,f=o.endOffset;n(me.fromDom(r),me.fromDom(u));const b=e.dom.createRng();b.setStart(r,a),b.setEnd(u,f),e.selection.setRng(o)},Yx=(e,n,o,r,a)=>{const u=n.pos;if(r)cr(u.left,u.top,a);else{const f=u.top-o+n.height;cr(-e.getBody().getBoundingClientRect().left,f,a)}},Ok=(e,n,o,r,a,u)=>{const f=r+o,b=a.pos.top,y=a.bottom,x=y-b>=r;b<o?Yx(e,a,r,u!==!1,n):b>f?Yx(e,a,r,x?u!==!1:u===!0,n):y>f&&!x&&Yx(e,a,r,u===!0,n)},K2=(e,n,o,r,a)=>{const u=ud(n).dom.innerHeight;Ok(e,n,o,u,r,a)},C5=(e,n,o,r,a)=>{const u=ud(n).dom.innerHeight;Ok(e,n,o,u,r,a);const f=MI(r.element),b=Oh(window);f.top<b.y?Br(r.element,a!==!1):f.top>b.bottom&&Br(r.element,a===!0)},$I=(e,n,o)=>b5(e,K2,n,o),Dk=(e,n,o)=>y5(e,n,K2,o),FI=(e,n,o)=>b5(e,C5,n,o),w5=(e,n,o)=>y5(e,n,C5,o),S5=(e,n,o)=>{(e.inline?Dk:w5)(e,n,o)},hv=(e,n,o)=>{(e.inline?$I:FI)(e,n,o)},x5=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),E5=(e,n,o,r,a)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return F.from(u).map(me.fromDom).map(b=>!r||!n.collapsed?_u(b,a(b,f)).getOr(b):b).bind(b=>po(b)?F.some(b):xa(b).filter(po)).map(b=>b.dom).getOr(e)},T5=(e,n,o=!1)=>E5(e,n,!0,o,(r,a)=>Math.min(dd(r),a)),k5=(e,n,o=!1)=>E5(e,n,!1,o,(r,a)=>a>0?a-1:a),Y2=(e,n)=>{const o=e;for(;e&&wt(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},_5=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const a=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-a<2&&o.hasChildNodes()&&(f=o.childNodes[a]),wt(o)&&wt(r)&&(o.length===a?o=Y2(o.nextSibling,!0):o=o.parentNode,u===0?r=Y2(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=wt(f)?f.parentNode:f;return pl(b)?b:e},A5=(e,n,o,r)=>{const a=[],u=e.getRoot(),f=e.getParent(o||T5(u,n,n.collapsed),e.isBlock),b=e.getParent(r||k5(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&a.push(f),f&&b&&f!==b){let y;const x=new da(f,u);for(;(y=x.next())&&y!==b;)e.isBlock(y)&&a.push(y)}return b&&f!==b&&b!==u&&a.push(b),a},O5=(e,n,o)=>F.from(n).bind(r=>F.from(r.parentNode).map(a=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(a,u),f.setEnd(a,u+1),o&&(C2(e,f,r,!0),C2(e,f,r,!1)),f})),Xx=(e,n)=>et(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),II={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Jx=(e,n,o)=>{const r=o?"lastChild":"firstChild",a=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[a];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[a],u)return u}},LI=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!hl(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},D5=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class Sl{static create(n,o){const r=new Sl(n,II[n]||1);return o&&Ct(o,(a,u)=>{r.attr(u,a)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!oe(n))return De(n)&&Ct(n,(u,f)=>{r.attr(f,u)}),r;const a=r.attributes;if(a){if(o!==void 0){if(o===null){if(n in a.map){delete a.map[n];let u=a.length;for(;u--;)if(a[u].name===n)return a.splice(u,1),r}return r}if(n in a.map){let u=a.length;for(;u--;)if(a[u].name===n){a[u].value=o;break}}else a.push({name:n,value:o});return a.map[n]=o,r}return a.map[n]}}clone(){const n=this,o=new Sl(n.name,n.type),r=n.attributes;if(r){const a=[];a.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(a[a.length]={name:b.name,value:b.value},a.map[b.name]=b.value)}o.attributes=a}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,a=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):a&&(a.next=r),o.lastChild===n?(o.lastChild=a,a&&(a.next=null)):r&&(r.prev=a),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const a=o.parent||this;return r?(o===a.firstChild?a.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===a.lastChild?a.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=a,n}getAll(n){const o=this,r=[];for(let a=o.firstChild;a;a=Jx(a,o))a.name===n&&r.push(a);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let a=n.firstChild;a;a=Jx(a,n))o.push(a);let r=o.length;for(;r--;){const a=o[r];a.parent=a.firstChild=a.lastChild=a.next=a.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var a;const u=this;let f=u.firstChild;if(D5(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||D5(f))return!1}if(f.type===8||f.type===3&&!LI(f)||f.type===3&&f.parent&&o[f.parent.name]&&hl((a=f.value)!==null&&a!==void 0?a:"")||r&&r(f))return!1}while(f=Jx(f,u));return!0}walk(n){return Jx(this,null,n)}}const HI=at.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),R5=e=>oe(e.nodeValue)&&e.nodeValue.includes(Jc),M5=e=>`${e.length===0?"":`${et(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,zI=(e,n)=>n.querySelectorAll(M5(e)),N5=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>R5(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),P5=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(R5(n)){const o=n.parentNode;return o&&Cn(HI,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),VI=e=>N5(e).nextNode()!==null,Qx=e=>P5(e).nextNode()!==null,B5=(e,n)=>n.querySelector(M5(e))!==null,$5=(e,n)=>{fe(zI(e,n),o=>{const r=me.fromDom(o);Hc(r,"data-mce-bogus")==="all"?zs(r):fe(e,a=>{Sc(r,a)&&Ts(r,a)})})},F5=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},UI=A(F5,N5),WI=A(F5,P5),I5=(e,n)=>{const o=[{condition:Qe(B5,n),action:Qe($5,n)},{condition:VI,action:UI},{condition:Qx,action:WI}];let r=e,a=!1;return fe(o,({condition:u,action:f})=>{u(r)&&(a||(r=e.cloneNode(!0),a=!0),f(r))}),r},L5=e=>{const n=ka(e,"[data-mce-bogus]");fe(n,o=>{Hc(o,"data-mce-bogus")==="all"?zs(o):Fr(o)?(Ha(o,me.fromText(Mh)),zs(o)):Ja(o)})},H5=e=>{const n=ka(e,"input");fe(n,o=>{Ts(o,"name")})},z5=(e,n)=>{const o=ea(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},ZI=(e,n)=>{const o=e.getDoc(),r=Pl(me.fromDom(e.getBody())),a=me.fromTag("div",o);Rr(a,"data-mce-bogus","all"),ro(a,{position:"fixed",left:"-9999999px",top:"0"}),Au(a,n.innerHTML),L5(a),H5(a);const u=Eh(r);Cr(u,a);const f=Ul(a.dom.innerText);return zs(a),f},V5=(e,n,o)=>{let r;return n.format==="raw"?r=at.trim(Ul(I5(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=ZI(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=z5(e,e.serializer.serialize(o,n)),n.format!=="text"&&!Gi(me.fromDom(o))&&oe(r)?at.trim(r):r},U5=(e,n)=>F.from(e.getBody()).fold(yt(n.format==="tree"?new Sl("body",11):""),o=>V5(e,n,o)),W5=at.makeMap,Z5=e=>{const n=[];e=e||{};const o=e.indent,r=W5(e.indent_before||""),a=W5(e.indent_after||""),u=rm.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,y,x)=>{if(o&&r[b]&&n.length>0){const R=n[n.length-1];R.length>0&&R!==`
`&&n.push(`
`)}if(n.push("<",b),y)for(let R=0,N=y.length;R<N;R++){const B=y[R];n.push(" ",B.name,'="',u(B.value,!0),'"')}if(!x||f?n[n.length]=">":n[n.length]=" />",x&&o&&a[b]&&n.length>0){const R=n[n.length-1];R.length>0&&R!==`
`&&n.push(`
`)}},end:b=>{let y;n.push("</",b,">"),o&&a[b]&&n.length>0&&(y=n[n.length-1],y.length>0&&y!==`
`&&n.push(`
`))},text:(b,y)=>{b.length>0&&(n[n.length]=y?b:u(b))},cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:b=>{n.push("<!--",b,"-->")},pi:(b,y)=>{y?n.push("<?",b," ",u(y),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},kp=(e={},n=Km())=>{const o=Z5(e);return e.validate="validate"in e?e.validate:!0,{serialize:a=>{const u=e.validate,f={3:y=>{var x;o.text((x=y.value)!==null&&x!==void 0?x:"",y.raw)},8:y=>{var x;o.comment((x=y.value)!==null&&x!==void 0?x:"")},7:y=>{o.pi(y.name,y.value)},10:y=>{var x;o.doctype((x=y.value)!==null&&x!==void 0?x:"")},4:y=>{var x;o.cdata((x=y.value)!==null&&x!==void 0?x:"")},11:y=>{let x=y;if(x=x.firstChild)do b(x);while(x=x.next)}};o.reset();const b=y=>{var x;const R=f[y.type];if(R)R(y);else{const N=y.name,B=N in n.getVoidElements();let W=y.attributes;if(u&&W&&W.length>1){const X=[];X.map={};const q=n.getElementRule(y.name);if(q){for(let ne=0,ge=q.attributesOrder.length;ne<ge;ne++){const Se=q.attributesOrder[ne];if(Se in W.map){const Te=W.map[Se];X.map[Se]=Te,X.push({name:Se,value:Te})}}for(let ne=0,ge=W.length;ne<ge;ne++){const Se=W[ne].name;if(!(Se in X.map)){const Te=W.map[Se];X.map[Se]=Te,X.push({name:Se,value:Te})}}W=X}}if(o.start(N,W,B),S(N))oe(y.value)&&o.text(y.value,!0),o.end(N);else if(!B){let X=y.firstChild;if(X){(N==="pre"||N==="textarea")&&X.type===3&&((x=X.value)===null||x===void 0?void 0:x[0])===`
`&&o.text(`
`,!0);do b(X);while(X=X.next)}o.end(N)}}};return a.type===1&&!e.inner?b(a):a.type===3?f[3](a):f[11](a),o.getContent()}}},j5=new Set;fe(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{j5.add(n)});const G5=new Set;fe(["background-color"],n=>{G5.add(n)});const q5=["font","text-decoration","text-emphasis"],jI=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),pv=(e,n)=>Yn(jI(e,n)),GI=e=>j5.has(e),qI=e=>G5.has(e),K5=(e,n)=>Tt(pv(e,n),o=>GI(o)),KI=(e,n)=>K5(e,n)&&Tt(pv(e,n),o=>qI(o)),YI=e=>jt(e,n=>Tt(q5,o=>Ln(n,o))),XI=(e,n,o)=>{const r=pv(e,n),a=pv(e,o),u=f=>{var b,y;const x=(b=e.getStyle(n,f))!==null&&b!==void 0?b:"",R=(y=e.getStyle(o,f))!==null&&y!==void 0?y:"";return Xn(x)&&Xn(R)&&x!==R};return Tt(r,f=>{const b=y=>Tt(y,x=>x===f);if(!b(a)&&b(q5)){const y=YI(a);return Tt(y,u)}else return u(f)})},Y5=(e,n,o)=>F.from(o.container()).filter(wt).exists(r=>{const a=e?0:-1;return n(r.data.charAt(o.offset()+a))}),Rk=Qe(Y5,!0,pm),Mk=Qe(Y5,!1,pm),JI=e=>{const n=e.container();return wt(n)&&(n.data.length===0||pb(n.data)&&xd.isBookmarkNode(n.parentNode))},_p=(e,n)=>o=>hm(e?0:-1,o).filter(n).isSome(),En=e=>Bh(e)&&Vr(me.fromDom(e),"display")==="block",Nk=e=>ds(e)&&!kg(e),X5=_p(!0,En),QI=_p(!1,En),i0=_p(!0,Xc),X2=_p(!1,Xc),J5=_p(!0,cu),Pk=_p(!1,cu),Ap=_p(!0,Nk),Op=_p(!1,Nk),eE=e=>e.slice(0,-1),Q5=(e,n,o)=>Mr(n,e)?eE(Af(e,r=>o(r)||ns(r,n))):[],e7=(e,n)=>Q5(e,n,Re),ch=(e,n)=>[e].concat(e7(e,n)),Kn=(e,n,o)=>Sd(e,n,o,JI),t7=e=>n=>e.isBlock(ee(n)),Qn=(e,n,o)=>Ho(ch(me.fromDom(n.container()),e),t7(o)),Bk=(e,n,o,r)=>Kn(e,n.dom,o).forall(a=>Qn(n,o,r).fold(()=>!Hu(a,o,n.dom),u=>!Hu(a,o,n.dom)&&Mr(u,me.fromDom(a.container())))),n7=(e,n,o,r)=>Qn(n,o,r).fold(()=>Kn(e,n.dom,o).forall(a=>!Hu(a,o,n.dom)),a=>Kn(e,a.dom,o).isNone()),eM=Qe(n7,!1),tM=Qe(n7,!0),bG=Qe(Bk,!1),vG=Qe(Bk,!0),o7=e=>jb(e).exists(Fr),tE=(e,n,o,r)=>{const a=jt(ch(me.fromDom(o.container()),n),f=>r.isBlock(ee(f))),u=Ht(a).getOr(n);return jl(e,u.dom,o).filter(o7)},zn=(e,n,o)=>jb(n).exists(Fr)||tE(!0,e,n,o).isSome(),nE=(e,n,o)=>Q3(n).exists(Fr)||tE(!1,e,n,o).isSome(),nM=Qe(tE,!1),s7=Qe(tE,!0),bv=e=>Ue.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),$k=(e,n,o)=>{const r=jt(ch(me.fromDom(n.container()),e),a=>o.isBlock(ee(a)));return Ht(r).getOr(e)},oM=(e,n,o)=>bv(n)?Mk(n):Mk(n)||Ma($k(e,n,o).dom,n).exists(Mk),sM=(e,n,o)=>bv(n)?Rk(n):Rk(n)||Za($k(e,n,o).dom,n).exists(Rk),r7=e=>We(["pre","pre-wrap"],e),oE=e=>jb(e).bind(n=>kr(n,po)).exists(n=>r7(Vr(n,"white-space"))),c7=(e,n)=>Ma(e.dom,n).isNone(),yG=(e,n)=>Za(e.dom,n).isNone(),CG=(e,n,o)=>c7(e,n)||yG(e,n)||eM(e,n,o)||tM(e,n,o)||nE(e,n,o)||zn(e,n,o),a7=e=>De(e)&&ds(e)&&cx(e),rM=(e,n)=>o=>a7(new da(o,e)[n]()),i7=(e,n)=>{const o=Za(e.dom,n).getOr(n),r=rM(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},l7=(e,n)=>{const o=Ma(e.dom,n).getOr(n),r=rM(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},Fk=(e,n,o)=>oE(n)?!1:CG(e,n,o)||oM(e,n,o)||sM(e,n,o),J2=(e,n,o)=>oE(n)?!1:eM(e,n,o)||bG(e,n,o)||nE(e,n,o)||oM(e,n,o)||l7(e,n),Ao=e=>{const n=e.container(),o=e.offset();return wt(n)&&o<n.data.length?Ue(n,o+1):e},vv=(e,n,o)=>oE(n)?!1:tM(e,n,o)||vG(e,n,o)||zn(e,n,o)||sM(e,n,o)||i7(e,n),yv=(e,n,o)=>J2(e,n,o)||vv(e,Ao(n),o),Ik=(e,n)=>Qg(e.charAt(n)),Lk=(e,n)=>pm(e.charAt(n)),cM=e=>{const n=e.container();return wt(n)&&Rn(n.data,fc)},aM=e=>{const n=e.split("");return et(n,(o,r)=>Qg(o)&&r>0&&r<n.length-1&&Q1(n[r-1])&&Q1(n[r+1])?" ":o).join("")},Hk=(e,n,o,r)=>{const a=n.data,u=Ue(n,0);return!o&&Ik(a,0)&&!yv(e,u,r)?(n.data=" "+a.slice(1),!0):o&&Lk(a,0)&&J2(e,u,r)?(n.data=fc+a.slice(1),!0):!1},u7=e=>{const n=e.data,o=aM(n);return o!==n?(e.data=o,!0):!1},zk=(e,n,o,r)=>{const a=n.data,u=Ue(n,a.length-1);return!o&&Ik(a,a.length-1)&&!yv(e,u,r)?(n.data=a.slice(0,-1)+" ",!0):o&&Lk(a,a.length-1)&&vv(e,u,r)?(n.data=a.slice(0,-1)+fc,!0):!1},d7=(e,n,o)=>{const r=n.container();if(!wt(r))return F.none();if(cM(n)){const a=Hk(e,r,!1,o)||u7(r)||zk(e,r,!1,o);return Gc(a,n)}else if(yv(e,n,o)){const a=Hk(e,r,!0,o)||zk(e,r,!0,o);return Gc(a,n)}else return F.none()},m7=e=>{const n=me.fromDom(e.getBody());e.selection.isCollapsed()&&d7(n,Ue.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},iM=(e,n,o,r)=>{if(o===0)return;const a=me.fromDom(e),u=ml(a,x=>r.isBlock(ee(x))).getOr(a),f=e.data.slice(n,n+o),b=n+o>=e.data.length&&vv(u,Ue(e,e.data.length),r),y=n===0&&J2(u,Ue(e,0),r);e.replaceData(n,o,Il(f,4,y,b))},sE=(e,n,o)=>{const r=e.data.slice(n),a=r.length-la(r).length;iM(e,n,a,o)},Vk=(e,n,o)=>{const r=e.data.slice(0,n),a=r.length-vc(r).length;iM(e,n-a,a,o)},Uk=(e,n,o,r,a=!0)=>{const u=vc(e.data).length,f=a?e:n,b=a?n:e;return a?f.appendData(b.data):f.insertData(0,b.data),zs(me.fromDom(b)),r&&sE(f,u,o),f},f7=(e,n)=>{const o=e.container(),r=e.offset();return!Ue.isTextPosition(e)&&o===n.parentNode&&r>Ue.before(n).offset()},g7=(e,n)=>f7(n,e)?Ue(n.container(),n.offset()-1):n,Wk=e=>wt(e)?Ue(e,0):Ue.before(e),Zk=e=>wt(e)?Ue(e,e.data.length):Ue.after(e),lM=e=>Pi(e.previousSibling)?F.some(Zk(e.previousSibling)):e.previousSibling?Uu(e.previousSibling):F.none(),uM=e=>Pi(e.nextSibling)?F.some(Wk(e.nextSibling)):e.nextSibling?Wc(e.nextSibling):F.none(),h7=(e,n)=>F.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>Ma(e,Ue.before(o))).orThunk(()=>Za(e,Ue.after(n))),p7=(e,n)=>Za(e,Ue.after(n)).orThunk(()=>Ma(e,Ue.before(n))),b7=(e,n)=>lM(n).orThunk(()=>uM(n)).orThunk(()=>h7(e,n)),v7=(e,n)=>uM(n).orThunk(()=>lM(n)).orThunk(()=>p7(e,n)),y7=(e,n,o)=>e?v7(n,o):b7(n,o),C7=(e,n,o)=>y7(e,n,o).map(Qe(g7,o)),jk=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},w7=e=>n=>n.dom===e,S7=(e,n)=>n&&Cn(e.schema.getBlockElements(),ee(n)),l0=(e,n,o)=>{if(Ee(e,n)){const r=me.fromHtml('<br data-mce-bogus="1">');return o?fe(zc(n),a=>{rf(a)||zs(a)}):Fl(n),Cr(n,r),F.some(Ue.before(r.dom))}else return F.none()},x7=(e,n,o,r)=>{const a=ku(e).filter(Is),u=Bm(e).filter(Is);return zs(e),xo(a,u,n,(f,b,y)=>{const x=f.dom,R=b.dom,N=x.data.length;return Uk(x,R,o,r),y.container()===R?Ue(x,N):y}).orThunk(()=>(r&&(a.each(f=>Vk(f.dom,f.dom.length,o)),u.each(f=>sE(f.dom,0,o))),n))},dM=(e,n)=>Cn(e.schema.getTextInlineElements(),ee(n)),u0=(e,n,o,r=!0,a=!1)=>{const u=C7(n,e.getBody(),o.dom),f=ml(o,Qe(S7,e),w7(e.getBody())),b=x7(o,u,e.schema,dM(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(y=>l0(e.schema,y,a)).fold(()=>{r&&jk(e,n,b)},y=>{r&&jk(e,n,F.some(y))})},E7=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,mM=e=>E7.test(e),Dp=(e,n)=>La(me.fromDom(n),$i(e))&&!ei(e.schema,n)&&e.dom.isEditable(n),Gk=e=>{var n;return Sr.DOM.getStyle(e,"direction",!0)==="rtl"||mM((n=e.textContent)!==null&&n!==void 0?n:"")},fM=(e,n,o)=>jt(Sr.DOM.getParents(o.container(),"*",n),e),ha=(e,n,o)=>{const r=fM(e,n,o);return F.from(r[r.length-1])},T7=(e,n,o)=>{const r=gm(n,e),a=gm(o,e);return De(r)&&r===a},k7=e=>yd(e)||Jh(e),Ed=(e,n)=>{const o=n.container(),r=n.offset();return e?vd(o)?wt(o.nextSibling)?Ue(o.nextSibling,0):Ue.after(o):yd(n)?Ue(o,r+1):n:vd(o)?wt(o.previousSibling)?Ue(o.previousSibling,o.previousSibling.data.length):Ue.before(o):Jh(n)?Ue(o,r-1):n},gM=Qe(Ed,!0),hM=Qe(Ed,!1),Rp=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},_7=e=>{e.execCommand("delete")},rE=e=>Rp(e,"Delete"),Ir=e=>Rp(e,"ForwardDelete"),cE=e=>n=>Lc(xa(n),e,ns),Q2=e=>tS(e)||Xh(e),aE=(e,n)=>Mr(e,n)?kr(n,Q2,cE(e)):F.none(),Mp=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},ju=(e,n,o)=>yr(Wc(o),Uu(o),(r,a)=>{const u=Ed(!0,r),f=Ed(!1,a),b=Ed(!1,n);return e?Za(o,b).exists(y=>y.isEqual(f)&&n.isEqual(u)):Ma(o,b).exists(y=>y.isEqual(u)&&n.isEqual(f))}).getOr(!0),Cv=e=>(wn(e)?ku(e):Ea(e)).bind(Cv).orThunk(()=>F.some(e)),qs=(e,n,o,r=!0)=>{var a;n.deleteContents();const u=Cv(o).getOr(o),f=me.fromDom((a=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&a!==void 0?a:o.dom);if(f.dom===e.getBody()?Mp(e,r):Ee(e.schema,f,{checkRootAsContent:!1})&&(jf(f),r&&e.selection.setCursorLocation(f.dom,0)),!ns(o,f)){const b=Lc(xa(f),o)?[]:Tu(f);fe(b.concat(zc(o)),y=>{!ns(y,f)&&!Mr(y,f)&&Ee(e.schema,y)&&zs(y)})}},eC=e=>n=>ns(e,n),iE=e=>ka(e,"td,th"),qk=(e,n)=>th(me.fromDom(e),n),lE=e=>yr(e.startTable,e.endTable,(n,o)=>{const r=Rh(n,u=>ns(u,o)),a=Rh(o,u=>ns(u,n));return!r&&!a?e:{...e,startTable:r?F.none():e.startTable,endTable:a?F.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),Kk=e=>lE(e),Yk=(e,n)=>{const o=qk(e.startContainer,n),r=qk(e.endContainer,n),a=o.isSome(),u=r.isSome(),f=yr(o,r,ns).getOr(!1);return Kk({startTable:o,endTable:r,isStartInTable:a,isEndInTable:u,isSameTable:f,isMultiTable:!f&&a&&u})},tC=(e,n)=>({start:e,end:n}),Xk=(e,n,o)=>({rng:e,table:n,cells:o}),Np=Cs.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),wv=(e,n)=>pn(me.fromDom(e),"td,th",n),Jk=e=>!ns(e.start,e.end),Qk=(e,n)=>th(e.start,n).bind(o=>th(e.end,n).bind(r=>Gc(ns(o,r),o))),pM=(e,n)=>!Jk(e)&&Qk(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),bM=(e,n)=>{const o=wv(e.startContainer,n),r=wv(e.endContainer,n);return yr(o,r,tC)},vM=e=>n=>th(n,e).bind(o=>Jt(iE(o)).map(r=>tC(n,r))),Sv=e=>n=>th(n,e).bind(o=>Ht(iE(o)).map(r=>tC(r,n))),uE=e=>n=>Qk(n,e).map(o=>Xk(n,o,iE(o))),dE=(e,n,o,r)=>{if(o.collapsed||!e.forall(Jk))return F.none();if(n.isSameTable){const a=e.bind(uE(r));return F.some({start:a,end:a})}else{const a=wv(o.startContainer,r),u=wv(o.endContainer,r),f=a.bind(vM(r)).bind(uE(r)),b=u.bind(Sv(r)).bind(uE(r));return F.some({start:f,end:b})}},yM=(e,n)=>As(e,o=>ns(o,n)),e_=e=>yr(yM(e.cells,e.rng.start),yM(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),CM=(e,n,o)=>e.exists(r=>pM(r,o)&&y2(r.start,n)),t_=(e,n)=>{const{startTable:o,endTable:r}=n,a=e.cloneRange();return o.each(u=>a.setStartAfter(u.dom)),r.each(u=>a.setEndBefore(u.dom)),a},wM=(e,n,o,r)=>dE(e,n,o,r).bind(({start:a,end:u})=>a.or(u)).bind(a=>{const{isSameTable:u}=n,f=e_(a).getOr([]);if(u&&a.cells.length===f.length)return F.some(Np.fullTable(a.table));if(f.length>0){if(u)return F.some(Np.partialTable(f,F.none()));{const b=t_(o,n);return F.some(Np.partialTable(f,F.some({...n,rng:b})))}}else return F.none()}),mE=(e,n,o,r)=>dE(e,n,o,r).bind(({start:a,end:u})=>{const f=a.bind(e_).getOr([]),b=u.bind(e_).getOr([]);if(f.length>0&&b.length>0){const y=t_(o,n);return F.some(Np.multiTable(f,b,y))}else return F.none()}),SM=(e,n)=>{const o=eC(e),r=bM(n,o),a=Yk(n,o);return CM(r,n,o)?r.map(u=>Np.singleCellTable(n,u.start)):a.isMultiTable?mE(r,a,n,o):wM(r,a,n,o)},n_=e=>fe(e,n=>{Ts(n,"contenteditable"),jf(n)}),xM=(e,n)=>F.from(e.dom.getParent(n,e.dom.isBlock)).map(me.fromDom),EM=(e,n,o)=>{o.each(r=>{n?zs(r):(jf(r),e.selection.setCursorLocation(r.dom,0))})},fE=(e,n,o,r)=>{const a=o.cloneRange();r?(a.setStart(o.startContainer,o.startOffset),a.setEndAfter(n.dom.lastChild)):(a.setStartBefore(n.dom.firstChild),a.setEnd(o.endContainer,o.endOffset)),gE(e,a,n,!1).each(u=>u())},o_=e=>{const n=eh(e),o=me.fromDom(e.selection.getNode());Xr(o.dom)&&Ee(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&Tt(n,r=>ns(r,o))&&Rr(o,"data-mce-selected","1")},s_=(e,n,o)=>F.some(()=>{const r=e.selection.getRng(),a=o.bind(({rng:u,isStartInTable:f})=>{const b=xM(e,f?u.endContainer:u.startContainer);u.deleteContents(),EM(e,f,b.filter(Qe(Ee,e.schema)));const y=f?n[0]:n[n.length-1];return fE(e,y,r,f),Ee(e.schema,y)?F.none():F.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);n_(a),o_(e)}),TM=(e,n,o,r)=>F.some(()=>{const a=e.selection.getRng(),u=n[0],f=o[o.length-1];fE(e,u,a,!0),fE(e,f,a,!1);const b=Ee(e.schema,u)?n:n.slice(1),y=Ee(e.schema,f)?o:o.slice(0,-1);n_(b.concat(y)),r.deleteContents(),o_(e)}),gE=(e,n,o,r=!0)=>F.some(()=>{qs(e,n,o,r)}),kM=(e,n)=>F.some(()=>u0(e,!1,n)),r_=(e,n,o)=>SM(n,o).bind(r=>r.fold(Qe(gE,e),Qe(kM,e),Qe(s_,e),Qe(TM,e))),_M=(e,n)=>nC(e,n),AM=(e,n,o,r)=>hE(n,r).fold(()=>r_(e,n,o),a=>_M(e,a)),OM=(e,n,o)=>{const r=me.fromDom(e.getBody()),a=e.selection.getRng();return o.length!==0?s_(e,o,F.none()):AM(e,r,a,n)},c_=(e,n)=>Ho(ch(n,e),ji),hE=(e,n)=>Ho(ch(n,e),Kc("caption")),DM=(e,n,o,r,a)=>tg(o,e.getBody(),a).bind(u=>c_(n,me.fromDom(u.getNode())).bind(f=>ns(f,r)?F.none():F.some(Bt))),nC=(e,n)=>F.some(()=>{jf(n),e.selection.setCursorLocation(n.dom,0)}),a_=(e,n,o,r)=>Wc(e.dom).bind(a=>Uu(e.dom).map(u=>n?o.isEqual(a)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(a))).getOr(!0),pE=(e,n)=>nC(e,n),RM=(e,n,o)=>hE(e,me.fromDom(o.getNode())).fold(()=>F.some(Bt),r=>Gc(!ns(r,n),Bt)),A7=(e,n,o,r,a)=>tg(o,e.getBody(),a).fold(()=>F.some(Bt),u=>a_(r,o,a,u)?pE(e,r):RM(n,r,u)),MM=(e,n,o,r)=>{const a=Ue.fromRangeStart(e.selection.getRng());return c_(o,r).bind(u=>Ee(e.schema,u,{checkRootAsContent:!1})?nC(e,u):DM(e,o,n,u,a))},bE=(e,n,o,r)=>{const a=Ue.fromRangeStart(e.selection.getRng());return Ee(e.schema,r)?nC(e,r):A7(e,o,n,r,a)},vE=(e,n)=>e?J5(n):Pk(n),oC=(e,n)=>{const o=Ue.fromRangeStart(e.selection.getRng());return vE(n,o)||jl(n,e.getBody(),o).exists(r=>vE(n,r))},i_=(e,n,o)=>{const r=me.fromDom(e.getBody());return hE(r,o).fold(()=>MM(e,n,r,o).orThunk(()=>Gc(oC(e,n),Bt)),a=>bE(e,n,r,a))},yE=(e,n)=>{const o=me.fromDom(e.selection.getStart(!0)),r=eh(e);return e.selection.isCollapsed()&&r.length===0?i_(e,n,o):OM(e,o,r)},Cm=(e,n)=>{let o=n;for(;o&&o!==e;){if(nt(o)||ds(o))return o;o=o.parentNode}return null},l_=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],u_=at.each,Pp=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=x=>{const R={};return u_(n.getAttribs(x),N=>{const B=N.nodeName.toLowerCase();B!=="style"&&!a(B)&&(R[B]=n.getAttrib(x,B))}),R},y=(x,R)=>{for(const N in x)if(Cn(x,N)){const B=R[N];if(ln(B)||x[N]!==B)return!1;delete R[N]}for(const N in R)if(Cn(R,N))return!1;return!0};return Vt(u)&&Vt(f)&&(!y(b(u),b(f))||!y(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!wl(u)&&!wl(f)},a=u=>Tt(l_,f=>Ln(u,f))||o.has(u);return{compare:r,isAttributeInternal:a}},ah=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),NM=e=>e.name==="summary",O7=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},PM=(e,n,o,r)=>{const a=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===a){const y=r.nodes[a];y?y.nodes.push(o):r.nodes[a]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const b=n[u],y=b.name;if(y in o.attributes.map){const x=r.attributes[y];x?x.nodes.push(o):r.attributes[y]={filter:b,nodes:[o]}}}},BM=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&O7(o,a=>{PM(e,n,a,r)}),r},d_=(e,n)=>{const o=(r,a)=>{Ct(r,u=>{const f=lo(u.nodes);fe(u.filter.callbacks,b=>{for(let y=f.length-1;y>=0;y--){const x=f[y];(!(a?x.attr(u.filter.name)!==void 0:x.name===u.filter.name)||On(x.parent))&&f.splice(y,1)}f.length>0&&b(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},m_=(e,n,o,r={})=>{const a=BM(e,n,o);d_(a,r)},f_=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new Sl("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new Sl("#text",3)).value=fc},Bp=e=>{var n;return $p(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===fc},$p=(e,n)=>{const o=e==null?void 0:e.firstChild;return De(o)&&o===e.lastChild&&o.name===n},wG=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},sa=(e,n,o,r)=>r.isEmpty(n,o,a=>wG(e,a)),D7=(e,n)=>De(e)&&(n(e)||e.name==="br"),R7=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return F.from(n)},uf=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const a of r)o&&!n.isValidChild(o.name,a.name)&&uf(a,n,o);e.unwrap()}},ws=(e,n,o,r=Bt)=>{const a=n.getTextBlockElements(),u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=at.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),y=new Set,x=R=>R!==o&&!b[R.name];for(let R=0;R<e.length;R++){const N=e[R];let B,W,X;if(!N.parent||y.has(N))continue;if(a[N.name]&&N.parent.name==="li"){let ne=N.next;for(;ne&&a[ne.name];){ne.name="li",y.add(ne),N.parent.insert(ne,N.parent);ne=ne.next}N.unwrap();continue}const q=[N];for(B=N.parent;B&&!n.isValidChild(B.name,N.name)&&x(B);B=B.parent)q.push(B);if(B&&q.length>1)if(g_(n,N,B))uf(N,n);else{q.reverse(),W=q[0].clone(),r(W);let ne=W;for(let ge=0;ge<q.length-1;ge++){n.isValidChild(ne.name,q[ge].name)&&ge>0?(X=q[ge].clone(),r(X),ne.append(X)):X=ne;for(let Se=q[ge].firstChild;Se&&Se!==q[ge+1];){const Te=Se.next;X.append(Se),Se=Te}ne=X}sa(n,u,f,W)?B.insert(N,q[0],!0):(B.insert(W,q[0],!0),B.insert(N,W)),B=q[0],(sa(n,u,f,B)||$p(B,"br"))&&B.empty().remove()}else if(N.parent){if(N.name==="li"){let ne=N.prev;if(ne&&(ne.name==="ul"||ne.name==="ol")){ne.append(N);continue}if(ne=N.next,ne&&(ne.name==="ul"||ne.name==="ol")&&ne.firstChild){ne.insert(N,ne.firstChild,!0);continue}const ge=new Sl("ul",1);r(ge),N.wrap(ge);continue}if(n.isValidChild(N.parent.name,"div")&&n.isValidChild("div",N.name)){const ne=new Sl("div",1);r(ne),N.wrap(ne)}else uf(N,n)}}},SG=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},g_=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&SG(o,"a")?!0:NM(o)&&ah(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,M7=(e,n,o,r)=>{const a=document.createRange();return a.setStart(e,n),a.setEnd(o,r),a},lr=e=>{const n=Ue.fromRangeStart(e),o=Ue.fromRangeEnd(e),r=e.commonAncestorContainer;return jl(!1,r,o).map(a=>!Hu(n,o,r)&&Hu(n,a,r)?M7(n.container(),n.offset(),a.container(),a.offset()):e).getOr(e)},CE=e=>e.collapsed?e:lr(e),sC=e=>De(e.firstChild)&&e.firstChild===e.lastChild,rC=e=>e.name==="br"||e.value===fc,cC=(e,n)=>e.getBlockElements()[n.name]&&sC(n)&&rC(n.firstChild),aC=(e,n)=>{const o=e.getNonEmptyElements();return De(n)&&(n.isEmpty(o)||cC(e,n))},$M=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),aC(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},xG=e=>{var n,o;const r=e.firstChild,a=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),a&&a.id==="mce_marker"&&((o=a.parentNode)===null||o===void 0||o.removeChild(a)),e},EG=(e,n,o)=>{const r=n.serialize(o),a=e.createFragment(r);return xG(a)},TG=e=>{var n;return jt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},kG=e=>e.data===fc||ls(e),N7=e=>De(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&kG(e.firstChild),_G=e=>!e.firstChild||N7(e),P7=e=>e.length>0&&_G(e[e.length-1])?e.slice(0,-1):e,h_=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},AG=(e,n)=>!!h_(e,n),B7=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},Wr=(e,n)=>{const o=Ue.before(e),a=Zl(n).next(o);return a?a.toRange():null},p_=(e,n)=>{const o=Ue.after(e),a=Zl(n).prev(o);return a?a.toRange():null},FM=(e,n,o,r)=>{const a=B7(e,r),u=e.parentNode;return u&&(u.insertBefore(a[0],e),at.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(a[1],e),u.removeChild(e)),p_(n[n.length-1],o)},$7=(e,n,o)=>{const r=e.parentNode;return r&&at.each(n,a=>{r.insertBefore(a,e)}),Wr(e,o)},F7=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),p_(n[0],o)),I7=(e,n,o,r)=>{const a=EG(n,e,r),u=h_(n,o.startContainer),f=P7(TG(a.firstChild)),b=1,y=2,x=n.getRoot(),R=N=>{const B=Ue.fromRangeStart(o),W=Zl(n.getRoot()),X=N===b?W.prev(B):W.next(B),q=X==null?void 0:X.getNode();return q?h_(n,q)!==u:!0};return u?R(b)?$7(u,f,x):R(y)?F7(u,f,x,n):FM(u,f,x,o):null},pu=["pre"],wm=(e,n,o,r)=>{var a;const u=n.firstChild,f=n.lastChild,b=f.attr("data-mce-type")==="bookmark"?f.prev:f,y=u===b,x=We(pu,u.name);if(y&&x){const R=u.attr("contenteditable")!=="false",N=((a=e.getParent(o,e.isBlock))===null||a===void 0?void 0:a.nodeName.toLowerCase())===u.name,B=F.from(Cm(r,o)).forall(nt);return R&&N&&B}else return!1},wE=Xr,b_=(e,n,o)=>{if(De(o)){const r=e.getParent(n.endContainer,wE);return o===r&&y2(me.fromDom(o),n)}else return!1},v_=(e,n)=>{if(e.isBlock(n)&&e.isEditable(n)){const o=n.childNodes;return o.length===1&&ls(o[0])||o.length===0}else return!1},SE=(e,n,o)=>{var r;o.getAttribute("data-mce-bogus")==="all"?(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o):v_(e.dom,o)?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})},L7=(e,n,o)=>{F.from(e.getParent(n,"td,th")).map(me.fromDom).each(r=>n3(r,o))},IM=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const a=e.getBody(),u=Pp(e),f="*[data-mce-fragment]",b=r.select(f);at.each(b,y=>{const x=B=>De(o[B.nodeName.toLowerCase()]),R=B=>B.childNodes.length===1;if((B=>!(K5(r,B)||KI(r,B)))(y)&&x(y)&&R(y)){const B=pv(r,y),W=(ge,Se)=>ps(ge,Te=>We(Se,Te)),X=ge=>R(y)&&r.is(ge,f)&&x(ge)&&(ge.nodeName===y.nodeName&&W(B,pv(r,ge))||X(ge.children[0])),q=ge=>De(ge)&&ge!==a&&(u.compare(y,ge)||q(ge.parentElement)),ne=ge=>De(ge)&&ge!==a&&r.is(ge,f)&&(XI(r,y,ge)||ne(ge.parentElement));(X(y.children[0])||q(y.parentElement)&&!ne(y.parentElement))&&r.remove(y,!0)}})}},iC=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},H7=e=>{at.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},xE=e=>!!e.getAttribute("data-mce-fragment"),y_=(e,n)=>De(n)&&!e.schema.getVoidElements()[n.nodeName],LM=(e,n)=>{var o,r,a;let u;const f=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const y=Cm(e.getBody(),n);if(y&&f.getContentEditable(y)==="false"){f.remove(n),b.select(y);return}let x=f.createRng();const R=n.previousSibling;if(wt(R)){x.setStart(R,(r=(o=R.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const W=n.nextSibling;wt(W)&&(R.appendData(W.data),(a=W.parentNode)===null||a===void 0||a.removeChild(W))}else x.setStartBefore(n),x.setEndBefore(n);const N=W=>{let X=Ue.fromRangeStart(W);return X=Zl(e.getBody()).next(X),X==null?void 0:X.toRange()},B=f.getParent(n,f.isBlock);if(f.remove(n),B&&f.isEmpty(B)){const W=wE(B);Fl(me.fromDom(B)),x.setStart(B,0),x.setEnd(B,0),!W&&!xE(B)&&(u=N(x))?(x=u,f.remove(B)):f.add(B,f.create("br",W?{}:{"data-mce-bogus":"1"}))}b.setRng(x)},lC=e=>{const n=e.dom,o=CE(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,wE);b_(n,o,r)?gE(e,o,me.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&wt(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},z7=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return F.some(n);return F.none()},V7=(e,n,o)=>{var r;return Tt(o.children(),ah)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},df=(e,n,o)=>{var r,a;const u=e.selection,f=e.dom,b=e.parser,y=o.merge,x=kp({validate:!0},e.schema),R='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=Ul(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,R);let N=u.getRng();const B=N.startContainer,W=e.getBody();B===W&&u.isCollapsed()&&f.isBlock(W.firstChild)&&y_(e,W.firstChild)&&f.isEmpty(W.firstChild)&&(N=f.createRng(),N.setStart(W.firstChild,0),N.setEnd(W.firstChild,0),u.setRng(N)),u.isCollapsed()||lC(e);const X=u.getNode(),q={context:X.nodeName.toLowerCase(),data:o.data,insert:!0},ne=b.parse(n,q);if(o.paste===!0&&$M(e.schema,ne)&&AG(f,X))return N=I7(x,f,u.getRng(),ne),N&&u.setRng(N),n;o.paste===!0&&wm(f,ne,X,e.getBody())&&((r=ne.firstChild)===null||r===void 0||r.unwrap()),iC(ne);let ge=ne.lastChild;if(ge&&ge.attr("id")==="mce_marker"){const Se=ge;for(ge=ge.prev;ge&&ge.name!=="table";ge=ge.walk(!0))if(ge.type===3||!f.isBlock(ge.name)){ge.parent&&e.schema.isValidChild(ge.parent.name,"span")&&ge.parent.insert(Se,ge,ge.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(X),!q.invalid&&!V7(f,X,ne))n=x.serialize(ne),SE(e,n,X);else{e.selection.setContent(R);let Se=u.getNode(),Te;const Me=e.getBody();for(Pf(Se)?Se=Te=Me:Te=Se;Te&&Te!==Me;)Se=Te,Te=Te.parentNode;n=Se===Me?Me.innerHTML:f.getOuterHTML(Se);const lt=b.parse(n),At=z7(lt),$t=At.bind(R7).getOr(lt);At.each(Qt=>Qt.replace(ne));const qe=ne.children(),Le=(a=ne.parent)!==null&&a!==void 0?a:lt;ne.unwrap();const dt=jt(qe,Qt=>g_(e.schema,Qt,Le));ws(dt,e.schema,$t),m_(b.getNodeFilters(),b.getAttributeFilters(),lt),n=x.serialize(lt),Se===Me?f.setHTML(Me,n):f.setOuterHTML(Se,n)}return IM(e,y),LM(e,f.get("mce_marker")),H7(e.getBody()),L7(f,u.getStart(),e.schema),Ri(e.schema,e.getBody(),u.getStart()),n},Qi=e=>e instanceof Sl,uC=e=>{kt(e)&&Wc(e.getBody()).each(n=>{const o=n.getNode(),r=cu(o)?Wc(o).getOr(n):n;e.selection.setRng(r.toRange())})},xl=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&uC(e)},U7=(e,n,o,r)=>{if(o=Ul(o),o.length===0||/^\s+$/.test(o)){const a='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+a+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+a+"</li>");const u=ea(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=a,o=e.dom.createHTML(u,mu(e),o)):o||(o=a),xl(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=kp({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const a=Gi(me.fromDom(n))?o:at.trim(o);return xl(e,a,r.no_selection),{content:a,html:a}}},hr=(e,n,o,r)=>{m_(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const a=kp({validate:!1},e.schema).serialize(o),u=Ul(Gi(me.fromDom(n))?a:at.trim(a));return xl(e,u,r.no_selection),{content:o,html:u}},W7=(e,n,o)=>F.from(e.getBody()).map(r=>Qi(n)?hr(e,r,n,o):U7(e,r,n,o)).getOr({content:n,html:Qi(o.content)?"":o.content}),Fp=e=>ie(e)?e:Re,dC=(e,n,o)=>{let r=e.dom;const a=Fp(o);for(;r.parentNode;){r=r.parentNode;const u=me.fromDom(r),f=n(u);if(f.isSome())return f;if(a(u))break}return F.none()},EE=(e,n,o)=>{const r=n(e),a=Fp(o);return r.orThunk(()=>a(e)?F.none():dC(e,n,a))},mC=ql,TE=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let a=0;a<r.length;a++){const u=r[a];if(fu(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},C_=(e,n,o,r,a)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,b=>TE(e,b,o)?!0:b.parentNode===u||!!mf(e,b,o,r,!0));return!!mf(e,f,o,r,a)},xv=(e,n,o)=>ta(o)&&mC(n,o.inline)||bm(o)&&mC(n,o.block)?!0:fu(o)?Vt(n)&&e.is(n,o.selector):!1,HM=(e,n,o,r,a,u)=>{const f=o[r],b=r==="attributes";if(ie(o.onmatch))return o.onmatch(n,o,r);if(f){if(ci(f)){for(let y=0;y<f.length;y++)if(b?e.getAttrib(n,f[y]):oh(e,n,f[y]))return!0}else for(const y in f)if(Cn(f,y)){const x=b?e.getAttrib(n,y):oh(e,n,y),R=hc(f[y],u),N=On(x)||vo(x);if(N&&On(R))continue;if(a&&N&&!o.exact||(!a||o.exact)&&!mC(x,nv(R,y)))return!1}}return!0},mf=(e,n,o,r,a)=>{const u=e.formatter.get(o),f=e.dom;if(u&&Vt(n))for(let b=0;b<u.length;b++){const y=u[b];if(xv(e.dom,n,y)&&HM(f,n,y,"attributes",a,r)&&HM(f,n,y,"styles",a,r)){const x=y.classes;if(x){for(let R=0;R<x.length;R++)if(!e.dom.hasClass(n,hc(x[R],r)))return}return y}}},kE=(e,n,o,r,a)=>{if(r)return C_(e,r,n,o,a);if(r=e.selection.getNode(),C_(e,r,n,o,a))return!0;const u=e.selection.getStart();return!!(u!==r&&C_(e,u,n,o,a))},w_=(e,n,o)=>{const r=[],a={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<n.length;b++){const y=n[b];!a[y]&&mf(e,f,y,o)&&(a[y]=!0,r.push(y))}},e.dom.getRoot()),r},zM=(e,n)=>{const o=a=>ns(a,me.fromDom(e.getBody())),r=(a,u)=>mf(e,a.dom,u)?F.some(u):F.none();return F.from(e.selection.getStart(!0)).bind(a=>EE(me.fromDom(a),u=>bs(n,f=>r(u,f)),o)).getOrNull()},_E=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const a=e.selection.getStart(),u=sv(r,a);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!fu(b))return!0;for(let y=u.length-1;y>=0;y--)if(r.is(u[y],b.selector))return!0}}return!1},Z7=(e,n,o)=>Wn(o,(r,a)=>{const u=Rx(e,a);return e.formatter.matchNode(n,a,{},u)?r.concat([a]):r},[]),fC=Jc,j7=(e,n)=>e.importNode(n,!0),VM=e=>{if(e){const n=new da(e,e);for(let o=n.current();o;o=n.next())if(wt(o))return o}return null},S_=e=>{const n=me.fromTag("span");return Kr(n,{id:Xb,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Cr(n,me.fromText(fC)),n},UM=e=>{const n=VM(e);return n&&n.data.charAt(0)===fC&&n.deleteData(0,1),n},x_=(e,n,o)=>{const r=e.dom,a=e.selection;if(vm(n))u0(e,!1,me.fromDom(n),o,!0);else{const u=a.getRng(),f=r.getParent(n,r.isBlock),b=u.startContainer,y=u.startOffset,x=u.endContainer,R=u.endOffset,N=UM(n);r.remove(n,!0),b===N&&y>0&&u.setStart(N,y-1),x===N&&R>0&&u.setEnd(N,R-1),f&&r.isEmpty(f)&&jf(me.fromDom(f)),a.setRng(u)}},E_=(e,n,o)=>{const r=e.dom,a=e.selection;if(n)x_(e,n,o);else if(n=Jg(e.getBody(),a.getStart()),!n)for(;n=r.get(Xb);)x_(e,n,o)},WM=(e,n,o)=>{var r,a;const u=e.dom,f=u.getParent(o,Qe(x2,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):($g(me.fromDom(o)),u.isEmpty(o)?(a=o.parentNode)===null||a===void 0||a.replaceChild(n,o):u.insertAfter(n,o))},ZM=(e,n)=>(e.appendChild(n),n),T_=(e,n)=>{var o;const r=hs(e,(u,f)=>ZM(u,f.cloneNode(!1)),n),a=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return ZM(r,a.createTextNode(fC))},gC=(e,n,o,r,a,u)=>{const f=e.formatter,b=e.dom,y=jt(Yn(f.get()),N=>N!==r&&!Rn(N,"removeformat")),x=Z7(e,o,y);if(jt(x,N=>!ak(e,N,r)).length>0){const N=o.cloneNode(!1);return b.add(n,N),f.remove(r,a,N,u),b.remove(N),F.some(N)}else return F.none()},jM=e=>eS(e,Kh(e).replace(new RegExp(`${fc}$`)," ")),GM=(e,n)=>{const o=()=>{n!==null&&!e.dom.isEmpty(n)&&ku(me.fromDom(n)).each(r=>{Is(r)?jM(r):Zd(r,a=>Is(a)).each(a=>{Is(a)&&jM(a)})})};e.once("input",r=>{r.data&&!pm(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},qM=(e,n,o)=>{let r;const a=e.selection,u=e.formatter.get(n);if(!u)return;const f=a.getRng();let b=f.startOffset;const x=f.startContainer.nodeValue;r=Jg(e.getBody(),a.getStart());const R=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(x&&b>0&&b<x.length&&R.test(x.charAt(b))&&R.test(x.charAt(b-1))){const N=a.getBookmark();f.collapse(!0);let B=cf(e.dom,f,u);B=q2(B),e.formatter.apply(n,o,B),a.moveToBookmark(N)}else{let N=r?VM(r):null;(!r||(N==null?void 0:N.data)!==fC)&&(r=j7(e.getDoc(),S_(!0).dom),N=r.firstChild,f.insertNode(r),b=1,GM(e,r)),e.formatter.apply(n,o,r),a.setCursorLocation(N,b)}},KM=(e,n,o,r)=>{const a=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(n);if(!b)return;const y=u.getRng(),x=y.startContainer,R=y.startOffset;let N=x;wt(x)&&(R!==x.data.length&&(f=!0),N=N.parentNode);const B=[];let W;for(;N;){if(mf(e,N,n,o,r)){W=N;break}N.nextSibling&&(f=!0),B.push(N),N=N.parentNode}if(W)if(f){const X=u.getBookmark();y.collapse(!0);let q=cf(a,y,b,{includeTrailingSpace:!0});q=q2(q),e.formatter.remove(n,o,q,r),u.moveToBookmark(X)}else{const X=Jg(e.getBody(),W),q=De(X)?a.getParents(W.parentNode,ot,X):[],ne=S_(!1).dom;WM(e,ne,X??W);const ge=gC(e,ne,W,n,o,r),Se=T_([...B,...ge.toArray(),...q],ne);X&&x_(e,X,De(X)),u.setCursorLocation(Se,1),GM(e,ne),a.isEmpty(W)&&a.remove(W)}},G7=(e,n,o)=>{const r=e.selection,a=e.getBody();E_(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===fC&&E_(e,Jg(a,r.getStart()),!0),(n===37||n===39)&&E_(e,Jg(a,r.getStart()),!0)},YM=e=>wt(e)&&Po(e.data,fc),Td=e=>{e.on("mouseup keydown",n=>{G7(e,n.keyCode,YM(e.selection.getRng().endContainer))})},XM=e=>{const n=S_(!1),o=T_(e,n.dom);return{caretContainer:n,caretPosition:Ue(o,0)}},k_=(e,n)=>{const{caretContainer:o,caretPosition:r}=XM(n);return Ha(me.fromDom(e),o),zs(me.fromDom(e)),r},__=(e,n)=>{const{caretContainer:o,caretPosition:r}=XM(n);return e.insertNode(o.dom),r},AE=(e,n)=>{if(Gl(n.dom))return!1;const o=e.schema.getTextInlineElements();return Cn(o,ee(n))&&!Gl(n.dom)&&!Vm(n.dom)},Ev={},A_=Ll(["pre"]),q7=(e,n)=>{Ev[e]||(Ev[e]=[]),Ev[e].push(n)},K7=(e,n)=>{Cn(Ev,e)&&fe(Ev[e],o=>{o(n)})};q7("pre",e=>{const n=e.selection.getRng(),o=a=>u=>{const f=u.previousSibling;return A_(f)&&We(a,f)},r=(a,u)=>{const f=me.fromDom(u),b=ru(f).dom;zs(f),$l(me.fromDom(a),[me.fromTag("br",b),me.fromTag("br",b),...zc(f)])};if(!n.collapsed){const a=e.selection.getSelectedBlocks(),u=jt(jt(a,A_),o(a));fe(u,f=>{r(f.previousSibling,f)})}});const O_=["fontWeight","fontStyle","color","fontSize","fontFamily"],JM=e=>it(e.styles)&&Tt(Yn(e.styles),n=>We(O_,n)),Gu=e=>Ho(e,n=>ta(n)&&n.inline==="span"&&JM(n)),QM=(e,n)=>{const o=e.get(n);return mt(o)?Gu(o):F.none()},eN=(e,n)=>Ma(n,Ue.fromRangeStart(e)).isNone(),Y7=(e,n)=>Za(n,Ue.fromRangeEnd(e)).exists(o=>!ls(o.getNode())||Za(n,o).isSome())===!1,OE=e=>n=>ay(n)&&e.isEditable(n),X7=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return eN(o,n[0])&&Y7(o,n[0])?n:[];{const r=Ht(n).filter(f=>eN(o,f)).toArray(),a=Jt(n).filter(f=>Y7(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(a)}},OG=e=>jt(X7(e),OE(e.dom)),tN=e=>jt(e.getSelectedBlocks(),OE(e.dom)),hC=at.each,kd=e=>Vt(e)&&!wl(e)&&!Gl(e)&&!Vm(e),DE=(e,n)=>{for(let o=e;o;o=o[n]){if(wt(o)&&Xn(o.data))return e;if(Vt(o)&&!wl(o))return o}return e},pC=(e,n,o)=>{const r=Pp(e),a=pl(n)&&e.dom.isEditable(n),u=pl(o)&&e.dom.isEditable(o);if(a&&u){const f=DE(n,"previousSibling"),b=DE(o,"nextSibling");if(r.compare(f,b)){for(let y=f.nextSibling;y&&y!==b;){const x=y;y=y.nextSibling,f.appendChild(x)}return e.dom.remove(b),at.each(at.grep(b.childNodes),y=>{f.appendChild(y)}),f}}return o},RE=(e,n,o,r)=>{var a;if(r&&n.merge_siblings!==!1){const u=(a=pC(e,Dx(r),r))!==null&&a!==void 0?a:r;pC(e,u,Dx(u,!0))}},J7=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";hC(e.select(r,o),a=>{kd(a)&&e.isEditable(a)&&hC(n.styles,(u,f)=>{e.setStyle(a,f,"")})})}},ME=(e,n,o)=>{hC(e.childNodes,r=>{kd(r)&&(n(r)&&o(r),r.hasChildNodes()&&ME(r,n,o))})},Q7=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},D_=(e,n)=>o=>!!(o&&oh(e,o,n)),NE=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),Q7(e,r)},d0=Cs.generate([{keep:[]},{rename:["name"]},{removed:[]}]),nN=/^(src|href|style)$/,R_=at.each,ag=ql,oN=e=>/^(TR|TH|TD)$/.test(e.nodeName),sN=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),M_=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],a=n[o?"startOffset":"endOffset"];if(Vt(r)){const u=r.childNodes.length-1;!o&&a&&a--,r=r.childNodes[a>u?u:a]}return wt(r)&&o&&a>=r.data.length&&(r=new da(r,e.getBody()).next()||r),wt(r)&&!o&&a===0&&(r=new da(r,e.getBody()).prev()||r),r},rN=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return oN(e)&&r?e.nodeName==="TR"&&r[o]||r:e},N_=(e,n,o,r)=>{var a;const u=e.create(o,r);return(a=n.parentNode)===null||a===void 0||a.insertBefore(u,n),u.appendChild(n),u},cN=(e,n,o,r,a)=>{const u=me.fromDom(n),f=me.fromDom(e.create(r,a)),b=o?$m(u):Ai(u);return $l(f,b),o?(Ha(u,f),qd(f,u)):(Oi(u,f),Cr(f,u)),f.dom},eL=(e,n)=>n.links&&e.nodeName==="A",aN=(e,n,o)=>{const r=n.parentNode;let a;const u=e.dom,f=ea(e);bm(o)&&r===u.getRoot()&&(!o.list_block||!ag(n,o.list_block))&&fe(lo(n.childNodes),b=>{sg(e,f,b.nodeName.toLowerCase())?a?a.appendChild(b):(a=N_(u,b,f),u.setAttribs(a,mu(e))):a=null}),!(rv(o)&&!ag(o.inline,n))&&u.remove(n,!0)},P_=(e,n,o)=>Go(e)?{name:n,value:null}:{name:e,value:hc(n,o)},iN=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},PE=(e,n,o,r,a)=>{let u=!1;R_(o.styles,(f,b)=>{const{name:y,value:x}=P_(b,f,r),R=nv(x,y);(o.remove_similar||Z(x)||!Vt(a)||ag(oh(e,a,y),R))&&e.setStyle(n,y,""),u=!0}),u&&iN(e,n)},m0=(e,n,o)=>{n==="removeformat"?fe(tN(e.selection),r=>{fe(O_,a=>e.dom.setStyle(r,a,"")),iN(e.dom,r)}):QM(e.formatter,n).each(r=>{fe(tN(e.selection),a=>PE(e.dom,a,r,o,null))})},lN=(e,n,o,r,a)=>{const u=e.dom,f=Pp(e),b=e.schema;if(ta(n)&&Um(b,n.inline)&&ei(b,r)&&r.parentElement===e.getBody())return aN(e,r,n),d0.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!xv(u,r,n)&&!eL(r,n))return d0.keep();const y=r,x=n.preserve_attributes;if(ta(n)&&n.remove==="all"&&mt(x)){const R=jt(u.getAttribs(y),N=>We(x,N.name.toLowerCase()));if(u.removeAllAttribs(y),fe(R,N=>u.setAttrib(y,N.name,N.value)),R.length>0)return d0.rename("span")}if(n.remove!=="all"){PE(u,y,n,o,a),R_(n.attributes,(N,B)=>{const{name:W,value:X}=P_(B,N,o);if(n.remove_similar||Z(X)||!Vt(a)||ag(u.getAttrib(a,W),X)){if(W==="class"){const q=u.getAttrib(y,W);if(q){let ne="";if(fe(q.split(/\s+/),ge=>{/mce\-\w+/.test(ge)&&(ne+=(ne?" ":"")+ge)}),ne){u.setAttrib(y,W,ne);return}}}if(nN.test(W)&&y.removeAttribute("data-mce-"+W),W==="style"&&Ll(["li"])(y)&&u.getStyle(y,"list-style-type")==="none"){y.removeAttribute(W),u.setStyle(y,"list-style-type","none");return}W==="class"&&y.removeAttribute("className"),y.removeAttribute(W)}}),R_(n.classes,N=>{N=hc(N,o),(!Vt(a)||u.hasClass(a,N))&&u.removeClass(y,N)});const R=u.getAttribs(y);for(let N=0;N<R.length;N++){const B=R[N].nodeName;if(!f.isAttributeInternal(B))return d0.keep()}}return n.remove!=="none"?(aN(e,y,n),d0.removed()):d0.keep()},tL=(e,n,o,r,a)=>{let u;return n.parentNode&&fe(sv(e.dom,n.parentNode).reverse(),f=>{if(!u&&Vt(f)&&f.id!=="_start"&&f.id!=="_end"){const b=mf(e,f,o,r,a);b&&b.split!==!1&&(u=f)}}),u},BE=(e,n,o,r)=>lN(e,n,o,r,r).fold(yt(r),a=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,a)),yt(null)),uN=(e,n,o,r,a,u,f,b)=>{var y,x;let R,N;const B=e.dom;if(o){const W=o.parentNode;for(let X=r.parentNode;X&&X!==W;X=X.parentNode){let q=B.clone(X,!1);for(let ne=0;ne<n.length&&(q=BE(e,n[ne],b,q),q!==null);ne++);q&&(R&&q.appendChild(R),N||(N=q),R=q)}(!f.mixed||!B.isBlock(o))&&(r=(y=B.split(o,r))!==null&&y!==void 0?y:r),R&&N&&((x=a.parentNode)===null||x===void 0||x.insertBefore(R,a),N.appendChild(a),ta(f)&&RE(e,f,b,R))}return r},dN=(e,n,o,r,a)=>{const u=e.formatter.get(n),f=u[0],b=e.dom,y=e.selection,x=q=>{const ne=tL(e,q,n,o,a);return uN(e,u,ne,q,q,!0,f,o)},R=q=>wl(q)&&Vt(q)&&(q.id==="_start"||q.id==="_end"),N=q=>Tt(u,ne=>Tv(e,ne,o,q,q)),B=q=>{const ne=lo(q.childNodes),Se=N(q)||Tt(u,lt=>xv(b,q,lt)),Te=q.parentNode;if(!Se&&De(Te)&&yp(f)&&N(Te),f.deep&&ne.length)for(let lt=0;lt<ne.length;lt++)B(ne[lt]);fe(["underline","line-through","overline"],lt=>{Vt(q)&&e.dom.getStyle(q,"text-decoration")===lt&&q.parentNode&&ov(b,q.parentNode)===lt&&Tv(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:lt}},void 0,q)})},W=q=>{const ne=b.get(q?"_start":"_end");if(ne){let ge=ne[q?"firstChild":"lastChild"];return R(ge)&&(ge=ge[q?"firstChild":"lastChild"]),wt(ge)&&ge.data.length===0&&(ge=q?ne.previousSibling||ne.nextSibling:ne.nextSibling||ne.previousSibling),b.remove(ne,!0),ge}else return null},X=q=>{let ne,ge,Se=cf(b,q,u,{includeTrailingSpace:q.collapsed});if(f.split){if(Se=q2(Se),ne=M_(e,Se,!0),ge=M_(e,Se),ne!==ge){if(ne=rN(ne,!0),ge=rN(ge,!1),sN(b,ne,ge)){const Me=F.from(ne.firstChild).getOr(ne);x(cN(b,Me,!0,"span",{id:"_start","data-mce-type":"bookmark"})),W(!0);return}if(sN(b,ge,ne)){const Me=F.from(ge.lastChild).getOr(ge);x(cN(b,Me,!1,"span",{id:"_end","data-mce-type":"bookmark"})),W(!1);return}ne=N_(b,ne,"span",{id:"_start","data-mce-type":"bookmark"}),ge=N_(b,ge,"span",{id:"_end","data-mce-type":"bookmark"});const Te=b.createRng();Te.setStartAfter(ne),Te.setEndBefore(ge),n0(b,Te,Me=>{fe(Me,lt=>{!wl(lt)&&!wl(lt.parentNode)&&x(lt)})}),x(ne),x(ge),ne=W(!0),ge=W()}else ne=ge=x(ne);Se.startContainer=ne.parentNode?ne.parentNode:ne,Se.startOffset=b.nodeIndex(ne),Se.endContainer=ge.parentNode?ge.parentNode:ge,Se.endOffset=b.nodeIndex(ge)+1}n0(b,Se,Te=>{fe(Te,B)})};if(r){if(og(r)){const q=b.createRng();q.setStartBefore(r),q.setEndAfter(r),X(q)}else X(r);Iy(e,n,r,o);return}!y.isCollapsed()||!ta(f)||eh(e).length?(Ox(e,()=>w2(e,X),q=>ta(f)&&kE(e,n,o,q)),e.nodeChanged()):KM(e,n,o,a),m0(e,n,o),Iy(e,n,r,o)},mN=(e,n,o,r,a)=>{(r||e.selection.isEditable())&&dN(e,n,o,r,a)},Tv=(e,n,o,r,a)=>lN(e,n,o,r,a).fold(Re,u=>(e.dom.rename(r,u),!0),ot),fN=at.each,ih=(e,n,o,r)=>{const a=u=>{if(pl(u)&&Vt(u.parentNode)&&e.isEditable(u)){const f=ov(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(at.walk(r,a,"childNodes"),a(r))},gN=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const a=D_(e,"fontSize");ME(r,u=>a(u)&&e.isEditable(u),NE(e,"backgroundColor",hc(n.styles.backgroundColor,o)))}},hN=(e,n,o,r)=>{if(ta(n)&&(n.inline==="sub"||n.inline==="sup")){const a=D_(e,"fontSize");ME(r,f=>a(f)&&e.isEditable(f),NE(e,"fontSize",""));const u=jt(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},pN=(e,n,o,r)=>{fN(n,a=>{ta(a)&&fN(e.dom.select(a.inline,r),u=>{kd(u)&&Tv(e,a,o,u,a.exact?u:null)}),J7(e.dom,a,r)})},$E=(e,n,o,r,a)=>{const u=a.parentNode;mf(e,u,o,r)&&Tv(e,n,r,a)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>mf(e,f,o,r)?(Tv(e,n,r,a),!0):!1)},bC=at.each,nL=(e,n,o,r)=>{if($b(e)&&ta(n)&&o.parentNode){const a=ly(e.schema),u=cy(me.fromDom(o),f=>Gl(f.dom));return Ls(a,r)&&Ui(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},B_=(e,n,o,r)=>{if(bC(o.styles,(a,u)=>{e.setStyle(n,u,hc(a,r))}),o.styles){const a=e.getAttrib(n,"style");a&&e.setAttrib(n,"data-mce-style",a)}},oL=(e,n,o,r)=>{const a=e.formatter.get(n),u=a[0],f=!r&&e.selection.isCollapsed(),b=e.dom,y=e.selection,x=(X,q=u)=>{ie(q.onformat)&&q.onformat(X,q,o,r),B_(b,X,q,o),bC(q.attributes,(ne,ge)=>{b.setAttrib(X,ge,hc(ne,o))}),bC(q.classes,ne=>{const ge=hc(ne,o);b.hasClass(X,ge)||b.addClass(X,ge)})},R=(X,q)=>{let ne=!1;return bC(X,ge=>fu(ge)?b.getContentEditable(q)==="false"&&!ge.ceFalseOverride||De(ge.collapsed)&&ge.collapsed!==f?!0:b.is(q,ge.selector)&&!Gl(q)?(x(q,ge),ne=!0,!1):!0:!1),ne},N=X=>{if(oe(X)){const q=b.create(X);return x(q),q}else return null},B=(X,q,ne)=>{const ge=[];let Se=!0;const Te=u.inline||u.block,Me=N(Te),lt=qe=>ik(u)&&mf(e,qe,n,o),At=(qe,Le,dt)=>{const Qt=k2(u)&&x2(e.schema,qe)&&sg(e,Le,Te);return dt&&Qt},$t=(qe,Le,dt,Qt)=>{const _n=qe.nodeName.toLowerCase(),Oo=sg(e,Te,_n)&&sg(e,Le,Te),Lo=!ne&&wt(qe)&&pb(qe.data),ks=Gl(qe),Us=!ta(u)||!X.isBlock(qe);return(dt||Qt)&&Oo&&!Lo&&!ks&&Us};n0(X,q,qe=>{let Le;const dt=Qt=>{let _n=!1,Oo=Se,Lo=!1;const ks=Qt.parentNode,Us=ks.nodeName.toLowerCase(),Ac=X.getContentEditable(Qt);De(Ac)&&(Oo=Se,Se=Ac==="true",_n=!0,Lo=tv(e,Qt));const Na=Se&&!_n;if(ls(Qt)&&!nL(e,u,Qt,Us)){Le=null,bm(u)&&X.remove(Qt);return}if(lt(Qt)){Le=null;return}if(At(Qt,Us,Na)){const Pa=X.rename(Qt,Te);x(Pa),ge.push(Pa),Le=null;return}if(fu(u)){let Pa=R(a,Qt);if(!Pa&&De(ks)&&yp(u)&&(Pa=R(a,ks)),!ta(u)||Pa){Le=null;return}}De(Me)&&$t(Qt,Us,Na,Lo)?(Le||(Le=X.clone(Me,!1),ks.insertBefore(Le,Qt),ge.push(Le)),Lo&&_n&&(Se=Oo),Le.appendChild(Qt)):(Le=null,fe(lo(Qt.childNodes),dt),_n&&(Se=Oo),Le=null)};fe(qe,dt)}),u.links===!0&&fe(ge,qe=>{const Le=dt=>{dt.nodeName==="A"&&x(dt,u),fe(lo(dt.childNodes),Le)};Le(qe)}),fe(ge,qe=>{const Le=_n=>{let Oo=0;return fe(_n.childNodes,Lo=>{!qt(Lo)&&!wl(Lo)&&Oo++}),Oo},dt=_n=>Ho(_n.childNodes,S2).filter(Lo=>X.getContentEditable(Lo)!=="false"&&xv(X,Lo,u)).map(Lo=>{const ks=X.clone(Lo,!1);return x(ks),X.replace(ks,_n,!0),X.remove(Lo,!0),ks}).getOr(_n),Qt=Le(qe);if((ge.length>1||!X.isBlock(qe))&&Qt===0){X.remove(qe,!0);return}(ta(u)||bm(u)&&u.wrapper)&&(!u.exact&&Qt===1&&(qe=dt(qe)),pN(e,a,o,qe),$E(e,u,n,o,qe),gN(X,u,o,qe),ih(X,u,o,qe),hN(X,u,o,qe),RE(e,u,o,qe))})},W=og(r)?r:y.getNode();if(b.getContentEditable(W)==="false"&&!tv(e,W)){r=W,R(a,r),Fy(e,n,r,o);return}if(u){if(r)if(og(r)){if(!R(a,r)){const X=b.createRng();X.setStartBefore(r),X.setEndAfter(r),B(b,cf(b,X,a),!0)}}else B(b,r,!0);else!f||!ta(u)||eh(e).length?(y.setRng(CE(y.getRng())),Ox(e,()=>{w2(e,(X,q)=>{const ne=q?X:cf(b,X,a);B(b,ne,!1)})},ot),e.nodeChanged()):qM(e,n,o),QM(e.formatter,n).each(X=>{fe(OG(e.selection),q=>B_(b,q,X,o))});K7(n,e)}Fy(e,n,r,o)},bN=(e,n,o,r)=>{(r||e.selection.isEditable())&&oL(e,n,o,r)},vC=e=>Cn(e,"vars"),vN=(e,n)=>{e.set({}),n.on("NodeChange",o=>{$_(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=F.from(o.node).map(a=>og(a)?a:a.startContainer).bind(a=>Vt(a)?F.some(a):F.from(a.parentElement)).getOrThunk(()=>FE(n));$_(n,r,e.get())})},FE=e=>e.selection.getStart(),yN=(e,n,o,r,a)=>Xs(n,b=>{const y=e.formatter.matchNode(b,o,a??{},r);return!ln(y)},b=>TE(e,b,o)?!0:r?!1:De(e.formatter.matchNode(b,o,a,!0))),CN=(e,n)=>{const o=n??FE(e);return jt(sv(e.dom,o),r=>Vt(r)&&!Vm(r))},$_=(e,n,o)=>{const r=CN(e,n);Ct(o,(a,u)=>{const f=b=>{const y=yN(e,r,u,b.similar,vC(b)?b.vars:void 0),x=y.isSome();if(b.state.get()!==x){b.state.set(x);const R=y.getOr(n);vC(b)?b.callback(x,{node:R,format:u,parents:r}):fe(b.callbacks,N=>N(x,{node:R,format:u,parents:r}))}};fe([a.withSimilar,a.withoutSimilar],f),fe(a.withVars,f)})},F_=(e,n,o,r,a,u)=>{const f=n.get();fe(o.split(","),b=>{const y=is(f,b).getOrThunk(()=>{const R={withSimilar:{state:Bc(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Bc(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=R,R}),x=()=>{const R=CN(e);return yN(e,R,b,a,u).isSome()};if(ln(u)){const R=a?y.withSimilar:y.withoutSimilar;R.callbacks.push(r),R.callbacks.length===1&&R.state.set(x())}else y.withVars.push({state:Bc(x()),similar:a,vars:u,callback:r})}),n.set(f)},wN=(e,n,o)=>{const r=e.get();fe(n.split(","),a=>is(r,a).each(u=>{r[a]={withSimilar:{...u.withSimilar,callbacks:jt(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:jt(u.withoutSimilar.callbacks,f=>f!==o)},withVars:jt(u.withVars,f=>f.callback!==o)}})),e.set(r)},sL=(e,n,o,r,a,u)=>(F_(e,n,o,r,a,u),{unbind:()=>wN(n,o,r)}),rL=(e,n,o,r)=>{const a=e.formatter.get(n);a&&(kE(e,n,o,r)&&(!("toggle"in a[0])||a[0].toggle)?mN(e,n,o,r):bN(e,n,o,r))},SN=at.explode,yC=()=>{const e={};return{addFilter:(a,u)=>{fe(SN(a),f=>{Cn(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>mc(e),removeFilter:(a,u)=>{fe(SN(a),f=>{if(Cn(e,f))if(De(u)){const b=e[f],y=jt(b.callbacks,x=>x!==u);y.length>0?b.callbacks=y:delete e[f]}else delete e[f]})}}},lh=(e,n)=>{fe(n,o=>{e.attr(o,null)})},cL=(e,n,o)=>{e.addNodeFilter("font",r=>{fe(r,a=>{const u=n.parse(a.attr("style")),f=a.attr("color"),b=a.attr("face"),y=a.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),y&&tc(y).each(x=>{u["font-size"]=o[x-1]}),a.name="span",a.attr("style",n.serialize(u)),lh(a,["color","face","size"])})})},I_=(e,n,o)=>{e.addNodeFilter("strike",r=>{const a=n.type!=="html4";fe(r,u=>{if(a)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},Fc=(e,n,o)=>{var r;const a=Gs();n.convert_fonts_to_spans&&cL(e,a,at.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),I_(e,o,a)},L_=(e,n,o)=>{n.inline_styles&&Fc(e,n,o)},H_=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),uh=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},xN=e=>{try{return decodeURIComponent(e)}catch{return e}},IE=e=>{const[n,...o]=e.split(","),r=o.join(","),a=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(a){const u=a[2]===";base64",f=xN(r),b=u?uh(f):f;return F.some({type:a[1],data:b,base64Encoded:u})}else return F.none()},kv=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return F.none()}const a=new Uint8Array(r.length);for(let u=0;u<a.length;u++)a[u]=r.charCodeAt(u);return F.some(new Blob([a],{type:e}))},aL=e=>new Promise((n,o)=>{IE(e).bind(({type:r,data:a,base64Encoded:u})=>kv(r,a,u)).fold(()=>o("Invalid data URI"),n)}),iL=e=>Ln(e,"blob:")?H_(e):Ln(e,"data:")?aL(e):Promise.reject("Unknown URI format"),f0=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var a;o((a=r.error)===null||a===void 0?void 0:a.message)},r.readAsDataURL(e)});let lL=0;const g0=e=>"blobid"+lL++,EN=(e,n,o)=>IE(e).bind(({data:r,type:a,base64Encoded:u})=>{if(n&&!u)return F.none();{const f=u?r:btoa(r);return o(f,a)}}),dh=(e,n,o)=>{const r=e.create(g0(),n,o);return e.add(r),r},TN=(e,n,o=!1)=>EN(n,o,(r,a)=>F.from(e.getByData(r,a)).orThunk(()=>kv(a,r).map(u=>dh(e,u,r)))),_d=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(Ln(n,"blob:")){const r=e.getByUri(n);return De(r)?Promise.resolve(r):iL(n).then(a=>f0(a).then(u=>EN(u,!1,f=>F.some(dh(e,a,f))).getOrThunk(o)))}else return Ln(n,"data:")?TN(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},CC=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,z_=e=>F.from(e.match(CC)).bind(n=>Gt(n,1)).map(n=>Ln(n,"www.")?n.substring(4):n),LE=(e,n)=>{F.from(e.attr("src")).bind(z_).forall(o=>!We(n,o))&&e.attr("sandbox","")},V_=(e,n)=>Ln(e,`${n}/`),HE=e=>ln(e)?"iframe":V_(e,"image")?"img":V_(e,"video")?"video":V_(e,"audio")?"audio":"iframe",uL=({type:e,src:n,width:o,height:r}={},a,u)=>{const f=HE(e),b=new Sl(f,1);return b.attr(f==="audio"?{src:n}:{src:n,width:o,height:r}),(f==="audio"||f==="video")&&b.attr("controls",""),f==="iframe"&&a&&LE(b,u),b},Sm=e=>De(e.attr("data-mce-bogus")),zE=e=>e.attr("src")===cn.transparentSrc||De(e.attr("data-mce-placeholder")),kN=(e,n)=>{const{blob_cache:o}=n;if(o){const r=a=>{const u=a.attr("src");zE(a)||Sm(a)||On(u)||TN(o,u,!0).each(f=>{a.attr("src",f.blobUri())})};e.addAttributeFilter("src",a=>fe(a,r))}},U_=(e,n)=>{var o,r;const a=e.schema;e.addAttributeFilter("href",y=>{let x=y.length;const R=B=>B.split(" ").filter(X=>X.length>0).concat(["noopener"]).sort().join(" "),N=B=>{const W=B?at.trim(B):"";return/\b(noopener)\b/g.test(W)?W:R(W)};if(!n.allow_unsafe_link_target)for(;x--;){const B=y[x];B.name==="a"&&B.attr("target")==="_blank"&&B.attr("rel",N(B.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",y=>{let x=y.length,R,N,B,W;for(;x--;)if(W=y[x],W.name==="a"&&W.firstChild&&!W.attr("href"))for(B=W.parent,R=W.lastChild;R&&B;)N=R.prev,B.insert(R,W),R=N}),n.fix_list_elements&&e.addNodeFilter("ul,ol",y=>{let x=y.length,R,N;for(;x--;)if(R=y[x],N=R.parent,N&&(N.name==="ul"||N.name==="ol"))if(R.prev&&R.prev.name==="li")R.prev.append(R);else{const B=new Sl("li",1);B.attr("style","list-style-type: none"),R.wrap(B)}});const u=a.getValidClasses();n.validate&&u&&e.addAttributeFilter("class",y=>{var x;let R=y.length;for(;R--;){const N=y[R],B=(x=N.attr("class"))!==null&&x!==void 0?x:"",W=at.explode(B," ");let X="";for(let q=0;q<W.length;q++){const ne=W[q];let ge=!1,Se=u["*"];Se&&Se[ne]&&(ge=!0),Se=u[N.name],!ge&&Se&&Se[ne]&&(ge=!0),ge&&(X&&(X+=" "),X+=ne)}X.length||(X=null),N.attr("class",X)}}),kN(e,n);const f=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,b=ur((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",y=>fe(y,x=>{x.replace(uL({type:x.attr("type"),src:x.name==="object"?x.attr("data"):x.attr("src"),width:x.attr("width"),height:x.attr("height")},f,b))})),f&&e.addNodeFilter("iframe",y=>fe(y,x=>LE(x,b)))};/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:VE,setPrototypeOf:h0,isFrozen:W_,getPrototypeOf:dL,getOwnPropertyDescriptor:_N}=Object;let{freeze:bu,seal:xm,create:AN}=Object,{apply:Z_,construct:p0}=typeof Reflect<"u"&&Reflect;bu||(bu=function(n){return n}),xm||(xm=function(n){return n}),Z_||(Z_=function(n,o,r){return n.apply(o,r)}),p0||(p0=function(n,o){return new n(...o)});const UE=yu(Array.prototype.forEach),ON=yu(Array.prototype.lastIndexOf),WE=yu(Array.prototype.pop),wC=yu(Array.prototype.push),DN=yu(Array.prototype.splice),b0=yu(String.prototype.toLowerCase),j_=yu(String.prototype.toString),RN=yu(String.prototype.match),SC=yu(String.prototype.replace),mL=yu(String.prototype.indexOf),fL=yu(String.prototype.trim),Ad=yu(Object.prototype.hasOwnProperty),vu=yu(RegExp.prototype.test),xC=gL(TypeError);function yu(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];return Z_(e,n,r)}}function gL(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return p0(e,o)}}function pr(e,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b0;h0&&h0(e,null);let r=n.length;for(;r--;){let a=n[r];if(typeof a=="string"){const u=o(a);u!==a&&(W_(n)||(n[r]=u),a=u)}e[a]=!0}return e}function hL(e){for(let n=0;n<e.length;n++)Ad(e,n)||(e[n]=null);return e}function v0(e){const n=AN(null);for(const[o,r]of VE(e))Ad(e,o)&&(Array.isArray(r)?n[o]=hL(r):r&&typeof r=="object"&&r.constructor===Object?n[o]=v0(r):n[o]=r);return n}function EC(e,n){for(;e!==null;){const r=_N(e,n);if(r){if(r.get)return yu(r.get);if(typeof r.value=="function")return yu(r.value)}e=dL(e)}function o(){return null}return o}const MN=bu(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),G_=bu(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),q_=bu(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),pL=bu(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),K_=bu(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),NN=bu(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),PN=bu(["#text"]),y0=bu(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Y_=bu(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),BN=bu(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ZE=bu(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),bL=xm(/\{\{[\w\W]*|[\w\W]*\}\}/gm),$N=xm(/<%[\w\W]*|[\w\W]*%>/gm),vL=xm(/\$\{[\w\W]*/gm),yL=xm(/^data-[\-\w.\u00B7-\uFFFF]+$/),CL=xm(/^aria-[\-\w]+$/),FN=xm(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),wL=xm(/^(?:\w+script|data):/i),SL=xm(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),IN=xm(/^html$/i),xL=xm(/^[a-z][.\w]*(-[.\w]+)+$/i);var LN=Object.freeze({__proto__:null,ARIA_ATTR:CL,ATTR_WHITESPACE:SL,CUSTOM_ELEMENT:xL,DATA_ATTR:yL,DOCTYPE_NAME:IN,ERB_EXPR:$N,IS_ALLOWED_URI:FN,IS_SCRIPT_OR_DATA:wL,MUSTACHE_EXPR:bL,TMPLIT_EXPR:vL});const TC={element:1,text:3,progressingInstruction:7,comment:8,document:9},X_=function(){return typeof window>"u"?null:window},HN=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const a="data-tt-policy-suffix";o&&o.hasAttribute(a)&&(r=o.getAttribute(a));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}},EL=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function _v(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:X_();const n=Jo=>_v(Jo);if(n.version="3.2.4",n.removed=[],!e||!e.document||e.document.nodeType!==TC.document||!e.Element)return n.isSupported=!1,n;let{document:o}=e;const r=o,a=r.currentScript,{DocumentFragment:u,HTMLTemplateElement:f,Node:b,Element:y,NodeFilter:x,NamedNodeMap:R=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:N,DOMParser:B,trustedTypes:W}=e,X=y.prototype,q=EC(X,"cloneNode"),ne=EC(X,"remove"),ge=EC(X,"nextSibling"),Se=EC(X,"childNodes"),Te=EC(X,"parentNode");if(typeof f=="function"){const Jo=o.createElement("template");Jo.content&&Jo.content.ownerDocument&&(o=Jo.content.ownerDocument)}let Me,lt="";const{implementation:At,createNodeIterator:$t,createDocumentFragment:qe,getElementsByTagName:Le}=o,{importNode:dt}=r;let Qt=EL();n.isSupported=typeof VE=="function"&&typeof Te=="function"&&At&&At.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:_n,ERB_EXPR:Oo,TMPLIT_EXPR:Lo,DATA_ATTR:ks,ARIA_ATTR:Us,IS_SCRIPT_OR_DATA:Ac,ATTR_WHITESPACE:Na,CUSTOM_ELEMENT:Pa}=LN;let{IS_ALLOWED_URI:It}=LN,An=null;const Ss=pr({},[...MN,...G_,...q_,...K_,...PN]);let tn=null;const ut=pr({},[...y0,...Y_,...BN,...ZE]);let Yt=Object.seal(AN(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),qn=null,Ks=null,Xo=!0,Ka=!0,Ql=!1,Om=!0,Al=!1,Bd=!0,Cu=!1,el=!1,tl=!1,$d=!1,Xp=!1,Mn=!1,as=!0,lc=!1;const aa="user-content-";let ya=!0,Zc=!1,Zr={},jr=null;const Hi=pr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Fd=null;const Cf=pr({},["audio","video","img","source","image","track"]);let Dm=null;const ty=pr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ny="http://www.w3.org/1998/Math/MathML",Jp="http://www.w3.org/2000/svg",Id="http://www.w3.org/1999/xhtml";let wh=Id,oy=!1,Qp=null;const B4=pr({},[ny,Jp,Id],j_);let e1=pr({},["mi","mo","mn","ms","mtext"]),sy=pr({},["annotation-xml"]);const OR=pr({},["title","style","font","a","script"]);let j0=null;const hg=["application/xhtml+xml","text/html"],Pw="text/html";let Oe=null,Be=null;const Ft=o.createElement("form"),Dt=function($e){return $e instanceof RegExp||$e instanceof Function},Hn=function(){let $e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Be&&Be===$e)){if((!$e||typeof $e!="object")&&($e={}),$e=v0($e),j0=hg.indexOf($e.PARSER_MEDIA_TYPE)===-1?Pw:$e.PARSER_MEDIA_TYPE,Oe=j0==="application/xhtml+xml"?j_:b0,An=Ad($e,"ALLOWED_TAGS")?pr({},$e.ALLOWED_TAGS,Oe):Ss,tn=Ad($e,"ALLOWED_ATTR")?pr({},$e.ALLOWED_ATTR,Oe):ut,Qp=Ad($e,"ALLOWED_NAMESPACES")?pr({},$e.ALLOWED_NAMESPACES,j_):B4,Dm=Ad($e,"ADD_URI_SAFE_ATTR")?pr(v0(ty),$e.ADD_URI_SAFE_ATTR,Oe):ty,Fd=Ad($e,"ADD_DATA_URI_TAGS")?pr(v0(Cf),$e.ADD_DATA_URI_TAGS,Oe):Cf,jr=Ad($e,"FORBID_CONTENTS")?pr({},$e.FORBID_CONTENTS,Oe):Hi,qn=Ad($e,"FORBID_TAGS")?pr({},$e.FORBID_TAGS,Oe):{},Ks=Ad($e,"FORBID_ATTR")?pr({},$e.FORBID_ATTR,Oe):{},Zr=Ad($e,"USE_PROFILES")?$e.USE_PROFILES:!1,Xo=$e.ALLOW_ARIA_ATTR!==!1,Ka=$e.ALLOW_DATA_ATTR!==!1,Ql=$e.ALLOW_UNKNOWN_PROTOCOLS||!1,Om=$e.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Al=$e.SAFE_FOR_TEMPLATES||!1,Bd=$e.SAFE_FOR_XML!==!1,Cu=$e.WHOLE_DOCUMENT||!1,$d=$e.RETURN_DOM||!1,Xp=$e.RETURN_DOM_FRAGMENT||!1,Mn=$e.RETURN_TRUSTED_TYPE||!1,tl=$e.FORCE_BODY||!1,as=$e.SANITIZE_DOM!==!1,lc=$e.SANITIZE_NAMED_PROPS||!1,ya=$e.KEEP_CONTENT!==!1,Zc=$e.IN_PLACE||!1,It=$e.ALLOWED_URI_REGEXP||FN,wh=$e.NAMESPACE||Id,e1=$e.MATHML_TEXT_INTEGRATION_POINTS||e1,sy=$e.HTML_INTEGRATION_POINTS||sy,Yt=$e.CUSTOM_ELEMENT_HANDLING||{},$e.CUSTOM_ELEMENT_HANDLING&&Dt($e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Yt.tagNameCheck=$e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),$e.CUSTOM_ELEMENT_HANDLING&&Dt($e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Yt.attributeNameCheck=$e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),$e.CUSTOM_ELEMENT_HANDLING&&typeof $e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Yt.allowCustomizedBuiltInElements=$e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Al&&(Ka=!1),Xp&&($d=!0),Zr&&(An=pr({},PN),tn=[],Zr.html===!0&&(pr(An,MN),pr(tn,y0)),Zr.svg===!0&&(pr(An,G_),pr(tn,Y_),pr(tn,ZE)),Zr.svgFilters===!0&&(pr(An,q_),pr(tn,Y_),pr(tn,ZE)),Zr.mathMl===!0&&(pr(An,K_),pr(tn,BN),pr(tn,ZE))),$e.ADD_TAGS&&(An===Ss&&(An=v0(An)),pr(An,$e.ADD_TAGS,Oe)),$e.ADD_ATTR&&(tn===ut&&(tn=v0(tn)),pr(tn,$e.ADD_ATTR,Oe)),$e.ADD_URI_SAFE_ATTR&&pr(Dm,$e.ADD_URI_SAFE_ATTR,Oe),$e.FORBID_CONTENTS&&(jr===Hi&&(jr=v0(jr)),pr(jr,$e.FORBID_CONTENTS,Oe)),ya&&(An["#text"]=!0),Cu&&pr(An,["html","head","body"]),An.table&&(pr(An,["tbody"]),delete qn.tbody),$e.TRUSTED_TYPES_POLICY){if(typeof $e.TRUSTED_TYPES_POLICY.createHTML!="function")throw xC('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof $e.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw xC('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Me=$e.TRUSTED_TYPES_POLICY,lt=Me.createHTML("")}else Me===void 0&&(Me=HN(W,a)),Me!==null&&typeof lt=="string"&&(lt=Me.createHTML(""));bu&&bu($e),Be=$e}},fs=pr({},[...G_,...q_,...pL]),uc=pr({},[...K_,...NN]),wf=function($e){let Dn=Te($e);(!Dn||!Dn.tagName)&&(Dn={namespaceURI:wh,tagName:"template"});const _o=b0($e.tagName),ia=b0(Dn.tagName);return Qp[$e.namespaceURI]?$e.namespaceURI===Jp?Dn.namespaceURI===Id?_o==="svg":Dn.namespaceURI===ny?_o==="svg"&&(ia==="annotation-xml"||e1[ia]):!!fs[_o]:$e.namespaceURI===ny?Dn.namespaceURI===Id?_o==="math":Dn.namespaceURI===Jp?_o==="math"&&sy[ia]:!!uc[_o]:$e.namespaceURI===Id?Dn.namespaceURI===Jp&&!sy[ia]||Dn.namespaceURI===ny&&!e1[ia]?!1:!uc[_o]&&(OR[_o]||!fs[_o]):!!(j0==="application/xhtml+xml"&&Qp[$e.namespaceURI]):!1},Ld=function($e){wC(n.removed,{element:$e});try{Te($e).removeChild($e)}catch{ne($e)}},t1=function($e,Dn){try{wC(n.removed,{attribute:Dn.getAttributeNode($e),from:Dn})}catch{wC(n.removed,{attribute:null,from:Dn})}if(Dn.removeAttribute($e),$e==="is")if($d||Xp)try{Ld(Dn)}catch{}else try{Dn.setAttribute($e,"")}catch{}},bI=function($e){let Dn=null,_o=null;if(tl)$e="<remove></remove>"+$e;else{const nl=RN($e,/^[\r\n\t ]+/);_o=nl&&nl[0]}j0==="application/xhtml+xml"&&wh===Id&&($e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+$e+"</body></html>");const ia=Me?Me.createHTML($e):$e;if(wh===Id)try{Dn=new B().parseFromString(ia,j0)}catch{}if(!Dn||!Dn.documentElement){Dn=At.createDocument(wh,"template",null);try{Dn.documentElement.innerHTML=oy?lt:ia}catch{}}const eu=Dn.body||Dn.documentElement;return $e&&_o&&eu.insertBefore(o.createTextNode(_o),eu.childNodes[0]||null),wh===Id?Le.call(Dn,Cu?"html":"body")[0]:Cu?Dn.documentElement:eu},DR=function($e){return $t.call($e.ownerDocument||$e,$e,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT|x.SHOW_PROCESSING_INSTRUCTION|x.SHOW_CDATA_SECTION,null)},RR=function($e){return $e instanceof N&&(typeof $e.nodeName!="string"||typeof $e.textContent!="string"||typeof $e.removeChild!="function"||!($e.attributes instanceof R)||typeof $e.removeAttribute!="function"||typeof $e.setAttribute!="function"||typeof $e.namespaceURI!="string"||typeof $e.insertBefore!="function"||typeof $e.hasChildNodes!="function")},MR=function($e){return typeof b=="function"&&$e instanceof b};function Sf(Jo,$e,Dn){UE(Jo,_o=>{_o.call(n,$e,Dn,Be)})}const vI=function($e){let Dn=null;if(Sf(Qt.beforeSanitizeElements,$e,null),RR($e))return Ld($e),!0;const _o=Oe($e.nodeName);if(Sf(Qt.uponSanitizeElement,$e,{tagName:_o,allowedTags:An}),$e.hasChildNodes()&&!MR($e.firstElementChild)&&vu(/<[/\w]/g,$e.innerHTML)&&vu(/<[/\w]/g,$e.textContent)||$e.nodeType===TC.progressingInstruction||Bd&&$e.nodeType===TC.comment&&vu(/<[/\w]/g,$e.data))return Ld($e),!0;if(!An[_o]||qn[_o]){if(!qn[_o]&&NR(_o)&&(Yt.tagNameCheck instanceof RegExp&&vu(Yt.tagNameCheck,_o)||Yt.tagNameCheck instanceof Function&&Yt.tagNameCheck(_o)))return!1;if(ya&&!jr[_o]){const ia=Te($e)||$e.parentNode,eu=Se($e)||$e.childNodes;if(eu&&ia){const nl=eu.length;for(let td=nl-1;td>=0;--td){const pg=q(eu[td],!0);pg.__removalCount=($e.__removalCount||0)+1,ia.insertBefore(pg,ge($e))}}}return Ld($e),!0}return $e instanceof y&&!wf($e)||(_o==="noscript"||_o==="noembed"||_o==="noframes")&&vu(/<\/no(script|embed|frames)/i,$e.innerHTML)?(Ld($e),!0):(Al&&$e.nodeType===TC.text&&(Dn=$e.textContent,UE([_n,Oo,Lo],ia=>{Dn=SC(Dn,ia," ")}),$e.textContent!==Dn&&(wC(n.removed,{element:$e.cloneNode()}),$e.textContent=Dn)),Sf(Qt.afterSanitizeElements,$e,null),!1)},yI=function($e,Dn,_o){if(as&&(Dn==="id"||Dn==="name")&&(_o in o||_o in Ft))return!1;if(!(Ka&&!Ks[Dn]&&vu(ks,Dn))){if(!(Xo&&vu(Us,Dn))){if(!tn[Dn]||Ks[Dn]){if(!(NR($e)&&(Yt.tagNameCheck instanceof RegExp&&vu(Yt.tagNameCheck,$e)||Yt.tagNameCheck instanceof Function&&Yt.tagNameCheck($e))&&(Yt.attributeNameCheck instanceof RegExp&&vu(Yt.attributeNameCheck,Dn)||Yt.attributeNameCheck instanceof Function&&Yt.attributeNameCheck(Dn))||Dn==="is"&&Yt.allowCustomizedBuiltInElements&&(Yt.tagNameCheck instanceof RegExp&&vu(Yt.tagNameCheck,_o)||Yt.tagNameCheck instanceof Function&&Yt.tagNameCheck(_o))))return!1}else if(!Dm[Dn]){if(!vu(It,SC(_o,Na,""))){if(!((Dn==="src"||Dn==="xlink:href"||Dn==="href")&&$e!=="script"&&mL(_o,"data:")===0&&Fd[$e])){if(!(Ql&&!vu(Ac,SC(_o,Na,"")))){if(_o)return!1}}}}}}return!0},NR=function($e){return $e!=="annotation-xml"&&RN($e,Pa)},CI=function($e){Sf(Qt.beforeSanitizeAttributes,$e,null);const{attributes:Dn}=$e;if(!Dn||RR($e))return;const _o={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:tn,forceKeepAttr:void 0};let ia=Dn.length;for(;ia--;){const eu=Dn[ia],{name:nl,namespaceURI:td,value:pg}=eu,t=Oe(nl);let s=nl==="value"?pg:fL(pg);const c=s;if(_o.attrName=t,_o.attrValue=s,_o.keepAttr=!0,_o.forceKeepAttr=void 0,Sf(Qt.uponSanitizeAttribute,$e,_o),s=_o.attrValue,lc&&(t==="id"||t==="name")&&(t1(nl,$e),s=aa+s),Bd&&vu(/((--!?|])>)|<\/(style|title)/i,s)){t1(nl,$e);continue}if(_o.forceKeepAttr)continue;if(!_o.keepAttr){t1(nl,$e);continue}if(!Om&&vu(/\/>/i,s)){t1(nl,$e);continue}Al&&UE([_n,Oo,Lo],d=>{s=SC(s,d," ")});const i=Oe($e.nodeName);if(!yI(i,t,s)){t1(nl,$e);continue}if(Me&&typeof W=="object"&&typeof W.getAttributeType=="function"&&!td)switch(W.getAttributeType(i,t)){case"TrustedHTML":{s=Me.createHTML(s);break}case"TrustedScriptURL":{s=Me.createScriptURL(s);break}}if(s!==c)try{td?$e.setAttributeNS(td,nl,s):$e.setAttribute(nl,s),RR($e)?Ld($e):WE(n.removed)}catch{}}Sf(Qt.afterSanitizeAttributes,$e,null)},eG=function Jo($e){let Dn=null;const _o=DR($e);for(Sf(Qt.beforeSanitizeShadowDOM,$e,null);Dn=_o.nextNode();)Sf(Qt.uponSanitizeShadowNode,Dn,null),vI(Dn),CI(Dn),Dn.content instanceof u&&Jo(Dn.content);Sf(Qt.afterSanitizeShadowDOM,$e,null)};return n.sanitize=function(Jo){let $e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Dn=null,_o=null,ia=null,eu=null;if(oy=!Jo,oy&&(Jo="<!-->"),typeof Jo!="string"&&!MR(Jo))if(typeof Jo.toString=="function"){if(Jo=Jo.toString(),typeof Jo!="string")throw xC("dirty is not a string, aborting")}else throw xC("toString is not a function");if(!n.isSupported)return Jo;if(el||Hn($e),n.removed=[],typeof Jo=="string"&&(Zc=!1),Zc){if(Jo.nodeName){const pg=Oe(Jo.nodeName);if(!An[pg]||qn[pg])throw xC("root node is forbidden and cannot be sanitized in-place")}}else if(Jo instanceof b)Dn=bI("<!---->"),_o=Dn.ownerDocument.importNode(Jo,!0),_o.nodeType===TC.element&&_o.nodeName==="BODY"||_o.nodeName==="HTML"?Dn=_o:Dn.appendChild(_o);else{if(!$d&&!Al&&!Cu&&Jo.indexOf("<")===-1)return Me&&Mn?Me.createHTML(Jo):Jo;if(Dn=bI(Jo),!Dn)return $d?null:Mn?lt:""}Dn&&tl&&Ld(Dn.firstChild);const nl=DR(Zc?Jo:Dn);for(;ia=nl.nextNode();)vI(ia),CI(ia),ia.content instanceof u&&eG(ia.content);if(Zc)return Jo;if($d){if(Xp)for(eu=qe.call(Dn.ownerDocument);Dn.firstChild;)eu.appendChild(Dn.firstChild);else eu=Dn;return(tn.shadowroot||tn.shadowrootmode)&&(eu=dt.call(r,eu,!0)),eu}let td=Cu?Dn.outerHTML:Dn.innerHTML;return Cu&&An["!doctype"]&&Dn.ownerDocument&&Dn.ownerDocument.doctype&&Dn.ownerDocument.doctype.name&&vu(IN,Dn.ownerDocument.doctype.name)&&(td="<!DOCTYPE "+Dn.ownerDocument.doctype.name+`>
`+td),Al&&UE([_n,Oo,Lo],pg=>{td=SC(td,pg," ")}),Me&&Mn?Me.createHTML(td):td},n.setConfig=function(){let Jo=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Hn(Jo),el=!0},n.clearConfig=function(){Be=null,el=!1},n.isValidAttribute=function(Jo,$e,Dn){Be||Hn({});const _o=Oe(Jo),ia=Oe($e);return yI(_o,ia,Dn)},n.addHook=function(Jo,$e){typeof $e=="function"&&wC(Qt[Jo],$e)},n.removeHook=function(Jo,$e){if($e!==void 0){const Dn=ON(Qt[Jo],$e);return Dn===-1?void 0:DN(Qt[Jo],Dn,1)[0]}return WE(Qt[Jo])},n.removeHooks=function(Jo){Qt[Jo]=[]},n.removeAllHooks=function(){Qt=EL()},n}var J_=_v();const TL=at.each,DG=at.trim,RG=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],MG={ftp:21,http:80,https:443,mailto:25},Od=["img","video"],kC=(e,n)=>De(e)?!e:De(n)?!We(Od,n):!0,ff=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},mh=(e,n,o)=>{const r=ff(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?kC(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class qu{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),a=/data:([^;]+)/.exec(r[0]);return a&&(o=a[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const a=rm.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!mh(r,a,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=DG(n),this.settings=o;const r=o.base_uri,a=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){a.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new qu(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+a.toAbsPath(b,n);else{const y=/([^#?]*)([#?]?.*)/.exec(n);y&&(n=(r&&r.protocol||"http")+"://mce_host"+a.toAbsPath(b,y[1])+y[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&TL(RG,(b,y)=>{let x=f[y];x&&(x=x.replace(/\(mce_at\)/g,"@@")),a[b]=x}),r&&(a.protocol||(a.protocol=r.protocol),a.userInfo||(a.userInfo=r.userInfo),!a.port&&a.host==="mce_host"&&(a.port=r.port),(!a.host||a.host==="mce_host")&&(a.host=r.host),a.source=""),u&&(a.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new qu(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),a=o.getURI();if(r===a||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===a)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new qu(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?MG[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,a="",u,f;const b=n.substring(0,n.lastIndexOf("/")).split("/"),y=o.split("/");if(b.length>=y.length){for(u=0,f=b.length;u<f;u++)if(u>=y.length||b[u]!==y[u]){r=u+1;break}}if(b.length<y.length){for(u=0,f=y.length;u<f;u++)if(u>=b.length||b[u]!==y[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)a+="../";for(u=r-1,f=y.length;u<f;u++)u!==r-1?a+="/"+y[u]:a+=y[u];return a}toAbsPath(n,o){let r=0;const a=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),b=[];TL(u,N=>{N&&b.push(N)});const y=[];for(let N=f.length-1;N>=0;N--)if(!(f[N].length===0||f[N]===".")){if(f[N]===".."){r++;continue}if(r>0){r--;continue}y.push(f[N])}const x=b.length-r;let R;return x<=0?R=os(y).join("/"):R=b.slice(0,x).join("/")+"/"+os(y).join("/"),R.indexOf("/")!==0&&(R="/"+R),a&&R.lastIndexOf("/")!==R.length-1&&(R+=a),R}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const zN=at.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),C0="data-mce-type";let VN=0;const Q_=(e,n,o,r,a)=>{var u,f,b,y;const x=n.validate,R=o.getSpecialElements();e.nodeType===rc&&!n.allow_conditional_comments&&/^\[if/i.test((u=e.nodeValue)!==null&&u!==void 0?u:"")&&(e.nodeValue=" "+e.nodeValue);const N=(f=a==null?void 0:a.tagName)!==null&&f!==void 0?f:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){De(a)&&(a.allowedTags[N]=!0);return}if(e.nodeType!==Ml||N==="body")return;const B=me.fromDom(e),W=Sc(B,C0),X=Hc(B,"data-mce-bogus");if(!W&&oe(X)){X==="all"?zs(B):Ja(B);return}const q=o.getElementRule(N);if(x&&!q){Cn(R,N)?zs(B):Ja(B);return}else De(a)&&(a.allowedTags[N]=!0);if(x&&q&&!W){if(fe((b=q.attributesForced)!==null&&b!==void 0?b:[],ne=>{Rr(B,ne.name,ne.value==="{$uid}"?`mce_${VN++}`:ne.value)}),fe((y=q.attributesDefault)!==null&&y!==void 0?y:[],ne=>{Sc(B,ne.name)||Rr(B,ne.name,ne.value==="{$uid}"?`mce_${VN++}`:ne.value)}),q.attributesRequired&&!Tt(q.attributesRequired,ne=>Sc(B,ne))){Ja(B);return}if(q.removeEmptyAttrs&&ul(B)){Ja(B);return}q.outputName&&q.outputName!==N&&x1(B,q.outputName)}},NG=(e,n,o,r,a)=>{const u=e.tagName.toLowerCase(),{attrName:f,attrValue:b}=a;a.keepAttr=UN(n,o,r,u,f,b),a.keepAttr?(a.allowedAttributes[f]=!0,eA(f,o)&&(a.attrValue=f),n.allow_svg_data_urls&&Ln(b,"data:image/svg+xml")&&(a.forceKeepAttr=!0)):Av(e,f)&&(a.forceKeepAttr=!0)},UN=(e,n,o,r,a,u)=>o!=="html"&&!S(r)?!0:!(a in zN&&mh(e,u,r))&&(!e.validate||n.isValid(r,a)||Ln(a,"data-")||Ln(a,"aria-")),Av=(e,n)=>e.hasAttribute(C0)&&(n==="id"||n==="class"||n==="style"),eA=(e,n)=>e in n.getBoolAttrs(),_c=(e,n,o,r)=>{const{attributes:a}=e;for(let u=a.length-1;u>=0;u--){const f=a[u],b=f.name,y=f.value;!UN(n,o,r,e.tagName.toLowerCase(),b,y)&&!Av(e,b)?e.removeAttribute(b):eA(b,o)&&e.setAttribute(b,b)}},kL=(e,n,o)=>{const r=J_();return r.addHook("uponSanitizeElement",(a,u)=>{Q_(a,e,n,o.track(a),u)}),r.addHook("uponSanitizeAttribute",(a,u)=>{NG(a,e,n,o.current(),u)}),r},_L=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},Ov=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};J_().sanitize(e,o)},Dv=(e,n)=>{const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},r=J_(),a=n.allow_mathml_annotation_encodings,u=mt(a)&&a.length>0,f=b=>{const y=b.getAttribute("encoding");return u&&oe(y)&&We(a,y)};r.addHook("uponSanitizeElement",(b,y)=>{var x;const R=(x=y.tagName)!==null&&x!==void 0?x:b.nodeName.toLowerCase();if(u&&R==="semantics"&&(y.allowedTags[R]=!0),R==="annotation"){const N=b,B=f(N);y.allowedTags[R]=B,B||N.remove()}}),r.sanitize(e,o)},Rv=e=>n=>{const o=L(n);if(o==="svg")Ov(n);else if(o==="math")Dv(n,e);else throw new Error("Not a namespace element")},tA=(e,n)=>{const o=ve();if(e.sanitize){const r=kL(e,n,o);return{sanitizeHtmlElement:(u,f)=>{r.sanitize(u,_L(e,f)),r.removed=[],o.reset()},sanitizeNamespaceElement:Rv(e)}}else return{sanitizeHtmlElement:(u,f)=>{const b=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let y;for(;y=b.nextNode();){const x=o.track(y);Q_(y,e,n,x),Vt(y)&&_c(y,e,n,x)}o.reset()},sanitizeNamespaceElement:Bt}},jE=at.makeMap,nA=at.extend,oA=(e,n,o,r)=>{const a=e.name,u=a in o&&a!=="title"&&a!=="textarea"&&a!=="noscript",f=n.childNodes;for(let b=0,y=f.length;b<y;b++){const x=f[b],R=new Sl(x.nodeName.toLowerCase(),x.nodeType);if(Vt(x)){const N=x.attributes;for(let B=0,W=N.length;B<W;B++){const X=N[B];R.attr(X.name,X.value)}S(R.name)&&(r(x),R.value=x.innerHTML)}else wt(x)?(R.value=x.data,u&&(R.raw=!0)):(Nc(x)||Qa(x)||au(x))&&(R.value=x.data);S(R.name)||oA(R,x,o,r),e.append(R)}},AL=(e,n,o)=>{const r=[];for(let a=e,u=a;a;u=a,a=a.walk()){const f=a;fe(n,b=>b(f)),On(f.parent)&&f!==e?a=u:r.push(f)}for(let a=r.length-1;a>=0;a--){const u=r[a];fe(o,f=>f(u))}},OL=(e,n,o,r)=>{const a=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=nA(jE("script,style,head,html,body,title,meta,param"),n.getBlockElements()),y=ly(n),x=/[ \t\r\n]+/g,R=/^[ \t\r\n]+/,N=/[ \t\r\n]+$/,B=Se=>{let Te=Se.parent;for(;De(Te);){if(Te.name in f)return!0;Te=Te.parent}return!1},W=Se=>{let Te=Se;for(;De(Te);){if(Te.name in y)return sa(n,u,f,Te);Te=Te.parent}return!1},X=Se=>Se.name in b||Zm(n,Se)||S(Se.name)&&Se.parent===e,q=(Se,Te)=>{const Me=Te?Se.prev:Se.next;return De(Me)||On(Se.parent)?!1:X(Se.parent)&&(Se.parent!==e||r.isRootContent===!0)};return[Se=>{var Te;if(Se.type===3&&!B(Se)){let Me=(Te=Se.value)!==null&&Te!==void 0?Te:"";Me=Me.replace(x," "),(D7(Se.prev,X)||q(Se,!0))&&(Me=Me.replace(R,"")),Me.length===0||Me===" "&&Se.prev&&Se.prev.type===rc&&Se.next&&Se.next.type===rc?Se.remove():Se.value=Me}},Se=>{var Te;if(Se.type===1){const Me=n.getElementRule(Se.name);if(a&&Me){const lt=sa(n,u,f,Se);Me.paddInEmptyBlock&&lt&&W(Se)?f_(o,r,X,Se):Me.removeEmpty&&lt?X(Se)?Se.remove():Se.unwrap():Me.paddEmpty&&(lt||Bp(Se))&&f_(o,r,X,Se)}}else if(Se.type===3&&!B(Se)){let Me=(Te=Se.value)!==null&&Te!==void 0?Te:"";(Se.next&&X(Se.next)||q(Se,!1))&&(Me=Me.replace(N,"")),Me.length===0?Se.remove():Se.value=Me}}]},WN=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},Mv=(e={},n=Km())=>{const o=yC(),r=yC(),a={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,f=tA(a,n),b=(Te,Me,lt="html")=>{const At=lt==="xhtml"?"application/xhtml+xml":"text/html",$t=Cn(n.getSpecialElements(),Me.toLowerCase()),qe=$t?`<${Me}>${Te}</${Me}>`:Te,Le=()=>lt==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${qe}</body></html>`:/^[\s]*<head/i.test(Te)||/^[\s]*<html/i.test(Te)||/^[\s]*<!DOCTYPE/i.test(Te)?`<html>${qe}</html>`:`<body>${qe}</body>`,dt=u.parseFromString(Le(),At).body;return f.sanitizeHtmlElement(dt,At),$t?dt.firstChild:dt},y=o.addFilter,x=o.getFilters,R=o.removeFilter,N=r.addFilter,B=r.getFilters,W=r.removeFilter,X=(Te,Me)=>{g_(n,Te)&&Me.push(Te)},q=(Te,Me)=>{const lt=oe(Me.attr(C0)),At=Me.type===1&&!Cn(Te,Me.name)&&!Zm(n,Me)&&!S(Me.name);return Me.type===3||At&&!lt},ne=(Te,Me)=>{const lt=nA(jE("script,style,head,html,body,title,meta,param"),n.getBlockElements()),At=/^[ \t\r\n]+/,$t=/[ \t\r\n]+$/;let qe=Te.firstChild,Le=null;const dt=Qt=>{var _n,Oo;Qt&&(qe=Qt.firstChild,qe&&qe.type===3&&(qe.value=(_n=qe.value)===null||_n===void 0?void 0:_n.replace(At,"")),qe=Qt.lastChild,qe&&qe.type===3&&(qe.value=(Oo=qe.value)===null||Oo===void 0?void 0:Oo.replace($t,"")))};if(n.isValidChild(Te.name,Me.toLowerCase())){for(;qe;){const Qt=qe.next;q(lt,qe)?(Le||(Le=new Sl(Me,1),Le.attr(a.forced_root_block_attrs),Te.insert(Le,qe)),Le.append(qe)):(dt(Le),Le=null),qe=Qt}dt(Le)}},Se={schema:n,addAttributeFilter:N,getAttributeFilters:B,removeAttributeFilter:W,addNodeFilter:y,getNodeFilters:x,removeNodeFilter:R,parse:(Te,Me={})=>{var lt;const At=a.validate,$t=(lt=Me.context)!==null&&lt!==void 0?lt:a.root_name,qe=b(Te,$t,Me.format);bl(n,qe);const Le=new Sl($t,11);oA(Le,qe,n.getSpecialElements(),f.sanitizeNamespaceElement),qe.innerHTML="";const[dt,Qt]=OL(Le,n,a,Me),_n=[],Oo=At?Ac=>X(Ac,_n):Bt,Lo={nodes:{},attributes:{}},ks=Ac=>PM(x(),B(),Ac,Lo);if(AL(Le,[dt,ks],[Qt,Oo]),_n.reverse(),At&&_n.length>0)if(Me.context){const{pass:Ac,fail:Na}=ko(_n,Pa=>Pa.parent===Le);ws(Na,n,Le,ks),Me.invalid=Ac.length>0}else ws(_n,n,Le,ks);const Us=WN(a,Me);return Us&&(Le.name==="body"||Me.isRootContent)&&ne(Le,Us),Me.invalid||d_(Lo,Me),Le}};return U_(Se,a),L_(Se,a,n),Se},DL=e=>Qi(e)?kp({validate:!1}).serialize(e):e,ZN=(e,n,o)=>{const r=DL(e),a=n(r);if(a.isDefaultPrevented())return a;if(Qi(e))if(a.content!==r){const u=Mv({validate:!1,forced_root_block:!1,...o}).parse(a.content,{context:e.name});return{...a,content:u}}else return{...a,content:e};else return a},jN=e=>({sanitize:V1(e),sandbox_iframes:r2(e),sandbox_iframes_exclusions:ex(e)}),GN=(e,n)=>{if(n.no_events)return qi.value(n);{const o=Ly(e,n);return o.isDefaultPrevented()?qi.error(Hy(e,{content:"",...o}).content):qi.value(o)}},sA=(e,n,o)=>o.no_events?n:ZN(n,a=>Hy(e,{...o,content:a}),jN(e)).content,rA=(e,n)=>{if(n.no_events)return qi.value(n);{const o=ZN(n.content,r=>MS(e,{...n,content:r}),jN(e));return o.isDefaultPrevented()?(Ab(e,o),qi.error(void 0)):qi.value(o)}},w0=(e,n,o)=>{o.no_events||Ab(e,{...o,content:n})},GE=(e,n,o)=>({element:e,width:n,rows:o}),qN=(e,n)=>({element:e,cells:n}),KN=(e,n)=>({x:e,y:n}),YN=(e,n)=>Tr(e,n).bind(tc).getOr(1),XN=(e,n,o,r,a)=>{const u=YN(a,"rowspan"),f=YN(a,"colspan"),b=e.rows;for(let y=o;y<o+u;y++){b[y]||(b[y]=qN(Qw(r),[]));for(let x=n;x<n+f;x++){const R=b[y].cells;R[x]=y===o&&x===n?a:im(a)}}},RL=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},ML=(e,n,o)=>{for(;RL(e,n,o);)n++;return n},cA=e=>Wn(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),aA=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const a=o[r].cells;for(let u=0;u<a.length;u++)if(ns(a[u],n))return F.some(KN(u,r))}return F.none()},iA=(e,n,o,r,a)=>{const u=[],f=e.rows;for(let b=o;b<=a;b++){const y=f[b].cells,x=n<r?y.slice(n,r+1):y.slice(r,n+1);u.push(qN(f[b].element,x))}return u},JN=(e,n,o)=>{const r=n.x,a=n.y,u=o.x,f=o.y,b=a<f?iA(e,r,a,u,f):iA(e,r,f,u,a);return GE(e.element,cA(b),b)},QN=(e,n)=>{const o=im(e.element),r=me.fromTag("tbody");return $l(r,n),Cr(o,r),o},e6=e=>et(e.rows,n=>{const o=et(n.cells,a=>{const u=Qw(a);return Ts(u,"colspan"),Ts(u,"rowspan"),u}),r=im(n.element);return $l(r,o),r}),NL=e=>{const n=GE(im(e),0,[]);return fe(ka(e,"tr"),(o,r)=>{fe(ka(o,"td,th"),(a,u)=>{XN(n,ML(n,u,r),r,o,a)})}),GE(n.element,cA(n.rows),n.rows)},PL=e=>QN(e,e6(e)),BL=(e,n,o)=>aA(e,n).bind(r=>aA(e,o).map(a=>JN(e,r,a))),lA=e=>Ho(e,n=>ee(n)==="ul"||ee(n)==="ol"),_C=(e,n)=>Ho(e,o=>ee(o)==="li"&&y2(o,n)).fold(yt([]),o=>lA(e).map(r=>{const a=me.fromTag(ee(r)),u=us(Ta(r),(f,b)=>Ln(b,"list-style"));return ro(a,u),[me.fromTag("li"),a]}).getOr([])),t6=(e,n)=>{const o=Wn(n,(r,a)=>(Cr(a,r),a),e);return n.length>0?Z2([o]):o},n6=e=>Xh(e)?xa(e).filter(Yh).fold(yt([]),n=>[e,n]):Yh(e)?[e]:[],qE=(e,n,o)=>{const r=me.fromDom(n.commonAncestorContainer),a=ch(r,e),u=jt(a,y=>o.isWrapper(ee(y))),f=_C(a,n),b=u.concat(f.length?f:n6(r));return et(b,im)},o6=()=>Z2([]),$L=(e,n,o)=>t6(me.fromDom(n.cloneContents()),qE(e,n,o)),S0=(e,n)=>jd(n,"table",Qe(ns,e)),uA=(e,n)=>S0(e,n[0]).bind(o=>{const r=n[0],a=n[n.length-1],u=NL(o);return BL(u,r,a).map(f=>Z2([PL(f)]))}).getOrThunk(o6),s6=(e,n,o)=>n.length>0&&n[0].collapsed?o6():$L(e,n[0],o),AC=(e,n,o)=>{const r=_x(n,e);return r.length>0?uA(e,r):s6(e,n,o)},OC=(e,n)=>n>=0&&n<e.length&&pm(e.charAt(n)),KE=e=>Ul(e.innerText),r6=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),c6=e=>F.from(e.selection.getRng()).map(n=>{var o;const r=F.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),a=e.getBody(),u=r6(r),f=me.fromDom(n.cloneContents());L5(f),H5(f);const b=e.dom.add(a,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),y=KE(b),x=Ul((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),OC(x,0)||OC(x,x.length-1)){const R=r.getOr(a),N=KE(R),B=N.indexOf(y);if(B===-1)return y;{const W=OC(N,B-1),X=OC(N,B+y.length);return(W?" ":"")+y+(X?" ":"")}}else return y}).getOr(""),FL=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),a=e.selection.getSel(),u=Xx(e,Tx(a)),f=n.contextual?AC(me.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},IL=(e,n)=>{if(n.format==="text")return c6(e);{const o=FL(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},LL=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),dA=(e,n,o={})=>{const r=LL(o,n);return GN(e,r).fold(Mo,a=>{const u=IL(e,a);return sA(e,u,a)})},mA=0,fA=1,a6=2,HL=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),a=new Array(o),u=(R,N,B)=>({start:R,end:N,diag:B}),f=(R,N,B,W,X)=>{const q=y(R,N,B,W);if(q===null||q.start===N&&q.diag===N-W||q.end===R&&q.diag===R-B){let ne=R,ge=B;for(;ne<N||ge<W;)ne<N&&ge<W&&e[ne]===n[ge]?(X.push([mA,e[ne]]),++ne,++ge):N-R>W-B?(X.push([a6,e[ne]]),++ne):(X.push([fA,n[ge]]),++ge)}else{f(R,q.start,B,q.start-q.diag,X);for(let ne=q.start;ne<q.end;++ne)X.push([mA,e[ne]]);f(q.end,N,q.end-q.diag,W,X)}},b=(R,N,B,W)=>{let X=R;for(;X-N<W&&X<B&&e[X]===n[X-N];)++X;return u(R,X,N)},y=(R,N,B,W)=>{const X=N-R,q=W-B;if(X===0||q===0)return null;const ne=X-q,ge=q+X,Se=(ge%2===0?ge:ge+1)/2;r[1+Se]=R,a[1+Se]=N+1;let Te,Me,lt,At,$t;for(Te=0;Te<=Se;++Te){for(Me=-Te;Me<=Te;Me+=2){for(lt=Me+Se,Me===-Te||Me!==Te&&r[lt-1]<r[lt+1]?r[lt]=r[lt+1]:r[lt]=r[lt-1]+1,At=r[lt],$t=At-R+B-Me;At<N&&$t<W&&e[At]===n[$t];)r[lt]=++At,++$t;if(ne%2!==0&&ne-Te<=Me&&Me<=ne+Te&&a[lt-ne]<=r[lt])return b(a[lt-ne],Me+R-B,N,W)}for(Me=ne-Te;Me<=ne+Te;Me+=2){for(lt=Me+Se-ne,Me===ne-Te||Me!==ne+Te&&a[lt+1]<=a[lt-1]?a[lt]=a[lt+1]-1:a[lt]=a[lt-1],At=a[lt]-1,$t=At-R+B-Me;At>=R&&$t>=B&&e[At]===n[$t];)a[lt]=At--,$t--;if(ne%2===0&&-Te<=Me&&Me<=Te&&a[lt]<=r[lt+ne])return b(a[lt],Me+R-B,N,W)}}return null},x=[];return f(0,e.length,0,n.length,x),x},i6=e=>Vt(e)?e.outerHTML:wt(e)?rm.encodeRaw(e.data,!1):Nc(e)?"<!--"+e.data+"-->":"",zL=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},VL=(e,n,o)=>{const r=zL(n);if(e.hasChildNodes()&&o<e.childNodes.length){const a=e.childNodes[o];e.insertBefore(r,a)}else e.appendChild(r)},UL=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},WL=(e,n)=>{let o=0;fe(e,r=>{r[0]===mA?o++:r[0]===fA?(VL(n,r[1],o),o++):r[0]===a6&&UL(n,o)})},ZL=(e,n)=>jt(et(lo(e.childNodes),A(Ul,i6)),o=>o.length>0),jL=(e,n)=>{const o=et(lo(n.childNodes),i6);return WL(HL(o,e),n),n},GL=Ve(()=>document.implementation.createHTMLDocument("undo")),qL=e=>e.querySelector("iframe")!==null,l6=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),KL=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),x0=e=>{const n=e.serializer.getTempAttrs(),o=I5(e.getBody(),n);return qL(o)?l6(ZL(o)):KL(Ul(o.innerHTML))},wi=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?jL(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:De(r)&&Cx(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},gA=e=>e.type==="fragmented"?e.fragments.join(""):e.content,DC=e=>{const n=me.fromTag("body",GL());return Au(n,gA(e)),fe(ka(n,"*[data-mce-bogus]"),Ja),rr(n)},E0=(e,n)=>gA(e)===gA(n),u6=(e,n)=>DC(e)===DC(n),El=(e,n)=>!e||!n?!1:E0(e,n)?!0:u6(e,n),fh=e=>e.get()===0,RC=(e,n,o)=>{fh(o)&&(e.typing=n)},d6=(e,n)=>{e.typing&&(RC(e,!1,n),e.add())},m6=e=>{e.typing&&(e.typing=!1,e.add())},YL=(e,n,o)=>{fh(n)&&o.set(Ry(e.selection))},f6=(e,n,o,r,a,u,f)=>{const b=x0(e),y=at.extend(u||{},b);if(!fh(r)||e.removed)return null;const x=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:y,lastLevel:x,originalEvent:f}).isDefaultPrevented()||x&&El(x,y))return null;n.data[o.get()]&&a.get().each(B=>{n.data[o.get()].beforeBookmark=B});const R=Zg(e);if(R&&n.data.length>R){for(let B=0;B<n.data.length-1;B++)n.data[B]=n.data[B+1];n.data.length--,o.set(n.data.length)}y.bookmark=Ry(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(y),o.set(n.data.length-1);const N={level:y,lastLevel:x,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",N),e.dispatch("change",N)):e.dispatch("AddUndo",N),y},MC=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},hA=(e,n,o,r,a)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];wi(e,f,!0),n.transact(a)&&(n.data[o.get()-1].beforeBookmark=u)}},XL=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],wi(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},g6=(e,n,o,r)=>{let a;return n.typing&&(n.add(),n.typing=!1,RC(n,!1,o)),r.get()>0&&(r.set(r.get()-1),a=n.data[r.get()],wi(e,a,!0),e.setDirty(!0),e.dispatch("Undo",{level:a})),a},JL=e=>{e.clear(),e.add()},pA=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!El(x0(e),n.data[0]),bA=(e,n)=>n.get()<e.data.length-1&&!e.typing,QL=(e,n,o)=>(d6(e,n),e.beforeChange(),e.ignore(o),e.add()),eH=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},h6=(e,n)=>{const o=e.dom,r=De(n)?n:e.getBody();fe(o.select("table,a",r),a=>{switch(a.nodeName){case"TABLE":const u=e2(e),f=o.getAttrib(a,"border");(!f||f==="0")&&e.hasVisual?o.addClass(a,u):o.removeClass(a,u);break;case"A":if(!o.getAttrib(a,"href")){const b=o.getAttrib(a,"name")||a.id,y=fm(e);b&&e.hasVisual?o.addClass(a,y):o.removeClass(a,y)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},Em=e=>({init:{bindEvents:Bt},undoManager:{beforeChange:(n,o)=>YL(e,n,o),add:(n,o,r,a,u,f)=>f6(e,n,o,r,a,u,f),undo:(n,o,r)=>g6(e,n,o,r),redo:(n,o)=>XL(e,n,o),clear:(n,o)=>MC(e,n,o),reset:n=>JL(n),hasUndo:(n,o)=>pA(e,n,o),hasRedo:(n,o)=>bA(n,o),transact:(n,o,r)=>QL(n,o,r),ignore:(n,o)=>eH(n,o),extra:(n,o,r,a)=>hA(e,n,o,r,a)},formatter:{match:(n,o,r,a)=>kE(e,n,o,r,a),matchAll:(n,o)=>w_(e,n,o),matchNode:(n,o,r,a)=>mf(e,n,o,r,a),canApply:n=>_E(e,n),closest:n=>zM(e,n),apply:(n,o,r)=>bN(e,n,o,r),remove:(n,o,r,a)=>mN(e,n,o,r,a),toggle:(n,o,r)=>rL(e,n,o,r),formatChanged:(n,o,r,a,u)=>sL(e,n,o,r,a,u)},editor:{getContent:n=>U5(e,n),setContent:(n,o)=>W7(e,n,o),insertContent:(n,o)=>df(e,n,o),addVisual:n=>h6(e,n)},selection:{getContent:(n,o)=>dA(e,n,o)},autocompleter:{addDecoration:Bt,removeDecoration:Bt},raw:{getModel:()=>F.none()}}),vA=e=>{const n=x=>it(x)?x:{},{init:o,undoManager:r,formatter:a,editor:u,selection:f,autocompleter:b,raw:y}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(x,R,N)=>r.transact(N),ignore:(x,R)=>r.ignore(R),extra:(x,R,N,B)=>r.extra(N,B)},formatter:{match:(x,R,N,B)=>a.match(x,n(R),B),matchAll:a.matchAll,matchNode:a.matchNode,canApply:x=>a.canApply(x),closest:x=>a.closest(x),apply:(x,R,N)=>a.apply(x,n(R)),remove:(x,R,N,B)=>a.remove(x,n(R)),toggle:(x,R,N)=>a.toggle(x,n(R)),formatChanged:(x,R,N,B,W)=>a.formatChanged(R,N,B,W)},editor:{getContent:x=>u.getContent(x),setContent:(x,R)=>({content:u.setContent(x,R),html:""}),insertContent:(x,R)=>(u.insertContent(x),""),addVisual:u.addVisual},selection:{getContent:(x,R)=>f.getContent(R)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>F.some(y.getRawModel())}}},tH=()=>{const e=yt(null),n=yt("");return{init:{bindEvents:Bt},undoManager:{beforeChange:Bt,add:e,undo:e,redo:e,clear:Bt,reset:Bt,hasUndo:Re,hasRedo:Re,transact:e,ignore:Bt,extra:Bt},formatter:{match:Re,matchAll:yt([]),matchNode:yt(void 0),canApply:Re,closest:n,apply:Bt,remove:Bt,toggle:Bt,formatChanged:yt({unbind:Bt})},editor:{getContent:n,setContent:yt({content:"",html:""}),insertContent:yt(""),addVisual:Bt},selection:{getContent:n},autocompleter:{addDecoration:Bt,removeDecoration:Bt},raw:{getModel:yt(F.none())}}},Dd=e=>Cn(e.plugins,"rtc"),yA=e=>is(e.plugins,"rtc").bind(n=>F.from(n.setup)),p6=e=>{const n=e;return yA(e).fold(()=>(n.rtcInstance=Em(e),F.none()),o=>(n.rtcInstance=tH(),F.some(()=>o().then(r=>(n.rtcInstance=vA(r),r.rtc.isRemote)))))},YE=e=>e.rtcInstance?e.rtcInstance:Em(e),pa=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},nH=(e,n,o)=>{pa(e).undoManager.beforeChange(n,o)},oH=(e,n,o,r,a,u,f)=>pa(e).undoManager.add(n,o,r,a,u,f),sH=(e,n,o,r)=>pa(e).undoManager.undo(n,o,r),rH=(e,n,o)=>pa(e).undoManager.redo(n,o),cH=(e,n,o)=>{pa(e).undoManager.clear(n,o)},b6=(e,n)=>{pa(e).undoManager.reset(n)},aH=(e,n,o)=>pa(e).undoManager.hasUndo(n,o),iH=(e,n,o)=>pa(e).undoManager.hasRedo(n,o),lH=(e,n,o,r)=>pa(e).undoManager.transact(n,o,r),v6=(e,n,o)=>{pa(e).undoManager.ignore(n,o)},CA=(e,n,o,r,a)=>{pa(e).undoManager.extra(n,o,r,a)},wA=(e,n,o,r,a)=>pa(e).formatter.match(n,o,r,a),y6=(e,n,o)=>pa(e).formatter.matchAll(n,o),SA=(e,n,o,r,a)=>pa(e).formatter.matchNode(n,o,r,a),C6=(e,n)=>pa(e).formatter.canApply(n),w6=(e,n)=>pa(e).formatter.closest(n),xA=(e,n,o,r)=>{pa(e).formatter.apply(n,o,r)},S6=(e,n,o,r,a)=>{pa(e).formatter.remove(n,o,r,a)},x6=(e,n,o,r)=>{pa(e).formatter.toggle(n,o,r)},E6=(e,n,o,r,a,u)=>pa(e).formatter.formatChanged(n,o,r,a,u),uH=(e,n)=>YE(e).editor.getContent(n),EA=(e,n,o)=>YE(e).editor.setContent(n,o),dH=(e,n,o)=>YE(e).editor.insertContent(n,o),XE=(e,n,o)=>pa(e).selection.getContent(n,o),mH=(e,n)=>pa(e).editor.addVisual(n),T6=e=>pa(e).init.bindEvents(),fH=(e,n={})=>{const o=n.format?n.format:"html";return XE(e,o,n)},TA=e=>e.dom.length===0?(zs(e),F.none()):F.some(e),k6=(e,n)=>e.filter(o=>xd.isBookmarkNode(o.dom)).bind(n?Bm:ku),gH=(e,n,o,r,a)=>{const u=e.dom,f=n.dom,b=r?u.length:f.length;r?(Uk(u,f,a,!1,!r),o.setStart(f,b)):(Uk(f,u,a,!1,!r),o.setEnd(f,b))},hH=(e,n,o)=>{xa(e).each(r=>{const a=e.dom;n&&J2(r,Ue(a,0),o)?sE(a,0,o):!n&&vv(r,Ue(a,a.length),o)&&Vk(a,a.length,o)})},_6=(e,n,o,r,a)=>{e.bind(u=>((r?Vk:sE)(u.dom,r?u.dom.length:0,a),n.filter(Is).map(b=>gH(u,b,o,r,a)))).orThunk(()=>k6(n,r).or(n).filter(Is).map(f=>hH(f,r,a)))},pH=(e,n,o)=>{const r=F.from(n.firstChild).map(me.fromDom),a=F.from(n.lastChild).map(me.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind(ku).filter(Is).bind(TA),f=a.bind(Bm).filter(Is).bind(TA);_6(u,r,e,!0,o),_6(f,a,e,!1,o),e.collapse(!1)},bH=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),A6=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),a=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...a,...n});return kp({validate:!1},e.schema).serialize(u)}else return n.content},PG=(e,n,o={})=>{const r=bH(o,n);rA(e,r).each(a=>{const u=A6(e,a),f=e.selection.getRng();pH(f,f.createContextualFragment(u),e.schema),e.selection.setRng(f),hv(e,f),w0(e,u,a)})},O6=(e,n,o)=>{if(Cn(e,n)){const r=jt(e[n],a=>a!==o);r.length===0?delete e[n]:e[n]=r}};var vH=(e,n)=>{let o,r;const a=(b,y)=>Ho(y,x=>e.is(x,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",b=>{const y=b.element,x=u(y),R={};Ct(o,(N,B)=>{a(B,x).each(W=>{r[B]||(fe(N,X=>{X(!0,{node:W,selector:B,parents:x})}),r[B]=N),R[B]=N})}),Ct(r,(N,B)=>{R[B]||(delete r[B],fe(N,W=>{W(!1,{node:y,selector:B,parents:x})}))})})};return{selectorChangedWithUnbind:(b,y)=>(o||f(),o[b]||(o[b]=[]),o[b].push(y),a(b,u(n.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{O6(o,b,y),O6(r,b,y)}})}};const D6=e=>!!(e&&e.ownerDocument)&&Mr(me.fromDom(e.ownerDocument),me.fromDom(e)),yH=e=>e?D6(e.startContainer)&&D6(e.endContainer):!1,R6=(e,n,o,r)=>{let a,u;const{selectorChangedWithUnbind:f}=vH(e,r),b=(It,An)=>{const Ss=e.createRng();De(It)&&De(An)?(Ss.setStart(It,An),Ss.setEnd(It,An),Me(Ss),ge(!1)):(C2(e,Ss,r.getBody(),!0),Me(Ss))},y=It=>fH(r,It),x=(It,An)=>PG(r,It,An),R=It=>T5(r.getBody(),Te(),It),N=It=>k5(r.getBody(),Te(),It),B=(It,An)=>Na.getBookmark(It,An),W=It=>Na.moveToBookmark(It),X=(It,An)=>(O5(e,It,An).each(Me),It),q=()=>{const It=Te(),An=Se();return!It||It.item?!1:It.compareEndPoints?It.compareEndPoints("StartToEnd",It)===0:!An||It.collapsed},ne=()=>{if(r.mode.isReadOnly())return!1;const It=Te(),An=r.getBody().querySelectorAll('[data-mce-selected="1"]');return An.length>0?ps(An,Ss=>e.isEditable(Ss.parentElement)):x5(e,It)},ge=It=>{const An=Te();An.collapse(!!It),Me(An)},Se=()=>n.getSelection?n.getSelection():n.document.selection,Te=()=>{let It;const An=(tn,ut,Yt)=>{try{return ut.compareBoundaryPoints(tn,Yt)}catch{return-1}},Ss=n.document;if(De(r.bookmark)&&!kt(r)){const tn=bk(r);if(tn.isSome())return tn.map(ut=>Xx(r,[ut])[0]).getOr(Ss.createRange())}try{const tn=Se();tn&&!Xd(tn.anchorNode)&&(tn.rangeCount>0?It=tn.getRangeAt(0):It=Ss.createRange(),It=Xx(r,[It])[0])}catch{}if(It||(It=Ss.createRange()),Pf(It.startContainer)&&It.collapsed){const tn=e.getRoot();It.setStart(tn,0),It.setEnd(tn,0)}return a&&u&&(An(It.START_TO_START,It,a)===0&&An(It.END_TO_END,It,a)===0?It=u:(a=null,u=null)),It},Me=(It,An)=>{if(!yH(It))return;const Ss=Se();if(It=r.dispatch("SetSelectionRange",{range:It,forward:An}).range,Ss){u=It;try{Ss.removeAllRanges(),Ss.addRange(It)}catch{}An===!1&&Ss.extend&&(Ss.collapse(It.endContainer,It.endOffset),Ss.extend(It.startContainer,It.startOffset)),a=Ss.rangeCount>0?Ss.getRangeAt(0):null}if(!It.collapsed&&It.startContainer===It.endContainer&&(Ss!=null&&Ss.setBaseAndExtent)&&It.endOffset-It.startOffset<2&&It.startContainer.hasChildNodes()){const ut=It.startContainer.childNodes[It.startOffset];ut&&ut.nodeName==="IMG"&&(Ss.setBaseAndExtent(It.startContainer,It.startOffset,It.endContainer,It.endOffset),(Ss.anchorNode!==It.startContainer||Ss.focusNode!==It.endContainer)&&Ss.setBaseAndExtent(ut,0,ut,1))}r.dispatch("AfterSetSelectionRange",{range:It,forward:An})},lt=It=>(x(e.getOuterHTML(It)),It),At=()=>_5(r.getBody(),Te()),$t=(It,An)=>A5(e,Te(),It,An),qe=()=>{const It=Se(),An=It==null?void 0:It.anchorNode,Ss=It==null?void 0:It.focusNode;if(!It||!An||!Ss||Xd(An)||Xd(Ss))return!0;const tn=e.createRng(),ut=e.createRng();try{tn.setStart(An,It.anchorOffset),tn.collapse(!0),ut.setStart(Ss,It.focusOffset),ut.collapse(!0)}catch{return!0}return tn.compareBoundaryPoints(tn.START_TO_START,ut)<=0},Ac={dom:e,win:n,serializer:o,editor:r,expand:(It={type:"word"})=>Me(Tp(e).expand(Te(),It)),collapse:ge,setCursorLocation:b,getContent:y,setContent:x,getBookmark:B,moveToBookmark:W,select:X,isCollapsed:q,isEditable:ne,isForward:qe,setNode:lt,getNode:At,getSel:Se,setRng:Me,getRng:Te,getStart:R,getEnd:N,getSelectedBlocks:$t,normalize:()=>{const It=Te(),An=Se();if(!QR(An)&&vp(r)){const Ss=G2(e,It);return Ss.each(tn=>{Me(tn,qe())}),Ss.getOr(It)}return It},selectorChanged:(It,An)=>(f(It,An),Ac),selectorChangedWithUnbind:f,getScrollContainer:()=>{let It,An=e.getRoot();for(;An&&An.nodeName!=="BODY";){if(An.scrollHeight>An.clientHeight){It=An;break}An=An.parentNode}return It},scrollIntoView:(It,An)=>{De(It)?S5(r,It,An):hv(r,Te(),An)},placeCaretAt:(It,An)=>Me(a0(It,An,r.getDoc())),getBoundingClientRect:()=>{const It=Te();return It.collapsed?Ue.fromRangeStart(It).getClientRects()[0]:It.getBoundingClientRect()},destroy:()=>{n=a=u=null,Pa.destroy()}},Na=xd(Ac),Pa=cg(Ac,r);return Ac.bookmarkManager=Na,Ac.controlSelection=Pa,Ac},CH=(e,n,o)=>{n.addNodeFilter("br",(r,a,u)=>{const f=at.extend({},o.getBlockElements()),b=o.getNonEmptyElements(),y=o.getWhitespaceElements();f.body=1;const x=R=>R.name in f||Zm(o,R);for(let R=0,N=r.length;R<N;R++){let B=r[R],W=B.parent;if(W&&x(W)&&B===W.lastChild){let X=B.prev;for(;X;){const q=X.name;if(q!=="span"||X.attr("data-mce-type")!=="bookmark"){q==="br"&&(B=null);break}X=X.prev}if(B&&(B.remove(),sa(o,b,y,W))){const q=o.getElementRule(W.name);q&&(q.removeEmpty?W.remove():q.paddEmpty&&f_(e,u,x,W))}}else{let X=B;for(;W&&W.firstChild===X&&W.lastChild===X&&(X=W,!f[W.name]);)W=W.parent;if(X===W){const q=new Sl("#text",3);q.value=fc,B.replace(q)}}}})},wH=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,a)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(a,null)}}),e.addAttributeFilter("src,href,style",(r,a)=>{const u="data-mce-"+a,f=n.url_converter,b=n.url_converter_scope;let y=r.length;for(;y--;){const x=r[y];let R=x.attr(u);R!==void 0?(x.attr(a,R.length>0?R:null),x.attr(u,null)):(R=x.attr(a),a==="style"?R=o.serializeStyle(o.parseStyle(R),x.name):f&&(R=f.call(b,R,a,x.name)),x.attr(a,R.length>0?R:null))}}),e.addAttributeFilter("class",r=>{let a=r.length;for(;a--;){const u=r[a];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,a,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(F.from(b.firstChild).exists(x=>{var R;return!pb((R=x.value)!==null&&R!==void 0?R:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("script,style",(r,a)=>{var u;const f=y=>y.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const y=r[b],x=y.firstChild,R=(u=x==null?void 0:x.value)!==null&&u!==void 0?u:"";if(a==="script"){const N=y.attr("type");N&&y.attr("type",N==="mce-no/type"?null:N.replace(/^mce\-/,"")),n.element_format==="xhtml"&&x&&R.length>0&&(x.value=`// <![CDATA[
`+f(R)+`
// ]]>`)}else n.element_format==="xhtml"&&x&&R.length>0&&(x.value=`<!--
`+f(R)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let a=r.length;for(;a--;){const u=r[a],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,a)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&a==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{fe(r,a=>{a.attr("data-mce-type")==="format-caret"&&(a.isEmpty(e.schema.getNonEmptyElements())?a.remove():a.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,a)=>{let u=r.length;for(;u--;)r[u].attr(a,null)}),n.remove_trailing_brs&&CH(n,e,e.schema)},M6=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},SH=(e,n,o)=>{let r;const a=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");at.each(u.nodeName==="BODY"?u.childNodes:[u],y=>{b.body.appendChild(b.importNode(y,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=a.doc,a.doc=b}return _b(e,{...o,node:u}),r&&(a.doc=r),u},xH=(e,n)=>De(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,EH=(e,n,o)=>xH(e,o)?SH(e,n,o):n,TH=(e,n,o)=>{at.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,a)=>{let u=r.length;for(;u--;)r[u].attr(a,null)}),n.push(o))},kH=(e,n,o)=>!n.no_events&&e?Py(e,{...n,content:o}).content:o,BG=(e,n,o)=>{const r=Ul(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||Gi(me.fromDom(n))?r:at.trim(r)},$G=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,a=e.parse(n,r);return M6(a),a},_H=(e,n,o)=>kp(e,n).serialize(o),AH=(e,n,o,r,a)=>{const u=_H(n,o,r);return kH(e,a,u)},FG=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},a=n&&n.dom?n.dom:Sr.DOM,u=n&&n.schema?n.schema:Km(r),f=Mv(r,u);wH(f,r,a);const b=(y,x={})=>{const R={format:"html",...x},N=EH(n,y,R),B=BG(a,N,R),W=$G(f,B,R);return R.format==="tree"?W:AH(n,r,u,W,R)};return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:b,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:Qe(TH,f,o),getTempAttrs:yt(o),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters,removeNodeFilter:f.removeNodeFilter,removeAttributeFilter:f.removeAttributeFilter}},N6=(e,n)=>{const o=FG(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},pc="html",kA=(e,n)=>({...e,format:n,get:!0,getInner:!0}),IG=(e,n={})=>{const o=n.format?n.format:pc,r=kA(n,o);return GN(e,r).fold(Mo,a=>{const u=uH(e,a);return sA(e,u,a)})},OH="html",DH=(e,n)=>({format:OH,...e,set:!0,content:n}),Ip=(e,n,o={})=>{const r=DH(o,n);return rA(e,r).map(a=>{const u=EA(e,a.content,a);return w0(e,u.html,a),u.content}).getOr(n)},LG="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),HG=[],Si="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),_A=[],AA=(e,n)=>{const o=jt(n,r=>Cn(e,r));return Ke(o)},P6=e=>{const n=AA(e,LG),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Ke(n)},RH=e=>AA(e,HG),B6=(e,n)=>{const o=at.makeMap(e.plugins," "),a=jt(n,u=>Cn(o,u));return Ke(a)},JE=e=>B6(e,Si),MH=e=>B6(e,_A.map(n=>n.name)),OA=(e,n)=>{const o=P6(e),r=JE(n),a=r.length>0,u=o.length>0,f=n.theme==="mobile";if(a||u||f){const b=`
- `,y=f?`

Themes:${b}mobile`:"",x=a?`

Plugins:${b}${r.join(b)}`:"",R=u?`

Options:${b}${o.join(b)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+y+x+R)}},NH=e=>Ho(_A,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),$6=(e,n)=>{const o=RH(e),r=MH(n),a=r.length>0,u=o.length>0;if(a||u){const f=`
- `,b=a?`

Plugins:${f}${r.map(NH).join(f)}`:"",y=u?`

Options:${f}${o.join(f)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+b+y)}},F6=(e,n)=>{OA(e,n),$6(e,n)},Nv=Sr.DOM,I6=e=>{Nv.setStyle(e.id,"display",e.orgDisplay)},Pv=e=>F.from(e).each(n=>n.destroy()),PH=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},BH=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),Nv.unbind(n,"submit reset",e.formEventDelegate))},$H=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),a=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&De(a==null?void 0:a.nextSibling)&&Nv.remove(a.nextSibling),By(e),e.editorManager.remove(e),!e.inline&&r&&I6(e),$y(e),Nv.remove(e.getContainer()),Pv(n),Pv(o),e.destroy()}},Ku=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Pv(o),Pv(r)),BH(e),PH(e),e.destroyed=!0}},QE=(()=>{const e={};return{add:(a,u)=>{e[a]=u},get:a=>e[a]?e[a]:{icons:{}},has:a=>Cn(e,a)}})(),Bv=Va.ModelManager,L6=(e,n)=>n.dom[e],H6=(e,n)=>parseInt(Vr(n,e),10),z6=Qe(L6,"clientWidth"),FH=Qe(L6,"clientHeight"),IH=Qe(H6,"margin-top"),LH=Qe(H6,"margin-left"),eT=e=>e.dom.getBoundingClientRect(),HH=(e,n,o)=>{const r=z6(e),a=FH(e);return n>=0&&o>=0&&n<=r&&o<=a},zH=(e,n,o,r)=>{const a=eT(n),u=e?a.left+n.dom.clientLeft+LH(n):0,f=e?a.top+n.dom.clientTop+IH(n):0,b=o-u,y=r-f;return{x:b,y}},V6=(e,n,o)=>{const r=me.fromDom(e.getBody()),a=e.inline?r:wg(r),u=zH(e.inline,a,n,o);return HH(a,u.x,u.y)},DA=e=>F.from(e).map(me.fromDom),VH=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return DA(n).map(Bl).getOr(!1)};var UH=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const WH=e=>{const n=[],o=()=>{const B=e.theme;return B&&B.getNotificationManagerImpl?B.getNotificationManagerImpl():UH()},r=()=>F.from(n[0]),a=(B,W)=>B.type===W.type&&B.text===W.text&&!B.progressBar&&!B.timeout&&!W.progressBar&&!W.timeout,u=()=>{r().each(B=>{B.reposition()})},f=B=>{n.push(B)},b=B=>{As(n,W=>W===B).each(W=>{n.splice(W,1)})},y=(B,W=!0)=>e.removed||!VH(e)?{}:(W&&e.dispatch("BeforeOpenNotification",{notification:B}),Ho(n,X=>a(o().getArgs(X),B)).getOrThunk(()=>{e.editorManager.setActive(e);const X=o().open(B,()=>{b(X)},()=>_t(e));return f(X),u(),e.dispatch("OpenNotification",{notification:{...X}}),X})),x=()=>{r().each(B=>{o().close(B),b(B),u()})},R=yt(n);return(B=>{B.on("SkinLoaded",()=>{const W=P3(B);W&&y({text:W,type:"warning",timeout:0},!1),u()}),B.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(u)}),B.on("remove",()=>{fe(n.slice(),W=>{o().close(W)})}),B.on("keydown",W=>{var X;const q=((X=W.key)===null||X===void 0?void 0:X.toLowerCase())==="f12"||W.keyCode===123;W.altKey&&q&&(W.preventDefault(),r().map(ne=>me.fromDom(ne.getEl())).each(ne=>M2(ne)))})})(e),{open:y,close:x,getNotifications:R}},$v=Va.PluginManager,gf=Va.ThemeManager;var U6=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const RA=e=>{let n=[];const o=()=>{const q=e.theme;return q&&q.getWindowManagerImpl?q.getWindowManagerImpl():U6()},r=(q,ne)=>(...ge)=>ne?ne.apply(q,ge):void 0,a=q=>{e.dispatch("OpenWindow",{dialog:q})},u=q=>{e.dispatch("CloseWindow",{dialog:q})},f=q=>{n.push(q),a(q)},b=q=>{u(q),n=jt(n,ne=>ne!==q),n.length===0&&e.focus()},y=()=>F.from(n[n.length-1]),x=q=>{e.editorManager.setActive(e),mv(e),e.ui.show();const ne=q();return f(ne),ne},R=(q,ne)=>x(()=>o().open(q,ne,b)),N=q=>x(()=>o().openUrl(q,b)),B=(q,ne,ge)=>{const Se=o();Se.alert(q,r(ge||Se,ne))},W=(q,ne,ge)=>{const Se=o();Se.confirm(q,r(ge||Se,ne))},X=()=>{y().each(q=>{o().close(q),b(q)})};return e.on("remove",()=>{fe(n,q=>{o().close(q)})}),{open:R,openUrl:N,alert:B,confirm:W,close:X}},W6=(e,n)=>{e.notificationManager.open({type:"error",text:n})},NC=(e,n)=>{e._skinLoaded?W6(e,n):e.on("SkinLoaded",()=>{W6(e,n)})},ZH=(e,n)=>{NC(e,Zi.translate(["Failed to upload image: {0}",n]))},PC=(e,n,o)=>{ef(e,n,{message:o}),console.error(o)},BC=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,jH=(e,n,o)=>{PC(e,"PluginLoadError",BC("plugin",n,o))},Z6=(e,n,o)=>{PC(e,"IconsLoadError",BC("icons",n,o))},GH=(e,n,o)=>{PC(e,"LanguageLoadError",BC("language",n,o))},qH=(e,n,o)=>{PC(e,"ThemeLoadError",BC("theme",n,o))},$C=(e,n,o)=>{PC(e,"ModelLoadError",BC("model",n,o))},j6=(e,n,o)=>{const r=Zi.translate(["Failed to initialize plugin: {0}",n]);ef(e,"PluginLoadError",{message:r}),FC(r,o),NC(e,r)},FC=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},KH=e=>{F.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},MA=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},YH=(e,n)=>{MA(e,"StyleWithCSS",n),MA(e,"enableInlineTableEditing",n),MA(e,"enableObjectResizing",n)},G6=e=>{e.selection.setRng(e.selection.getRng())},q6=(e,n,o)=>{Tf(e,n)&&!o?Vd(e,n):o&&Nl(e,n)},K6=e=>{const n=me.fromDom(e.getBody());q6(n,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),KH(e)},Y6=e=>{const n=me.fromDom(e.getBody());q6(n,"mce-content-readonly",!1),e.hasEditableRoot()&&ys(n,!0),YH(e,!1),_t(e)&&e.focus(),G6(e),e.nodeChanged()},gh=e=>Jf(e),Fv="data-mce-contenteditable",hf=e=>{fe(ka(e,'*[contenteditable="true"]'),n=>{Rr(n,Fv,"true"),ys(n,!1)})},NA=e=>{fe(ka(e,`*[${Fv}="true"]`),n=>{Ts(n,Fv),ys(n,!0)})},X6=(e,n)=>{const o=me.fromDom(e.getBody());n?(K6(e),ys(o,!1),hf(o)):(NA(o),Y6(e))},XH=e=>{e.serializer?J6(e):e.on("PreInit",()=>{J6(e)})},J6=e=>{e.parser.addAttributeFilter("contenteditable",n=>{gh(e)&&fe(n,o=>{o.attr(Fv,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Fv,n=>{gh(e)&&fe(n,o=>{o.attr("contenteditable",o.attr(Fv))})}),e.serializer.addTempAttr(Fv)},JH=e=>e.type==="click",Vo=["copy"],QH=e=>We(Vo,e.type),IC=(e,n)=>pn(n,"a",r=>ns(r,me.fromDom(e.getBody()))).bind(r=>Tr(r,"href")),e9=(e,n)=>{if(JH(n)&&!rt.metaKeyPressed(n)){const o=me.fromDom(n.target);IC(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const a=e.dom.select(`${r},[name="${on(r,"#")}"]`);a.length&&e.selection.scrollIntoView(a[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else QH(n)&&e.dispatch(n.type,n)},t9=e=>{e.on("ShowCaret ObjectSelected",n=>{gh(e)&&n.preventDefault()}),e.on("DisabledStateChange",n=>{n.isDefaultPrevented()||X6(e,n.state)})},n9=e=>{XH(e),t9(e)},Q6=e=>/^[a-z0-9\-]+$/i.test(e),ig=e=>"content/"+e+"/content.css",Kl=e=>tinymce.Resource.has(ig(e)),eP=e=>hh(e,HS(e)),LC=e=>hh(e,zS(e)),hh=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",a=`content${e.editorManager.suffix}.css`;return et(n,u=>Kl(u)?u:Q6(u)&&!e.inline?`${o}/${u}/${a}`:e.documentBaseURI.toAbsolute(u))},lg=e=>{e.contentCSS=e.contentCSS.concat(eP(e),LC(e))},HC=e=>e?lo(e.getElementsByTagName("img")):[],PA=(e,n)=>{const o={};return{findAll:(a,u=ot)=>{const f=jt(HC(a),y=>{const x=y.src;return y.hasAttribute("data-mce-bogus")||y.hasAttribute("data-mce-placeholder")||!x||x===cn.transparentSrc?!1:Ln(x,"blob:")?!e.isUploaded(x)&&u(y):Ln(x,"data:")?u(y):!1}),b=et(f,y=>{const x=y.src;if(Cn(o,x))return o[x].then(R=>oe(R)?R:{image:y,blobInfo:R.blobInfo});{const R=_d(n,x).then(N=>(delete o[x],{image:y,blobInfo:N})).catch(N=>(delete o[x],N));return o[x]=R,R}});return Promise.all(b)}}},tT=()=>{let o={};const r=(B,W)=>({status:B,resultUri:W}),a=B=>B in o;return{hasBlobUri:a,getResultUri:B=>{const W=o[B];return W?W.resultUri:null},isPending:B=>a(B)?o[B].status===1:!1,isUploaded:B=>a(B)?o[B].status===2:!1,markPending:B=>{o[B]=r(1,null)},markUploaded:(B,W)=>{o[B]=r(2,W)},removeFailed:B=>{delete o[B]},destroy:()=>{o={}}}};let tP=0;const nP=()=>{const e=()=>Math.round(Yw()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},o9=e=>e+tP+++nP(),s9=()=>{let e=[];const n=N=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[N.toLowerCase()]||"dat",o=(N,B,W,X,q)=>{if(oe(N))return r({id:N,name:X,filename:q,blob:B,base64:W});if(it(N))return r(N);throw new Error("Unknown input type")},r=N=>{if(!N.blob||!N.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const B=N.id||o9("blobid"),W=N.name||B,X=N.blob;return{id:yt(B),name:yt(W),filename:yt(N.filename||W+"."+n(X.type)),blob:yt(X),base64:yt(N.base64),blobUri:yt(N.blobUri||URL.createObjectURL(X)),uri:yt(N.uri)}},a=N=>{f(N.id())||e.push(N)},u=N=>Ho(e,N).getOrUndefined(),f=N=>u(B=>B.id()===N);return{create:o,add:a,get:f,getByUri:N=>u(B=>B.blobUri()===N),getByData:(N,B)=>u(W=>W.base64()===N&&W.blob().type===B),findFirst:u,removeByUri:N=>{e=jt(e,B=>B.blobUri()===N?(URL.revokeObjectURL(B.blobUri()),!1):!0)},destroy:()=>{fe(e,N=>{URL.revokeObjectURL(N.blobUri())}),e=[]}}},oP=(e,n)=>{const o={},r=(q,ne)=>q?q.replace(/\/$/,"")+"/"+ne.replace(/^\//,""):ne,a=(q,ne)=>new Promise((ge,Se)=>{const Te=new XMLHttpRequest;Te.open("POST",n.url),Te.withCredentials=n.credentials,Te.upload.onprogress=lt=>{ne(lt.loaded/lt.total*100)},Te.onerror=()=>{Se("Image upload failed due to a XHR Transport error. Code: "+Te.status)},Te.onload=()=>{if(Te.status<200||Te.status>=300){Se("HTTP Error: "+Te.status);return}const lt=JSON.parse(Te.responseText);if(!lt||!oe(lt.location)){Se("Invalid JSON: "+Te.responseText);return}ge(r(n.basePath,lt.location))};const Me=new FormData;Me.append("file",q.blob(),q.filename()),Te.send(Me)}),u=ie(n.handler)?n.handler:a,f=()=>new Promise(q=>{q([])}),b=(q,ne)=>({url:ne,blobInfo:q,status:!0}),y=(q,ne)=>({url:"",blobInfo:q,status:!1,error:ne}),x=(q,ne)=>{at.each(o[q],ge=>{ge(ne)}),delete o[q]},R=(q,ne,ge)=>(e.markPending(q.blobUri()),new Promise(Se=>{let Te,Me;try{const lt=()=>{Te&&(Te.close(),Me=Bt)},At=qe=>{lt(),e.markUploaded(q.blobUri(),qe),x(q.blobUri(),b(q,qe)),Se(b(q,qe))},$t=qe=>{lt(),e.removeFailed(q.blobUri()),x(q.blobUri(),y(q,qe)),Se(y(q,qe))};Me=qe=>{qe<0||qe>100||F.from(Te).orThunk(()=>F.from(ge).map(St)).each(Le=>{Te=Le,Le.progressBar.value(qe)})},ne(q,Me).then(At,qe=>{$t(oe(qe)?{message:qe}:qe)})}catch(lt){Se(y(q,lt))}})),N=q=>q===a,B=q=>{const ne=q.blobUri();return new Promise(ge=>{o[ne]=o[ne]||[],o[ne].push(ge)})},W=(q,ne)=>(q=at.grep(q,ge=>!e.isUploaded(ge.blobUri())),Promise.all(at.map(q,ge=>e.isPending(ge.blobUri())?B(ge):R(ge,u,ne))));return{upload:(q,ne)=>!n.url&&N(u)?f():W(q,ne)}},BA=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),$A=(e,n)=>oP(n,{url:D3(e),basePath:R3(e),credentials:Zy(e),handler:Nb(e)}),sP=e=>{const n=tT(),o=$A(e,n);return{upload:(r,a=!0)=>o.upload(r,a?BA(e):void 0)}},FA=(e,n)=>e.dom.isEmpty(n.dom)&&De(e.schema.getTextBlockElements()[ee(n)]),VG=e=>n=>{FA(e,n)&&Cr(n,me.fromHtml('<br data-mce-bogus="1" />'))},r9=e=>{const n=s9();let o,r;const a=tT(),u=[],f=Te=>Me=>e.selection?Te(Me):[],b=Te=>Te+(Te.indexOf("?")===-1?"?":"&")+new Date().getTime(),y=(Te,Me,lt)=>{let At=0;do At=Te.indexOf(Me,At),At!==-1&&(Te=Te.substring(0,At)+lt+Te.substr(At+Me.length),At+=lt.length-Me.length+1);while(At!==-1);return Te},x=(Te,Me,lt)=>{const At=`src="${lt}"${lt===cn.transparentSrc?' data-mce-placeholder="1"':""}`;return Te=y(Te,`src="${Me}"`,At),Te=y(Te,'data-mce-src="'+Me+'"','data-mce-src="'+lt+'"'),Te},R=(Te,Me)=>{fe(e.undoManager.data,lt=>{lt.type==="fragmented"?lt.fragments=et(lt.fragments,At=>x(At,Te,Me)):lt.content=x(lt.content,Te,Me)})},N=(Te,Me)=>{const lt=e.convertURL(Me,"src");R(Te.src,Me),Kr(me.fromDom(Te),{src:$S(e)?b(Me):Me,"data-mce-src":lt})},B=()=>(o||(o=$A(e,a)),ne().then(f(Te=>{const Me=et(Te,lt=>lt.blobInfo);return o.upload(Me,BA(e)).then(f(lt=>{const At=[];let $t=!1;const qe=et(lt,(Le,dt)=>{const{blobInfo:Qt,image:_n}=Te[dt];let Oo=!1;return Le.status&&FS(e)?(Le.url&&!Rn(_n.src,Le.url)&&($t=!0),n.removeByUri(_n.src),Dd(e)||N(_n,Le.url)):Le.error&&(Le.error.remove&&(R(_n.src,cn.transparentSrc),At.push(_n),Oo=!0),ZH(e,Le.error.message)),{element:_n,status:Le.status,uploadUri:Le.url,blobInfo:Qt,removed:Oo}});return At.length>0&&!Dd(e)?e.undoManager.transact(()=>{fe(fd(At),Le=>{const dt=xa(Le);zs(Le),dt.each(VG(e)),n.removeByUri(Le.dom.src)})}):$t&&e.undoManager.dispatchChange(),qe}))}))),W=()=>Mb(e)?B():Promise.resolve([]),X=Te=>ps(u,Me=>Me(Te)),q=Te=>{u.push(Te)},ne=()=>(r||(r=PA(a,n)),r.findAll(e.getBody(),X).then(f(Te=>{const Me=jt(Te,lt=>oe(lt)?(NC(e,lt),!1):lt.uriType!=="blob");return Dd(e)||fe(Me,lt=>{R(lt.image.src,lt.blobInfo.blobUri()),lt.image.src=lt.blobInfo.blobUri(),lt.image.removeAttribute("data-mce-src")}),Me}))),ge=()=>{n.destroy(),a.destroy(),r=o=null},Se=Te=>Te.replace(/src="(blob:[^"]+)"/g,(Me,lt)=>{const At=a.getResultUri(lt);if(At)return'src="'+At+'"';let $t=n.getByUri(lt);return $t||($t=Wn(e.editorManager.get(),(qe,Le)=>qe||Le.editorUpload&&Le.editorUpload.blobCache.getByUri(lt),void 0)),$t?'src="data:'+$t.blob().type+";base64,"+$t.base64()+'"':Me});return e.on("SetContent",()=>{Mb(e)?W():ne()}),e.on("RawSaveContent",Te=>{Te.content=Se(Te.content)}),e.on("GetContent",Te=>{Te.source_view||Te.format==="raw"||Te.format==="tree"||(Te.content=Se(Te.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",Te=>{fe(Te,Me=>{const lt=Me.attr("src");if(!lt||n.getByUri(lt))return;const At=a.getResultUri(lt);At&&Me.attr("src",At)})})}),{blobCache:n,addFilter:q,uploadImages:B,uploadImagesAuto:W,scanForImages:ne,destroy:ge}},UG=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:a=>{n.setStyle(a,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:a=>{n.setStyle(a,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const a={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,a,u]:[a,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(a,u,f)=>Vt(a)&&a.hasAttribute("href"),onformat:(a,u,f)=>{at.each(f,(b,y)=>{n.setAttrib(a,y,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":a=>{var u;return(u=a==null?void 0:a.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return at.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),a=>{r[a]={block:a,remove:"all"}}),r},rP={remove_similar:!0,inherit:!1},Iv={selector:"td,th",...rP},ug={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Iv},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Iv},tablecellbordercolor:{styles:{borderColor:"%value"},...Iv},tablecellclass:{classes:["%value"],...Iv},tableclass:{selector:"table",classes:["%value"],...rP},tablecellborderstyle:{styles:{borderStyle:"%value"},...Iv},tablecellborderwidth:{styles:{borderWidth:"%value"},...Iv}},WG=yt(ug),ZG=e=>{const n={},o=f=>De(f)?n[f]:n,r=f=>Cn(n,f),a=(f,b)=>{f&&(oe(f)?(mt(b)||(b=[b]),fe(b,y=>{ln(y.deep)&&(y.deep=!fu(y)),ln(y.split)&&(y.split=!fu(y)||ta(y)),ln(y.remove)&&fu(y)&&!ta(y)&&(y.remove="none"),fu(y)&&ta(y)&&(y.mixed=!0,y.block_expand=!0),oe(y.classes)&&(y.classes=y.classes.split(/\s+/))}),n[f]=b):Ct(f,(y,x)=>{a(x,y)}))},u=f=>(f&&n[f]&&delete n[f],n);return a(UG(e)),a(WG()),a(F3(e)),{get:o,has:r,register:a,unregister:u}},nT=at.each,Tl=Sr.DOM,IA=e=>De(e)&&it(e),LA=(e,n)=>{const o=n&&n.schema||Km({}),r=(y,x)=>{x.classes.length>0&&Tl.addClass(y,x.classes.join(" ")),Tl.setAttribs(y,x.attrs)},a=y=>{const x=oe(y)?{name:y,classes:[],attrs:{}}:y,R=Tl.create(x.name);return r(R,x),R},u=(y,x)=>{const R=o.getElementRule(y.nodeName.toLowerCase()),N=R==null?void 0:R.parentsRequired;return N&&N.length?x&&We(N,x)?x:N[0]:!1},f=(y,x,R)=>{let N;const B=x[0],W=IA(B)?B.name:void 0,X=u(y,W);if(X)W===X?(N=B,x=x.slice(1)):N=X;else if(B)N=B,x=x.slice(1);else if(!R)return y;const q=N?a(N):Tl.create("div");q.appendChild(y),R&&at.each(R,ge=>{const Se=a(ge);q.insertBefore(Se,y)});const ne=IA(N)?N.siblings:void 0;return f(q,x,ne)},b=Tl.create("div");if(e.length>0){const y=e[0],x=a(y),R=IA(y)?y.siblings:void 0;b.appendChild(f(x,e.slice(1),R))}return b},cP=e=>{e=at.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,a,u,f,b)=>{switch(a){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":at.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const y=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);y&&(o.attrs[y[1]]=y[2])}return""})),o.name=n||"div",o},aP=e=>oe(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),at.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=at.map(n.split(/(?:~\+|~|\+)/),cP),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],c9=(e,n)=>{let o="",r=I3(e);if(r==="")return"";const a=B=>oe(B)?B.replace(/%(\w+)/g,""):"",u=(B,W)=>Tl.getStyle(W??e.getBody(),B,!0);if(oe(n)){const B=e.formatter.get(n);if(!B)return"";n=B[0]}if("preview"in n){const B=n.preview;if(B===!1)return"";r=B||r}let f=n.block||n.inline||"span",b;const y=aP(n.selector);y.length>0?(y[0].name||(y[0].name=f),f=n.selector,b=LA(y,e)):b=LA([f],e);const x=Tl.select(f,b)[0]||b.firstChild;nT(n.styles,(B,W)=>{const X=a(B);X&&Tl.setStyle(x,W,X)}),nT(n.attributes,(B,W)=>{const X=a(B);X&&Tl.setAttrib(x,W,X)}),nT(n.classes,B=>{const W=a(B);Tl.hasClass(x,W)||Tl.addClass(x,W)}),e.dispatch("PreviewFormats"),Tl.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const R=u("fontSize"),N=/px$/.test(R)?parseInt(R,10):0;return nT(r.split(" "),B=>{let W=u(B,x);if(!(B==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(W)&&(W=u(B),cm(W).toLowerCase()==="#ffffff"))&&!(B==="color"&&cm(W).toLowerCase()==="#000000")){if(B==="font-size"&&/em|%$/.test(W)){if(N===0)return;W=parseFloat(W)/(/%$/.test(W)?100:1)*N+"px"}B==="border"&&W&&(o+="padding:0 2px;"),o+=B+":"+W+";"}}),e.dispatch("AfterPreviewFormats"),Tl.remove(b),o},a9=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},ph=e=>{const n=ZG(e),o=Bc({});return a9(e),Td(e),Dd(e)||vN(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,a,u)=>{xA(e,r,a,u)},remove:(r,a,u,f)=>{S6(e,r,a,u,f)},toggle:(r,a,u)=>{x6(e,r,a,u)},match:(r,a,u,f)=>wA(e,r,a,u,f),closest:r=>w6(e,r),matchAll:(r,a)=>y6(e,r,a),matchNode:(r,a,u,f)=>SA(e,r,a,u,f),canApply:r=>C6(e,r),formatChanged:(r,a,u,f)=>E6(e,o,r,a,u,f),getCssText:Qe(c9,e)}},iP=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},i9=(e,n,o)=>{const r=Bc(!1),a=y=>{RC(n,!1,o),n.add({},y)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",y=>{const x=y.command;iP(x)||(d6(n,o),n.beforeChange())}),e.on("ExecCommand",y=>{const x=y.command;iP(x)||a(y)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",a),e.on("dragend",a),e.on("keyup",y=>{const x=y.keyCode;if(y.isDefaultPrevented())return;const R=cn.os.isMacOS()&&y.key==="Meta";(x>=33&&x<=36||x>=37&&x<=40||x===45||y.ctrlKey||R)&&(a(),e.nodeChanged()),(x===46||x===8)&&e.nodeChanged(),r.get()&&n.typing&&!El(x0(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",y=>{const x=y.keyCode;if(y.isDefaultPrevented())return;if(x>=33&&x<=36||x>=37&&x<=40||x===45){n.typing&&a(y);return}const R=y.ctrlKey&&!y.altKey||y.metaKey;if((x<16||x>20)&&x!==224&&x!==91&&!n.typing&&!R){n.beforeChange(),RC(n,!0,o),n.add({},y),r.set(!0);return}(cn.os.isMacOS()?y.metaKey:y.ctrlKey&&!y.altKey)&&n.beforeChange()}),e.on("mousedown",y=>{n.typing&&a(y)});const u=y=>y.inputType==="insertReplacementText",f=y=>y.inputType==="insertText"&&y.data===null,b=y=>y.inputType==="insertFromPaste"||y.inputType==="insertFromDrop";e.on("input",y=>{y.inputType&&(u(y)||f(y)||b(y))&&a(y)}),e.on("AddUndo Undo Redo ClearUndos",y=>{y.isDefaultPrevented()||e.nodeChanged()})},l9=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},lP=e=>{const n=Ur(),o=Bc(0),r=Bc(0),a={data:[],typing:!1,beforeChange:()=>{nH(e,o,n)},add:(u,f)=>oH(e,a,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=x0(e);u.bookmark=Ry(e.selection),e.dispatch("change",{level:u,lastLevel:Gt(a.data,r.get()).getOrUndefined()})},undo:()=>sH(e,a,o,r),redo:()=>rH(e,r,a.data),clear:()=>{cH(e,a,r)},reset:()=>{b6(e,a)},hasUndo:()=>aH(e,a,r),hasRedo:()=>iH(e,a,r),transact:u=>lH(e,a,o,u),ignore:u=>{v6(e,o,u)},extra:(u,f)=>{CA(e,a,r,u,f)}};return Dd(e)||i9(e,a,o),l9(e),a},u9=[9,27,rt.HOME,rt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,rt.DOWN,rt.UP,rt.LEFT,rt.RIGHT].concat(cn.browser.isFirefox()?[224]:[]),uP="data-mce-placeholder",dP=e=>e.type==="keydown"||e.type==="keyup",mP=e=>{const n=e.keyCode;return n===rt.BACKSPACE||n===rt.DELETE},d9=e=>{if(dP(e)){const n=e.keyCode;return!mP(e)&&(rt.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||We(u9,n))}else return!1},oT=e=>dP(e)&&!(mP(e)||e.type==="keyup"&&e.keyCode===229),m9=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},f9=e=>{var n;const o=e.dom,r=ea(e),a=(n=jy(e))!==null&&n!==void 0?n:"",u=(f,b)=>{if(d9(f))return;const y=e.getBody(),x=oT(f)?!1:m9(o,y,r);(o.getAttrib(y,uP)!==""!==x||b)&&(o.setAttrib(y,uP,x?a:null),E3(e,x),e.on(x?"keydown":"keyup",u),e.off(x?"keyup":"keydown",u))};Xn(a)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",b=>rn.setEditorTimeout(e,()=>u(b)))})},jG=(e,n)=>({block:e,position:n}),zC=(e,n)=>({from:e,to:n}),HA=(e,n)=>{const o=me.fromDom(e),r=me.fromDom(n.container());return aE(o,r).map(a=>jG(a,n))},zA=e=>!(Mr(e.to.block,e.from.block)||Mr(e.from.block,e.to.block)),g9=e=>!ns(e.from.block,e.to.block),fP=(e,n)=>kr(n,a=>ji(a)||nt(a.dom),a=>ns(a,e)).filter(po).getOr(e),h9=(e,n)=>{const o=me.fromDom(e);return ns(fP(o,n.from.block),fP(o,n.to.block))},p9=e=>ds(e.from.block.dom)===!1&&ds(e.to.block.dom)===!1,T0=e=>{const n=o=>tS(o)||Qd(o.dom)||Xh(o);return n(e.from.block)&&n(e.to.block)},k0=(e,n,o,r)=>ls(r.position.getNode())&&!Ee(e,r.block)?Vu(!1,r.block.dom).bind(a=>a.isEqual(r.position)?jl(o,n,a).bind(u=>HA(n,u)):F.some(r)).getOr(r):r,sT=(e,n,o,r)=>{const a=HA(n,Ue.fromRangeStart(r)),u=a.bind(f=>jl(o,n,f.position).bind(b=>HA(n,b).map(y=>k0(e,n,o,y))));return yr(a,u,zC).filter(f=>g9(f)&&h9(n,f)&&p9(f)&&T0(f)&&zA(f))},rT=(e,n,o,r)=>r.collapsed?sT(e,n,o,r):F.none(),_0=(e,n)=>{const o=zc(e);return As(o,r=>n.isBlock(ee(r))).fold(yt(o),r=>o.slice(0,r))},Lp=(e,n)=>{const o=_0(e,n);return fe(o,zs),o},VC=(e,n,o)=>{const r=ch(o,n);return Ho(r.reverse(),a=>Ee(e,a)).each(zs)},cT=(e,n)=>jt(Ai(n),o=>!Ee(e,o)).length===0,gP=(e,n,o,r,a)=>{if(Ee(r,o))return jf(o),Wc(o.dom);cT(r,a)&&Ee(r,n)&&Ha(a,me.fromTag("br"));const u=Ma(o.dom,Ue.before(a.dom));return fe(Lp(n,r),f=>{Ha(a,f)}),VC(r,e,n),u},VA=(e,n)=>e.isInline(ee(n)),UA=(e,n,o,r)=>{if(Ee(r,o)){if(Ee(r,n)){const f=hs((b=>{const y=(x,R)=>dl(x).fold(()=>R,N=>VA(r,N)?y(N,R.concat(im(N))):R);return y(b,[])})(o),(b,y)=>(Rf(b,y),y),Zf());Fl(n),Cr(n,f)}return zs(o),Wc(n.dom)}const a=Uu(o.dom);return fe(Lp(n,r),u=>{Cr(o,u)}),VC(r,e,n),a},hP=(e,n)=>{const o=ch(n,e);return F.from(o[o.length-1])},pP=(e,n)=>Mr(n,e)?hP(n,e):F.none(),A0=(e,n)=>{Vu(e,n.dom).bind(o=>F.from(o.getNode())).map(me.fromDom).filter(Fr).each(zs)},WA=(e,n,o,r)=>(A0(!0,n),A0(!1,o),pP(n,o).fold(Qe(UA,e,n,o,r),Qe(gP,e,n,o,r))),ZA=(e,n,o,r,a)=>n?WA(e,r,o,a):WA(e,o,r,a),aT=(e,n)=>{const o=me.fromDom(e.getBody());return rT(e.schema,o.dom,n,e.selection.getRng()).map(a=>()=>{ZA(o,n,a.from.block,a.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},iT=(e,n,o)=>{const r=n.getRng();return yr(aE(e,me.fromDom(r.startContainer)),aE(e,me.fromDom(r.endContainer)),(a,u)=>ns(a,u)?F.none():F.some(()=>{r.deleteContents(),ZA(e,!0,a,u,o).each(f=>{n.setRng(f.toRange())})})).getOr(F.none())},jA=(e,n)=>{const o=me.fromDom(n),r=Qe(ns,e);return ml(o,ji,r).isSome()},bP=(e,n)=>jA(e,n.startContainer)||jA(e,n.endContainer),vP=(e,n)=>{const o=Ma(e.dom,Ue.fromRangeStart(n)).isNone(),r=Za(e.dom,Ue.fromRangeEnd(n)).isNone();return!bP(e,n)&&o&&r},yP=e=>F.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),bh=e=>{const n=me.fromDom(e.getBody()),o=e.selection.getRng();return vP(n,o)?yP(e):iT(n,e.selection,e.schema)},dg=(e,n)=>e.selection.isCollapsed()?F.none():bh(e),xi=(e,n,o,r,a)=>F.from(n._selectionOverrides.showCaret(e,o,r,a)),b9=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},UC=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?F.none():F.some(b9(n)),v9=(e,n,o)=>{const r=ix(1,e.getBody(),n),a=Ue.fromRangeStart(r),u=a.getNode();if(Z1(u))return xi(1,e,u,!a.isAtEnd(),!1);const f=a.getNode(!0);if(Z1(f))return xi(1,e,f,!1,!1);const b=Cm(e.dom.getRoot(),a.getNode());return Z1(b)?xi(1,e,b,!1,o):F.none()},GA=(e,n,o)=>n.collapsed?v9(e,n,o).getOr(n):n,y9=e=>Ap(e)||i0(e),C9=e=>Op(e)||X2(e),w9=(e,n)=>{wt(n)&&n.data.length===0&&e.remove(n)},CP=(e,n,o,r,a,u)=>{xi(r,e,u.getNode(!a),a,!0).each(f=>{if(n.collapsed){const b=n.cloneRange();a?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),w9(e.dom,o)},S9=(e,n)=>{const o=e.selection.getRng();if(!wt(o.commonAncestorContainer))return F.none();const r=n?1:-1,a=Zl(e.getBody()),u=Qe(K1,n?a.next:a.prev),f=n?y9:C9,b=q1(r,e.getBody(),o),y=u(b),x=y&&Ed(n,y);if(!x||!Gb(b,x))return F.none();if(f(x))return F.some(()=>CP(e,o,b.getNode(),r,n,x));const R=u(x);return R&&f(R)&&Gb(x,R)?F.some(()=>CP(e,o,b.getNode(),r,n,R)):F.none()},qA=(e,n)=>S9(e,n),KA=(e,n)=>{const o=e.getBody();return n?Wc(o).filter(Ap):Uu(o).filter(Op)},YA=e=>{const n=e.selection.getRng();return!n.collapsed&&(KA(e,!0).exists(o=>o.isEqual(Ue.fromRangeStart(n)))||KA(e,!1).exists(o=>o.isEqual(Ue.fromRangeEnd(n))))},XA=e=>De(e)&&(ji(me.fromDom(e))||Xh(me.fromDom(e))),Yl=Cs.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),wP=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return Vt(o)&&o.getAttribute("data-mce-caret")===r},x9=(e,n,o,r,a)=>{const u=f=>a.isInline(f.nodeName.toLowerCase())&&!Hu(o,r,e);return lx(!n,o).fold(()=>lx(n,r).fold(Re,u),u)},SP=(e,n,o,r,a)=>{const u=a.getNode(!o);return aE(me.fromDom(n),me.fromDom(r.getNode())).map(f=>Ee(e,f)?Yl.remove(f.dom):Yl.moveToElement(u)).orThunk(()=>F.some(Yl.moveToElement(u)))},JA=(e,n,o,r)=>jl(n,e,o).bind(a=>XA(a.getNode())||x9(e,n,o,a,r)?F.none():n&&ds(a.getNode())||!n&&ds(a.getNode(!0))?SP(r,e,n,o,a):n&&Op(o)||!n&&Ap(o)?F.some(Yl.moveToPosition(a)):F.none()),xP=(e,n)=>On(n)?F.none():e&&ds(n.nextSibling)?F.some(Yl.moveToElement(n.nextSibling)):!e&&ds(n.previousSibling)?F.some(Yl.moveToElement(n.previousSibling)):F.none(),QA=(e,n,o)=>o.fold(r=>F.some(Yl.remove(r)),r=>F.some(Yl.moveToElement(r)),r=>Hu(n,r,e)?F.none():F.some(Yl.moveToPosition(r))),EP=(e,n,o,r)=>wP(n,o)?xP(n,o.getNode(!n)).orThunk(()=>JA(e,n,o,r)):JA(e,n,o,r).bind(a=>QA(e,o,a)),TP=(e,n,o,r)=>{const a=ix(n?1:-1,e,o),u=Ue.fromRangeStart(a),f=me.fromDom(e);return!n&&Op(u)?F.some(Yl.remove(u.getNode(!0))):n&&Ap(u)?F.some(Yl.remove(u.getNode())):!n&&Ap(u)&&nE(f,u,r)?nM(f,u,r).map(b=>Yl.remove(b.getNode())):n&&Op(u)&&zn(f,u,r)?s7(f,u,r).map(b=>Yl.remove(b.getNode())):EP(e,n,u,r)},eO=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),u0(e,n,me.fromDom(o)),!0),E9=(e,n)=>o=>{const r=n?Ue.before(o):Ue.after(o);return e.selection.setRng(r.toRange()),!0},T9=e=>n=>(e.selection.setRng(n.toRange()),!0),pf=(e,n)=>F.from(Cm(e.getBody(),n)),Tm=(e,n)=>{const o=e.selection.getNode();return pf(e,o).filter(ds).fold(()=>TP(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(eO(e,n),E9(e,n),T9(e))),()=>F.some(Bt))},lT=e=>{fe(ka(e,".mce-offscreen-selection"),zs)},kP=(e,n)=>{const o=e.selection.getNode();return ds(o)&&!Xr(o)?pf(e,o.parentNode).filter(ds).fold(()=>F.some(()=>{lT(me.fromDom(e.getBody())),u0(e,n,me.fromDom(e.selection.getNode())),Mp(e)}),()=>F.some(Bt)):YA(e)?F.some(()=>{qs(e,e.selection.getRng(),me.fromDom(e.getBody()))}):F.none()},WC=e=>{const n=e.dom,o=e.selection,r=Cm(e.getBody(),o.getNode());if(nt(r)&&n.isBlock(r)&&n.isEmpty(r)){const a=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(a),o.setRng(Ue.before(a).toRange())}return!0},uT=(e,n)=>e.selection.isCollapsed()?Tm(e,n):kP(e,n),tO=e=>e.hasOwnProperty("text"),nO=e=>e.hasOwnProperty("marker"),oO=(e,n)=>{const o=(u,f)=>{if(wt(u))return{text:u,offset:f};{const b=n(),y=u.childNodes;return f<y.length?(u.insertBefore(b,y[f]),{marker:b,before:!0}):(u.appendChild(b),{marker:b,before:!1})}},r=o(e.endContainer,e.endOffset);return{start:o(e.startContainer,e.startOffset),end:r}},sO=e=>{var n,o;const{start:r,end:a}=e,u=new window.Range;return tO(r)?u.setStart(r.text,r.offset):nO(r)&&(r.before?u.setStartBefore(r.marker):u.setStartAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),tO(a)?u.setEnd(a.text,a.offset):nO(a)&&(a.before?u.setEndBefore(a.marker):u.setEndAfter(a.marker),(o=a.marker.parentNode)===null||o===void 0||o.removeChild(a.marker)),u},dT=(e,n)=>{var o;const r=e.dom,a=r.getParent(e.selection.getStart(),r.isBlock),u=r.getParent(e.selection.getEnd(),r.isBlock),f=e.getBody();if(((o=a==null?void 0:a.nodeName)===null||o===void 0?void 0:o.toLowerCase())==="div"&&a&&u&&a===f.firstChild&&u===f.lastChild&&!r.isEmpty(f)){const y=a.cloneNode(!1),x=()=>{if(n?Ir(e):rE(e),f.firstChild!==a){const R=oO(e.selection.getRng(),()=>document.createElement("span"));Array.from(f.childNodes).forEach(N=>y.appendChild(N)),f.appendChild(y),e.selection.setRng(sO(R))}};return F.some(x)}return F.none()},mT=(e,n)=>{const o=Ue.fromRangeStart(e.selection.getRng());return jl(n,e.getBody(),o).filter(r=>n?X5(r):QI(r)).bind(r=>hm(n?0:-1,r)).map(r=>()=>e.selection.select(r))},ZC=(e,n)=>e.selection.isCollapsed()?mT(e,n):F.none(),Lv=wt,_P=e=>Lv(e)&&e.data[0]===Jc,AP=e=>Lv(e)&&e.data[e.data.length-1]===Jc,OP=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Jc)},DP=e=>{var n;if(Lv(e.previousSibling))return AP(e.previousSibling)||e.previousSibling.appendData(Jc),e.previousSibling;if(Lv(e))return _P(e)||e.insertData(0,Jc),e;{const o=OP(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},k9=e=>{var n,o;if(Lv(e.nextSibling))return _P(e.nextSibling)||e.nextSibling.insertData(0,Jc),e.nextSibling;if(Lv(e))return AP(e)||e.appendData(Jc),e;{const r=OP(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},fT=(e,n)=>e?DP(n):k9(n),rO=Qe(fT,!0),_9=Qe(fT,!1),RP=(e,n)=>wt(e.container())?fT(n,e.container()):fT(n,e.getNode()),MP=(e,n)=>{const o=n.get();return o&&e.container()===o&&vd(o)},cO=(e,n)=>n.fold(o=>{jg(e.get());const r=rO(o);return e.set(r),F.some(Ue(r,r.length-1))},o=>Wc(o).map(r=>{if(MP(r,e)){const a=e.get();return Ue(a,1)}else{jg(e.get());const a=RP(r,!0);return e.set(a),Ue(a,1)}}),o=>Uu(o).map(r=>{if(MP(r,e)){const a=e.get();return Ue(a,a.length-1)}else{jg(e.get());const a=RP(r,!1);return e.set(a),Ue(a,a.length-1)}}),o=>{jg(e.get());const r=_9(o);return e.set(r),F.some(Ue(r,1))}),NP=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return F.none()},kl=Cs.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),PP=(e,n)=>{const o=gm(n,e);return o||e},gT=(e,n,o)=>{const r=gM(o),a=PP(n,r.container());return ha(e,a,r).fold(()=>Za(a,r).bind(Qe(ha,e,a)).map(u=>kl.before(u)),F.none)},aO=(e,n)=>Jg(e,n)===null,BP=(e,n,o)=>ha(e,n,o).filter(Qe(aO,n)),A9=(e,n,o)=>{const r=hM(o);return BP(e,n,r).bind(a=>Ma(a,r).isNone()?F.some(kl.start(a)):F.none())},O9=(e,n,o)=>{const r=gM(o);return BP(e,n,r).bind(a=>Za(a,r).isNone()?F.some(kl.end(a)):F.none())},D9=(e,n,o)=>{const r=hM(o),a=PP(n,r.container());return ha(e,a,r).fold(()=>Ma(a,r).bind(Qe(ha,e,a)).map(u=>kl.after(u)),F.none)},iO=e=>!Gk(lO(e)),mg=(e,n,o)=>NP([gT,A9,O9,D9],[e,n,o]).filter(iO),lO=e=>e.fold(Mo,Mo,Mo,Mo),hT=e=>e.fold(yt("before"),yt("start"),yt("end"),yt("after")),pT=e=>e.fold(kl.before,kl.before,kl.after,kl.after),uO=e=>e.fold(kl.start,kl.start,kl.end,kl.end),R9=(e,n)=>hT(e)===hT(n)&&lO(e)===lO(n),M9=(e,n,o,r,a,u)=>yr(ha(n,o,r),ha(n,o,a),(f,b)=>f!==b&&T7(o,f,b)?kl.after(e?f:b):u).getOr(u),N9=(e,n)=>e.fold(ot,o=>!R9(o,n)),P9=(e,n,o,r,a)=>{const u=Ed(e,a);return jl(e,o,u).map(Qe(Ed,e)).fold(()=>r.map(pT),y=>mg(n,o,y).map(Qe(M9,e,n,o,u,y)).filter(Qe(N9,r))).filter(iO)},B9=(e,n)=>e?n.fold(A(F.some,kl.start),F.none,A(F.some,kl.after),F.none):n.fold(F.none,A(F.some,kl.before),F.none,A(F.some,kl.end)),bT=(e,n,o,r)=>{const a=Ed(e,r),u=mg(n,o,a);return mg(n,o,a).bind(Qe(B9,e)).orThunk(()=>P9(e,n,o,u,r))},vT=e=>ie(e.selection.getSel().modify),$P=(e,n,o)=>{const r=e?1:-1;return n.setRng(Ue(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},$9=(e,n)=>{const o=n.selection.getRng(),r=e?Ue.fromRangeEnd(o):Ue.fromRangeStart(o);return vT(n)?e&&yd(r)?$P(!0,n.selection,r):!e&&Jh(r)?$P(!1,n.selection,r):!1:!1};var Rd;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Rd||(Rd={}));const yT=(e,n)=>e===-1?os(n):n,F9=(e,n,o)=>e===1?n.next(o):n.prev(o),I9=(e,n,o,r)=>ls(r.getNode(n===1))?Rd.Br:Hu(o,r)===!1?Rd.Block:Rd.Wrap,FP=(e,n,o,r)=>{const a=Zl(o);let u=r;const f=[];for(;u;){const b=F9(n,a,u);if(!b)break;if(ls(b.getNode(!1)))return n===1?{positions:yT(n,f).concat([b]),breakType:Rd.Br,breakAt:F.some(b)}:{positions:yT(n,f),breakType:Rd.Br,breakAt:F.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const y=I9(o,n,u,b);return{positions:yT(n,f),breakType:y,breakAt:F.some(b)}}f.push(b),u=b}return{positions:yT(n,f),breakType:Rd.Eol,breakAt:F.none()}},IP=(e,n,o,r)=>n(o,r).breakAt.map(a=>{const u=n(o,a).positions;return e===-1?u.concat(a):[a].concat(u)}).getOr([]),dO=(e,n)=>Wn(e,(o,r)=>o.fold(()=>F.some(r),a=>yr(Ht(a.getClientRects()),Ht(r.getClientRects()),(u,f)=>{const b=Math.abs(n-u.left);return Math.abs(n-f.left)<=b?r:a}).or(o)),F.none()),CT=(e,n)=>Ht(n.getClientRects()).bind(o=>dO(e,o.left)),jC=Qe(FP,Ue.isAbove,-1),GC=Qe(FP,Ue.isBelow,1),LP=Qe(IP,-1,jC),HP=Qe(IP,1,GC),L9=(e,n)=>jC(e,n).breakAt.isNone(),Md=(e,n)=>GC(e,n).breakAt.isNone(),mO=e=>Wc(e).map(n=>[n].concat(GC(e,n).positions)).getOr([]),zP=e=>Uu(e).map(n=>jC(e,n).positions.concat(n)).getOr([]),VP=(e,n)=>CT(LP(e,n),n),H9=(e,n)=>CT(HP(e,n),n),UP=ds,WP=(e,n)=>Math.abs(e.left-n),fO=(e,n)=>Math.abs(e.right-n),z9=e=>Ls(e,"node"),ZP=(e,n)=>le(e,(o,r)=>{const a=Math.min(WP(o,n),fO(o,n)),u=Math.min(WP(r,n),fO(r,n));return u===a&&z9(r)&&UP(r.node)||u<a?r:o}),V9=e=>{const n=o=>et(o,r=>{const a=Ig(r);return a.node=e,a});if(Vt(e))return n(e.getClientRects());if(wt(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},O0=e=>Js(e,V9);var Hp;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Hp||(Hp={}));const jP=(e,n,o,r)=>{let a=r;for(;a=nf(a,e,Ty,n);)if(o(a))return},gO=(e,n,o,r,a,u)=>{let f=0;const b=[],y=N=>{let B=O0([N]);e===Hp.Up&&(B=B.reverse());for(let W=0;W<B.length;W++){const X=B[W];if(!o(X,x)){if(b.length>0&&n(X,Ne(b))&&f++,X.line=f,a(X))return!0;b.push(X)}}return!1},x=Ne(u.getClientRects());if(!x)return b;const R=u.getNode();return R&&(y(R),jP(e,r,y,R)),b},hO=(e,n)=>n.line>e,U9=(e,n)=>n.line===e,W9=Qe(gO,Hp.Up,Qh,_1),Z9=Qe(gO,Hp.Down,_1,Qh),GP=e=>Ne(e.getClientRects()),GG=(e,n,o,r)=>{const a=Zl(n);let u,f,b,y;const x=[];let R=0;e===Hp.Down?(u=a.next,f=_1,b=Qh,y=Ue.after(r)):(u=a.prev,f=Qh,b=_1,y=Ue.before(r));const N=GP(y);do{if(!y.isVisible())continue;const B=GP(y);if(b(B,N))continue;x.length>0&&f(B,Ne(x))&&R++;const W=Ig(B);if(W.position=y,W.line=R,o(W))return x;x.push(W)}while(y=u(y));return x},j9=e=>n=>hO(e,n),qP=e=>n=>U9(e,n),Ei=(e,n)=>{e.selection.setRng(n),hv(e,e.selection.getRng())},pO=(e,n,o)=>F.some(GA(e,n,o)),KP=(e,n,o,r,a,u)=>{const f=n===1,b=Zl(e.getBody()),y=Qe(K1,f?b.next:b.prev),x=f?r:a;if(!o.collapsed){const X=A1(o);if(u(X))return xi(n,e,X,n===-1,!1);if(YA(e)){const q=o.cloneRange();return q.collapse(n===-1),F.from(q)}}const R=q1(n,e.getBody(),o);if(x(R))return UC(e,R.getNode(!f));let N=y(R);const B=xy(o);if(N)N=Ed(f,N);else return B?F.some(o):F.none();if(x(N))return xi(n,e,N.getNode(!f),f,!1);const W=y(N);return W&&x(W)&&Gb(N,W)?xi(n,e,W.getNode(!f),f,!1):B?pO(e,N.toRange(),!1):F.none()},zp=(e,n,o,r,a,u)=>{const f=q1(n,e.getBody(),o),b=Ne(f.getClientRects()),y=n===Hp.Down,x=e.getBody();if(!b)return F.none();if(YA(e)){const ne=y?Ue.fromRangeEnd(o):Ue.fromRangeStart(o);return(y?H9:VP)(x,ne).orThunk(()=>F.from(ne)).map(Se=>Se.toRange())}const N=(y?Z9:W9)(x,j9(1),f),B=jt(N,qP(1)),W=b.left,X=ZP(B,W);if(X&&u(X.node)){const ne=Math.abs(W-X.left),ge=Math.abs(W-X.right);return xi(n,e,X.node,ne<ge,!1)}let q;if(r(f)?q=f.getNode():a(f)?q=f.getNode(!0):q=A1(o),q){const ne=GG(n,x,j9(1),q);let ge=ZP(jt(ne,qP(1)),W);if(ge||(ge=Ne(jt(ne,qP(0))),ge))return pO(e,ge.position.toRange(),!1)}return B.length===0?wT(e,y).filter(y?a:r).map(ne=>GA(e,ne.toRange(),!1)):F.none()},wT=(e,n)=>{const o=e.selection.getRng(),r=n?Ue.fromRangeEnd(o):Ue.fromRangeStart(o),a=g2(r.container(),e.getBody());if(n){const u=GC(a,r);return Jt(u.positions)}else{const u=jC(a,r);return Ht(u.positions)}},YP=(e,n,o)=>wT(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),D0=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},XP=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},JP=(e,n,o)=>cO(n,o).map(r=>(D0(e,r),o)),G9=(e,n,o)=>{const r=Ue.fromRangeStart(e);if(e.collapsed)return r;{const a=Ue.fromRangeEnd(e);return o?Ma(n,a).getOr(a):Za(n,r).getOr(r)}},q9=(e,n,o)=>{const r=e.getBody(),a=G9(e.selection.getRng(),r,o),u=Qe(Dp,e);return bT(o,u,r,a).bind(b=>JP(e,n,b))},QP=(e,n,o)=>{const r=et(ka(me.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),a=jt(r,e),u=jt(o,e);fe(Nr(a,u),Qe(XP,!1)),fe(Nr(u,a),Qe(XP,!0))},K9=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Ue.fromRangeStart(e.selection.getRng());Ue.isTextPosition(r)&&!k7(r)&&(D0(e,Y3(o,r)),n.set(null))}},vh=(e,n,o,r)=>{if(n.selection.isCollapsed()){const a=jt(r,e);fe(a,u=>{const f=Ue.fromRangeStart(n.selection.getRng());mg(e,n.getBody(),f).bind(b=>JP(n,o,b))})}},ST=(e,n,o)=>F1(e)?q9(e,n,o).isSome():!1,eB=(e,n,o)=>F1(n)?$9(e,n):!1,Y9=e=>{const n=Bc(null),o=Qe(Dp,e);return e.on("NodeChange",r=>{F1(e)&&(QP(o,e.dom,r.parents),K9(e,n),vh(o,e,n,r.parents))}),n},X9=Qe(eB,!0),J9=Qe(eB,!1),xT=(e,n,o)=>{if(F1(e)){const r=wT(e,n).getOrThunk(()=>{const a=e.selection.getRng();return n?Ue.fromRangeEnd(a):Ue.fromRangeStart(a)});return mg(Qe(Dp,e),e.getBody(),r).exists(a=>{const u=pT(a);return cO(o,u).exists(f=>(D0(e,f),!0))})}else return!1},bO=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},vO=e=>yr(Wc(e),Uu(e),(n,o)=>{const r=Ed(!0,n),a=Ed(!1,o);return Za(e,r).forall(u=>u.isEqual(a))}).getOr(!0),ET=(e,n)=>o=>cO(n,o).map(r=>()=>D0(e,r)),yO=(e,n,o,r)=>{const a=e.getBody(),u=Qe(Dp,e);e.undoManager.ignore(()=>{e.selection.setRng(bO(o,r)),rE(e),mg(u,a,Ue.fromRangeStart(e.selection.getRng())).map(uO).bind(ET(e,n)).each(Tn)}),e.nodeChanged()},tB=(e,n)=>{const o=gm(n,e);return o||e},nB=(e,n,o,r)=>{const a=tB(e.getBody(),r.container()),u=Qe(Dp,e),f=mg(u,a,r);return f.bind(y=>o?y.fold(yt(F.some(uO(y))),F.none,yt(F.some(pT(y))),F.none):y.fold(F.none,yt(F.some(pT(y))),F.none,yt(F.some(uO(y))))).map(ET(e,n)).getOrThunk(()=>{const y=tg(o,a,r),x=y.bind(R=>mg(u,a,R));return yr(f,x,()=>ha(u,a,r).bind(R=>vO(R)?F.some(()=>{u0(e,o,me.fromDom(R))}):F.none())).getOrThunk(()=>x.bind(()=>y.map(R=>()=>{o?yO(e,n,r,R):yO(e,n,R,r)})))})},CO=(e,n,o)=>{if(e.selection.isCollapsed()&&F1(e)){const r=Ue.fromRangeStart(e.selection.getRng());return nB(e,n,o,r)}return F.none()},qC=e=>dd(e)>1,KC=(e,n)=>{const o=me.fromDom(e.getBody()),r=me.fromDom(e.selection.getStart()),a=ch(r,o);return As(a,n).fold(yt(a),u=>a.slice(0,u))},oB=e=>dd(e)===1,sB=e=>KC(e,n=>e.schema.isBlock(ee(n))||qC(n)),rB=e=>KC(e,n=>e.schema.isBlock(ee(n))),wO=(e,n)=>{const o=Qe(AE,e);return Js(n,r=>o(r)?[r.dom]:[])},YC=e=>{const n=rB(e);return wO(e,n)},SO=(e,n,o,r)=>{const a=wO(n,r);if(a.length===0)u0(n,e,o);else{const u=k_(o.dom,a);n.selection.setRng(u.toRange())}},XC=(e,n)=>{const o=jt(sB(e),oB);return Jt(o).bind(r=>{const a=Ue.fromRangeStart(e.selection.getRng());return ju(n,a,r.dom)&&!rf(r)?F.some(()=>SO(n,e,r,o)):F.none()})},Q9=(e,n)=>{const o=n.parentElement;return ls(n)&&!Z(o)&&e.dom.isEmpty(o)},cB=e=>rf(me.fromDom(e)),aB=(e,n)=>{const o=e.selection.getStart(),r=Q9(e,o)||cB(o)?k_(o,n):__(e.selection.getRng(),n);e.selection.setRng(r.toRange())},ez=(e,n)=>{const o=Nr(n,YC(e));o.length>0&&aB(e,o)},xO=e=>wt(e.startContainer),tz=e=>e.startOffset===0&&xO(e),iB=(e,n)=>{const o=n.startContainer.parentElement;return!Z(o)&&AE(e,me.fromDom(o))},qG=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!Z(n)&&!Z(o)&&n.isEqualNode(o)},nz=e=>{const n=e.endContainer;return e.endOffset===(wt(n)?n.length:n.childNodes.length)},oz=e=>qG(e)&&nz(e),sz=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),rz=e=>oz(e)||sz(e),cz=e=>{const n=e.selection.getRng();return tz(n)&&iB(e,n)&&rz(n)},az=e=>{if(cz(e)){const n=YC(e);return F.some(()=>{rE(e),ez(e,n)})}else return F.none()},EO=(e,n)=>e.selection.isCollapsed()?XC(e,n):az(e),iz=(e,n)=>Dh(e,o=>Gl(o.dom),o=>n.isBlock(ee(o))),lB=e=>iz(me.fromDom(e.selection.getStart()),e.schema),lz=e=>{const n=e.selection.getRng();return n.collapsed&&(xO(n)||e.dom.isEmpty(n.startContainer))&&!lB(e)},km=e=>(lz(e)&&aB(e,[]),!0),TT=(e,n,o)=>De(o)?F.some(()=>{e._selectionOverrides.hideFakeCaret(),u0(e,n,me.fromDom(o))}):F.none(),TO=(e,n)=>{const o=n?i0:X2,a=q1(n?1:-1,e.getBody(),e.selection.getRng());return o(a)?TT(e,n,a.getNode(!n)):F.from(Ed(n,a)).filter(u=>o(u)&&Gb(a,u)).bind(u=>TT(e,n,u.getNode(!n)))},uB=(e,n)=>{const o=e.selection.getNode();return Xc(o)?TT(e,n,o):F.none()},JC=(e,n)=>e.selection.isCollapsed()?TO(e,n):uB(e,n),Vp=e=>kr(e,n=>nt(n.dom)||ds(n.dom)).exists(n=>nt(n.dom)),kT=e=>tc(e??"").getOr(0),Yu=(e,n)=>{const o=e||T1(n)?"margin":"padding",r=Vr(n,"direction")==="rtl"?"-right":"-left";return o+r},R0=(e,n,o,r,a,u)=>{const f=Yu(o,me.fromDom(u)),b=kT(e.getStyle(u,f));if(n==="outdent"){const y=Math.max(0,b-r);e.setStyle(u,f,y?y+a:"")}else{const y=b+r+a;e.setStyle(u,f,y)}},kO=(e,n)=>ps(n,o=>{const r=Yu(Pb(e),o),a=Xa(o,r).map(kT).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&a>0}),dB=e=>{const n=mB(e);return!e.mode.isReadOnly()&&(n.length>1||kO(e,n))},_O=e=>Yh(e)||Xh(e),uz=e=>xa(e).exists(_O),mB=e=>jt(fd(e.selection.getSelectedBlocks()),n=>!_O(n)&&!uz(n)&&Vp(n)),fB=(e,n)=>{var o,r;if(e.mode.isReadOnly())return;const{dom:a}=e,u=M3(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=kT(u),y=Pb(e);fe(mB(e),x=>{R0(a,n,y,b,f,x.dom)})},dz=e=>fB(e,"indent"),gB=e=>fB(e,"outdent"),AO=e=>{if(e.selection.isCollapsed()&&dB(e)){const n=e.dom,o=e.selection.getRng(),r=Ue.fromRangeStart(o),a=n.getParent(o.startContainer,n.isBlock);if(a!==null&&eM(me.fromDom(a),r,e.schema))return F.some(()=>gB(e))}return F.none()},hB=(e,n,o)=>bs([AO,uT,qA,(r,a)=>CO(r,n,a),aT,yE,ZC,JC,dg,EO,dT],r=>r(e,o)).filter(r=>e.selection.isEditable()),mz=(e,n)=>{hB(e,n,!1).fold(()=>{e.selection.isEditable()&&(rE(e),Mp(e))},Tn)},Hv=(e,n)=>{hB(e,n,!0).fold(()=>{e.selection.isEditable()&&Ir(e)},Tn)},_T=(e,n)=>{e.addCommand("delete",()=>{mz(e,n)}),e.addCommand("forwardDelete",()=>{Hv(e,n)})},OO=5,pB=400,AT=e=>e.touches===void 0||e.touches.length!==1?F.none():F.some(e.touches[0]),fz=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>OO||r>OO},gz=e=>{const n=Ur(),o=Bc(!1),r=ub(a=>{e.dispatch("longpress",{...a,type:"longpress"}),o.set(!0)},pB);e.on("touchstart",a=>{AT(a).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:a.target};r.throttle(a),o.set(!1),n.set(f)})},!0),e.on("touchmove",a=>{r.cancel(),AT(a).each(u=>{n.on(f=>{fz(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",a=>{r.cancel(),a.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(a.target)).each(()=>{o.get()?a.preventDefault():e.dispatch("tap",{...a,type:"tap"})})},!0)},DO=(e,n)=>Cn(e,n.nodeName),hz=(e,n)=>wt(n)?!0:Vt(n)?!DO(e.getBlockElements(),n)&&!wl(n)&&!ei(e,n)&&!_(n):!1,pz=(e,n,o)=>Tt(e7(me.fromDom(o),me.fromDom(n)),r=>DO(e,r.dom)),bz=(e,n)=>{if(wt(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||DO(e,n.nextSibling)||_(n.nextSibling)}return!1},RO=e=>e.dom.create(ea(e),mu(e)),bB=e=>{const n=e.dom,o=e.selection,r=e.schema,a=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,y,x=null;const R=ea(e);if(!u||!Vt(u))return;const N=f.nodeName.toLowerCase();if(!r.isValidChild(N,R.toLowerCase())||pz(a,f,u))return;if(f.firstChild===f.lastChild&&ls(f.firstChild)){b=RO(e),b.appendChild(Zf().dom),f.replaceChild(b,f.firstChild),e.selection.setCursorLocation(b,0),e.nodeChanged();return}let B=f.firstChild;for(;B;)if(Vt(B)&&hd(r,B),hz(r,B)){if(bz(a,B)){y=B,B=B.nextSibling,n.remove(y);continue}if(!b){if(!x&&e.hasFocus()&&(x=oO(e.selection.getRng(),()=>document.createElement("span"))),!B.parentNode){B=null;break}b=RO(e),f.insertBefore(b,B)}y=B,B=B.nextSibling,b.appendChild(y)}else b=null,B=B.nextSibling;x&&(e.selection.setRng(sO(x)),e.nodeChanged())},vB=(e,n,o)=>{const r=me.fromDom(RO(e)),a=Zf();Cr(r,a),o(n,r);const u=document.createRange();return u.setStartBefore(a.dom),u.setEndBefore(a.dom),u},vz=e=>{e.on("NodeChange",()=>bB(e))},bc=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,yB=(e,n,o)=>function(r){const a=arguments,u=a[a.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(a[0])+'">'+e.dom.encode(typeof a[1]=="string"?a[1]:a[0])+"</span>"},OT=(e,n,o)=>{let r=n.length,a=o.content;if(o.format!=="raw"){for(;r--;)a=a.replace(n[r],yB(e,a,Vb(e)));o.content=a}},CB=(e,n)=>ps(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),DT=e=>{const n="contenteditable",o=" "+at.trim(KR(e))+" ",r=" "+at.trim(Vb(e))+" ",a=bc(o),u=bc(r),f=lp(e);f.length>0&&e.on("BeforeSetContent",b=>{OT(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let y=b.length;for(;y--;){const x=b[y];a(x)?x.attr(n,"true"):u(x)&&x.attr(n,"false")}}),e.serializer.addAttributeFilter(n,b=>{let y=b.length;for(;y--;){const x=b[y];if(!a(x)&&!u(x))continue;const R=x.attr("data-mce-content");f.length>0&&R?CB(f,R)?(x.name="#text",x.type=3,x.raw=!0,x.value=R):x.remove():x.attr(n,null)}})},yz=e=>xc(me.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),MO=(e,n)=>{n.hasAttribute("data-mce-caret")&&(gr(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},Cz=(e,n)=>{const o=yz(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),MO(e,o);return}wy(o)&&(MO(e,o),e.undoManager.add())}},wz=e=>{e.on("keyup compositionstart",Qe(Cz,e))},wB=ds,SB=(e,n,o)=>KP(n,e,o,Ap,Op,wB),Sz=(e,n,o)=>zp(n,e,o,u=>Ap(u)||J5(u),u=>Op(u)||Pk(u),wB),xz=e=>{const n=e.dom.create(ea(e));return n.innerHTML='<br data-mce-bogus="1">',n},zv=(e,n,o)=>{const r=Zl(e.getBody()),a=Qe(K1,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!a(Ue.fromRangeStart(o))){const b=me.fromDom(xz(e));n===1?Oi(me.fromDom(u),b):Ha(me.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},yh=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return SB(o,e,r).orThunk(()=>(zv(e,o,r),F.none()))},M0=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return Sz(o,e,r).orThunk(()=>(zv(e,o,r),F.none()))},RT=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return Gk(o)?!n:n},MT=(e,n)=>yh(e,RT(e.selection,n)).exists(o=>(Ei(e,o),!0)),NT=(e,n)=>M0(e,n).exists(o=>(Ei(e,o),!0)),NO=(e,n)=>YP(e,n,n?Op:Ap),PT=(e,n)=>KA(e,!n).map(o=>{const r=o.toRange(),a=e.selection.getRng();return n?r.setStart(a.startContainer,a.startOffset):r.setEnd(a.endContainer,a.endOffset),r}).exists(o=>(Ei(e,o),!0)),xB=e=>We(["figcaption"],ee(e)),EB=(e,n,o)=>{const r=Qe(ns,n);return kr(me.fromDom(e.container()),a=>o.isBlock(ee(a)),r).filter(xB)},Ez=(e,n,o)=>n?Md(e.dom,o):L9(e.dom,o),Tz=(e,n)=>{const o=me.fromDom(e.getBody()),r=Ue.fromRangeStart(e.selection.getRng());return EB(r,o,e.schema).exists(()=>{if(Ez(o,n,r)){const u=vB(e,o,n?Cr:qd);return e.selection.setRng(u),!0}else return!1})},TB=(e,n)=>e.selection.isCollapsed()?Tz(e,n):!1,kz=(e,n,o)=>{const r=e.selection.getRng(),a=Ue.fromRangeStart(r);return e.getBody().firstChild===n&&L9(o,a)?(e.execCommand("InsertNewBlockBefore"),!0):!1},_z=(e,n)=>{const o=e.selection.getRng(),r=Ue.fromRangeStart(o);return e.getBody().lastChild===n&&Md(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},Az=(e,n)=>n?F.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>_z(e,o)).getOr(!1):F.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>F.from(e.dom.getParent(o,"details")).map(r=>kz(e,r,o))).getOr(!1),PO=(e,n)=>Az(e,n),BO={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},KG=e=>et(e,n=>({...BO,...n})),YG=e=>et(e,n=>({...BO,...n})),Oz=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,Dz=(e,n)=>Js(KG(e),o=>Oz(o,n)?[o]:[]),XG=(e,n)=>Js(YG(e),o=>Oz(o,n)?[o]:[]),no=(e,...n)=>()=>e.apply(null,n),QC=(e,n)=>Ho(Dz(e,n),o=>o.action()),kB=(e,n)=>bs(XG(e,n),o=>o.action()),Rz=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return KP(e,o,r,i0,X2,Xc).exists(a=>(Ei(e,a),!0))},_B=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return zp(e,o,r,i0,X2,Xc).exists(a=>(Ei(e,a),!0))},_l=(e,n)=>YP(e,n,n?X2:i0),$O=Cs.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),ew={...$O,none:e=>$O.none(e)},AB=(e,n)=>FO(e,n,ot),FO=(e,n,o)=>Js(zc(e),r=>La(r,n)?o(r)?[r]:[]:FO(r,n,o)),OB=(e,n,o=Re)=>{if(o(n))return F.none();if(We(e,ee(n)))return F.some(n);const r=a=>La(a,"table")||o(a);return jd(n,e.join(","),r)},IO=(e,n)=>OB(["td","th"],e,n),DB=e=>AB(e,"th,td"),RB=(e,n)=>pn(e,"table",n),$T=(e,n,o,r,a=ot)=>{const u=r===1;if(!u&&o<=0)return ew.first(e[0]);if(u&&o>=e.length-1)return ew.last(e[e.length-1]);{const f=o+r,b=e[f];return a(b)?ew.middle(n,b):$T(e,n,f,r,a)}},MB=(e,n)=>RB(e,n).bind(o=>{const r=DB(o);return As(r,u=>ns(e,u)).map(u=>({index:u,all:r}))}),Mz=(e,n,o)=>MB(e,o).fold(()=>ew.none(e),a=>$T(a.all,e,a.index,1,n)),Nz=(e,n,o)=>MB(e,o).fold(()=>ew.none(),a=>$T(a.all,e,a.index,-1,n)),LO=e=>Q4(e).filter(n=>n.trim().length!==0||n.indexOf(fc)>-1).isSome(),Pz=e=>$o(e)&&Hc(e,"contenteditable")==="false",Bz=["img","br"],JG=e=>LO(e)||We(Bz,ee(e))||Pz(e),$z=e=>Zd(e,JG),NB=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),QG=(e,n)=>Js(n,o=>{const r=NB(Ig(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),Fz=(e,n,o)=>Wn(e,(r,a)=>r.fold(()=>F.some(a),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(a.x-n)+Math.abs(a.y-o));return F.some(b<f?a:u)}),F.none()),PB=(e,n,o,r,a)=>{const u=ka(me.fromDom(o),"td,th,caption").map(b=>b.dom),f=jt(QG(e,u),b=>n(b,a));return Fz(f,r,a).map(b=>b.cell)},Iz=e=>e.bottom,HO=e=>e.top,FT=(e,n)=>e.y<n,BB=(e,n)=>e.y>n,$B=Qe(PB,Iz,FT),Lz=Qe(PB,HO,BB),Hz=(e,n)=>Ht(n.getClientRects()).bind(o=>$B(e,o.left,o.top)).bind(o=>CT(zP(o),n)),zO=(e,n)=>Jt(n.getClientRects()).bind(o=>Lz(e,o.left,o.top)).bind(o=>CT(mO(o),n)),zz=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),Vz=e=>e.breakType===Rd.Wrap&&e.positions.length===0,Uz=e=>e.breakType===Rd.Br&&e.positions.length===1,FB=(e,n,o)=>{const r=e(n,o);return Vz(r)||!ls(o.getNode())&&Uz(r)?!zz(e,n,r):r.breakAt.isNone()},_m=Qe(FB,jC),IB=Qe(FB,GC),LB=(e,n,o)=>{const r=Ue.fromRangeStart(n);return Vu(!e,o).exists(a=>a.isEqual(r))},eq=(e,n,o,r)=>{const a=e.selection.getRng(),u=n?1:-1;return sx()&&LB(n,a,o)?(xi(u,e,o,!n,!1).each(f=>{Ei(e,f)}),!0):!1},tq=(e,n,o)=>Hz(n,o).orThunk(()=>Ht(o.getClientRects()).bind(r=>dO(LP(e,Ue.before(n)),r.left))).getOr(Ue.before(n)),nq=(e,n,o)=>zO(n,o).orThunk(()=>Ht(o.getClientRects()).bind(r=>dO(HP(e,Ue.after(n)),r.left))).getOr(Ue.after(n)),Wz=(e,n)=>{const o=n.getNode(e);return cu(o)?F.some(o):F.none()},Zz=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?Oi:Ha,a=vB(n,me.fromDom(o),r);Ei(n,a)})},tw=(e,n,o)=>{const r=Wz(!!n,o),a=n===!1;r.fold(()=>Ei(e,o.toRange()),u=>Vu(a,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>Ei(e,o.toRange()),f=>Zz(n,e,u)))},jz=(e,n,o,r)=>{const a=e.selection.getRng(),u=Ue.fromRangeStart(a),f=e.getBody();if(!n&&_m(r,u)){const b=tq(f,o,u);return tw(e,n,b),!0}else if(n&&IB(r,u)){const b=nq(f,o,u);return tw(e,n,b),!0}else return!1},IT=(e,n,o)=>F.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>F.from(e.dom.getParent(r,"table")).map(a=>o(e,n,a,r))).getOr(!1),VO=(e,n)=>IT(e,n,eq),LT=(e,n)=>IT(e,n,jz),HB=e=>{const n=xp.exact(e,0,e,0);return j2(n)},zB=(e,n,o)=>o.fold(F.none,F.none,(r,a)=>$z(a).map(u=>HB(u)),r=>e.mode.isReadOnly()||!Gz(r)?F.none():(e.execCommand("mceTableInsertRowAfter"),VB(e,n,r))),Gz=e=>kr(e,Kc("table")).exists(fl),VB=(e,n,o)=>zB(e,n,Mz(o,nw)),qz=(e,n,o)=>zB(e,n,Nz(o,nw)),nw=e=>fl(e)||Rh(e,Kz),Kz=e=>$o(e)&&fl(e),UB=(e,n)=>{const o=["table","li","dl"],r=me.fromDom(e.getBody()),a=b=>{const y=ee(b);return ns(b,r)||We(o,y)},u=e.selection.getRng(),f=me.fromDom(n?u.endContainer:u.startContainer);return IO(f,a).map(b=>(RB(b,a).each(R=>{e.model.table.clearSelectedCells(R.dom)}),e.selection.collapse(!n),(n?VB:qz)(e,a,b).each(R=>{e.selection.setRng(R)}),!0)).getOr(!1)},Yz=(e,n,o)=>{const r=cn.os.isMacOS()||cn.os.isiOS();QC([{keyCode:rt.RIGHT,action:no(MT,e,!0)},{keyCode:rt.LEFT,action:no(MT,e,!1)},{keyCode:rt.UP,action:no(NT,e,!1)},{keyCode:rt.DOWN,action:no(NT,e,!0)},...r?[{keyCode:rt.UP,action:no(PT,e,!1),metaKey:!0,shiftKey:!0},{keyCode:rt.DOWN,action:no(PT,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:rt.RIGHT,action:no(VO,e,!0)},{keyCode:rt.LEFT,action:no(VO,e,!1)},{keyCode:rt.UP,action:no(LT,e,!1)},{keyCode:rt.DOWN,action:no(LT,e,!0)},{keyCode:rt.UP,action:no(LT,e,!1)},{keyCode:rt.UP,action:no(PO,e,!1)},{keyCode:rt.DOWN,action:no(PO,e,!0)},{keyCode:rt.RIGHT,action:no(Rz,e,!0)},{keyCode:rt.LEFT,action:no(Rz,e,!1)},{keyCode:rt.UP,action:no(_B,e,!1)},{keyCode:rt.DOWN,action:no(_B,e,!0)},{keyCode:rt.RIGHT,action:no(ST,e,n,!0)},{keyCode:rt.LEFT,action:no(ST,e,n,!1)},{keyCode:rt.RIGHT,ctrlKey:!r,altKey:r,action:no(X9,e,n)},{keyCode:rt.LEFT,ctrlKey:!r,altKey:r,action:no(J9,e,n)},{keyCode:rt.UP,action:no(TB,e,!1)},{keyCode:rt.DOWN,action:no(TB,e,!0)}],o).each(a=>{o.preventDefault()})},UO=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||Yz(e,n,o)})},bf=(e,n)=>({container:e,offset:n}),HT=Sr.DOM,ow=e=>n=>e===n?-1:0,Xz=e=>n=>e.isBlock(n)||We(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",WO=(e,n,o)=>{if(wt(e)&&n>=0)return F.some(bf(e,n));{const r=Uf(HT);return F.from(r.backwards(e,n,ow(e),o)).map(a=>bf(a.container,a.container.data.length))}},Jz=(e,n,o)=>{if(wt(e)&&n>=e.length)return F.some(bf(e,n));{const r=Uf(HT);return F.from(r.forwards(e,n,ow(e),o)).map(a=>bf(a.container,0))}},ZO=(e,n,o)=>{if(!wt(e))return F.none();const r=e.data;if(n>=0&&n<=r.length)return F.some(bf(e,n));{const a=Uf(HT);return F.from(a.backwards(e,n,ow(e),o)).bind(u=>{const f=u.container.data;return ZO(u.container,n+f.length,o)})}},WB=(e,n,o)=>{if(!wt(e))return F.none();const r=e.data;if(n<=r.length)return F.some(bf(e,n));{const a=Uf(HT);return F.from(a.forwards(e,n,ow(e),o)).bind(u=>WB(u.container,n-r.length,o))}},jO=(e,n,o,r,a)=>{const u=Uf(e,Xz(e));return F.from(u.backwards(n,o,r,a))},GO=e=>e.collapsed&&wt(e.startContainer),Qz=e=>Ul(e.toString().replace(/\u00A0/g," ")),qO=e=>e!==""&&`  \uFEFF\f
\r	\v`.indexOf(e)!==-1,eV=(e,n)=>e.substring(n.length),tV=(e,n,o,r=!1)=>{let a;const u=o.charAt(0);for(a=n-1;a>=0;a--){const f=e.charAt(a);if(!r&&qO(f))return F.none();if(u===f&&Rn(e,o,a,n))break}return F.some(a)},KO=(e,n,o,r=!1)=>{if(!GO(n))return F.none();const a={text:"",offset:0},u=(b,y,x)=>(a.text=x+a.text,a.offset+=y,tV(a.text,a.offset,o,r).getOr(y)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return jO(e,n.startContainer,n.startOffset,u,f).bind(b=>{const y=n.cloneRange();if(y.setStart(b.container,b.offset),y.setEnd(n.endContainer,n.endOffset),y.collapsed)return F.none();const x=Qz(y);return x.lastIndexOf(o)!==0?F.none():F.some({text:eV(x,o),range:y,trigger:o})})},nV=e=>e.nodeType===Y,oV=e=>e.nodeType===Ml,ZB=e=>{if(nV(e))return bf(e,e.data.length);{const n=e.childNodes;return n.length>0?ZB(n[n.length-1]):bf(e,n.length)}},ra=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?ra(o[n],0):o.length>0&&oV(e)&&o.length===n?ZB(o[o.length-1]):bf(e,n)},sV=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return jO(e,n.container,n.offset,(a,u)=>u===0?-1:u,r).filter(a=>{const u=a.container.data.charAt(a.offset-1);return!qO(u)}).isSome()},rV=e=>n=>{const o=ra(n.startContainer,n.startOffset);return!sV(e,o)},cV=(e,n,o)=>bs(o.triggers,r=>KO(e,n,r)),jB=(e,n)=>{const o=n(),r=e.selection.getRng();return cV(e.dom,r,o).bind(a=>zT(e,n,a))},zT=(e,n,o,r={})=>{var a;const u=n(),b=(a=e.selection.getRng().startContainer.nodeValue)!==null&&a!==void 0?a:"",y=jt(u.lookupByTrigger(o.trigger),R=>o.text.length>=R.minChars&&R.matches.getOrThunk(()=>rV(e.dom))(o.range,b,o.text));if(y.length===0)return F.none();const x=Promise.all(et(y,R=>R.fetch(o.text,R.maxResults,r).then(B=>({matchText:o.text,items:B,columns:R.columns,onAction:R.onAction,highlightOn:R.highlightOn}))));return F.some({lookupData:x,context:o})};var Xu;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Xu||(Xu={}));const fg=(e,n,o)=>e.stype===Xu.Error?n(e.serror):o(e.svalue),YO=e=>{const n=[],o=[];return fe(e,r=>{fg(r,a=>o.push(a),a=>n.push(a))}),{values:n,errors:o}},GB=(e,n)=>e.stype===Xu.Error?{stype:Xu.Error,serror:n(e.serror)}:e,XO=(e,n)=>e.stype===Xu.Value?{stype:Xu.Value,svalue:n(e.svalue)}:e,JO=(e,n)=>e.stype===Xu.Value?n(e.svalue):e,QO=(e,n)=>e.stype===Xu.Error?n(e.serror):e,eD=e=>({stype:Xu.Value,svalue:e}),sw=e=>({stype:Xu.Error,serror:e}),ba={fromResult:e=>e.fold(sw,eD),toResult:e=>fg(e,qi.error,qi.value),svalue:eD,partition:YO,serror:sw,bind:JO,bindError:QO,map:XO,mapError:GB,fold:fg},Ju=e=>it(e)&&Yn(e).length>100?" removed due to size":JSON.stringify(e,null,2),rw=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:yt("... (only showing first ten failures)")}]):e;return et(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},cw=(e,n)=>ba.serror([{path:e,getErrorInfo:n}]),qB=(e,n,o)=>cw(e,()=>'Could not find valid *required* value for "'+n+'" in '+Ju(o)),aV=(e,n)=>cw(e,()=>'Choice schema did not contain choice key: "'+n+'"'),KB=(e,n,o)=>cw(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+Ju(n)),iV=(e,n)=>cw(e,yt(n)),lV=(e,n,o,r)=>is(o,r).fold(()=>KB(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),aw=(e,n)=>({extract:(a,u)=>is(u,e).fold(()=>aV(a,e),b=>lV(a,u,n,b)),toString:()=>"chooseOn("+e+"). Possible values: "+Yn(n)}),uV=(e,n)=>n,dV=(e,n)=>Zo(e)&&Zo(n)?UT(e,n):n,YB=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const a=n[r];for(const u in a)Cn(a,u)&&(o[u]=e(o[u],a[u]))}return o},UT=YB(dV),XB=YB(uV),nD=()=>({tag:"required",process:{}}),mV=e=>({tag:"defaultedThunk",process:e}),JB=e=>mV(yt(e)),fV=()=>({tag:"option",process:{}}),gV=(e,n)=>e.length>0?ba.svalue(UT(n,XB.apply(void 0,e))):ba.svalue(n),QB=e=>A(ba.serror,Oc)(e),e$={consolidateObj:(e,n)=>{const o=ba.partition(e);return o.errors.length>0?QB(o.errors):gV(o.values,n)},consolidateArr:e=>{const n=ba.partition(e);return n.errors.length>0?QB(n.errors):ba.svalue(n.values)}},t$=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),n$=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),oD=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},sD=e=>{const n=(r,a)=>ba.bindError(e(a),u=>iV(r,u)),o=yt("val");return{extract:n,toString:o}},hV=sD(ba.svalue),pV=(e,n,o,r)=>is(n,o).fold(()=>qB(e,o,n),r),o$=(e,n,o,r)=>{const a=is(e,n).getOrThunk(()=>o(e));return r(a)},s$=(e,n,o)=>o(is(e,n)),bV=(e,n,o,r)=>{const a=is(e,n).map(u=>u===!0?o(e):u);return r(a)},r$=(e,n,o,r,a)=>{const u=b=>a.extract(n.concat([r]),b),f=b=>b.fold(()=>ba.svalue(F.none()),y=>{const x=a.extract(n.concat([r]),y);return ba.map(x,F.some)});switch(e.tag){case"required":return pV(n,o,r,u);case"defaultedThunk":return o$(o,r,e.process,u);case"option":return s$(o,r,f);case"defaultedOptionThunk":return bV(o,r,e.process,f);case"mergeWithThunk":return o$(o,r,yt({}),b=>{const y=UT(e.process(o),b);return u(y)})}},vV=(e,n,o)=>{const r={},a=[];for(const u of o)oD(u,(f,b,y,x)=>{const R=r$(y,e,n,f,x);ba.fold(R,N=>{a.push(...N)},N=>{r[b]=N})},(f,b)=>{r[f]=b(n)});return a.length>0?ba.serror(a):ba.svalue(r)},iw=e=>({extract:(r,a)=>vV(r,a,e),toString:()=>`obj{
`+et(e,a=>oD(a,(u,f,b,y)=>u+" -> "+y.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),WT=e=>({extract:(r,a)=>{const u=et(a,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return e$.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),yV=(e,n)=>{const o=n!==void 0?n:Mo;return{extract:(u,f)=>{const b=[];for(const y of e){const x=y.extract(u,f);if(x.stype===Xu.Value)return{stype:Xu.Value,svalue:o(x.svalue)};b.push(x)}return e$.consolidateArr(b)},toString:()=>"oneOf("+et(e,u=>u.toString()).join(", ")+")"}},CV=A(WT,iw),wV=e=>sD(n=>e(n).fold(ba.serror,ba.svalue)),SV=(e,n,o)=>{const r=n.extract([e],o);return ba.mapError(r,a=>({input:o,errors:a}))},c$=(e,n,o)=>ba.toResult(SV(e,n,o)),xV=e=>`Errors: 
`+rw(e.errors).join(`
`)+`

Input object: `+Ju(e.input),rD=(e,n)=>aw(e,uo(n,iw)),a$=yt(hV),ZT=(e,n)=>sD(o=>{const r=typeof o;return e(o)?ba.svalue(o):ba.serror(`Expected type: ${n} but got: ${r}`)}),EV=ZT(Go,"number"),N0=ZT(oe,"string"),TV=ZT(Mt,"boolean"),cD=ZT(ie,"function"),Vv=t$,aD=n$,iD=e=>wV(n=>We(e,n)?qi.value(n):qi.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),lD=(e,n)=>Vv(e,e,nD(),n),i$=e=>lD(e,N0),uD=(e,n)=>Vv(e,e,nD(),iD(n)),l$=e=>lD(e,cD),u$=(e,n)=>Vv(e,e,nD(),WT(n)),dD=(e,n)=>Vv(e,e,fV(),n),P0=e=>dD(e,N0),kV=e=>dD(e,cD),rq=(e,n)=>Vv(e,e,JB(n),a$()),Uv=(e,n,o)=>Vv(e,e,JB(n),o),lw=(e,n)=>Uv(e,n,EV),uw=(e,n)=>Uv(e,n,N0),mD=(e,n,o)=>Uv(e,n,iD(o)),fD=(e,n)=>Uv(e,n,TV),gg=(e,n)=>Uv(e,n,cD),d$=(e,n,o)=>Uv(e,n,WT(o)),_V=i$("type"),AV=l$("fetch"),gD=l$("onAction"),m$=gg("onSetup",()=>Bt),OV=P0("text"),hD=P0("icon"),DV=P0("tooltip"),RV=P0("label"),MV=fD("active",!1),f$=fD("enabled",!0),g$=fD("primary",!1),NV=e=>rq("columns",e),dw=e=>uw("type",e),PV=iw([_V,i$("trigger"),lw("minChars",1),NV(1),lw("maxResults",10),kV("matches"),AV,gD,d$("highlightOn",[],N0)]),BV=e=>c$("Autocompleter",PV,e),ca=[f$,DV,hD,OV,m$,uw("context","mode:design")],vf=[MV].concat(ca),jT=[gg("predicate",Re),mD("scope","node",["node","editor"]),mD("position","selection",["node","selection","line"])],cq=ca.concat([dw("contextformbutton"),uw("align","end"),g$,gD,aD("original",Mo)]),$V=vf.concat([dw("contextformbutton"),uw("align","end"),g$,gD,aD("original",Mo)]),FV=ca.concat([dw("contextformbutton")]),IV=vf.concat([dw("contextformtogglebutton")]),LV=rD("type",{contextformbutton:cq,contextformtogglebutton:$V}),GT=[RV,u$("commands",LV),dD("launch",rD("type",{contextformbutton:FV,contextformtogglebutton:IV})),gg("onInput",Bt),gg("onSetup",Bt)],Wv=[...jT,...GT,uD("type",["contextform"]),gg("initValue",yt("")),P0("placeholder")],aq=[...jT,...GT,uD("type",["contextsliderform"]),gg("initValue",yt(0)),gg("min",yt(0)),gg("max",yt(100))],HV=[...jT,...GT,uD("type",["contextsizeinputform"]),gg("initValue",yt({width:"",height:""}))];rD("type",{contextform:Wv,contextsliderform:aq,contextsizeinputform:HV}),iw([dw("contexttoolbar"),lD("items",yV([N0,CV([P0("name"),P0("label"),u$("items",N0)])]))].concat(jT));const zV=e=>{const n=e.ui.registry.getAll().popups,o=uo(n,f=>BV(f).fold(b=>{throw new Error(xV(b))},Mo)),r=Ca(Qr(o,f=>f.trigger)),a=mc(o);return{dataset:o,triggers:r,lookupByTrigger:f=>jt(a,b=>b.trigger===f)}},yf=(e,n)=>{const o=ub(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const a=r.which;a===8?o.throttle():a===27?(o.cancel(),n.cancelIfNecessary()):(a===38||a===40)&&o.cancel()},!0),e.on("remove",o.cancel)},VV=e=>{const n=Ur(),o=Bc(!1),r=n.isSet,a=()=>{r()&&($c(e),o.set(!1),n.clear())},u=N=>{r()||n.set({trigger:N.trigger,matchLength:N.text.length})},f=Ve(()=>zV(e)),b=N=>n.get().map(B=>KO(e.dom,e.selection.getRng(),B.trigger,!0).bind(W=>zT(e,f,W,N))).getOrThunk(()=>jB(e,f)),y=N=>{b(N).fold(a,B=>{u(B.context),B.lookupData.then(W=>{n.get().map(X=>{const q=B.context;X.trigger===q.trigger&&(n.set({...X,matchLength:q.text.length}),o.get()?(Tc(e,{range:q.range}),k3(e,{lookupData:W})):(o.set(!0),Tc(e,{range:q.range}),T3(e,{lookupData:W})))})})})},x=(N,B)=>{const W=N.compareBoundaryPoints(window.Range.START_TO_START,B),X=N.compareBoundaryPoints(window.Range.END_TO_END,B);return W>=0&&X<=0},R=()=>n.get().bind(({trigger:N})=>{const B=e.selection.getRng();return KO(e.dom,B,N,o.get()).filter(({range:W})=>x(B,W)).map(({range:W})=>W)});e.addCommand("mceAutocompleterReload",(N,B)=>{const W=it(B)?B.fetchOptions:{};y(W)}),e.addCommand("mceAutocompleterClose",a),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{R().each(N=>{Tc(e,{range:N})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>R().isSome()),yf(e,{cancelIfNecessary:a,load:y})},h$=Cc().browser.isSafari(),p$=e=>jf(me.fromDom(e)),qT=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},Nd=(e,n)=>F.from(e.getParent(n.container(),"details")),pD=(e,n)=>Nd(e,n).isSome(),b$=(e,n)=>{const o=F.from(e.getParent(n.startContainer,"details")),r=F.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const a=o.bind(u=>F.from(e.select("summary",u)[0]));return F.some({startSummary:a,startDetails:o,endDetails:r})}else return F.none()},UV=(e,n)=>Wc(n).exists(o=>o.isEqual(e)),KT=(e,n)=>Uu(n).exists(o=>ls(o.getNode())&&Ma(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),bD=(e,n)=>n.startSummary.exists(o=>UV(e,o)),v$=(e,n)=>n.startSummary.exists(o=>KT(e,o)),y$=(e,n)=>n.startDetails.exists(o=>Ma(o,e).forall(r=>n.startSummary.exists(a=>!a.contains(e.container())&&a.contains(r.container())))),WV=(e,n,o)=>o.startDetails.exists(r=>Za(e,n).forall(a=>!r.contains(a.container()))),C$=(e,n)=>{const o=n.getNode();ln(o)||e.selection.setCursorLocation(o,n.offset())},w$=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const a=e.dom.select("summary",r)[0];a&&(o?Wc(a):Uu(a)).each(f=>C$(e,f))}else C$(e,n)},ZV=(e,n)=>{const o=y=>y.contains(e.startContainer),r=y=>y.contains(e.endContainer),a=n.startSummary.exists(o),u=n.startSummary.exists(r),f=n.startDetails.forall(y=>n.endDetails.forall(x=>y!==x));return(a||u)&&!(a&&u)||f},S$=(e,n,o)=>{const{dom:r,selection:a}=e,u=e.getBody();if(o==="character"){const f=Ue.fromRangeStart(a.getRng()),b=r.getParent(f.container(),r.isBlock),y=Nd(r,f),x=b&&r.isEmpty(b),R=Z(b==null?void 0:b.previousSibling),N=Z(b==null?void 0:b.nextSibling);return x&&(n?N:R)&&tg(!n,u,f).exists(X=>pD(r,X)&&!Es(y,Nd(r,X)))?!0:tg(n,u,f).fold(Re,B=>{const W=Nd(r,B);if(pD(r,B)&&!Es(y,W)){if(n||w$(e,B,!1),b&&x){if(n&&R)return!0;if(!n&&N)return!0;w$(e,B,n),e.dom.remove(b)}return!0}else return!1})}else return!1},x$=(e,n,o,r)=>{const u=e.selection.getRng(),f=Ue.fromRangeStart(u),b=e.getBody();return r==="selection"?ZV(u,n):o?v$(f,n)||WV(b,f,n):bD(f,n)||y$(f,n)},jV=(e,n,o)=>b$(e.dom,e.selection.getRng()).fold(()=>S$(e,n,o),r=>x$(e,r,n,o)||S$(e,n,o)),GV=(e,n,o)=>{const r=e.selection,a=r.getNode(),u=r.getRng(),f=Ue.fromRangeStart(u);return J0(a)?(o==="selection"&&qT(u,a)||ju(n,f,a)?p$(a):e.undoManager.transact(()=>{const b=r.getSel();let{anchorNode:y,anchorOffset:x,focusNode:R,focusOffset:N}=b??{};const B=()=>{De(y)&&De(x)&&De(R)&&De(N)&&(b==null||b.setBaseAndExtent(y,x,R,N))},W=()=>{y=b==null?void 0:b.anchorNode,x=b==null?void 0:b.anchorOffset,R=b==null?void 0:b.focusNode,N=b==null?void 0:b.focusOffset},X=(ne,ge)=>{fe(ne.childNodes,Se=>{og(Se)&&ge.appendChild(Se)})},q=e.dom.create("span",{"data-mce-bogus":"1"});X(a,q),a.appendChild(q),B(),(o==="word"||o==="line")&&(b==null||b.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&qT(r.getRng(),q)?p$(a):(e.execCommand(n?"ForwardDelete":"Delete"),W(),X(q,a),B()),e.dom.remove(q)}),!0):!1},B0=(e,n,o)=>jV(e,n,o)||h$&&GV(e,n,o)?F.some(Bt):F.none(),E$=e=>(n,o,r={})=>{const a=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:a,currentTarget:a,eventPhase:Event.AT_TARGET,originalTarget:a,explicitOriginalTarget:a,isTrusted:!1,srcElement:a,cancelable:!1,preventDefault:Bt,inputType:o},f=ab(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},mw=E$("input"),fw=E$("beforeinput"),vD=Cc(),T$=vD.os,k$=T$.isMacOS()||T$.isiOS(),yD=vD.browser.isFirefox(),qV=(e,n,o)=>{const r=o.keyCode===rt.BACKSPACE?"deleteContentBackward":"deleteContentForward",a=e.selection.isCollapsed(),u=a?"character":"selection",f=b=>a?b?"word":"line":"selection";kB([{keyCode:rt.BACKSPACE,action:no(AO,e)},{keyCode:rt.BACKSPACE,action:no(uT,e,!1)},{keyCode:rt.DELETE,action:no(uT,e,!0)},{keyCode:rt.BACKSPACE,action:no(qA,e,!1)},{keyCode:rt.DELETE,action:no(qA,e,!0)},{keyCode:rt.BACKSPACE,action:no(CO,e,n,!1)},{keyCode:rt.DELETE,action:no(CO,e,n,!0)},{keyCode:rt.BACKSPACE,action:no(yE,e,!1)},{keyCode:rt.DELETE,action:no(yE,e,!0)},{keyCode:rt.BACKSPACE,action:no(B0,e,!1,u)},{keyCode:rt.DELETE,action:no(B0,e,!0,u)},...k$?[{keyCode:rt.BACKSPACE,altKey:!0,action:no(B0,e,!1,f(!0))},{keyCode:rt.DELETE,altKey:!0,action:no(B0,e,!0,f(!0))},{keyCode:rt.BACKSPACE,metaKey:!0,action:no(B0,e,!1,f(!1))}]:[{keyCode:rt.BACKSPACE,ctrlKey:!0,action:no(B0,e,!1,f(!0))},{keyCode:rt.DELETE,ctrlKey:!0,action:no(B0,e,!0,f(!0))}],{keyCode:rt.BACKSPACE,action:no(ZC,e,!1)},{keyCode:rt.DELETE,action:no(ZC,e,!0)},{keyCode:rt.BACKSPACE,action:no(JC,e,!1)},{keyCode:rt.DELETE,action:no(JC,e,!0)},{keyCode:rt.BACKSPACE,action:no(dg,e,!1)},{keyCode:rt.DELETE,action:no(dg,e,!0)},{keyCode:rt.BACKSPACE,action:no(aT,e,!1)},{keyCode:rt.DELETE,action:no(aT,e,!0)},{keyCode:rt.BACKSPACE,action:no(EO,e,!1)},{keyCode:rt.DELETE,action:no(EO,e,!0)},{keyCode:rt.BACKSPACE,action:no(dT,e,!1)},{keyCode:rt.DELETE,action:no(dT,e,!0)}],o).filter(b=>e.selection.isEditable()).each(b=>{o.preventDefault(),fw(e,r).isDefaultPrevented()||(b(),mw(e,r))})},KV=(e,n,o)=>QC([{keyCode:rt.BACKSPACE,action:no(WC,e)},{keyCode:rt.DELETE,action:no(WC,e)},...k$?[{keyCode:rt.BACKSPACE,altKey:!0,action:no(km,e)},{keyCode:rt.DELETE,altKey:!0,action:no(km,e)},...o?[{keyCode:yD?224:91,action:no(km,e)}]:[]]:[{keyCode:rt.BACKSPACE,ctrlKey:!0,action:no(km,e)},{keyCode:rt.DELETE,ctrlKey:!0,action:no(km,e)}]],n),YV=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===rt.BACKSPACE,r.isDefaultPrevented()||qV(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||KV(e,r,o),o=!1})},_$=e=>{for(;e;){if(Vt(e)||wt(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},Zv=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=_$(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(fc),n.firstChild)}const a=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new da(n,n);let f=n,b;for(;b=u.current();){if(wt(b)){a.setStart(b,0),a.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){a.setStartBefore(b),a.setEndBefore(b);break}f=b,b=u.next()}b||(a.setStart(f,0),a.setEnd(f,0))}else ls(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)):(a.setStart(n,0),a.setEnd(n,0));e.selection.setRng(a),hv(e,a)},jv=(e,n)=>{const o=e.getRoot();let r,a=n;for(;a!==o&&a&&e.getContentEditable(a)!=="false";){if(e.getContentEditable(a)==="true"){r=a;break}a=a.parentNode}return a!==o?r:o},CD=e=>F.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),XV=e=>CD(e).fold(yt(""),n=>n.nodeName.toUpperCase()),lq=e=>CD(e).filter(n=>Xh(me.fromDom(n))).isSome(),ri=e=>{e.innerHTML='<br data-mce-bogus="1">'},JV=(e,n,o)=>{const r=e.dom;F.from(o.style).map(r.parseStyle).each(y=>{const R={...Ta(me.fromDom(n)),...y};r.setStyles(n,R)});const a=F.from(o.class).map(y=>y.split(/\s+/)),u=F.from(n.className).map(y=>jt(y.split(/\s+/),x=>x!==""));yr(a,u,(y,x)=>{const R=jt(x,B=>!We(y,B)),N=[...y,...R];r.setAttrib(n,"class",N.join(" "))});const f=["style","class"],b=us(o,(y,x)=>!We(f,x));r.setAttribs(n,b)},gw=(e,n)=>{if(ea(e).toLowerCase()===n.tagName.toLowerCase()){const r=mu(e);JV(e,n,r)}},A$=(e,n,o,r,a=!0,u,f)=>{const b=e.dom,y=e.schema,x=ea(e),R=o?o.nodeName.toUpperCase():"";let N=n;const B=y.getTextInlineElements();let W;u||R==="TABLE"||R==="HR"?W=b.create(u||x,f||{}):W=o.cloneNode(!1);let X=W;if(!a)b.setAttrib(W,"style",null),b.setAttrib(W,"class",null);else do if(B[N.nodeName]){if(Gl(N)||wl(N))continue;const q=N.cloneNode(!1);b.setAttrib(q,"id",""),W.hasChildNodes()?(q.appendChild(W.firstChild),W.appendChild(q)):(X=q,W.appendChild(q))}while((N=N.parentNode)&&N!==r);return gw(e,W),ri(X),W},QV=(e,n)=>e.dom.getParent(n,Du),eU=(e,n,o)=>{let r=n;for(;r&&r!==e&&Z(r.nextSibling);){const a=r.parentElement;if(!a||!o(a))return Du(a);r=a}return!1},tU=(e,n,o)=>!n&&o.nodeName.toLowerCase()===ea(e)&&e.dom.isEmpty(o)&&eU(e.getBody(),o,r=>Cn(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),nU=(e,n,o)=>{var r,a,u;const f=n(ea(e)),b=QV(e,o);b&&(e.dom.insertAfter(f,b),Zv(e,f),((u=(a=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||a===void 0?void 0:a.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},YT=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,oU=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},O$=(e,n)=>{const o=e==null?void 0:e.parentNode;return De(o)&&o.nodeName===n},XT=e=>De(e)&&/^(OL|UL|LI)$/.test(e.nodeName),hw=e=>De(e)&&/^(LI|DT|DD)$/.test(e.nodeName),sU=e=>XT(e)&&XT(e.parentNode),wD=e=>{const n=e.parentNode;return hw(n)?n:e},SD=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!Vt(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},rU=e=>Wn(Qr(Ta(me.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),cU=(e,n,o,r,a)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;sU(o)&&(a="LI");const y=hw(r)?rU(r):void 0;let x=hw(r)&&y?n(a,{style:rU(r)}):n(a);if(SD(o,r,!0)&&SD(o,r,!1))if(O$(o,"LI")){const R=wD(o);u.insertAfter(x,R),oU(o)?u.remove(R):u.remove(o)}else u.replace(x,o);else if(SD(o,r,!0))O$(o,"LI")?(u.insertAfter(x,wD(o)),x.appendChild(u.doc.createTextNode(" ")),x.appendChild(o)):b.insertBefore(x,o),u.remove(r);else if(SD(o,r,!1))u.insertAfter(x,wD(o)),u.remove(r);else{o=wD(o);const R=f.cloneRange();R.setStartAfter(r),R.setEndAfter(o);const N=R.extractContents();if(a==="LI"&&YT(N,"LI")){const B=jt(et(x.children,me.fromDom),fo(Kc("br")));x=N.firstChild,u.insertAfter(N,o),fe(B,W=>qd(me.fromDom(x),W)),y&&x.setAttribute("style",y)}else u.insertAfter(N,o),u.insertAfter(x,o);u.remove(r)}Zv(e,x)},aU=e=>{fe(Eg(me.fromDom(e),Is),n=>{const o=n.dom;o.nodeValue=Ul(o.data)})},uq=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},iU=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),Pd=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,lU=(e,n)=>e.nodeName===n||e.nextSibling&&e.nextSibling.nodeName===n,JT=(e,n)=>De(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",uU=(e,n,o)=>{var r;const a=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;Vt(u)&&!n[u.nodeName.toLowerCase()]&&a.push(u)}let f=a.length;for(;f--;)u=a[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||iU(e,u))&&e.remove(u)},xD=(e,n,o)=>wt(n)?e?o===1&&n.data.charAt(o-1)===Jc?0:o:o===n.data.length-1&&n.data.charAt(o)===Jc?n.data.length:o:o,dU=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,xD(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,xD(!1,e.endContainer,e.endOffset)),n},mU=e=>{let n=e;do wt(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},fU=(e,n,o,r,a)=>{var u,f;const b=e.dom,y=(u=jv(b,r))!==null&&u!==void 0?u:b.getRoot();let x=b.getParent(r,b.isBlock);if(!x||!JT(b,x)){if(x=x||y,!x.hasChildNodes()){const W=b.create(n);return gw(e,W),x.appendChild(W),o.setStart(W,0),o.setEnd(W,0),W}let R=r;for(;R&&R.parentNode!==x;)R=R.parentNode;let N;for(;R&&!b.isBlock(R);)N=R,R=R.previousSibling;const B=(f=N==null?void 0:N.parentElement)===null||f===void 0?void 0:f.nodeName;if(N&&B&&e.schema.isValidChild(B,n.toLowerCase())){const W=N.parentNode,X=b.create(n);for(gw(e,X),W.insertBefore(X,N),R=N;R&&!b.isBlock(R);){const q=R.nextSibling;X.appendChild(R),R=q}o.setStart(r,a),o.setEnd(r,a)}}return r},gU=(e,n)=>{n.normalize();const o=n.lastChild;(!o||Vt(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},hU=(e,n)=>{const o=BS(e);return On(n)?!1:oe(o)?We(at.explode(o),n.nodeName.toLowerCase()):o},pw={insert:(e,n)=>{let o,r,a,u,f=!1;const b=e.dom,y=e.schema,x=y.getNonEmptyElements(),R=e.selection.getRng(),N=ea(e),B=me.fromDom(R.startContainer),W=_u(B,R.startOffset),X=W.exists(dt=>$o(dt)&&!fl(dt)),q=R.collapsed&&X,ne=(dt,Qt)=>A$(e,o,At,lt,Wy(e),dt,Qt),ge=dt=>{const Qt=xD(dt,o,r);if(wt(o)&&(dt?Qt>0:Qt<o.data.length))return!1;if((o.parentNode===At||o===At)&&f&&!dt||dt&&Vt(o)&&o===At.firstChild)return!0;if(Pd(o,"TABLE")||Pd(o,"HR"))return lU(o,"BR")?!dt:f&&!dt||!f&&dt;const _n=new da(o,At);wt(o)&&(dt&&Qt===0?_n.prev():!dt&&Qt===o.data.length&&_n.next());let Oo;for(;Oo=_n.current();){if(Vt(Oo)){if(!Oo.getAttribute("data-mce-bogus")){const Lo=Oo.nodeName.toLowerCase();if(x[Lo]&&Lo!=="br")return!1}}else if(wt(Oo)&&!hl(Oo.data))return!1;dt?_n.prev():_n.next()}return!0},Se=()=>{let dt;return/^(H[1-6]|PRE|FIGURE)$/.test(a)&&$t!=="HGROUP"?dt=ne(N):dt=ne(),hU(e,u)&&JT(b,u)&&b.isEmpty(At,void 0,{includeZwsp:!0})?dt=b.split(u,At):b.insertAfter(dt,At),Zv(e,dt),dt};G2(b,R).each(dt=>{R.setStart(dt.startContainer,dt.startOffset),R.setEnd(dt.endContainer,dt.endOffset)}),o=R.startContainer,r=R.startOffset;const Te=!!(n&&n.shiftKey),Me=!!(n&&n.ctrlKey);Vt(o)&&o.hasChildNodes()&&!q&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&wt(o)?r=o.data.length:r=0);const lt=jv(b,o);if(!lt||uq(e,o))return;Te||(o=fU(e,N,R,o,r));let At=b.getParent(o,b.isBlock)||b.getRoot();u=De(At==null?void 0:At.parentNode)?b.getParent(At.parentNode,b.isBlock):null,a=At?At.nodeName.toUpperCase():"";const $t=u?u.nodeName.toUpperCase():"";if($t==="LI"&&!Me){const dt=u;At=dt,u=dt.parentNode,a=$t}if(Vt(u)&&tU(e,Te,At))return nU(e,ne,At);if(/^(LI|DT|DD)$/.test(a)&&Vt(u)&&b.isEmpty(At)){cU(e,ne,u,At,N);return}if(!q&&(At===e.getBody()||!JT(b,At)))return;const qe=At.parentNode;let Le;if(q)Le=ne(N),W.fold(()=>{Cr(B,me.fromDom(Le))},dt=>{Ha(dt,me.fromDom(Le))}),e.selection.setCursorLocation(Le,0);else if(Fg(At))Le=gr(At),b.isEmpty(At)&&ri(At),gw(e,Le),Zv(e,Le);else if(ge(!1))Le=Se();else if(ge(!0)&&qe){const dt=Ue.fromRangeStart(R),Qt=Pk(dt),_n=me.fromDom(At),Lo=nE(_n,dt,e.schema)?nM(_n,dt,e.schema).bind(Us=>F.from(Us.getNode())):F.none();Le=qe.insertBefore(ne(),At);const ks=Pd(At,"HR")||Qt?Le:Lo.getOr(At);Zv(e,ks)}else{const dt=dU(R).cloneRange();dt.setEndAfter(At);const Qt=dt.extractContents();aU(Qt),mU(Qt),Le=Qt.firstChild,b.insertAfter(Qt,At),uU(b,x,Le),gU(b,At),b.isEmpty(At)&&ri(At),Le.normalize(),b.isEmpty(Le)?(b.remove(Le),Se()):(gw(e,Le),Zv(e,Le))}b.setAttrib(Le,"id",""),e.dispatch("NewBlock",{newBlock:Le})},fakeEventName:"insertParagraph"},bU=(e,n,o)=>{const r=new da(n,o);let a;const u=e.getNonEmptyElements();for(;a=r.next();)if(u[a.nodeName.toLowerCase()]||wt(a)&&a.length>0)return!0;return!1},R$=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),hv(e,r)},vU=(e,n)=>{const o=e.selection,r=e.dom,a=o.getRng();let u,f=!1;G2(r,a).each(W=>{a.setStart(W.startContainer,W.startOffset),a.setEnd(W.endContainer,W.endOffset)});let b=a.startOffset,y=a.startContainer;if(Vt(y)&&y.hasChildNodes()){const W=b>y.childNodes.length-1;y=y.childNodes[Math.min(b,y.childNodes.length-1)]||y,W&&wt(y)?b=y.data.length:b=0}let x=r.getParent(y,r.isBlock);const R=x&&x.parentNode?r.getParent(x.parentNode,r.isBlock):null,N=R?R.nodeName.toUpperCase():"",B=!!(n&&n.ctrlKey);N==="LI"&&!B&&(x=R),wt(y)&&b>=y.data.length&&(bU(e.schema,y,x||r.getRoot())||(u=r.create("br"),a.insertNode(u),a.setStartAfter(u),a.setEndAfter(u),f=!0)),u=r.create("br"),np(r,a,u),R$(e,u,f),e.undoManager.add()},yU=(e,n)=>{const o=me.fromTag("br");Ha(me.fromDom(n),o),e.undoManager.add()},CU=(e,n)=>{wU(e.getBody(),n)||Oi(me.fromDom(n),me.fromTag("br"));const o=me.fromTag("br");Oi(me.fromDom(n),o),R$(e,o.dom,!1),e.undoManager.add()},M$=e=>ls(e.getNode()),wU=(e,n)=>M$(Ue.after(n))?!0:Za(e,Ue.after(n)).map(o=>ls(o.getNode())).getOr(!1),ED=e=>e&&e.nodeName==="A"&&"href"in e,N$=e=>e.fold(Re,ED,ED,Re),SU=e=>{const n=Qe(Dp,e),o=Ue.fromRangeStart(e.selection.getRng());return mg(n,e.getBody(),o).filter(N$)},xU=(e,n)=>{n.fold(Bt,Qe(yU,e),Qe(CU,e),Bt)},B$={insert:(e,n)=>{const o=SU(e);o.isSome()?o.each(Qe(xU,e)):vU(e,n)},fakeEventName:"insertLineBreak"},bw=(e,n)=>CD(e).filter(o=>n.length>0&&La(me.fromDom(o),n)).isSome(),EU=e=>bw(e,Uy(e)),TD=e=>bw(e,Rb(e)),Xl=Cs.generate([{br:[]},{block:[]},{none:[]}]),$$=(e,n)=>TD(e),F$=e=>(n,o)=>lq(n)===e,TU=(e,n)=>(o,r)=>XV(o)===e.toUpperCase()===n,Up=e=>{const n=jv(e.dom,e.selection.getStart());return On(n)},vw=e=>TU("pre",e),kU=()=>TU("summary",!0),QT=e=>(n,o)=>mm(n)===e,e4=(e,n)=>EU(e),yw=(e,n)=>n,I$=e=>{const n=ea(e),o=jv(e.dom,e.selection.getStart());return De(o)&&e.schema.isValidChild(o.nodeName,n)},_U=e=>{const n=e.selection.getRng(),o=me.fromDom(n.startContainer),a=_u(o,n.startOffset).map(u=>$o(u)&&!fl(u));return n.collapsed&&a.getOr(!0)},Qu=(e,n)=>(o,r)=>Wn(e,(u,f)=>u&&f(o,r),!0)?F.some(n):F.none(),AU=(e,n)=>NP([Qu([$$],Xl.none()),Qu([vw(!0),Up],Xl.none()),Qu([kU()],Xl.br()),Qu([vw(!0),QT(!1),yw],Xl.br()),Qu([vw(!0),QT(!1)],Xl.block()),Qu([vw(!0),QT(!0),yw],Xl.block()),Qu([vw(!0),QT(!0)],Xl.br()),Qu([F$(!0),yw],Xl.br()),Qu([F$(!0)],Xl.block()),Qu([e4],Xl.br()),Qu([yw],Xl.br()),Qu([I$],Xl.block()),Qu([_U],Xl.block())],[e,!!(n&&n.shiftKey)]).getOr(Xl.none()),t4=(e,n,o)=>{n.mode.isReadOnly()||(n.selection.isCollapsed()||_7(n),!(De(o)&&fw(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),De(o)&&mw(n,e.fakeEventName)))},L$=(e,n)=>{if(e.mode.isReadOnly())return;const o=()=>t4(B$,e,n),r=()=>t4(pw,e,n),a=AU(e,n);switch(vi(e)){case"linebreak":a.fold(o,o,Bt);break;case"block":a.fold(r,r,Bt);break;case"invert":a.fold(r,o,Bt);break;default:a.fold(o,r,Bt);break}},n4=Cc(),kD=n4.os.isiOS()&&n4.browser.isSafari(),H$=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),m6(e.undoManager),e.undoManager.transact(()=>{L$(e,n)}))},_D=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(wt(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},z$=e=>{let n=F.none();const o=a=>{n=F.some(a.selection.getBookmark()),a.undoManager.add()},r=(a,u)=>{a.undoManager.undo(),n.fold(Bt,f=>a.selection.moveToBookmark(f)),H$(a,u),n=F.none()};e.on("keydown",a=>{a.keyCode===rt.ENTER&&(kD&&_D(e.selection.getRng())?o(e):H$(e,a))}),e.on("keyup",a=>{a.keyCode===rt.ENTER&&n.each(()=>r(e,a))})},o4=(e,n,o)=>{const r=cn.os.isMacOS()||cn.os.isiOS();QC([{keyCode:rt.END,action:no(NO,e,!0)},{keyCode:rt.HOME,action:no(NO,e,!1)},...r?[]:[{keyCode:rt.HOME,action:no(PT,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:rt.END,action:no(PT,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:rt.END,action:no(_l,e,!0)},{keyCode:rt.HOME,action:no(_l,e,!1)},{keyCode:rt.END,action:no(xT,e,!0,n)},{keyCode:rt.HOME,action:no(xT,e,!1,n)}],o).each(a=>{o.preventDefault()})},V$=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||o4(e,n,o)})},U$=e=>{e.on("input",n=>{n.isComposing||m7(e)})},OU=Cc(),DU=(e,n,o)=>{QC([{keyCode:rt.PAGE_UP,action:no(xT,e,!1,n)},{keyCode:rt.PAGE_DOWN,action:no(xT,e,!0,n)}],o)},Cw=e=>e.stopImmediatePropagation(),AD=e=>e.keyCode===rt.PAGE_UP||e.keyCode===rt.PAGE_DOWN,W$=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",Cw,!0):!o&&e.get()&&n.off("NodeChange",Cw),e.set(o)},RU=(e,n)=>{if(OU.os.isMacOS())return;const o=Bc(!1);e.on("keydown",r=>{AD(r)&&W$(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||DU(e,n,r),AD(r)&&o.get()&&(W$(o,e,!1),e.nodeChanged())})},OD=(e,n)=>e===n||e.contains(n),MU=(e,n)=>!OD(e.getBody(),n.startContainer)||!OD(e.getBody(),n.endContainer)?!0:x5(e.dom,n),NU=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||Tt(n.getTargetRanges(),o=>!MU(e,o)))&&n.preventDefault()})},Z$=(e,n)=>{const o=n.container(),r=n.offset();return wt(o)?(o.insertData(r,e),F.some(Ue(o,r+e.length))):jb(n).map(a=>{const u=me.fromText(e);return n.isAtEnd()?Oi(a,u):Ha(a,u),Ue(u.dom,e.length)})},j$=Qe(Z$,fc),G$=Qe(Z$," "),q$=(e,n,o)=>Fk(e,n,o)?j$(n):G$(n),PU=e=>n=>n.fold(o=>Ma(e.dom,Ue.before(o)),o=>Wc(o),o=>Uu(o),o=>Za(e.dom,Ue.after(o))),K$=(e,n,o)=>r=>Fk(e,r,o)?j$(n):G$(n),Y$=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},BU=(e,n)=>e.isEditable(e.getParent(n,"summary")),$U=e=>{const n=Ue.fromRangeStart(e.selection.getRng()),o=me.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Qe(Dp,e),a=Ue.fromRangeStart(e.selection.getRng());return mg(r,e.getBody(),a).bind(PU(o)).map(u=>()=>K$(o,n,e.schema)(u).each(Y$(e)))}else return F.none()},FU=e=>{const n=()=>{const o=me.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=Ue.fromRangeStart(e.selection.getRng());q$(o,r,e.schema).each(Y$(e))};return Gc(cn.browser.isFirefox()&&e.selection.isEditable()&&BU(e.dom,e.selection.getRng().startContainer),n)},IU=(e,n)=>{kB([{keyCode:rt.SPACEBAR,action:no($U,e)},{keyCode:rt.SPACEBAR,action:no(FU,e)}],n).each(o=>{n.preventDefault(),fw(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),mw(e,"insertText",{data:" "}))})},Gv=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||IU(e,n)})},LU=e=>tf(e)?[{keyCode:rt.TAB,action:no(UB,e,!0)},{keyCode:rt.TAB,shiftKey:!0,action:no(UB,e,!1)}]:[],HU=(e,n)=>{QC([...LU(e)],n).each(o=>{n.preventDefault()})},X$=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||HU(e,n)})},zU=e=>{if(e.addShortcut("Meta+P","","mcePrint"),VV(e),Dd(e))return Bc(null);{const n=Y9(e);return NU(e),wz(e),UO(e,n),YV(e,n),z$(e),Gv(e),U$(e),X$(e),V$(e,n),RU(e,n),n}};class VU{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",a=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(a.type==="nodechange"||!Ek(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{mv(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const a=n.selection.getStart(!0);a&&vp(n)&&!r.isSameElementPath(a)&&n.dom.isChildOf(a,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",a=>{!a.isDefaultPrevented()&&vp(n)&&(n.selection.getNode().nodeName==="IMG"?rn.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor,r=o.selection;let a;if(o.initialized&&r&&!jS(o)&&!Jf(o)){const u=o.getBody();a=r.getStart(!0)||u,(a.ownerDocument!==o.getDoc()||!o.dom.isChildOf(a,u))&&(a=u);const f=[];o.dom.getParent(a,b=>b===u?!0:(f.push(b),!1)),o.dispatch("NodeChange",{...n,element:a,parents:f})}}isSameElementPath(n){let o;const r=this.editor,a=os(r.dom.getParents(n,ot,r.getBody()));if(a.length===this.lastPath.length){for(o=a.length;o>=0&&a[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=a,!0}return this.lastPath=a,!1}}const J$=Bg("image"),Q$=e=>{const n=e;return F.from(n[J$])},UU=(e,n)=>{const o=e;o[J$]=n},DD=Bg("event"),mq=e=>{const n=e;return F.from(n[DD])},$0=e=>n=>{const o=n;o[DD]=e},WU=(e,n)=>$0(n)(e),eF=$0(0),ZU=$0(2),jU=$0(1),GU=(e=>n=>{const o=n;return F.from(o[DD]).exists(r=>r===e)})(0),qU=()=>Object.freeze({length:0,item:e=>null}),RD=Bg("mode"),KU=e=>{const n=e;return F.from(n[RD])},s4=e=>n=>{const o=n;o[RD]=e},tF=(e,n)=>s4(n)(e),nF=s4(0),MD=s4(2),br=s4(1),oF=e=>n=>{const o=n;return F.from(o[RD]).exists(r=>r===e)},F0=oF(0),sF=oF(1),ND=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(F0(e))if(oe(o)){if(!ln(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{F0(e)&&n.remove(o)},clear:()=>{F0(e)&&n.clear()}}),rF=["none","copy","link","move"],YU=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],PD=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(a){We(rF,a)&&(n=a)},get effectAllowed(){return o},set effectAllowed(a){GU(r)&&We(YU,a)&&(o=a)},get items(){return ND(r,e.items)},get files(){return sF(r)?qU():e.files},get types(){return e.types},setDragImage:(a,u,f)=>{F0(r)&&(UU(r,{image:a,x:u,y:f}),e.setDragImage(a,u,f))},getData:a=>sF(r)?"":e.getData(a),setData:(a,u)=>{F0(r)&&e.setData(a,u)},clearData:a=>{F0(r)&&e.clearData(a)}};return nF(r),r},XU=e=>{const n=PD(),o=KU(e);return MD(e),eF(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,Q$(e).each(r=>n.setDragImage(r.image,r.x,r.y)),fe(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),fe(e.files,r=>n.items.add(r)),mq(e).each(r=>{WU(n,r)}),o.each(r=>{tF(e,r),tF(n,r)}),n},cF=e=>{const n=e.getData("text/html");return n===""?F.none():F.some(n)},ww=(e,n)=>e.setData("text/html",n),aF="x-tinymce/html",r4=yt(aF),Sw="<!-- "+aF+" -->",JU=e=>Sw+e,QU=e=>e.replace(Sw,""),iF=e=>e.indexOf(Sw)!==-1,eW=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),lF=(e,n)=>{let o="<"+e;const r=Qr(n,(a,u)=>u+'="'+rm.encodeAllRaw(a)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},tW=(e,n,o)=>{const r=e.split(/\n\n/),a=lF(n,o),u="</"+n+">",f=et(r,y=>y.split(/\n/).join("<br />")),b=y=>a+y+u;return f.length===1?f[0]:et(f,b).join("")},uF="%MCEPASTEBIN%",qv=(e,n)=>{const{dom:o,selection:r}=e,a=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},uF);cn.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(a,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},nW=(e,n)=>{const o=e.dom;if(Wp(e)){let r;const a=n.get();for(;r=Wp(e);)o.remove(r),o.unbind(r);a&&e.selection.setRng(a)}n.set(null)},Wp=e=>e.dom.get("mcepastebin"),xw=e=>De(e)&&e.id==="mcepastebin",oW=e=>{const n=e.dom,o=(f,b)=>{f.appendChild(b),n.remove(b,!0)},[r,...a]=jt(e.getBody().childNodes,xw);fe(a,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=n.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},dF=e=>e===uF,Kv=e=>{const n=Bc(null);return{create:()=>qv(e,n),remove:()=>nW(e,n),getEl:()=>Wp(e),getHtml:()=>oW(e),getLastRng:n.get}},mF=(e,n)=>(at.each(n,o=>{Ze(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),BD=e=>{const n=Km(),o=Mv({},n);let r="";const a=n.getVoidElements(),u=at.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),b=y=>{const x=y.name,R=y;if(x==="br"){r+=`
`;return}if(x!=="wbr"){if(a[x]&&(r+=" "),u[x]){r+=" ";return}if(y.type===3&&(r+=y.value),!(y.name in n.getVoidElements())){let N=y.firstChild;if(N)do b(N);while(N=N.next)}f[x]&&R.next&&(r+=`
`,x==="p"&&(r+=`
`))}};return e=mF(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},fF=e=>(e=mF(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,a)=>!r&&!a?" ":fc],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),gF=e=>{let n=0;return()=>e+n++},hF=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return at.hasOwn(o,n)?"image/"+o[n]:"image/"+n},$D=(e,n)=>{const o=Mv({sanitize:V1(e),sandbox_iframes:r2(e),sandbox_iframes_exclusions:ex(e),convert_unsafe_embeds:YR(e)},e.schema);o.addNodeFilter("meta",a=>{at.each(a,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return kp({validate:!0},e.schema).serialize(r)},FD=(e,n)=>({content:e,cancelled:n}),sW=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),a=kc(e,r,o);return FD(a.node.innerHTML,a.isDefaultPrevented())},rW=(e,n,o)=>{const r=Ra(e,n,o),a=$D(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?sW(e,a,o):FD(a,r.isDefaultPrevented())},pF=(e,n,o)=>rW(e,n,o),ID=(e,n)=>(e.insertContent(n,{merge:U3(e),paste:!0}),!0),c4=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),LD=(e,n)=>c4(n)&&Tt(s2(e),o=>Po(n.toLowerCase(),`.${o.toLowerCase()}`)),bF=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),cW=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),aW=(e,n,o)=>!e.selection.isCollapsed()&&c4(n)?cW(e,n,o):!1,iW=(e,n,o)=>LD(e,n)?bF(e,n,o):!1,vF=(e,n)=>{at.each([aW,iW,ID],o=>!o(e,n,ID))},HD=(e,n,o)=>{o||!W3(e)?ID(e,n):vF(e,n)},lW=gF("mceclip"),yF=e=>{const n=PD();return ww(n,e),MD(n),n},zD=(e,n,o,r,a)=>{const u=pF(e,n,o);if(!u.cancelled){const f=u.content,b=()=>HD(e,f,r);a?fw(e,"insertFromPaste",{dataTransfer:yF(f)}).isDefaultPrevented()||(b(),mw(e,"insertFromPaste")):b()}},a4=(e,n,o,r)=>{const a=o||iF(n);zD(e,QU(n),a,!1,r)},i4=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),a=Il(r,t2(e)),u=tW(a,ea(e),mu(e));zD(e,u,!1,!0,o)},CF=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},Zp=(e,n)=>n in e&&e[n].length>0,wF=e=>Zp(e,"text/html")||Zp(e,"text/plain"),uW=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return De(o)?e.dom.encode(o[1]):void 0},dW=(e,n,o,r)=>{const a=lW(),u=$S(e)&&De(o.name),f=u?uW(e,o.name):a,b=u?o.name:void 0,y=n.create(a,o,r,f,b);return n.add(y),y},l4=(e,n)=>{IE(n.uri).each(({data:o,type:r,base64Encoded:a})=>{const u=a?o:btoa(o),f=n.file,b=e.editorUpload.blobCache,y=b.getByData(u,r),x=y??dW(e,b,f,u);a4(e,`<img src="${x.blobUri()}">`,!1,!0)})},mW=e=>e.type==="paste",SF=e=>Promise.all(et(e,n=>f0(n).then(o=>({file:n,uri:o})))),fW=e=>{const n=s2(e);return o=>Ln(o.type,"image/")&&Tt(n,r=>hF(r)===o.type)},gW=(e,n)=>{const o=n.items?Js(lo(n.items),a=>a.kind==="file"?[a.getAsFile()]:[]):[],r=n.files?lo(n.files):[];return jt(o.length>0?o:r,fW(e))},VD=(e,n,o)=>{const r=mW(n)?n.clipboardData:n.dataTransfer;if(L1(e)&&r){const a=gW(e,r);if(a.length>0)return n.preventDefault(),SF(a).then(u=>{o&&e.selection.setRng(o),fe(u,f=>{l4(e,f)})}),!0}return!1},xF=e=>{var n,o;return cn.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},hW=e=>rt.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,UD=(e,n,o,r,a)=>{let u=fF(o);const f=Zp(n,r4())||iF(o),b=!f&&eW(u),y=c4(u);(dF(u)||!u.length||b&&!y)&&(r=!0),(r||y)&&(Zp(n,"text/plain")&&b?u=n["text/plain"]:u=BD(u)),!dF(u)&&(r?i4(e,u,a):a4(e,u,f,a))},pW=(e,n,o)=>{let r;const a=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{hW(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||xF(u))return;const f=o.get()==="text"||r;r=!1;const b=CF(u.clipboardData);!wF(b)&&VD(e,u,a())||(Zp(b,"text/html")?(u.preventDefault(),UD(e,b,b["text/html"],f,!0)):Zp(b,"text/plain")&&Zp(b,"text/uri-list")?(u.preventDefault(),UD(e,b,b["text/plain"],f,!0)):(n.create(),rn.setEditorTimeout(e,()=>{const y=n.getHtml();n.remove(),UD(e,b,y,f,!1)},0)))})},bW=e=>{const n=a=>Ln(a,"webkit-fake-url"),o=a=>Ln(a,"data:"),r=a=>{var u;return((u=a.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(a,u,f)=>{if(!L1(e)&&r(f))for(const b of a){const y=b.attr("src");oe(y)&&!b.attr("data-mce-object")&&y!==cn.transparentSrc&&(n(y)||!n2(e)&&o(y))&&b.remove()}})},vW=(e,n,o)=>{pW(e,n,o),bW(e)},EF=(e,n)=>{n.get()==="text"?(n.set("html"),Qc(e,!1)):(n.set("text"),Qc(e,!0)),e.focus()},yW=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{EF(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&a4(e,r.html,r.internal,!1),r.text&&i4(e,r.text,!1)})},CW=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(r4(),n),!0}catch{return!1}else return!1},TF=(e,n,o,r)=>{CW(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},kF=e=>(n,o)=>{const{dom:r,selection:a}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=a.getRng();f.focus();const y=r.createRng();y.selectNodeContents(f),a.setRng(y),rn.setEditorTimeout(e,()=>{a.setRng(b),r.remove(u),o()},0)},_F=e=>({html:JU(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),wW=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),AF=e=>!e.selection.isCollapsed()||wW(e),SW=e=>n=>{!n.isDefaultPrevented()&&AF(e)&&e.selection.isEditable()&&TF(n,_F(e),kF(e),()=>{if(cn.browser.isChromium()||cn.browser.isFirefox()){const o=e.selection.getRng();rn.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},OF=e=>n=>{!n.isDefaultPrevented()&&AF(e)&&TF(n,_F(e),kF(e),Bt)},DF=e=>{e.on("cut",SW(e)),e.on("copy",OF(e))},RF=(e,n)=>{var o,r;return Tp.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},xW=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},MF=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},EW=e=>Tt(e.files,n=>/^image\//.test(n.type)),TW=(e,n,o,r)=>{const a=e.getParent(o,f=>ei(n,f));if(!Z(e.getParent(o,"summary")))return!0;if(a&&Cn(r,"text/html")){const f=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!Z(f.querySelector(a.nodeName.toLowerCase()))}else return!1},kW=e=>{e.on("input",n=>{const o=r=>Z(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=jt(e.dom.select("details"),o);fe(r,a=>{ls(a.firstChild)&&a.firstChild.remove();const u=e.dom.create("summary");u.appendChild(Zf().dom),a.prepend(u)})}})},_W=(e,n)=>{H3(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),L1(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&EW(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=RF(e,o);if(On(r))return;const a=CF(o.dataTransfer),u=Zp(a,r4());if((!wF(a)||xW(a))&&VD(e,o,r))return;const f=a[r4()],b=f||a["text/html"]||a["text/plain"],y=TW(e.dom,e.schema,r.startContainer,a),x=n.get();x&&!y||b&&(o.preventDefault(),rn.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(f||x&&y)&&e.execCommand("Delete"),MF(e,r);const R=fF(b);a["text/html"]?a4(e,R,u,!0):i4(e,R,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{L1(e)&&!n.get()&&(o.preventDefault(),MF(e,RF(e,o))),o.type==="dragend"&&n.set(!1)}),kW(e)},u4=e=>{const n=a=>u=>{a(e,u)},o=z3(e);ie(o)&&e.on("PastePreProcess",n(o));const r=V3(e);ie(r)&&e.on("PastePostProcess",n(r))},NF=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},AW=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,WD=e=>at.trim(e).replace(AW,cm).toLowerCase(),PF=(e,n,o)=>{const r=YS(e);if(o||r==="all"||!zb(e))return n;const a=r?r.split(/[, ]/):[];if(a&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,y,x,R)=>{const N=u.parseStyle(u.decode(x)),B={};for(let X=0;X<a.length;X++){const q=N[a[X]];let ne=q,ge=u.getStyle(f,a[X],!0);/color/.test(a[X])&&(ne=WD(ne),ge=WD(ge)),ge!==ne&&(B[a[X]]=q)}const W=u.serializeStyle(B,"span");return W?y+' style="'+W+'"'+R:y+R})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,y)=>f+' style="'+b+'"'+y),n},ZD=e=>{(cn.browser.isChromium()||cn.browser.isSafari())&&NF(e,PF)},OW=e=>{const n=Bc(!1),o=Bc(H1(e)?"text":"html"),r=Kv(e);ZD(e),yW(e,o),u4(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>o.get()==="text"),e.on("PreInit",()=>{DF(e),_W(e,n),vW(e,r,o)})},BF=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},DW=e=>{e.parser.addNodeFilter("details",n=>{const o=U1(e);fe(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=G3(e);fe(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},$F=e=>{BF(e),DW(e)},RW=ls,jD=wt,MW=e=>ds(e.dom),NW=e=>nt(e.dom),FF=e=>n=>ns(me.fromDom(e),n),Ew=(e,n,o)=>kr(me.fromDom(e),r=>NW(r)||o.isBlock(ee(r)),FF(n)).getOr(me.fromDom(n)).dom,IF=(e,n)=>kr(me.fromDom(e),MW,FF(n)),LF=(e,n,o)=>{const r=new da(e,n),a=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:a();f&&!RW(f);f=a())Pi(f)&&(u=f);return u},HF=(e,n,o)=>{const a=Ue.fromRangeStart(e).getNode(),u=Ew(a,n,o),f=LF(a,u,!1),b=LF(a,u,!0),y=document.createRange();return IF(f,u).fold(()=>{jD(f)?y.setStart(f,0):y.setStartBefore(f)},x=>y.setStartBefore(x.dom)),IF(b,u).fold(()=>{jD(b)?y.setEnd(b,b.data.length):y.setEndAfter(b)},x=>y.setEndAfter(x.dom)),y},PW=e=>{const n=HF(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(CE(n))},BW=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),PW(e))})};var Yv;(function(e){e.Before="before",e.After="after"})(Yv||(Yv={}));const $W=(e,n)=>Math.abs(e.left-n),FW=(e,n)=>Math.abs(e.right-n),d4=(e,n)=>e>=n.top&&e<=n.bottom,zF=(e,n)=>e.top<n.bottom&&e.bottom>n.top,VF=(e,n)=>{const o=o3(e,n)/Math.min(e.height,n.height);return zF(e,n)&&o>.5},IW=(e,n)=>{const o=jt(e,r=>d4(n,r));return ep(o).fold(()=>[[],e],r=>{const{pass:a,fail:u}=ko(e,f=>VF(f,r));return[a,u]})},LW=(e,n)=>({node:e.node,position:$W(e,n)<FW(e,n)?Yv.Before:Yv.After}),HW=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),UF=(e,n,o,r)=>{const a=N=>Pi(N.node)?F.some(N):Vt(N.node)?UF(lo(N.node.childNodes),n,o,!1):F.none(),u=(N,B,W)=>a(B).filter(X=>Math.abs(W(N,n,o)-W(X,n,o))<2&&wt(X.node)),f=(N,B)=>{const W=Ke(N,(X,q)=>B(X,n,o)-B(q,n,o));return bs(W,a).map(X=>r&&!wt(X.node)&&W.length>1?u(X,W[1],B).getOr(X):X)},[b,y]=IW(O0(e),o),{pass:x,fail:R}=ko(y,N=>N.top<o);return f(b,HW).orThunk(()=>f(R,du)).orThunk(()=>f(x,du))},zW=(e,n,o,r)=>{const a=(u,f)=>{const b=x=>Vt(x)&&x.classList.contains("mce-drag-container"),y=jt(u.dom.childNodes,fo(b));return f.fold(()=>UF(y,o,r,!0),x=>{const R=jt(y,N=>N!==x.dom);return UF(R,o,r,!0)}).orThunk(()=>(ns(u,e)?F.none():_f(u)).bind(R=>a(R,F.some(u))))};return a(n,F.none())},WF=(e,n,o)=>{const r=me.fromDom(e),a=ru(r),f=me.fromPoint(a,n,o).filter(b=>Mr(r,b)).getOr(r);return zW(r,f,n,o)},m4=(e,n,o)=>WF(e,n,o).filter(r=>Qf(r.node)).map(r=>LW(r,n)),Tw=e=>{var n,o;const r=e.getBoundingClientRect(),a=e.ownerDocument,u=a.documentElement,f=a.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},VW=e=>e.inline?Tw(e.getBody()):{left:0,top:0},UW=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},ZF=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},a={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:a},WW=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=Tw(e.getContentAreaContainer()),r=ZF(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},GD=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),jF=(e,n)=>GD(VW(e),UW(e),WW(e,n)),GF=e=>({target:e,srcElement:e}),ZW=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...GF(o)}),qF=(e,n,o)=>{const r=Bs("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:Bt,stopImmediatePropagation:Bt,stopPropagation:Bt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...GF(n)}},jW=(e,n)=>{const o=XU(e);return n==="dragstart"?(eF(o),nF(o)):n==="drop"?(ZU(o),MD(o)):(jU(o),br(o)),o},gq=(e,n,o,r)=>{const a=jW(o,e);return ln(r)?qF(e,n,a):ZW(e,r,n,a)},KF=32,GW=100,f4=8,kw=16,YF=ds,qD=aS(YF,nt),qW=(e,n,o)=>YF(o)&&o!==n&&e.isEditable(o.parentElement),XF=(e,n,o)=>On(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),KD=(e,n,o,r)=>{const a=e.dom,u=n.cloneNode(!0);a.setStyles(u,{width:o,height:r}),a.setAttrib(u,"data-mce-selected",null);const f=a.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return a.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),a.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},YD=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},Xv=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},JF=Xv("left",-32),I0=Xv("left",KF),XD=Xv("top",-32),QF=Xv("top",KF),KW=(e,n,o,r,a,u,f,b,y,x,R,N)=>{let B=0,W=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>a&&(B=n.pageX+o-a),n.pageY+r>u&&(W=n.pageY+r-u),e.style.width=o-B+"px",e.style.height=r-W+"px";const X=y.clientHeight,q=y.clientWidth,ne=f+y.getBoundingClientRect().top,ge=b+y.getBoundingClientRect().left;R.on(Se=>{Se.intervalId.clear(),Se.dragging&&N&&(f+f4>=X?Se.intervalId.set(QF(x)):f-f4<=0?Se.intervalId.set(XD(x)):b+f4>=q?Se.intervalId.set(I0(x)):b-f4<=0?Se.intervalId.set(JF(x)):ne+kw>=window.innerHeight?Se.intervalId.set(QF(window)):ne-kw<=0?Se.intervalId.set(XD(window)):ge+kw>=window.innerWidth?Se.intervalId.set(I0(window)):ge-kw<=0&&Se.intervalId.set(JF(window)))})},e8=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},YW=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);e8(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&jf(me.fromDom(o))},t8=e=>e.button===0,XW=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),n8=(e,n)=>o=>{if(t8(o)){const r=Ho(n.dom.getParents(o.target),qD).getOr(null);if(De(r)&&qW(n.dom,n.getBody(),r)){const a=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dataTransfer:PD(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-a.x,relY:o.pageY-a.y,width:r.offsetWidth,height:r.offsetHeight,ghost:KD(n,r,r.offsetWidth,r.offsetHeight),intervalId:zl(GW)})}}},JW=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),m4(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const a=e._selectionOverrides.showCaret(1,r.node,r.position===Yv.Before,!1);a?e.selection.setRng(a):e.selection.placeCaretAt(n,o)})},_w=(e,n,o,r,a)=>{n==="dragstart"&&ww(r,e.dom.getOuterHTML(o));const u=gq(n,o,r,a);return e.dispatch(n,u)},JD=(e,n)=>{const o=jh((a,u)=>JW(n,a,u),0);n.on("remove",o.cancel);const r=e;return a=>e.on(u=>{const f=Math.max(Math.abs(a.screenX-u.screenX),Math.abs(a.screenY-u.screenY));if(!u.dragging&&f>10){const b=_w(n,"dragstart",u.element,u.dataTransfer,a);if(De(b.dataTransfer)&&(u.dataTransfer=b.dataTransfer),b.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=a.currentTarget===n.getDoc().documentElement,y=XW(u,jF(n,a));YD(u.ghost,n.getBody()),KW(u.ghost,y,u.width,u.height,u.maxX,u.maxY,a.clientY,a.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(a.clientX,a.clientY)}})},o8=e=>{const n=e.getSel();if(De(n)){const r=n.getRangeAt(0).startContainer;return wt(r)?r.parentNode:r}else return null},hq=(e,n)=>o=>{e.on(r=>{var a;if(r.intervalId.clear(),r.dragging){if(XF(n,o8(n.selection),r.element)){const u=(a=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&a!==void 0?a:n.getBody();_w(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{YW(n.dom,r.element),cF(r.dataTransfer).each(b=>n.insertContent(b)),n._selectionOverrides.hideFakeCaret()})}_w(n,"dragend",n.getBody(),r.dataTransfer,o)}}),c8(e)},s8=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>_w(n,"dragend",r.element,r.dataTransfer),a=>_w(n,"dragend",r.element,r.dataTransfer,a))}),c8(e)},r8=(e,n)=>o=>s8(e,n,F.some(o)),c8=e=>{e.on(n=>{n.intervalId.clear(),e8(n.ghost)}),e.clear()},QD=e=>{const n=Ur(),o=Sr.DOM,r=document,a=n8(n,e),u=JD(n,e),f=hq(n,e),b=r8(n,e);e.on("mousedown",a),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",y=>{y.keyCode===rt.ESC&&s8(n,e,F.none())})},QW=e=>{const n=a=>{if(!a.isDefaultPrevented()){const u=a.dataTransfer;u&&(We(u.types,"Files")||u.files.length>0)&&(a.preventDefault(),a.type==="drop"&&NC(e,"Dropped file type is not supported"))}},o=a=>{fv(e,a.target)&&n(a)},r=()=>{const a=Sr.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),y=["drop","dragover"];fe(y,x=>{a.bind(f,x,o),u.bind(b,x,n)}),e.on("remove",()=>{fe(y,x=>{a.unbind(f,x,o),u.unbind(b,x,n)})})};e.on("init",()=>{rn.setEditorTimeout(e,r,0)})},eZ=e=>{QD(e),Ib(e)&&QW(e)},tZ=e=>{const n=jh(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=GA(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},a8=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(Xc(o)){const r=Cm(e.getBody(),o),a=ds(r)?r:o;e.selection.getNode()!==a&&UC(e,a).each(u=>e.selection.setRng(u))}})})},jp=ds,eR=(e,n)=>Cm(e.getBody(),n),i8=e=>{const n=e.selection,o=e.dom,r=e.getBody(),a=ox(e,r,o.isBlock,()=>kt(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const y=$t=>De($t)&&o.hasClass($t,"mce-offscreen-selection"),x=$t=>$t!==r&&(jp($t)||Xc($t))&&o.isChildOf($t,r)&&o.isEditable($t.parentNode),R=$t=>{$t&&n.setRng($t)},N=($t,qe,Le,dt=!0)=>e.dispatch("ShowCaret",{target:qe,direction:$t,before:Le}).isDefaultPrevented()?null:(dt&&n.scrollIntoView(qe,$t===-1),a.show(Le,qe)),B=$t=>{$t.hasAttribute("data-mce-caret")&&(gr($t),n.scrollIntoView($t))},W=()=>{e.on("click",qe=>{o.isEditable(qe.target)||(qe.preventDefault(),e.focus())}),e.on("blur NewBlock",Me),e.on("ResizeWindow FullscreenStateChanged",a.reposition),e.on("tap",qe=>{const Le=qe.target,dt=eR(e,Le);jp(dt)?(qe.preventDefault(),UC(e,dt).each(Te)):x(Le)&&UC(e,Le).each(Te)},!0),e.on("mousedown",qe=>{const Le=qe.target;if(Le!==r&&Le.nodeName!=="HTML"&&!o.isChildOf(Le,r)||!V6(e,qe.clientX,qe.clientY))return;Me(),At();const dt=eR(e,Le);jp(dt)?(qe.preventDefault(),UC(e,dt).each(Te)):m4(r,qe.clientX,qe.clientY).each(Qt=>{qe.preventDefault();const _n=N(1,Qt.node,Qt.position===Yv.Before,!1);R(_n),pl(dt)?dt.focus():e.getBody().focus()})}),e.on("keypress",qe=>{rt.modifierPressed(qe)||jp(n.getNode())&&qe.preventDefault()}),e.on("GetSelectionRange",qe=>{let Le=qe.range;if(b){if(!b.parentNode){b=null;return}Le=Le.cloneRange(),Le.selectNode(b),qe.range=Le}}),e.on("SetSelectionRange",qe=>{qe.range=ne(qe.range);const Le=Te(qe.range,qe.forward);Le&&(qe.range=Le)});const $t=qe=>Vt(qe)&&qe.id==="mcepastebin";e.on("AfterSetSelectionRange",qe=>{const Le=qe.range,dt=Le.startContainer.parentElement;!q(Le)&&!$t(dt)&&At(),y(dt)||Me()}),eZ(e),tZ(e),a8(e)},X=$t=>uu($t)||pi($t)||Wl($t),q=$t=>X($t.startContainer)||X($t.endContainer),ne=$t=>{const qe=e.schema.getVoidElements(),Le=o.createRng(),dt=$t.startContainer,Qt=$t.startOffset,_n=$t.endContainer,Oo=$t.endOffset;return Cn(qe,dt.nodeName.toLowerCase())?Qt===0?Le.setStartBefore(dt):Le.setStartAfter(dt):Le.setStart(dt,Qt),Cn(qe,_n.nodeName.toLowerCase())?Oo===0?Le.setEndBefore(_n):Le.setEndAfter(_n):Le.setEnd(_n,Oo),Le},ge=($t,qe)=>{const Le=me.fromDom(e.getBody()),dt=e.getDoc(),Qt=xc(Le,"#"+u).getOrThunk(()=>{const Lo=me.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',dt);return Rr(Lo,"id",u),Cr(Le,Lo),Lo}),_n=o.createRng();Fl(Qt),$l(Qt,[me.fromText(fc,dt),me.fromDom(qe),me.fromText(fc,dt)]),_n.setStart(Qt.dom.firstChild,1),_n.setEnd(Qt.dom.lastChild,0),ro(Qt,{top:o.getPos($t,e.getBody()).y+"px"}),M2(Qt);const Oo=n.getSel();return Oo&&(Oo.removeAllRanges(),Oo.addRange(_n)),_n},Se=$t=>{const qe=$t.cloneNode(!0),Le=e.dispatch("ObjectSelected",{target:$t,targetClone:qe});if(Le.isDefaultPrevented())return null;const dt=ge($t,Le.targetClone),Qt=me.fromDom($t);return fe(ka(me.fromDom(e.getBody()),`*[${f}]`),_n=>{ns(Qt,_n)||Ts(_n,f)}),o.getAttrib($t,f)||$t.setAttribute(f,"1"),b=$t,At(),dt},Te=($t,qe)=>{if(!$t)return null;if($t.collapsed){if(!q($t)){const _n=qe?1:-1,Oo=q1(_n,r,$t),Lo=Oo.getNode(!qe);if(De(Lo)){if(Qf(Lo))return N(_n,Lo,qe?!Oo.isAtEnd():!1,!1);if(vd(Lo)&&ds(Lo.nextSibling)){const Us=o.createRng();return Us.setStart(Lo,0),Us.setEnd(Lo,0),Us}}const ks=Oo.getNode(qe);if(De(ks)){if(Qf(ks))return N(_n,ks,qe?!1:!Oo.isAtEnd(),!1);if(vd(ks)&&ds(ks.previousSibling)){const Us=o.createRng();return Us.setStart(ks,1),Us.setEnd(ks,1),Us}}}return null}let Le=$t.startContainer,dt=$t.startOffset;const Qt=$t.endOffset;if(wt(Le)&&dt===0&&jp(Le.parentNode)&&(Le=Le.parentNode,dt=o.nodeIndex(Le),Le=Le.parentNode),!Vt(Le))return null;if(Qt===dt+1&&Le===$t.endContainer){const _n=Le.childNodes[dt];if(x(_n))return Se(_n)}return null},Me=()=>{b&&b.removeAttribute(f),xc(me.fromDom(e.getBody()),"#"+u).each(zs),b=null},lt=()=>{a.destroy(),b=null},At=()=>{a.hide()};return Dd(e)||W(),{showCaret:N,showBlockCaretContainer:B,hideFakeCaret:At,destroy:lt}},nZ=(e,n)=>{let o=n;for(let r=e.previousSibling;wt(r);r=r.previousSibling)o+=r.data.length;return o},l8=(e,n,o,r,a)=>{if(wt(o)&&(r<0||r>o.data.length))return[];const u=a&&wt(o)?[nZ(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,a)),f=f.parentNode;return f===n?u.reverse():[]},g4=(e,n,o,r,a,u,f=!1)=>{const b=l8(e,n,o,r,f),y=l8(e,n,a,u,f);return{start:b,end:y}},u8=(e,n)=>{const o=n.slice(),r=o.pop();return Go(r)?Wn(o,(u,f)=>u.bind(b=>F.from(b.childNodes[f])),F.some(e)).bind(u=>wt(u)&&(r<0||r>u.data.length)?F.none():F.some({node:u,offset:r})):F.none()},d8=(e,n)=>u8(e,n.start).bind(({node:o,offset:r})=>u8(e,n.end).map(({node:a,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(a,u),f})),oZ=(e,n,o,r=!1)=>g4(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),Gp=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,wt(n.firstChild)&&hl(n.firstChild.data)),Gp(e,r,o)}},h4=(e,n,o,r=!0)=>{const a=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(wt(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),wt(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),Gp(e,a,o),a!==u&&Gp(e,u,o))},p4=(e,n)=>F.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),tR=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:Kf(r).concat(e.blockPatterns),inlinePatterns:ma(r).concat(e.inlinePatterns)}},nR=(e,n,o,r)=>{const a=e.createRng();return a.setStart(n,0),a.setEnd(o,r),a.toString()},m8=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),b4=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},v4=(e,n,o)=>{const r=d8(e.getRoot(),o).getOrDie("Unable to resolve path range"),a=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?a:a.splitText(r.startOffset),y=b.parentNode,x=f.parentNode;return{prefix:n,end:x.insertBefore(m8(e,n+"-end"),f),start:y.insertBefore(m8(e,n+"-start"),b)}},f8=(e,n,o)=>{Gp(e,e.get(n.prefix+"-end"),o),Gp(e,e.get(n.prefix+"-start"),o)},oR=e=>e.start.length===0,g8=e=>(n,o)=>{const a=n.data.substring(0,o),u=a.lastIndexOf(e.charAt(e.length-1)),f=a.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},h8=(e,n,o,r)=>{const a=n.start;return jO(e,r.container,r.offset,g8(a),o).bind(f=>{var b,y;const x=(y=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(a))!==null&&y!==void 0?y:-1;if(x!==-1&&f.offset>=x+a.length){const N=e.createRng();return N.setStart(f.container,f.offset-a.length),N.setEnd(f.container,f.offset),F.some(N)}else{const N=f.offset-a.length;return ZO(f.container,N,o).map(B=>{const W=e.createRng();return W.setStart(B.container,B.offset),W.setEnd(f.container,f.offset),W}).filter(B=>B.toString()===a).orThunk(()=>h8(e,n,o,bf(f.container,0)))}})},sZ=(e,n,o,r,a,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),F.some(f)}return WO(o,r,a).bind(f=>h8(e,n,a,f).bind(y=>{var x;if(u){if(y.endContainer===f.container&&y.endOffset===f.offset)return F.none();if(f.offset===0&&((x=y.endContainer.textContent)===null||x===void 0?void 0:x.length)===y.endOffset)return F.none()}return F.some(y)}))},rZ=(e,n,o,r)=>{const a=e.dom,u=a.getRoot(),f=o.pattern,b=o.position.container,y=o.position.offset;return ZO(b,y-o.pattern.end.length,n).bind(x=>{const R=g4(a,u,x.container,x.offset,b,y,r);if(oR(f))return F.some({matches:[{pattern:f,startRng:R,endRng:R}],position:x});{const N=y4(e,o.remainingPatterns,x.container,x.offset,n,r),B=N.getOr({matches:[],position:x}),W=B.position;return sZ(a,f,W.container,W.offset,n,N.isNone()).map(q=>{const ne=oZ(a,u,q,r);return{matches:B.matches.concat([{pattern:f,startRng:ne,endRng:R}]),position:bf(q.startContainer,q.startOffset)}})}})},y4=(e,n,o,r,a,u)=>{const f=e.dom;return WO(o,r,f.getRoot()).bind(b=>{const y=nR(f,a,o,r);for(let x=0;x<n.length;x++){const R=n[x];if(!Po(y,R.end))continue;const N=n.slice();N.splice(x,1);const B=rZ(e,a,{pattern:R,remainingPatterns:N,position:b},u);if(B.isNone()&&r>0)return y4(e,n,o,r-1,a,u);if(B.isSome())return B}return F.none()})},p8=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?fe(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},cZ=(e,n,o,r)=>{const a=b4(e.dom,o);h4(e.dom,a,r),p8(e,n,a)},aZ=(e,n,o,r,a)=>{const u=e.dom,f=b4(u,r),b=b4(u,o);h4(u,b,a),h4(u,f,a);const y={prefix:o.prefix,start:o.end,end:r.start},x=b4(u,y);p8(e,n,x)},iZ=(e,n)=>{const o=Bg("mce_textpattern"),r=hs(n,(a,u)=>{const f=v4(e,o+`_end${a.length}`,u.endRng);return a.concat([{...u,endMarker:f}])},[]);return hs(r,(a,u)=>{const f=r.length-a.length-1,b=oR(u.pattern)?u.endMarker:v4(e,o+`_start${f}`,u.startRng);return a.concat([{...u,startMarker:b}])},[])},b8=e=>Ke(e,(n,o)=>o.end.length-n.end.length),lZ=(e,n)=>{const o=ps(e,r=>Tt(n,a=>r.pattern.start===a.pattern.start&&r.pattern.end===a.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},C4=(e,n,o,r,a,u)=>{const f=y4(e,a.inlinePatterns,o,r,n,u).fold(()=>[],y=>y.matches),b=y4(e,b8(a.inlinePatterns),o,r,n,u).fold(()=>[],y=>y.matches);return lZ(f,b)},v8=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),a=iZ(o,n);fe(a,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=y=>y===f;oR(u.pattern)?cZ(e,u.pattern,u.endMarker,b):aZ(e,u.pattern,u.startMarker,u.endMarker,b),f8(o,u.endMarker,b),f8(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},y8=(e,n,o)=>Jz(n,0,n).map(r=>{const a=r.container;return WB(a,o.start.length,n).each(u=>{const f=e.createRng();f.setStart(a,0),f.setEnd(u.container,u.offset),h4(e,f,b=>b===n)}),a}),C8=e=>(n,o)=>{const r=n.dom,a=o.pattern,u=d8(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),f=(b,y)=>{const x=y.get(b);return mt(x)&&Ht(x).exists(R=>Cn(R,"block"))};return p4(n,u).each(b=>{a.type==="block-format"?f(a.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,b,a),n.formatter.apply(a.format)}):a.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,b,a),n.execCommand(a.cmd,!1,a.value)})}),!0},uZ=e=>Ke(e,(n,o)=>o.start.length-n.start.length),w8=e=>(n,o)=>{const r=uZ(n),a=o.replace(fc," ");return Ho(r,u=>e(u,o,a))},S8=(e,n)=>(o,r,a,u,f)=>{var b;f===void 0&&(f=(b=r.textContent)!==null&&b!==void 0?b:"");const y=o.dom,x=ea(o);return y.is(r,x)?e(a.blockPatterns,f).map(R=>n&&at.trim(f).length===R.start.length?[]:[{pattern:R,range:g4(y,y.getRoot(),r,0,r,0,u)}]).getOr([]):[]},w4=e=>/^\s[^\s]/.test(e),dZ=C8((e,n,o)=>{y8(e,n,o).each(r=>{const a=me.fromDom(r),u=Kh(a);w4(u)&&eS(a,u.slice(1))})}),mZ=w8((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),fZ=S8(mZ,!0),gZ=(e,n)=>{const o=e.selection.getRng();return p4(e,o).map(r=>{var a;const u=Math.max(0,o.startOffset),f=tR(n,r,(a=r.textContent)!==null&&a!==void 0?a:""),b=C4(e,r,o.startContainer,u,f,!0),y=fZ(e,r,f,!0);return{inlineMatches:b,blockMatches:y}}).filter(({inlineMatches:r,blockMatches:a})=>a.length>0||r.length>0)},hZ=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();fe(n,r=>dZ(e,r)),e.selection.moveToBookmark(o)},pZ=C8(y8),bZ=w8((e,n,o)=>n===e.start||o===e.start),vZ=S8(bZ,!1),x8=(e,n)=>{const o=e.selection.getRng();return p4(e,o).map(r=>{const a=Math.max(0,o.startOffset),u=nR(e.dom,r,o.startContainer,a),f=tR(n,r,u);return vZ(e,r,f,!1,u)}).filter(r=>r.length>0)},yZ=(e,n)=>{fe(n,o=>pZ(e,o))},E8=(e,n)=>gZ(e,n).fold(Re,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{Cy(e),v8(e,o),hZ(e,r);const a=e.selection.getRng(),u=WO(a.startContainer,a.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(f=>{const b=f.container;b.data.charAt(f.offset-1)===Mh&&(b.deleteData(f.offset-1,1),Gp(e.dom,b.parentNode,y=>y===e.dom.getRoot()))})}),!0)),CZ=(e,n)=>{const o=e.selection.getRng();p4(e,o).map(r=>{const a=Math.max(0,o.startOffset-1),u=nR(e.dom,r,o.startContainer,a),f=tR(n,r,u),b=C4(e,r,o.startContainer,a,f,!1);b.length>0&&e.undoManager.transact(()=>{v8(e,b)})})},wZ=(e,n)=>x8(e,n).fold(Re,o=>(e.undoManager.transact(()=>{yZ(e,o)}),!0)),sR=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},Aw=(e,n)=>sR(e,n,(o,r)=>o===r.keyCode&&!rt.modifierPressed(r)),SZ=(e,n)=>sR(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),T8=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>dm(XS(e).filter(f=>f.type==="inline-command"||f.type==="block-command"?e.queryCommandSupported(f.cmd):!0),JS(e)),a=()=>Z3(e);e.on("keydown",f=>{if(f.keyCode===13&&!rt.modifierPressed(f)&&e.selection.isCollapsed()&&e.selection.isEditable()){const b=rp(r(),"enter");(b.inlinePatterns.length>0||b.blockPatterns.length>0||a())&&E8(e,b)&&f.preventDefault()}},!0),e.on("keydown",f=>{if(f.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const b=rp(r(),"space");(b.blockPatterns.length>0||a())&&wZ(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const f=rp(r(),"space");(f.inlinePatterns.length>0||a())&&CZ(e,f)}};e.on("keyup",f=>{Aw(o,f)&&u()}),e.on("keypress",f=>{SZ(n,f)&&rn.setEditorTimeout(e,u)})},xZ=e=>{T8(e)},EZ=e=>{const n=at.each,o=rt.BACKSPACE,r=rt.DELETE,a=e.dom,u=e.selection,f=e.parser,b=cn.browser,y=b.isFirefox(),x=b.isChromium()||b.isSafari(),R=cn.deviceType.isiPhone()||cn.deviceType.isiPad(),N=cn.os.isMacOS()||cn.os.isiOS(),B=(tn,ut)=>{try{e.getDoc().execCommand(tn,!1,String(ut))}catch{}},W=tn=>tn.isDefaultPrevented(),X=()=>{const tn=Yt=>{const qn=a.create("body"),Ks=Yt.cloneContents();return qn.appendChild(Ks),u.serializer.serialize(qn,{format:"html"})},ut=Yt=>{const qn=tn(Yt),Ks=a.createRng();Ks.selectNode(e.getBody());const Xo=tn(Ks);return qn===Xo};e.on("keydown",Yt=>{const qn=Yt.keyCode;if(!W(Yt)&&(qn===r||qn===o)&&e.selection.isEditable()){const Ks=e.selection.isCollapsed(),Xo=e.getBody();if(Ks&&!Ui(e.schema,Xo)||!Ks&&!ut(e.selection.getRng()))return;Yt.preventDefault(),e.setContent(""),Xo.firstChild&&a.isBlock(Xo.firstChild)?e.selection.setCursorLocation(Xo.firstChild,0):e.selection.setCursorLocation(Xo,0),e.nodeChanged()}})},q=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},ne=()=>{e.inline||a.bind(e.getDoc(),"mousedown mouseup",tn=>{let ut;if(tn.target===e.getDoc().documentElement)if(ut=u.getRng(),e.getBody().focus(),tn.type==="mousedown"){if(uu(ut.startContainer))return;u.placeCaretAt(tn.clientX,tn.clientY)}else u.setRng(ut)})},ge=()=>{e.on("keydown",tn=>{if(!W(tn)&&tn.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const ut=u.getNode(),Yt=ut.previousSibling;if(ut.nodeName==="HR"){a.remove(ut),tn.preventDefault();return}Yt&&Yt.nodeName&&Yt.nodeName.toLowerCase()==="hr"&&(a.remove(Yt),tn.preventDefault())}}})},Se=()=>{Range.prototype.getClientRects||e.on("mousedown",tn=>{if(!W(tn)&&tn.target.nodeName==="HTML"){const ut=e.getBody();ut.blur(),rn.setEditorTimeout(e,()=>{ut.focus()})}})},Te=()=>{const tn=fm(e);e.on("click",ut=>{const Yt=ut.target;/^(IMG|HR)$/.test(Yt.nodeName)&&a.isEditable(Yt)&&(ut.preventDefault(),e.selection.select(Yt),e.nodeChanged()),Yt.nodeName==="A"&&a.hasClass(Yt,tn)&&Yt.childNodes.length===0&&a.isEditable(Yt.parentNode)&&(ut.preventDefault(),u.select(Yt))})},Me=()=>{const tn=()=>{const Yt=a.getAttribs(u.getStart().cloneNode(!1));return()=>{const qn=u.getStart();qn!==e.getBody()&&(a.setAttrib(qn,"style",null),n(Yt,Ks=>{qn.setAttributeNode(Ks.cloneNode(!0))}))}},ut=()=>!u.isCollapsed()&&a.getParent(u.getStart(),a.isBlock)!==a.getParent(u.getEnd(),a.isBlock);e.on("keypress",Yt=>{let qn;return!W(Yt)&&(Yt.keyCode===8||Yt.keyCode===46)&&ut()?(qn=tn(),e.getDoc().execCommand("delete",!1),qn(),Yt.preventDefault(),!1):!0}),a.bind(e.getDoc(),"cut",Yt=>{if(!W(Yt)&&ut()){const qn=tn();rn.setEditorTimeout(e,()=>{qn()})}})},lt=()=>{e.on("keydown",tn=>{if(!W(tn)&&tn.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const ut=u.getNode().previousSibling;if(ut&&ut.nodeName&&ut.nodeName.toLowerCase()==="table")return tn.preventDefault(),!1}return!0})},At=()=>{e.on("keydown",tn=>{if(W(tn)||tn.keyCode!==rt.BACKSPACE)return;let ut=u.getRng();const Yt=ut.startContainer,qn=ut.startOffset,Ks=a.getRoot();let Xo=Yt;if(!(!ut.collapsed||qn!==0)){for(;Xo.parentNode&&Xo.parentNode.firstChild===Xo&&Xo.parentNode!==Ks;)Xo=Xo.parentNode;Xo.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Xo),ut=a.createRng(),ut.setStart(Yt,0),ut.setEnd(Yt,0),u.setRng(ut))}})},$t=()=>{const tn=()=>{B("StyleWithCSS",!1),B("enableInlineTableEditing",!1),Bb(e)||B("enableObjectResizing",!1)};Jy(e)||e.on("BeforeExecCommand mousedown",tn)},qe=()=>{const tn=()=>{n(a.select("a:not([data-mce-block])"),ut=>{var Yt;let qn=ut.parentNode;const Ks=a.getRoot();if((qn==null?void 0:qn.lastChild)===ut){for(;qn&&!a.isBlock(qn);){if(((Yt=qn.parentNode)===null||Yt===void 0?void 0:Yt.lastChild)!==qn||qn===Ks)return;qn=qn.parentNode}a.add(qn,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",ut=>{(ut.type==="setcontent"||ut.command==="mceInsertLink")&&tn()})},Le=()=>{e.on("init",()=>{B("DefaultParagraphSeparator",ea(e))})},dt=tn=>{const ut=tn.getBody(),Yt=tn.selection.getRng();return Yt.startContainer===Yt.endContainer&&Yt.startContainer===ut&&Yt.startOffset===0&&Yt.endOffset===ut.childNodes.length},Qt=()=>{e.on("keyup focusin mouseup",tn=>{!rt.modifierPressed(tn)&&!dt(e)&&u.normalize()},!0)},_n=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Oo=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Lo=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",tn=>{let ut;tn.target.nodeName==="HTML"&&(ut=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(ut),e.selection.normalize(),e.nodeChanged())}))},ks=()=>{N&&e.on("keydown",tn=>{rt.metaKeyPressed(tn)&&!tn.shiftKey&&(tn.keyCode===37||tn.keyCode===39)&&(tn.preventDefault(),e.selection.getSel().modify("move",tn.keyCode===37?"backward":"forward","lineboundary"))})},Us=()=>{e.on("click",tn=>{let ut=tn.target;do if(ut.tagName==="A"){tn.preventDefault();return}while(ut=ut.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Ac=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",tn=>{tn.preventDefault()})})},Na=()=>{f.addNodeFilter("br",tn=>{let ut=tn.length;for(;ut--;)tn[ut].attr("class")==="Apple-interchange-newline"&&tn[ut].remove()})},Pa=Bt,It=()=>{if(!y||e.removed)return!1;const tn=e.selection.getSel();return!tn||!tn.rangeCount||tn.rangeCount===0},An=()=>{x&&(ne(),Te(),Ac(),q(),R&&(Oo(),Lo(),Us())),y&&(Se(),$t(),_n(),ks())},Ss=()=>{At(),X(),cn.windowsPhone||Qt(),x&&(ne(),Te(),Le(),Ac(),lt(),Na(),R?(Oo(),Lo(),Us()):q()),y&&(ge(),Se(),Me(),$t(),qe(),_n(),ks(),lt())};return Dd(e)?An():Ss(),{refreshContentEditable:Pa,isHidden:It}},TZ=e=>e.toLowerCase()==="gpl",kZ=e=>e.length>=64&&e.length<=255,k8=e=>TZ(e)||kZ(e)?"VALID":"INVALID",_Z=e=>{const n=tx(e);!oe(c2(e))&&(ln(n)||k8(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},S4=Sr.DOM,AZ=(e,n)=>{const o=me.fromDom(e.getBody()),r=Wd(Pl(o)),a=me.fromTag("style");Rr(a,"type","text/css"),Cr(a,me.fromText(n)),Cr(r,a),e.on("remove",()=>{zs(a)})},OZ=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,rR=e=>us(e,n=>ln(n)===!1),_8=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return rR({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_mathml_annotation_encodings:n("allow_mathml_annotation_encodings"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:OZ(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:ex(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},A8=e=>{const n=e.options.get;return rR({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},DZ=e=>{const n=e.options.get;return{..._8(e),...A8(e),...rR({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},RZ=e=>{const n=Mv(_8(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const a=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let y=b.attr(r);if(y&&!b.attr(u)){if(y.indexOf("data:")===0||y.indexOf("blob:")===0)continue;r==="style"?(y=a.serializeStyle(a.parseStyle(y),b.name),y.length||(y=null),b.attr(u,y),b.attr(r,y)):r==="tabindex"?(b.attr(u,y),b.attr(r,null)):b.attr(u,e.convertURL(y,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const a=o[r],u=a.attr("type")||"no/type";u.indexOf("mce-")!==0&&a.attr("type","mce-"+u)}}),AI(e)&&n.addNodeFilter("#cdata",o=>{var r;let a=o.length;for(;a--;){const u=o[a];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const a=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(a)&&u.getAll("br").length===0&&u.append(new Sl("br",1))}}),n},MZ=e=>{const n=Ii(e);n&&rn.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},NZ=e=>{const n=e.dom.getRoot();!e.inline&&(!vp(e)||e.selection.getStart(!0)===n)&&Wc(n).each(o=>{const r=o.getNode(),a=cu(r)?Wc(r).getOr(o):o;e.selection.setRng(a.toRange())})},O8=e=>{e.bindPendingEventDelegates(),e.initialized=!0,Ua(e),e.focus(!0),NZ(e),e.nodeChanged({initial:!0});const n=Xf(e);ie(n)&&n.call(e,e),MZ(e),gh(e)&&X6(e,!0)},Ow=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,D8=(e,n,o)=>{const{pass:r,fail:a}=ko(n,b=>tinymce.Resource.has(ig(b))),f=[...r.map(b=>{const y=tinymce.Resource.get(ig(b));return oe(y)?Promise.resolve(Ow(e).loadRawCss(b,y)):Promise.resolve()}),Ow(e).loadAll(a)];return e.inline?f:f.concat([e.ui.styleSheetLoader.loadAll(o)])},cR=e=>{const n=Ow(e),o=zS(e),r=e.contentCSS,a=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?a():e.on("remove",a)};if(e.contentStyles.length>0){let y="";at.each(e.contentStyles,x=>{y+=x+`\r
`}),e.dom.addStyle(y)}const f=Promise.all(D8(e,r,o)).then(u).catch(u),b=N3(e);return b&&AZ(e,b),f},PZ=e=>{const n=e.getDoc(),o=e.getBody();RS(e),qR(e)||(n.body.spellcheck=!1,S4.setAttrib(o,"spellcheck","false")),e.quirks=EZ(e),x3(e);const r=VS(e);r!==void 0&&(o.dir=r);const a=ip(e);a&&e.on("BeforeSetContent",u=>{at.each(a,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},BZ=e=>{Dd(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},aR=e=>{e.removed!==!0&&(BZ(e),O8(e))},R8=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},iR=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(S4.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=Jy(e),e._editableRoot=GS(e),!Jf(e)&&e.hasEditableRoot()&&(e.inline&&S4.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=r9(e),e.schema=Km(A8(e)),e.dom=Sr(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:LS(e),referrerPolicy:B1(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=RZ(e),e.serializer=N6(DZ(e),e),e.selection=R6(e.dom,e.getWin(),e.serializer,e),e.annotator=tr(e),e.formatter=ph(e),e.undoManager=lP(e),e._nodeChangeDispatcher=new VU(e),e._selectionOverrides=i8(e),gz(e),$F(e),DT(e),Dd(e)||(BW(e),xZ(e));const a=zU(e);_T(e,a),vz(e),f9(e),OW(e);const u=p6(e);PZ(e),_Z(e),u.fold(()=>{const f=R8(e);cR(e).then(()=>{aR(e),f()})},f=>{e.setProgressState(!0),cR(e).then(()=>{f().then(b=>{e.setProgressState(!1),aR(e),T6(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),aR(e),T6(e)})})})},$Z=ot,FZ=(e,n,o)=>M(e,n,$Z,o),Dw=Sr.DOM,x4=(e,n,o,r)=>{const a=me.fromTag("iframe");return r.each(u=>Rr(a,"tabindex",u)),Kr(a,o),Kr(a,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),Nl(a,"tox-edit-area__iframe"),a},E4=e=>{let n=A3(e)+"<html><head>";Ki(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=Db(e),r=PS(e),a=e.translate(Lb(e));return bi(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+bi(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${a}"><br></body></html>`,n},Ch=(e,n)=>{const o=cn.browser.isFirefox()?Lb(e):"Rich Text Area",r=e.translate(o),a=Tr(me.fromDom(e.getElement()),"tabindex").bind(tc),u=x4(e.id,r,_3(e),a).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=u,e.iframeHTML=E4(e),Dw.add(n.iframeContainer,u)},T4=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,iR(e)};if(Ub(e)||cn.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=FZ(me.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},Jv=(e,n)=>{Ch(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=Dw.isHidden(n.editorContainer)),e.getElement().style.display="none",Dw.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,T4(e)},lR=Sr.DOM,IZ=(e,n,o)=>{const r=$v.get(o),a=$v.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=at.trim(o),r&&at.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,a)||{};e.plugins[o]=u,ie(u.init)&&(u.init(e,a),n.push(o))}catch(u){j6(e,o,u)}}},LZ=e=>e.replace(/^\-/,""),M8=e=>{const n=[];fe(Fi(e),o=>{IZ(e,n,LZ(o))})},HZ=e=>{const n=at.trim(IS(e)),o=e.ui.registry.getAll().icons,r={...QE.get("default").icons,...QE.get(n).icons};Ct(r,(a,u)=>{Cn(o,u)||e.ui.registry.addIcon(u,a)})},uR=e=>{const n=ap(e);if(oe(n)){const o=gf.get(n);e.theme=o(e,gf.urls[n])||{},ie(e.theme.init)&&e.theme.init(e,gf.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},k4=e=>{const n=Gy(e),o=Bv.get(n);e.model=o(e,Bv.urls[n])},qp=e=>{const n=e.theme.renderUI;return n?n():N8(e)},L0=e=>{const n=e.getElement(),r=ap(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},dR=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),zZ=e=>{const n=lR.create("div");return lR.insertAfter(n,e),dR(n,n)},N8=e=>{const n=e.getElement();return e.inline?dR(null):zZ(n)},VZ=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,oe(ap(e))?qp(e):ie(ap(e))?L0(e):N8(e)},UZ=(e,n)=>{const o={show:F.from(n.show).getOr(Bt),hide:F.from(n.hide).getOr(Bt),isEnabled:F.from(n.isEnabled).getOr(ot),setEnabled:r=>{r&&(e.mode.get()==="readonly"||gh(e))||F.from(n.setEnabled).each(u=>u(r))}};e.ui={...e.ui,...o}},WZ=async e=>{e.dispatch("ScriptsLoaded"),HZ(e),uR(e),k4(e),M8(e);const n=await VZ(e);UZ(e,F.from(n.api).getOr({})),e.editorContainer=n.editorContainer,lg(e),e.inline?iR(e):Jv(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},H0=Sr.DOM,mR=e=>e.charAt(0)==="-",ZZ=(e,n)=>{const o=cp(n),r=Yf(n);if(!Zi.hasCode(o)&&o!=="en"){const a=Xn(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(a).catch(()=>{GH(n,a,o)})}},jZ=(e,n)=>{const o=ap(e);if(oe(o)&&!mR(o)&&!Cn(gf.urls,o)){const r=B3(e),a=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;gf.load(o,a).catch(()=>{qH(e,a,o)})}},GZ=(e,n)=>{const o=Gy(e);if(o!=="plugin"&&!Cn(Bv.urls,o)){const r=$3(e),a=oe(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;Bv.load(o,a).catch(()=>{$C(e,a,o)})}},bq=e=>F.from(O3(e)).filter(Xn).map(n=>({url:n,name:F.none()})),P8=(e,n,o)=>F.from(n).filter(r=>Xn(r)&&!QE.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:F.some(r)})),fR=(e,n,o)=>{const r=P8(n,"default",o),a=bq(n).orThunk(()=>P8(n,IS(n),""));fe(ki([r,a]),u=>{e.add(u.url).catch(()=>{Z6(n,u.url,u.name.getOrUndefined())})})},qZ=(e,n)=>{const o=(r,a)=>{$v.load(r,a).catch(()=>{jH(e,a,r)})};Ct(Fb(e),(r,a)=>{o(a,r),e.options.set("plugins",Fi(e).concat(a))}),fe(Fi(e),r=>{r=at.trim(r),r&&!$v.urls[r]&&!mR(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},KZ=e=>{const n=ap(e);return!oe(n)||De(gf.get(n))},B8=e=>{const n=Gy(e);return De(Bv.get(n))},YZ=(e,n)=>{const o=yl.ScriptLoader,r=()=>{!e.removed&&KZ(e)&&B8(e)&&WZ(e)};jZ(e,n),GZ(e,n),ZZ(o,e),fR(o,e,n),qZ(e,n),o.loadQueue().then(r,r)},$8=(e,n)=>Mi.forElement(e,{contentCssCors:qS(n),referrerPolicy:B1(n)}),XZ=e=>{const n=e.id;Zi.setCode(cp(e));const o=()=>{H0.unbind(window,"ready",o),e.render()};if(!Xm.Event.domLoaded){H0.bind(window,"ready",o);return}if(!e.getElement())return;const r=me.fromDom(e.getElement()),a=Pm(r);e.on("remove",()=>{bo(r.dom.attributes,f=>Ts(r,f.name)),Kr(r,a)}),e.ui.styleSheetLoader=$8(r,e),I1(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||H0.getParent(n,"form");u&&(e.formElement=u,ZS(e)&&!_r(e.getElement())&&(H0.insertAfter(H0.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},H0.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),Ky(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=RA(e),e.notificationManager=WH(e),o2(e)&&e.on("GetContent",f=>{f.save&&(f.content=H0.encode(f.content))}),Yy(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Xy(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),YZ(e,e.suffix)},gR=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,gh(e)||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),Uc(e,n))},JZ=e=>e._editableRoot,QZ=(e,n)=>({sections:yt(e),options:yt(n)}),F8=Cc().deviceType,I8=F8.isPhone(),L8=F8.isTablet(),z0=e=>{if(On(e))return[];{const n=mt(e)?e:e.split(/[ ,]/),o=et(n,ss);return jt(o,Xn)}},H8=(e,n)=>{const o=Dc(n,(r,a)=>We(e,a));return QZ(o.t,o.f)},hR=(e,n,o={})=>{const r=e.sections(),a=is(r,n).getOr({});return at.extend({},o,a)},pR=(e,n)=>Cn(e.sections(),n),vq=(e,n)=>pR(e,n)?e.sections()[n]:{},yq=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:is(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),ej=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?at.extend({},e.external_plugins,r):r},z8=(e,n)=>[...z0(e),...z0(n)],tj=(e,n,o,r)=>e&&pR(n,"mobile")?r:o,nj=(e,n,o,r)=>{const a=z0(o.forced_plugins),u=z0(r.plugins),f=vq(n,"mobile"),b=f.plugins?z0(f.plugins):u,y=tj(e,n,u,b),x=z8(a,y);return at.extend(r,{forced_plugins:a,plugins:x})},oj=(e,n)=>e&&pR(n,"mobile"),Cq=(e,n,o,r,a)=>{var u;const f=e?{mobile:yq((u=a.mobile)!==null&&u!==void 0?u:{},n)}:{},b=H8(["mobile"],UT(f,a)),y=at.extend(o,r,b.options(),oj(e,b)?hR(b,"mobile"):{},{external_plugins:ej(r,b.options())});return nj(e,b,r,y)},wq=(e,n)=>{const o=XB(n);return Cq(I8||L8,I8,o,e,o)},V8=(e,n)=>mH(e,n),U8=e=>{const n=(r,a)=>{e.formatter.toggle(r,a),e.nodeChanged()},o=r=>()=>{fe("left,center,right,justify".split(","),a=>{r!==a&&e.formatter.remove("align"+a)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},sj=e=>{const n=o=>()=>{const r=e.selection,a=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return Tt(a,u=>De(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},rj=e=>{U8(e),sj(e)},cj=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let a=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(cn.os.isMacOS()||cn.os.isiOS())&&(a=a.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:a,type:"error"})}}})},Sq=(e,n,o,r)=>{const a=me.fromDom(e.getRoot());return J2(a,Ue.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),vv(a,Ue.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},xq=e=>{if(typeof e!="string"){const n=at.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},Eq=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?Sq(r,o.getRng(),n,e.schema):n},_4=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=xq(n);rA(e,{...r,content:Eq(e,o),format:"html",set:!1,selection:!0}).each(a=>{const u=dH(e,a.content,r);w0(e,u,a),e.addVisual()})}},Tq=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{_4(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{_4(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{_4(e,r)},mceInsertContent:(n,o,r)=>{_4(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(KS(e))}})},aj={"font-size":"size","font-family":"face"},V0=Kc("font"),bR=(e,n,o)=>{const r=u=>Xa(u,e).orThunk(()=>V0(u)?is(aj,e).bind(f=>Tr(u,f)):F.none()),a=u=>ns(me.fromDom(n),u);return EE(me.fromDom(o),u=>r(u),a)},A4=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),W8=(e,n)=>F.from(Sr.DOM.getStyle(n,e,!0)),vR=e=>(n,o)=>F.from(o).map(me.fromDom).filter(po).bind(r=>bR(e,n,r.dom).or(W8(e,r.dom))).getOr(""),Z8=vR("font-size"),ij=A(A4,vR("font-family")),lj=e=>Wc(e.getBody()).bind(n=>{const o=n.container();return F.from(wt(o)?o.parentNode:o)}),uj=e=>F.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?F.none():F.from(e.selection.getStart(!0))}),dj=(e,n)=>uj(e).orThunk(Qe(lj,e)).map(me.fromDom).filter(po).bind(n),yR=(e,n)=>dj(e,To(F.some,n)),j8=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=QS(e),a=j3(e);return a.length>0?a[o-1]||n:r[o-1]||n}else return n}else return n},Kp=e=>{const n=e.split(/\s*,\s*/);return et(n,o=>o.indexOf(" ")!==-1&&!(Ln(o,'"')||Ln(o,"'"))?`'${o}'`:o).join(",")},mj=(e,n)=>{const o=j8(e,n);e.formatter.toggle("fontname",{value:Kp(o)}),e.nodeChanged()},G8=e=>yR(e,n=>ij(e.getBody(),n.dom)).getOr(""),fj=(e,n)=>{e.formatter.toggle("fontsize",{value:j8(e,n)}),e.nodeChanged()},O4=e=>yR(e,n=>Z8(e.getBody(),n.dom)).getOr(""),gj=e=>yR(e,n=>{const o=me.fromDom(e.getBody()),r=EE(n,u=>Xa(u,"line-height"),Qe(ns,o)),a=()=>{const u=parseFloat(Vr(n,"line-height")),f=parseFloat(Vr(n,"font-size"));return String(u/f)};return r.getOrThunk(a)}).getOr(""),hj=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},pj=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,a)=>{n(o,{value:a})},BackColor:(o,r,a)=>{n("hilitecolor",{value:a})},FontName:(o,r,a)=>{mj(e,a)},FontSize:(o,r,a)=>{fj(e,a)},LineHeight:(o,r,a)=>{hj(e,a)},Lang:(o,r,a)=>{var u;n(o,{value:a.code,customValue:(u=a.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,a)=>{n(oe(a)?a:"p")},mceToggleFormat:(o,r,a)=>{n(a)}})},q8=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>G8(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>O4(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>gj(e))},bj=e=>{pj(e),q8(e)},vj=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},yj=e=>{e.editorCommands.addCommands({Indent:()=>{dz(e)},Outdent:()=>{gB(e)}}),e.editorCommands.addCommands({Outdent:()=>dB(e)},"state")},Cj=e=>{const n=(o,r,a)=>{if(e.mode.isReadOnly())return;const u=oe(a)?{href:a}:a,f=e.dom.getParent(e.selection.getNode(),"a");it(u)&&oe(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},CR=(e,n,o,r)=>{const a=e.dom,u=b=>a.isBlock(b)&&b.parentElement===o,f=u(n)?n:a.getParent(r,u,o);return F.from(f).map(me.fromDom)},K8=(e,n)=>{if(e.mode.isReadOnly())return;const o=e.dom,r=e.selection.getRng(),a=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,f=jv(o,u);if(!f||!f.isContentEditable)return;const b=n?Ha:Oi,y=ea(e);CR(e,a,f,u).each(x=>{const R=A$(e,u,x.dom,f,!1,y);b(x,me.fromDom(R)),e.selection.setCursorLocation(R,0),e.dispatch("NewBlock",{newBlock:R}),mw(e,"insertParagraph")})},wj=e=>K8(e,!0),va=e=>K8(e,!1),Sj=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{wj(e)},InsertNewBlockAfter:()=>{va(e)}})},xj=e=>{e.editorCommands.addCommands({insertParagraph:()=>{t4(pw,e)},mceInsertNewLine:(n,o,r)=>{L$(e,r)},InsertLineBreak:(n,o,r)=>{t4(B$,e)}})},wR=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let a=0;e.dom.getParent(e.selection.getNode(),u=>Vt(u)&&a++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),nt);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},Y8=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const a=r??e.selection.getNode();if(a!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(a,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{$n(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},SR=e=>{rj(e),cj(e),vj(e),wR(e),Tq(e),Cj(e),yj(e),Sj(e),xj(e),bj(e),Y8(e)},Ej=["toggleview"],X8=e=>We(Ej,e.toLowerCase());class J8{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,a){const u=this.editor,f=n.toLowerCase(),b=a==null?void 0:a.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():r5(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const x=this.commands.exec[f];return ie(x)?(x(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!X8(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return ie(r)?r(o):!1}queryCommandValue(n){if(!X8(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return ie(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;Ct(n,(a,u)=>{fe(u.toLowerCase().split(","),f=>{r[o][f]=a})})}addCommand(n,o,r){const a=n.toLowerCase();this.commands.exec[a]=(u,f,b)=>o.call(r??this.editor,f,b)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const Tj=at.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class xR{static isNative(n){return!!Tj[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Re}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),a=h1(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(a);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const y=u[f];if(!y.removed){if(y.once&&this.off(r,y.func),a.isImmediatePropagationStopped())return a;if(y.func.call(this.scope,a)===!1)return a.preventDefault(),a}}return a}on(n,o,r,a){if(o===!1&&(o=Re),o){const u={func:o,removed:!1};a&&at.extend(u,a);const f=n.toLowerCase().split(" ");let b=f.length;for(;b--;){const y=f[b];let x=this.bindings[y];x||(x=[],this.toggleEvent(y,!0)),r?x=[u,...x]:x=[...x,u],this.bindings[y]=x}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let a=r.length;for(;a--;){const u=r[a];let f=this.bindings[u];if(!u)return Ct(this.bindings,(b,y)=>{this.toggleEvent(y,!1),delete this.bindings[y]}),this;if(f){if(!o)f.length=0;else{const b=ko(f,y=>y.func===o);f=b.fail,this.bindings[u]=f,fe(b.pass,y=>{y.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else Ct(this.bindings,(r,a)=>{this.toggleEvent(a,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const Rw=e=>(e._eventDispatcher||(e._eventDispatcher=new xR({scope:e,toggleEvent:(n,o)=>{xR.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),ER={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return h1(e.toLowerCase(),n??{},r);const a=Rw(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!a.isPropagationStopped();)u.dispatch(e,a,!1),u=u.parent?u.parent():void 0}return a},on(e,n,o){return Rw(this).on(e,n,o)},off(e,n){return Rw(this).off(e,n)},once(e,n){return Rw(this).once(e,n)},hasEventListeners(e){return Rw(this).has(e)}},D4=Sr.DOM;let Am;const ed=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=$1(e);return o?(e.eventRoot||(e.eventRoot=D4.select(o)[0]),e.eventRoot):e.getBody()},kj=e=>!e.hidden&&!gh(e),Q8=(e,n,o)=>{kj(e)?e.dispatch(n,o):gh(e)&&e9(e,o)},eI=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=ed(e,n);if($1(e)){if(Am||(Am={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Am&&(Ct(Am,(a,u)=>{e.dom.unbind(ed(e,u))}),Am=null)})),Am[n])return;const r=a=>{const u=a.target,f=e.editorManager.get();let b=f.length;for(;b--;){const y=f[b].getBody();(y===u||D4.isChildOf(u,y))&&Q8(f[b],n,a)}};Am[n]=r,D4.bind(o,n,r)}else{const r=a=>{Q8(e,n,a)};D4.bind(o,n,r),e.delegates[n]=r}},tI={...ER,bindPendingEventDelegates(){const e=this;at.each(e._pendingNativeEvents,n=>{eI(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?eI(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(ed(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(Ct(e.delegates,(r,a)=>{e.dom.unbind(ed(e,a),a,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},_j=e=>oe(e)?{value:e.split(/[ ,]/),valid:!0}:eo(e,oe)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},Aj=e=>{const n=(()=>{switch(e){case"array":return mt;case"boolean":return Mt;case"function":return ie;case"number":return Go;case"object":return it;case"string":return oe;case"string[]":return _j;case"object[]":return o=>eo(o,it);case"regexp":return o=>Ze(o,RegExp);default:return ot}})();return o=>sI(o,n,`The value must be a ${e}.`)},Oj=e=>oe(e.processor),nI=(e,n)=>{const o=vo(n.message)?"":`. ${n.message}`;return e+o},oI=e=>e.valid,sI=(e,n,o="")=>{const r=n(e);return Mt(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},Dj=(e,n,o)=>{if(!ln(n)){const r=sI(n,o);if(oI(r))return r.value;console.error(nI(`Invalid default value passed for the "${e}" option`,r))}},Rj=(e,n,o=n)=>{const r={},a={},u=(W,X,q)=>{const ne=sI(X,q);return oI(ne)?(a[W]=ne.value,!0):(console.warn(nI(`Invalid value passed for the ${W} option`,ne)),!1)},f=(W,X)=>{const q=Oj(X)?Aj(X.processor):X.processor,ne=Dj(W,X.default,q);r[W]={...X,default:ne,processor:q},is(a,W).orThunk(()=>is(n,W)).each(Se=>u(W,Se,q))},b=W=>Cn(r,W);return{register:f,isRegistered:b,get:W=>is(a,W).orThunk(()=>is(r,W).map(X=>X.default)).getOrUndefined(),set:(W,X)=>{if(b(W)){const q=r[W];return q.immutable?(console.error(`"${W}" is an immutable option and cannot be updated`),!1):u(W,X,q.processor)}else return console.warn(`"${W}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:W=>{const X=b(W);return X&&delete a[W],X},isSet:W=>Cn(a,W),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(W,X)=>Mt(X)||Go(X)||oe(X)||Z(X)||mt(X)||Zo(X)?X:Object.prototype.toString.call(X))))}catch(W){console.error(W)}}}},Mj=(e,n)=>{e.dom.contentEditable="true"},Nj=(e,n)=>{const o=me.fromDom(e.getBody());n?(e.readonly=!0,e.hasEditableRoot()&&Mj(o),K6(e)):(e.readonly=!1,Y6(e))},Mw=e=>e.readonly,Pj=e=>{e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",n=>{Mw(e)&&n.preventDefault()}),e.on("BeforeExecCommand",n=>{(n.command==="Undo"||n.command==="Redo")&&Mw(e)&&n.preventDefault()}),e.on("input",n=>{if(!n.isComposing&&Mw(e)){const o=e.undoManager.add();De(o)&&e.undoManager.undo()}}),e.on("compositionend",()=>{if(Mw(e)){const n=e.undoManager.add();De(n)&&e.undoManager.undo()}})},Bj=["design","readonly"],rI=(e,n,o,r)=>{const a=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}a.deactivate(),a.editorReadOnly!==u.editorReadOnly&&Nj(e,u.editorReadOnly),n.set(r),AS(e,r)},$j=(e,n,o,r)=>{if(!(r===o.get()||e.initialized&&gh(e))){if(!Cn(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?rI(e,o,n,r):e.on("init",()=>rI(e,o,n,r))}},Fj=(e,n,o)=>{if(We(Bj,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},Ij=e=>{const n=Bc("design"),o=Bc({design:{activate:Bt,deactivate:Bt,editorReadOnly:!1},readonly:{activate:Bt,deactivate:Bt,editorReadOnly:!0}});return Pj(e),n9(e),{isReadOnly:()=>Mw(e),set:r=>$j(e,o.get(),n,r),get:()=>n.get(),register:(r,a)=>{o.set(Fj(o.get(),r,a))}}},TR=at.each,kR=at.explode,Lj={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},cI=at.makeMap("alt,ctrl,shift,meta,access"),Hj=e=>e in cI,zj=e=>{const n={},o=cn.os.isMacOS()||cn.os.isiOS();TR(kR(e.toLowerCase(),"+"),u=>{Hj(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=Lj[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let a;for(a in cI)n[a]?r.push(a):n[a]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class aI{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(TR(o.shortcuts,a=>{o.matchShortcut(r,a)&&(o.pendingPatterns=a.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(a))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,a){const u=this,f=u.normalizeCommandFunc(r);return TR(kR(at.trim(n)),b=>{const y=u.createShortcut(b,o,f,a);u.shortcuts[y.id]=y}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:at.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,a){const u=at.map(kR(n,">"),zj);return u[u.length-1]=at.extend(u[u.length-1],{func:r,scope:a||this.editor}),at.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const Vj=()=>{const e={},n={},o={},r={},a={},u={},f={},b={},y={},x=(W,X)=>(q,ne)=>{W[q.toLowerCase()]={...ne,type:X}},R=(W,X)=>(q,ne)=>{W[q.toLowerCase()]={type:X,...ne}},N=(W,X)=>r[W.toLowerCase()]=X,B=(W,X)=>f[W.toLowerCase()]=X;return{addButton:x(e,"button"),addGroupToolbarButton:x(e,"grouptoolbarbutton"),addToggleButton:x(e,"togglebutton"),addMenuButton:x(e,"menubutton"),addSplitButton:x(e,"splitbutton"),addMenuItem:x(n,"menuitem"),addNestedMenuItem:x(n,"nestedmenuitem"),addToggleMenuItem:x(n,"togglemenuitem"),addAutocompleter:x(o,"autocompleter"),addContextMenu:x(a,"contextmenu"),addContextToolbar:x(u,"contexttoolbar"),addContextForm:R(u,"contextform"),addSidebar:x(b,"sidebar"),addView:x(y,"views"),addIcon:N,addContext:B,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:a,contextToolbars:u,sidebars:b,views:y,contexts:f})}},Uj=()=>{const e=Vj();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},U0=Sr.DOM,iI=at.extend,Wj=at.each;class Nw{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,iI(this,tI);const a=this;this.id=n,this.hidden=!1;const u=wq(r.defaultOptions,o);this.options=Rj(a,u,o),GR(a);const f=this.options.get;f("deprecation_warnings")&&F6(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const y=f("base_url");y&&r._setBaseUrl(y),this.baseUri=r.baseURI;const x=B1(a);x&&(yl.ScriptLoader._setReferrerPolicy(x),Sr.DOM.styleSheetLoader._setReferrerPolicy(x));const R=qS(a);De(R)&&Sr.DOM.styleSheetLoader._setContentCssCors(R),Va.languageLoad=f("language_load"),Va.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new qu(Ki(a),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=I1(a),this.hasVisual=Qy(a),this.shortcuts=new aI(this),this.editorCommands=new J8(this),SR(this);const N=f("cache_suffix");N&&(cn.cacheSuffix=N.replace(/^[\?\&]+/,"")),this.ui={registry:Uj(),styleSheetLoader:void 0,show:Bt,hide:Bt,setEnabled:Bt,isEnabled:ot},this.mode=Ij(a),r.dispatch("SetupEditor",{editor:this});const B=L3(a);ie(B)&&B.call(a,a)}render(){XZ(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return kt(this)}translate(n){return Zi.translate(n)}getParam(n,o,r){const a=this.options;return a.isRegistered(n)||(De(r)?a.register(n,{processor:r,default:o}):a.register(n,{processor:ot,default:o})),!a.isSet(n)&&!ln(o)?o:a.get(n)}hasPlugin(n,o){return We(Fi(this),n)?o?$v.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,a){this.shortcuts.add(n,o,r,a)}execCommand(n,o,r,a){return this.editorCommands.execCommand(n,o,r,a)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(U0.show(n.getContainer()),U0.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(U0.hide(n.getContainer()),U0.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const a={...n,load:!0},u=_r(r)?r.value:r.innerHTML,f=o.setContent(u,a);return a.no_events||o.dispatch("LoadContent",{...a,element:r}),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const a={...n,save:!0,element:r};let u=o.getContent(a);const f={...a,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,_r(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=U0.getParent(o.id,"form");b&&Wj(b.elements,y=>y.name===o.id?(y.value=u,!1):!0)}return f.element=a.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return Ip(this,n,o)}getContent(n){return IG(this,n)}insertContent(n,o){o&&(n=iI({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?Ip(this,this.startContent,{format:"raw"}):Ip(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||U0.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=U0.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const a=this,u=a.options.get,f=Hb(a);if(ie(f))return f.call(a,n,r,!0,o);if(!u("convert_urls")||r==="link"||it(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const b=new qu(n);return b.protocol!=="http"&&b.protocol!=="https"&&b.protocol!==""?n:u("relative_urls")?a.documentBaseURI.toRelative(n):(n=a.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){V8(this,n)}setEditableRoot(n){gR(this,n)}hasEditableRoot(){return JZ(this)}remove(){$H(this)}destroy(n){Ku(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Qv=Sr.DOM,R4=at.each;let lI=!1,M4,Jl=[];const N4=e=>{const n=e.type;R4(Yp.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},uI=e=>{if(e!==lI){const n=Sr.DOM;e?(n.bind(window,"resize",N4),n.bind(window,"scroll",N4)):(n.unbind(window,"resize",N4),n.unbind(window,"scroll",N4)),lI=e}},dI=e=>{const n=Jl;return Jl=jt(Jl,o=>e!==o),Yp.activeEditor===e&&(Yp.activeEditor=Jl.length>0?Jl[0]:null),Yp.focusedEditor===e&&(Yp.focusedEditor=null),n.length!==Jl.length},mI=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(dI(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},Zj=document.compatMode!=="CSS1Compat",Yp={...ER,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"7.2",releaseDate:"2025-03-19",i18n:Zi,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=qu.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const a=window.tinymce||window.tinyMCEPreInit;if(a)n=a.base||a.baseURL,o=a.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const y=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){y.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new qu(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new qu(e.baseURL),e.suffix=o,p(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&Ct(r,(a,u)=>{Va.PluginManager.urls[u]=a})},init(e){const n=this;let o;const r=at.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),a=(R,N)=>R.inline&&N.tagName.toLowerCase()in r,u=R=>{let N=R.id;return N||(N=is(R,"name").filter(B=>!Qv.get(B)).getOrThunk(Qv.uniqueId),R.setAttribute("id",N)),N},f=R=>{const N=e[R];if(N)return N.apply(n,[])},b=R=>cn.browser.isIE()||cn.browser.isEdge()?(FC("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):Zj?(FC("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):oe(R.selector)?Qv.select(R.selector):De(R.target)?[R.target]:[];let y=R=>{o=R};const x=()=>{let R=0;const N=[];let B;const W=(X,q,ne)=>{const ge=new Nw(X,q,n);N.push(ge),ge.on("init",()=>{++R===B.length&&y(N)}),ge.targetElm=ge.targetElm||ne,ge.render()};Qv.unbind(window,"ready",x),f("onpageload"),B=ur(b(e)),at.each(B,X=>{mI(n.get(X.id))}),B=at.grep(B,X=>!n.get(X.id)),B.length===0?y([]):R4(B,X=>{a(e,X)?FC("Could not initialize inline editor on invalid inline target element",X):W(u(X),e,X)})};return Qv.bind(window,"ready",x),new Promise(R=>{o?R(o):y=N=>{R(N)}})},get(e){return arguments.length===0?Jl.slice(0):oe(e)?Ho(Jl,n=>n.id===e).getOr(null):Go(e)&&Jl[e]?Jl[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Jl.push(e),uI(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),M4||(M4=r=>{const a=n.dispatch("BeforeUnload");if(a.returnValue)return r.preventDefault(),r.returnValue=a.returnValue,a.returnValue},window.addEventListener("beforeunload",M4))),e},createEditor(e,n){return this.add(new Nw(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Jl.length-1;r>=0;r--)n.remove(Jl[r]);return}if(oe(e)){R4(Qv.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,Z(n.get(o.id))?null:(dI(o)&&n.dispatch("RemoveEditor",{editor:o}),Jl.length===0&&window.removeEventListener("beforeunload",M4),o.remove(),uI(Jl.length>0),o)},execCommand(e,n,o){var r;const a=this,u=it(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!a.get(u)){const f=o.options;new Nw(u,f,a).render()}return!0}case"mceRemoveEditor":{const f=a.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=a.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(a.execCommand("mceAddEditor",!1,o),!0)}}return a.activeEditor?a.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{R4(Jl,e=>{e.save()})},addI18n:(e,n)=>{Zi.add(e,n)},translate:e=>Zi.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new qu(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new qu(this.baseURL)}};Yp.setup();const jj=(()=>{const e=Ur(),n=u=>({items:u,types:Yn(u),getType:f=>is(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),a=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:a}})(),fI=Math.min,ey=Math.max,P4=Math.round,gI=(e,n,o)=>{let r=n.x,a=n.y;const u=e.w,f=e.h,b=n.w,y=n.h,x=(o||"").split("");return x[0]==="b"&&(a+=y),x[1]==="r"&&(r+=b),x[0]==="c"&&(a+=P4(y/2)),x[1]==="c"&&(r+=P4(b/2)),x[3]==="b"&&(a-=f),x[4]==="r"&&(r-=u),x[3]==="c"&&(a-=P4(f/2)),x[4]==="c"&&(r-=P4(u/2)),W0(r,a,u,f)},hI=(e,n,o,r)=>{for(let a=0;a<r.length;a++){const u=gI(e,n,r[a]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[a]}return null},_q=(e,n,o)=>W0(e.x-n,e.y-o,e.w+n*2,e.h+o*2),pI=(e,n)=>{const o=ey(e.x,n.x),r=ey(e.y,n.y),a=fI(e.x+e.w,n.x+n.w),u=fI(e.y+e.h,n.y+n.h);return a-o<0||u-r<0?null:W0(o,r,a-o,u-r)},Gj=(e,n,o)=>{let r=e.x,a=e.y,u=e.x+e.w,f=e.y+e.h;const b=n.x+n.w,y=n.y+n.h,x=ey(0,n.x-r),R=ey(0,n.y-a),N=ey(0,u-b),B=ey(0,f-y);return r+=x,a+=R,o&&(u+=x,f+=R,r-=N,a-=B),u-=N,f-=B,W0(r,a,u-r,f-a)},W0=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),qj={inflate:_q,relativePosition:gI,findBestRelativePosition:hI,intersect:pI,clamp:Gj,create:W0,fromClientRect:e=>W0(e.left,e.top,e.width,e.height)},Kj=(e,n,o=1e3)=>{let r=!1,a=null;const u=x=>(...R)=>{r||(r=!0,a!==null&&(clearTimeout(a),a=null),x.apply(null,R))},f=u(e),b=u(n);return{start:(...x)=>{!r&&a===null&&(a=setTimeout(()=>b.apply(null,x),o))},resolve:f,reject:b}},Yj=(()=>{const e={},n={},o={};return{load:(y,x)=>{const R=`Script at URL "${x}" failed to load`,N=`Script at URL "${x}" did not call \`tinymce.Resource.add('${y}', data)\` within 1 second`;if(e[y]!==void 0)return e[y];{const B=new Promise((W,X)=>{const q=Kj(W,X);n[y]=q.resolve,yl.ScriptLoader.loadScript(x).then(()=>q.start(N),()=>q.reject(R))});return e[y]=B,B}},add:(y,x)=>{n[y]!==void 0&&(n[y](x),delete n[y]),e[y]=Promise.resolve(x),o[y]=x},has:y=>y in o,get:y=>o[y],unload:y=>{delete e[y],delete o[y]}}})(),Xj=()=>(()=>{let e={},n=[];const o={getItem:r=>{const a=e[r];return a||null},setItem:(r,a)=>{n.push(r),e[r]=String(a)},key:r=>n[r],removeItem:r=>{n=n.filter(a=>a===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let Z0;try{const e="__storage_test__";Z0=window.localStorage,Z0.setItem(e,e),Z0.removeItem(e)}catch{Z0=Xj()}var _R=Z0;const Jj={geom:{Rect:qj},util:{Delay:rn,Tools:at,VK:rt,URI:qu,EventDispatcher:xR,Observable:ER,I18n:Zi,LocalStorage:_R,ImageUploader:sP},dom:{EventUtils:Xm,TreeWalker:da,TextSeeker:Uf,DOMUtils:Sr,ScriptLoader:yl,RangeUtils:Tp,Serializer:N6,StyleSheetLoader:Ec,ControlSelection:cg,BookmarkManager:xd,Selection:R6,Event:Xm.Event},html:{Styles:Gs,Entities:rm,Node:Sl,Schema:Km,DomParser:Mv,Writer:Z5,Serializer:kp},Env:cn,AddOnManager:Va,Annotator:tr,Formatter:ph,UndoManager:lP,EditorCommands:J8,WindowManager:RA,NotificationManager:WH,EditorObservable:tI,Shortcuts:aI,Editor:Nw,FocusManager:L2,EditorManager:Yp,DOM:Sr.DOM,ScriptLoader:yl.ScriptLoader,PluginManager:$v,ThemeManager:gf,ModelManager:Bv,IconManager:QE,Resource:Yj,FakeClipboard:jj,trim:at.trim,isArray:at.isArray,is:at.is,toArray:at.toArray,makeMap:at.makeMap,each:at.each,map:at.map,grep:at.grep,inArray:at.inArray,extend:at.extend,walk:at.walk,resolve:at.resolve,explode:at.explode,_addCacheSuffix:at._addCacheSuffix},AR=at.extend(Yp,Jj),Qj=e=>{try{an.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(AR),Qj(AR)})()}(dG)),dG.exports}var YY=KY();const XY=kY(YY);var nK={},oK;function JY(){return oK||(oK=1,function(){const an=Object.getPrototypeOf,Co=(t,s,c)=>{var i;return c(t,s.prototype)?!0:((i=t.constructor)===null||i===void 0?void 0:i.name)===s.name},Un=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&Co(t,String,(c,i)=>i.isPrototypeOf(c))?"string":s},mo=t=>s=>Un(s)===t,oo=t=>s=>typeof s===t,In=t=>s=>t===s,fn=(t,s)=>yn(t)&&Co(t,s,(c,i)=>an(c)===i),je=mo("string"),yn=mo("object"),Ro=t=>fn(t,Object),Ko=mo("array"),jo=In(null),Wo=oo("boolean"),Yo=In(void 0),Ps=t=>t==null,io=t=>!Ps(t),Rt=oo("function"),jn=oo("number"),Ze=(t,s)=>{if(Ko(t)){for(let c=0,i=t.length;c<i;++c)if(!s(t[c]))return!1;return!0}return!1},oe=()=>{},it=t=>()=>t(),Zo=(t,s)=>(...c)=>t(s.apply(null,c)),mt=(t,s)=>c=>t(s(c)),Z=t=>()=>t,Mt=t=>t,ln=(t,s)=>t===s;function On(t,...s){return(...c)=>{const i=s.concat(c);return t.apply(null,i)}}const De=t=>s=>!t(s),ie=t=>()=>{throw new Error(t)},Go=t=>t(),eo=Z(!1),Bt=Z(!0);class A{constructor(s,c){this.tag=s,this.value=c}static some(s){return new A(!0,s)}static none(){return A.singletonNone}fold(s,c){return this.tag?c(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?A.some(s(this.value)):A.none()}bind(s){return this.tag?s(this.value):A.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:A.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return io(s)?A.some(s):A.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}A.singletonNone=new A(!1);const To=Array.prototype.slice,yt=Array.prototype.indexOf,Mo=Array.prototype.push,dn=(t,s)=>yt.call(t,s),Qe=(t,s)=>{const c=dn(t,s);return c===-1?A.none():A.some(c)},fo=(t,s)=>dn(t,s)>-1,Bs=(t,s)=>{for(let c=0,i=t.length;c<i;c++){const d=t[c];if(s(d,c))return!0}return!1},St=(t,s)=>{const c=[];for(let i=0;i<t;i++)c.push(s(i));return c},Tn=(t,s)=>{const c=[];for(let i=0;i<t.length;i+=s){const d=To.call(t,i,i+s);c.push(d)}return c},Re=(t,s)=>{const c=t.length,i=new Array(c);for(let d=0;d<c;d++){const g=t[d];i[d]=s(g,d)}return i},ot=(t,s)=>{for(let c=0,i=t.length;c<i;c++){const d=t[c];s(d,c)}},F=(t,s)=>{for(let c=t.length-1;c>=0;c--){const i=t[c];s(i,c)}},_s=(t,s)=>{const c=[],i=[];for(let d=0,g=t.length;d<g;d++){const h=t[d];(s(h,d)?c:i).push(h)}return{pass:c,fail:i}},to=(t,s)=>{const c=[];for(let i=0,d=t.length;i<d;i++){const g=t[i];s(g,i)&&c.push(g)}return c},wo=(t,s,c)=>(F(t,(i,d)=>{c=s(c,i,d)}),c),No=(t,s,c)=>(ot(t,(i,d)=>{c=s(c,i,d)}),c),Ic=(t,s,c)=>{for(let i=0,d=t.length;i<d;i++){const g=t[i];if(s(g,i))return A.some(g);if(c(g,i))break}return A.none()},We=(t,s)=>Ic(t,s,eo),Tt=(t,s)=>{for(let c=0,i=t.length;c<i;c++){const d=t[c];if(s(d,c))return A.some(c)}return A.none()},et=t=>{const s=[];for(let c=0,i=t.length;c<i;++c){if(!Ko(t[c]))throw new Error("Arr.flatten item "+c+" was not an array, input: "+t);Mo.apply(s,t[c])}return s},fe=(t,s)=>et(Re(t,s)),bo=(t,s)=>{for(let c=0,i=t.length;c<i;++c){const d=t[c];if(s(d,c)!==!0)return!1}return!0},ko=t=>{const s=To.call(t,0);return s.reverse(),s},jt=(t,s)=>to(t,c=>!fo(s,c)),hs=(t,s)=>{const c={};for(let i=0,d=t.length;i<d;i++){const g=t[i];c[String(g)]=s(g,i)}return c},Wn=t=>[t],Xs=(t,s)=>{const c=To.call(t,0);return c.sort(s),c},Ho=(t,s)=>s>=0&&s<t.length?A.some(t[s]):A.none(),As=t=>Ho(t,0),Oc=t=>Ho(t,t.length-1),Js=Rt(Array.from)?Array.from:t=>To.call(t),ps=(t,s)=>{for(let c=0;c<t.length;c++){const i=s(t[c],c);if(i.isSome())return i}return A.none()},os=Object.keys,Nr=Object.hasOwnProperty,xs=(t,s)=>{const c=os(t);for(let i=0,d=c.length;i<d;i++){const g=c[i],h=t[g];s(h,g)}},Ke=(t,s)=>Gt(t,(c,i)=>({k:i,v:s(c,i)})),Gt=(t,s)=>{const c={};return xs(t,(i,d)=>{const g=s(i,d);c[g.k]=g.v}),c},Ht=t=>(s,c)=>{t[c]=s},Jt=(t,s,c,i)=>{xs(t,(d,g)=>{(s(d,g)?c:i)(d,g)})},lo=(t,s)=>{const c={},i={};return Jt(t,s,Ht(c),Ht(i)),{t:c,f:i}},bs=(t,s)=>{const c={};return Jt(t,s,Ht(c),oe),c},ur=(t,s)=>{const c=[];return xs(t,(i,d)=>{c.push(s(i,d))}),c},Yn=(t,s)=>{const c=os(t);for(let i=0,d=c.length;i<d;i++){const g=c[i],h=t[g];if(s(h,g,t))return A.some(h)}return A.none()},Er=t=>ur(t,Mt),Ct=(t,s)=>uo(t,s)?A.from(t[s]):A.none(),uo=(t,s)=>Nr.call(t,s),dr=(t,s)=>uo(t,s)&&t[s]!==void 0&&t[s]!==null,vr=(t,s,c=ln)=>t.exists(i=>c(i,s)),dc=(t,s,c=ln)=>Qr(t,s,c).getOr(t.isNone()&&s.isNone()),Dc=t=>{const s=[],c=i=>{s.push(i)};for(let i=0;i<t.length;i++)t[i].each(c);return s},us=t=>{const s=[];for(let c=0;c<t.length;c++){const i=t[c];if(i.isSome())s.push(i.getOrDie());else return A.none()}return A.some(s)},Qr=(t,s,c)=>t.isSome()&&s.isSome()?A.some(c(t.getOrDie(),s.getOrDie())):A.none(),mc=(t,s,c,i)=>t.isSome()&&s.isSome()&&c.isSome()?A.some(i(t.getOrDie(),s.getOrDie(),c.getOrDie())):A.none(),is=(t,s)=>t!=null?A.some(s(t)):A.none(),Cn=(t,s)=>t?A.some(s):A.none(),Ls=(t,s)=>t+s,qr=(t,s)=>t.substring(s),Ca=(t,s,c)=>s===""||t.length>=s.length&&t.substr(c,c+s.length)===s,ci=(t,s)=>$s(t,s)?qr(t,s.length):t,mr=(t,s)=>ec(t,s)?t:Ls(t,s),vs=(t,s,c=0,i)=>{const d=t.indexOf(s,c);return d!==-1?Yo(i)?!0:d+s.length<=i:!1},$s=(t,s)=>Ca(t,s,0),ec=(t,s)=>Ca(t,s,t.length-s.length),Qs=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),le=t=>t.length>0,re=t=>!le(t),Ne=t=>{const s=parseFloat(t);return isNaN(s)?A.none():A.some(s)},Ve=t=>t.style!==void 0&&Rt(t.style.getPropertyValue),xn=(t,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||i.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return Os(i.childNodes[0])},Fn=(t,s)=>{const i=(s||document).createElement(t);return Os(i)},so=(t,s)=>{const i=(s||document).createTextNode(t);return Os(i)},Os=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},ze={fromHtml:xn,fromTag:Fn,fromText:so,fromDom:Os,fromPoint:(t,s,c)=>A.from(t.dom.elementFromPoint(s,c)).map(Os)},de=typeof window<"u"?window:Function("return this;")(),he=(t,s)=>{let c=s??de;for(let i=0;i<t.length&&c!==void 0&&c!==null;++i)c=c[t[i]];return c},ct=(t,s)=>{const c=t.split(".");return he(c,s)},pt=(t,s)=>ct(t,s),zt=(t,s)=>{const c=pt(t,s);if(c==null)throw new Error(t+" not available on this browser");return c},gn=Object.getPrototypeOf,hn=t=>zt("HTMLElement",t),on=t=>{const s=ct("ownerDocument.defaultView",t);return yn(t)&&(hn(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(gn(t).constructor.name))},Rn=9,Ln=11,Po=1,Hs=3,ss=t=>t.dom.nodeName.toLowerCase(),la=t=>t.dom.nodeType,vc=t=>s=>la(s)===t,Xn=t=>vo(t)&&on(t.dom),vo=vc(Po),So=vc(Hs),tc=vc(Rn),nc=vc(Ln),yc=t=>s=>vo(s)&&ss(s)===t,Fs=(t,s)=>{const c=t.dom;if(c.nodeType!==Po)return!1;{const i=c;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Su=t=>t.nodeType!==Po&&t.nodeType!==Rn&&t.nodeType!==Ln||t.childElementCount===0,Ba=(t,s)=>{const c=s===void 0?document:s.dom;return Su(c)?[]:Re(c.querySelectorAll(t),ze.fromDom)},Ol=(t,s)=>{const c=s===void 0?document:s.dom;return Su(c)?A.none():A.from(c.querySelector(t)).map(ze.fromDom)},Bo=(t,s)=>t.dom===s.dom,ai=(t,s)=>{const c=t.dom,i=s.dom;return c===i?!1:c.contains(i)},er=t=>ze.fromDom(t.dom.ownerDocument),Dl=t=>tc(t)?t:er(t),$a=t=>ze.fromDom(Dl(t).dom.documentElement),ii=t=>ze.fromDom(Dl(t).dom.defaultView),oc=t=>A.from(t.dom.parentNode).map(ze.fromDom),ol=t=>oc(t),Fa=t=>A.from(t.dom.parentElement).map(ze.fromDom),sl=(t,s)=>{const c=Rt(s)?s:eo;let i=t.dom;const d=[];for(;i.parentNode!==null&&i.parentNode!==void 0;){const g=i.parentNode,h=ze.fromDom(g);if(d.push(h),c(h)===!0)break;i=g}return d},zi=t=>A.from(t.dom.offsetParent).map(ze.fromDom),xu=t=>A.from(t.dom.nextSibling).map(ze.fromDom),Lr=t=>Re(t.dom.childNodes,ze.fromDom),li=(t,s)=>{const c=t.dom.childNodes;return A.from(c[s]).map(ze.fromDom)},Vi=t=>li(t,0),rl=(t,s)=>({element:t,offset:s}),Rl=(t,s)=>{const c=Lr(t);return c.length>0&&s<c.length?rl(c[s],0):rl(t,s)},Ia=t=>nc(t)&&io(t.dom.host),Or=t=>ze.fromDom(t.dom.getRootNode()),Dr=t=>Ia(t)?t:ze.fromDom(Dl(t).dom.body),jc=t=>cl(t).isSome(),cl=t=>{const s=Or(t);return Ia(s)?A.some(s):A.none()},al=t=>ze.fromDom(t.dom.host),Cc=t=>{if(io(t.target)){const s=ze.fromDom(t.target);if(vo(s)&&U(s)&&t.composed&&t.composedPath){const c=t.composedPath();if(c)return As(c)}}return A.from(t.target)},U=t=>io(t.dom.shadowRoot),se=t=>{const s=So(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const c=s.ownerDocument;return cl(ze.fromDom(s)).fold(()=>c.body.contains(s),mt(se,al))},ye=()=>Ge(ze.fromDom(document)),Ge=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return ze.fromDom(s)},Et=(t,s,c)=>{if(je(c)||Wo(c)||jn(c))t.setAttribute(s,c+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",c,":: Element ",t),new Error("Attribute value was not simple")},Xe=(t,s,c)=>{Et(t.dom,s,c)},cn=(t,s)=>{const c=t.dom;xs(s,(i,d)=>{Et(c,d,i)})},ho=(t,s)=>{const c=t.dom.getAttribute(s);return c===null?void 0:c},Gn=(t,s)=>A.from(ho(t,s)),$=(t,s)=>{const c=t.dom;return c&&c.hasAttribute?c.hasAttribute(s):!1},V=(t,s)=>{t.dom.removeAttribute(s)},ue=t=>No(t.dom.attributes,(s,c)=>(s[c.name]=c.value,s),{}),Ae=(t,s,c)=>{if(!je(c))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",c,":: Element ",t),new Error("CSS value must be a string: "+c);Ve(t)&&t.style.setProperty(s,c)},nn=(t,s)=>{Ve(t)&&t.style.removeProperty(s)},Nt=(t,s,c)=>{const i=t.dom;Ae(i,s,c)},es=(t,s)=>{const c=t.dom;xs(s,(i,d)=>{Ae(c,d,i)})},Hr=(t,s)=>{const c=t.dom;xs(s,(i,d)=>{i.fold(()=>{nn(c,d)},g=>{Ae(c,d,g)})})},at=(t,s)=>{const c=t.dom,d=window.getComputedStyle(c).getPropertyValue(s);return d===""&&!se(t)?Lc(c,s):d},Lc=(t,s)=>Ve(t)?t.style.getPropertyValue(s):"",Es=(t,s)=>{const c=t.dom,i=Lc(c,s);return A.from(i).filter(d=>d.length>0)},ki=t=>{const s={},c=t.dom;if(Ve(c))for(let i=0;i<c.style.length;i++){const d=c.style.item(i);s[d]=c.style[d]}return s},yr=(t,s,c)=>{const i=ze.fromTag(t);return Nt(i,s,c),Es(i,s).isSome()},xo=(t,s)=>{const c=t.dom;nn(c,s),vr(Gn(t,"style").map(Qs),"")&&V(t,"style")},Gc=t=>t.dom.offsetWidth,sc=(t,s)=>{const c=(C,w)=>{if(!jn(w)&&!w.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+w);const k=C.dom;Ve(k)&&(k.style[t]=w+"px")},i=C=>{const w=s(C);if(w<=0||w===null){const k=at(C,t);return parseFloat(k)||0}return w},d=i,g=(C,w)=>No(w,(k,O)=>{const P=at(C,O),H=P===void 0?0:parseInt(P,10);return isNaN(H)?k:k+H},0);return{set:c,get:i,getOuter:d,aggregate:g,max:(C,w,k)=>{const O=g(C,k);return w>O?w-O:0}}},qc=sc("height",t=>{const s=t.dom;return se(t)?s.getBoundingClientRect().height:s.offsetHeight}),Pr=t=>qc.get(t),il=t=>qc.getOuter(t),Nm=(t,s)=>{const c=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=qc.max(t,s,c);Nt(t,"max-height",i+"px")},xf=(t,s)=>({left:t,top:s,translate:(i,d)=>xf(t+i,s+d)}),Zs=xf,ll=t=>{const s=t.getBoundingClientRect();return Zs(s.left,s.top)},rc=(t,s)=>t!==void 0?t:s!==void 0?s:0,wc=t=>{const s=t.dom.ownerDocument,c=s.body,i=s.defaultView,d=s.documentElement;if(c===t.dom)return Zs(c.offsetLeft,c.offsetTop);const g=rc(i==null?void 0:i.pageYOffset,d.scrollTop),h=rc(i==null?void 0:i.pageXOffset,d.scrollLeft),C=rc(d.clientTop,c.clientTop),w=rc(d.clientLeft,c.clientLeft);return ua(t).translate(h-w,g-C)},ua=t=>{const s=t.dom,i=s.ownerDocument.body;return i===s?Zs(i.offsetLeft,i.offsetTop):se(t)?ll(s):Zs(0,0)},Ml=sc("width",t=>t.dom.offsetWidth),Y=(t,s)=>Ml.set(t,s),ee=t=>Ml.get(t),ke=t=>Ml.getOuter(t),tt=(t,s)=>{const c=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=Ml.max(t,s,c);Nt(t,"max-width",i+"px")},wn=t=>{let s=!1,c;return(...i)=>(s||(s=!0,c=t.apply(null,i)),c)},$o=(t,s,c,i)=>{const d=t.isiOS()&&/ipad/i.test(c)===!0,g=t.isiOS()&&!d,h=t.isiOS()||t.isAndroid(),C=h||i("(pointer:coarse)"),w=d||!g&&h&&i("(min-device-width:768px)"),k=g||h&&!w,O=s.isSafari()&&t.isiOS()&&/safari/i.test(c)===!1,P=!k&&!w&&!O;return{isiPad:Z(d),isiPhone:Z(g),isTablet:Z(w),isPhone:Z(k),isTouch:Z(C),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:Z(O),isDesktop:Z(P)}},po=(t,s)=>{for(let c=0;c<t.length;c++){const i=t[c];if(i.test(s))return i}},Is=(t,s)=>{const c=po(t,s);if(!c)return{major:0,minor:0};const i=d=>Number(s.replace(c,"$"+d));return Kc(i(1),i(2))},zr=(t,s)=>{const c=String(s).toLowerCase();return t.length===0?wa():Is(t,c)},wa=()=>Kc(0,0),Kc=(t,s)=>({major:t,minor:s}),sr={nu:Kc,detect:zr,unknown:wa},Rr=(t,s)=>ps(s.brands,c=>{const i=c.brand.toLowerCase();return We(t,d=>{var g;return i===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:sr.nu(parseInt(c.version,10),0)}))}),Kr=(t,s)=>{const c=String(s).toLowerCase();return We(t,i=>i.search(c))},Hc=(t,s)=>Kr(t,s).map(c=>{const i=sr.detect(c.versionRegexes,s);return{current:c.name,version:i}}),Tr=(t,s)=>Kr(t,s).map(c=>{const i=sr.detect(c.versionRegexes,s);return{current:c.name,version:i}}),Sc=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ts=t=>s=>vs(s,t),ul=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>vs(t,"edge/")&&vs(t,"chrome")&&vs(t,"safari")&&vs(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Sc],search:t=>vs(t,"chrome")&&!vs(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>vs(t,"msie")||vs(t,"trident")},{name:"Opera",versionRegexes:[Sc,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ts("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ts("firefox")},{name:"Safari",versionRegexes:[Sc,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(vs(t,"safari")||vs(t,"mobile/"))&&vs(t,"applewebkit")}],Pm=[{name:"Windows",search:Ts("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>vs(t,"iphone")||vs(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ts("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ts("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ts("linux"),versionRegexes:[]},{name:"Solaris",search:Ts("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ts("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ts("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],su={browsers:Z(ul),oses:Z(Pm)},Hd="Edge",zd="Chromium",cd="IE",ad="Opera",_i="Firefox",Sa="Safari",Sh=()=>Nl({current:void 0,version:sr.unknown()}),Nl=t=>{const s=t.current,c=t.version,i=d=>()=>s===d;return{current:s,version:c,isEdge:i(Hd),isChromium:i(zd),isIE:i(cd),isOpera:i(ad),isFirefox:i(_i),isSafari:i(Sa)}},Ef={unknown:Sh,nu:Nl},Vd="Windows",vg="iOS",Tf="Android",Ud="Linux",kf="macOS",yg="Solaris",id="FreeBSD",Cg="ChromeOS",me=()=>ld({current:void 0,version:sr.unknown()}),ld=t=>{const s=t.current,c=t.version,i=d=>()=>s===d;return{current:s,version:c,isWindows:i(Vd),isiOS:i(vg),isAndroid:i(Tf),isMacOS:i(kf),isLinux:i(Ud),isSolaris:i(yg),isFreeBSD:i(id),isChromeOS:i(Cg)}},La={unknown:me,nu:ld},xh={detect:(t,s,c)=>{const i=su.browsers(),d=su.oses(),g=s.bind(w=>Rr(i,w)).orThunk(()=>Hc(i,t)).fold(Ef.unknown,Ef.nu),h=Tr(d,t).fold(La.unknown,La.nu),C=$o(h,g,t,c);return{browser:g,os:h,deviceType:C}}},Eu=t=>window.matchMedia(t).matches;let ns=wn(()=>xh.detect(window.navigator.userAgent,A.from(window.navigator.userAgentData),Eu));const Mr=()=>ns(),Yc=(t,s,c,i,d,g,h)=>({target:t,x:s,y:c,stop:i,prevent:d,kill:g,raw:h}),ru=t=>{const s=ze.fromDom(Cc(t).getOr(t.target)),c=()=>t.stopPropagation(),i=()=>t.preventDefault(),d=Zo(i,c);return Yc(s,t.clientX,t.clientY,c,i,d,t)},wg=(t,s)=>c=>{t(c)&&s(ru(c))},ud=(t,s,c,i,d)=>{const g=wg(c,i);return t.dom.addEventListener(s,g,d),{unbind:On(Af,t,s,g,d)}},xa=(t,s,c,i)=>ud(t,s,c,i,!1),_f=(t,s,c,i)=>ud(t,s,c,i,!0),Af=(t,s,c,i)=>{t.dom.removeEventListener(s,c,i)},Tu=(t,s)=>{oc(t).each(i=>{i.dom.insertBefore(s.dom,t.dom)})},ku=(t,s)=>{xu(t).fold(()=>{oc(t).each(d=>{Ai(d,s)})},i=>{Tu(i,s)})},Bm=(t,s)=>{Vi(t).fold(()=>{Ai(t,s)},i=>{t.dom.insertBefore(s.dom,i.dom)})},Ai=(t,s)=>{t.dom.appendChild(s.dom)},$m=(t,s,c)=>{li(t,c).fold(()=>{Ai(t,s)},i=>{Tu(i,s)})},zc=(t,s)=>{ot(s,c=>{Ai(t,c)})},_u=t=>{t.dom.textContent="",ot(Lr(t),s=>{dl(s)})},dl=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Ea=t=>{const s=t!==void 0?t.dom:document,c=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return Zs(c,i)},dd=(t,s,c)=>{const d=(c!==void 0?c.dom:document).defaultView;d&&d.scrollTo(t,s)},c1=t=>{const s=t===void 0?window:t;return Mr().browser.isFirefox()?A.none():A.from(s.visualViewport)},Of=(t,s,c,i)=>({x:t,y:s,width:c,height:i,right:t+c,bottom:s+i}),Pl=t=>{const s=t===void 0?window:t,c=s.document,i=Ea(ze.fromDom(c));return c1(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,h=d.clientHeight;return Of(i.left,i.top,g,h)},d=>Of(Math.max(d.pageLeft,i.left),Math.max(d.pageTop,i.top),d.width,d.height))},Wd=()=>ze.fromDom(document),Eh=(t,s)=>t.view(s).fold(Z([]),i=>{const d=t.owner(i),g=Eh(t,d);return[i].concat(g)}),Df=(t,s)=>{const c=s.owner(t),i=Eh(s,c);return A.some(i)};var _h=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?A.none():A.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(ze.fromDom)},owner:t=>er(t)});const Bl=t=>{const s=Wd(),c=Ea(s);return Df(t,_h).fold(On(wc,t),d=>{const g=ua(t),h=wo(d,(C,w)=>{const k=ua(w);return{left:C.left+k.left,top:C.top+k.top}},{left:0,top:0});return Zs(h.left+g.left+c.left,h.top+g.top+c.top)})},Sg=(t,s,c)=>({point:t,width:s,height:c}),ml=(t,s,c,i)=>({x:t,y:s,width:c,height:i}),kr=(t,s,c,i)=>({x:t,y:s,width:c,height:i,right:t+c,bottom:s+i}),cc=t=>{const s=wc(t),c=ke(t),i=il(t);return kr(s.left,s.top,c,i)},ui=t=>{const s=Bl(t),c=ke(t),i=il(t);return kr(s.left,s.top,c,i)},Zd=(t,s)=>{const c=Math.max(t.x,s.x),i=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),h=d-c,C=g-i;return kr(c,i,h,C)},jd=(t,s)=>No(s,(c,i)=>Zd(c,i),t),xc=()=>Pl(window),pn=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},xg=t=>{const s=pn(A.none()),c=()=>s.get().each(t);return{clear:()=>{c(),s.set(A.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:C=>{c(),s.set(A.some(C))}}},fl=()=>xg(t=>t.destroy()),di=()=>xg(t=>t.unbind()),ys=()=>{const t=xg(oe);return{...t,on:c=>t.get().each(c)}};var md=tinymce.util.Tools.resolve("tinymce.ThemeManager");const Fm=t=>{const s=g=>g(t),c=Z(t),i=()=>d,d={tag:!0,inner:t,fold:(g,h)=>h(t),isValue:Bt,isError:eo,map:g=>ro.value(g(t)),mapError:i,bind:s,exists:s,forall:s,getOr:c,or:i,getOrThunk:c,orThunk:i,getOrDie:c,each:g=>{g(t)},toOptional:()=>A.some(t)};return d},Im=t=>{const s=()=>c,c={tag:!1,inner:t,fold:(i,d)=>i(t),isValue:eo,isError:Bt,map:s,mapError:i=>ro.error(i(t)),bind:s,exists:eo,forall:Bt,getOr:Mt,or:Mt,getOrThunk:Go,orThunk:Go,getOrDie:ie(String(t)),each:oe,toOptional:A.none};return c},ro={value:Fm,error:Im,fromOption:(t,s)=>t.fold(()=>Im(s),Fm)};var Vr;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Vr||(Vr={}));const Gd=(t,s,c)=>t.stype===Vr.Error?s(t.serror):c(t.svalue),Xa=t=>{const s=[],c=[];return ot(t,i=>{Gd(i,d=>c.push(d),d=>s.push(d))}),{values:s,errors:c}},Ta=(t,s)=>t.stype===Vr.Error?{stype:Vr.Error,serror:s(t.serror)}:t,mi=(t,s)=>t.stype===Vr.Value?{stype:Vr.Value,svalue:s(t.svalue)}:t,Mc=(t,s)=>t.stype===Vr.Value?s(t.svalue):t,Ha=(t,s)=>t.stype===Vr.Error?s(t.serror):t,Oi=t=>({stype:Vr.Value,svalue:t}),qd=t=>({stype:Vr.Error,serror:t}),Yr={fromResult:t=>t.fold(qd,Oi),toResult:t=>Gd(t,ro.error,ro.value),svalue:Oi,partition:Xa,serror:qd,bind:Mc,bindError:Ha,map:mi,mapError:Ta,fold:Gd},$l=(t,s,c,i)=>({tag:"field",key:t,newKey:s,presence:c,prop:i}),Fl=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),zs=(t,s,c)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return c(t.newKey,t.instantiator)}},Ja=(t,s)=>s,Lm=(t,s)=>Ro(t)&&Ro(s)?rr(t,s):s,fd=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const c={};for(let i=0;i<s.length;i++){const d=s[i];for(const g in d)uo(d,g)&&(c[g]=t(c[g],d[g]))}return c},rr=fd(Lm),Au=fd(Ja),gl=()=>({tag:"required",process:{}}),Fo=t=>({tag:"defaultedThunk",process:t}),Kd=t=>Fo(Z(t)),Mf=()=>({tag:"option",process:{}}),E=t=>({tag:"mergeWithThunk",process:t}),M=t=>E(Z(t)),z=(t,s)=>t.length>0?Yr.svalue(rr(s,Au.apply(void 0,t))):Yr.svalue(s),ae=t=>Zo(Yr.serror,et)(t),Bn={consolidateObj:(t,s)=>{const c=Yr.partition(t);return c.errors.length>0?ae(c.errors):z(c.values,s)},consolidateArr:t=>{const s=Yr.partition(t);return s.errors.length>0?ae(s.errors):Yr.svalue(s.values)}},go=t=>yn(t)&&os(t).length>100?" removed due to size":JSON.stringify(t,null,2),ao=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:Z("... (only showing first ten failures)")}]):t;return Re(s,c=>"Failed path: ("+c.path.join(" > ")+`)
`+c.getErrorInfo())},bn=(t,s)=>Yr.serror([{path:t,getErrorInfo:s}]),cr=(t,s,c)=>bn(t,()=>'Could not find valid *required* value for "'+s+'" in '+go(c)),Br=(t,s)=>bn(t,()=>'Choice schema did not contain choice key: "'+s+'"'),Di=(t,s,c)=>bn(t,()=>'The chosen schema: "'+c+'" did not exist in branches: '+go(s)),fi=(t,s)=>bn(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),Oh=(t,s)=>bn(t,Z(s)),Hm=t=>{const s=(i,d)=>Yr.bindError(t(d),g=>Oh(i,g)),c=Z("val");return{extract:s,toString:c}},Eg=Hm(Yr.svalue),ka=(t,s,c,i)=>Ct(s,c).fold(()=>cr(t,c,s),i),Dh=(t,s,c,i)=>{const d=Ct(t,s).getOrThunk(()=>c(t));return i(d)},cy=(t,s,c)=>c(Ct(t,s)),Rh=(t,s,c,i)=>{const d=Ct(t,s).map(g=>g===!0?c(t):g);return i(d)},da=(t,s,c,i,d)=>{const g=C=>d.extract(s.concat([i]),C),h=C=>C.fold(()=>Yr.svalue(A.none()),w=>{const k=d.extract(s.concat([i]),w);return Yr.map(k,A.some)});switch(t.tag){case"required":return ka(s,c,i,g);case"defaultedThunk":return Dh(c,i,t.process,g);case"option":return cy(c,i,h);case"defaultedOptionThunk":return Rh(c,i,t.process,h);case"mergeWithThunk":return Dh(c,i,Z({}),C=>{const w=rr(t.process(c),C);return g(w)})}},Mh=(t,s,c)=>{const i={},d=[];for(const g of c)zs(g,(h,C,w,k)=>{const O=da(w,t,s,h,k);Yr.fold(O,P=>{d.push(...P)},P=>{i[C]=P})},(h,C)=>{i[h]=C(s)});return d.length>0?Yr.serror(d):Yr.svalue(i)},fc=t=>({extract:(i,d)=>t().extract(i,d),toString:()=>t().toString()}),Nf=t=>os(bs(t,io)),_a=t=>{const s=Vn(t),c=wo(t,(d,g)=>zs(g,h=>rr(d,{[h]:!0}),Z(d)),{});return{extract:(d,g)=>{const h=Wo(g)?[]:Nf(g),C=to(h,w=>!dr(c,w));return C.length===0?s.extract(d,g):fi(d,C)},toString:s.toString}},Vn=t=>({extract:(i,d)=>Mh(i,d,t),toString:()=>`obj{
`+Re(t,d=>zs(d,(g,h,C,w)=>g+" -> "+w.toString(),(g,h)=>"state("+g+")")).join(`
`)+"}"}),hl=t=>({extract:(i,d)=>{const g=Re(d,(h,C)=>t.extract(i.concat(["["+C+"]"]),h));return Bn.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),Yd=(t,s)=>{const c=s!==void 0?s:Mt;return{extract:(g,h)=>{const C=[];for(const w of t){const k=w.extract(g,h);if(k.stype===Vr.Value)return{stype:Vr.Value,svalue:c(k.svalue)};C.push(k)}return Bn.consolidateArr(C)},toString:()=>"oneOf("+Re(t,g=>g.toString()).join(", ")+")"}},Nh=(t,s)=>{const c=(g,h)=>hl(Hm(t)).extract(g,h);return{extract:(g,h)=>{const C=os(h),w=c(g,C);return Yr.bind(w,k=>{const O=Re(k,P=>$l(P,P,gl(),s));return Vn(O).extract(g,h)})},toString:()=>"setOf("+s.toString()+")"}},Y0=(t,s)=>{const c=wn(s);return{extract:(g,h)=>c().extract(g,h),toString:()=>c().toString()}},Ph=Zo(hl,Vn),Il=Z(Eg),Ou=(t,s)=>Hm(c=>{const i=typeof c;return t(c)?Yr.svalue(c):Yr.serror(`Expected type: ${s} but got: ${i}`)}),Xd=Ou(jn,"number"),Vt=Ou(je,"string"),pl=Ou(Wo,"boolean"),a1=Ou(Rt,"function"),zm=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>zm(t[s]));default:return!1}},Ll=Hm(t=>zm(t)?Yr.svalue(t):Yr.serror("Expected value to be acceptable for sending via postMessage")),Tg=(t,s,c,i)=>Ct(c,i).fold(()=>Di(t,c,i),g=>g.extract(t.concat(["branch: "+i]),s)),Jd=(t,s)=>({extract:(d,g)=>Ct(g,t).fold(()=>Br(d,t),C=>Tg(d,g,s,C)),toString:()=>"chooseOn("+t+"). Possible values: "+os(s)}),Vm=()=>hl(Eg),kg=t=>Hm(s=>t(s).fold(Yr.serror,Yr.svalue)),cu=(t,s)=>Nh(c=>Yr.fromResult(t(c)),s),X0=(t,s,c)=>{const i=s.extract([t],c);return Yr.mapError(i,d=>({input:c,errors:d}))},_r=(t,s,c)=>Yr.toResult(X0(t,s,c)),wt=t=>t.fold(s=>{throw new Error(au(s))},Mt),Qa=(t,s,c)=>wt(_r(t,s,c)),au=t=>`Errors: 
`+ao(t.errors).join(`
`)+`

Input object: `+go(t.input),Nc=(t,s)=>Jd(t,Ke(s,Vn)),Pf=(t,s)=>Y0(t,s),Pc=$l,ls=Fl,Bh=t=>kg(s=>fo(t,s)?ro.value(s):ro.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),nt=t=>Pc(t,t,gl(),Il()),ds=(t,s)=>Pc(t,t,gl(),s),i1=t=>ds(t,Xd),Xr=t=>ds(t,Vt),Hl=(t,s)=>Pc(t,t,gl(),Bh(s)),Xc=t=>ds(t,a1),ay=(t,s)=>Pc(t,t,Mf(),Hm(c=>Yr.serror("The field: "+t+" is forbidden. "+s))),Du=(t,s)=>Pc(t,t,gl(),Vn(s)),J0=(t,s)=>Pc(t,t,gl(),Ph(s)),gi=(t,s)=>Pc(t,t,gl(),hl(s)),ms=t=>Pc(t,t,Mf(),Il()),Ru=(t,s)=>Pc(t,t,Mf(),s),_g=t=>Ru(t,Xd),$r=t=>Ru(t,Vt),$h=(t,s)=>Ru(t,Bh(s)),gd=t=>Ru(t,a1),l1=(t,s)=>Ru(t,hl(s)),Aa=(t,s)=>Ru(t,Vn(s)),Ui=(t,s)=>Ru(t,_a(s)),Ee=(t,s)=>Pc(t,t,Kd(s),Il()),Wi=(t,s,c)=>Pc(t,t,Kd(s),c),Bc=(t,s)=>Wi(t,s,Xd),ar=(t,s)=>Wi(t,s,Vt),zl=(t,s,c)=>Wi(t,s,Bh(c)),Ur=(t,s)=>Wi(t,s,pl),js=(t,s)=>Wi(t,s,a1),S=(t,s)=>Wi(t,s,Ll),_=(t,s,c)=>Wi(t,s,hl(c)),L=(t,s,c)=>Wi(t,s,Vn(c)),ve={generate:t=>{if(!Ko(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],c={};return ot(t,(i,d)=>{const g=os(i);if(g.length!==1)throw new Error("one and only one name per case");const h=g[0],C=i[h];if(c[h]!==void 0)throw new Error("duplicate key detected:"+h);if(h==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Ko(C))throw new Error("case arguments must be an array");s.push(h),c[h]=(...w)=>{const k=w.length;if(k!==C.length)throw new Error("Wrong number of arguments to case "+h+". Expected "+C.length+" ("+C+"), got "+k);return{fold:(...P)=>{if(P.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+P.length);return P[d].apply(null,w)},match:P=>{const H=os(P);if(s.length!==H.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+H.join(","));if(!bo(s,Q=>fo(H,Q)))throw new Error("Not all branches were specified when using match. Specified: "+H.join(", ")+`
Required: `+s.join(", "));return P[h].apply(null,w)},log:P=>{console.log(P,{constructors:s,constructor:h,params:w})}}}}),c}};ve.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Je=t=>{const s=[],c=[];return ot(t,i=>{i.fold(d=>{s.push(d)},d=>{c.push(d)})}),{errors:s,values:c}},Ot=(t,s)=>{const c={};return xs(t,(i,d)=>{fo(s,d)||(c[d]=i)}),c},un=(t,s)=>({[t]:s}),Jn=t=>{const s={};return ot(t,c=>{s[c.key]=c.value}),s},Eo=(t,s)=>Ot(t,s),Ds=(t,s)=>un(t,s),Rs=t=>Jn(t),wr=(t,s)=>t.length===0?ro.value(s):ro.value(rr(s,Au.apply(void 0,t))),hi=t=>ro.error(et(t)),bl=(t,s)=>{const c=Je(t);return c.errors.length>0?hi(c.errors):wr(c.values,s)},hd=t=>Rt(t)?t:eo,Ri=(t,s,c)=>{let i=t.dom;const d=hd(c);for(;i.parentNode;){i=i.parentNode;const g=ze.fromDom(i),h=s(g);if(h.isSome())return h;if(d(g))break}return A.none()},Qd=(t,s,c)=>{const i=s(t),d=hd(c);return i.orThunk(()=>d(t)?A.none():Ri(t,s,d))},Um=(t,s)=>Bo(t.element,s.event.target),Wm={can:Bt,abort:eo,run:oe},ei=t=>{if(!dr(t,"can")&&!dr(t,"abort")&&!dr(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...Wm,...t}},Fh=(t,s)=>(...c)=>No(t,(i,d)=>i&&s(d).apply(void 0,c),!0),Zm=(t,s)=>(...c)=>No(t,(i,d)=>i||s(d).apply(void 0,c),!1),Ih=t=>Rt(t)?{can:Bt,abort:eo,run:t}:t,Q0=t=>{const s=Fh(t,d=>d.can),c=Zm(t,d=>d.abort);return{can:s,abort:c,run:(...d)=>{ot(t,g=>{g.run.apply(void 0,d)})}}},Vc=Z,zo=Vc("touchstart"),fr=Vc("touchmove"),Ec=Vc("touchend"),vl=Vc("touchcancel"),Mi=Vc("mousedown"),Lh=Vc("mousemove"),em=Vc("mouseout"),tm=Vc("mouseup"),Mu=Vc("mouseover"),Nu=Vc("focusin"),Iw=Vc("focusout"),za=Vc("keydown"),eb=Vc("keyup"),nm=Vc("input"),jm=Vc("change"),om=Vc("click"),V4=Vc("transitioncancel"),Hh=Vc("transitionend"),U4=Vc("transitionstart"),Bf=Vc("selectstart"),ac=t=>Z("alloy."+t),Lw={tap:ac("tap")},sm=ac("focus"),Gm=ac("blur.post"),Ag=ac("paste.post"),Pu=ac("receive"),ti=ac("execute"),Og=ac("focus.item"),u1=Lw.tap,HR=ac("longpress"),rm=ac("sandbox.close"),Oa=ac("typeahead.cancel"),d1=ac("system.init"),W4=ac("system.touchmove"),Z4=ac("system.touchend"),iy=ac("system.scroll"),zh=ac("system.resize"),Bu=ac("system.attached"),$u=ac("system.detached"),$f=ac("system.dismissRequested"),Dg=ac("system.repositionRequested"),m1=ac("focusmanager.shifted"),Vh=ac("slotcontainer.visibility"),qm=ac("system.external.element.scroll"),Ff=ac("change.tab"),f1=ac("dismiss.tab"),tb=ac("highlight"),nb=ac("dehighlight"),Io=(t,s)=>{sb(t,t.element,s,{})},kn=(t,s,c)=>{sb(t,t.element,s,c)},Ni=t=>{Io(t,ti())},ob=(t,s,c)=>{sb(t,s,c,{})},sb=(t,s,c,i)=>{const d={target:s,...i};t.getSystem().triggerEvent(c,s,d)},rb=(t,s,c,i)=>{const d={...i,target:s};t.getSystem().triggerEvent(c,s,d)},ly=(t,s,c,i)=>{t.getSystem().triggerEvent(c,s,i.event)},ir=t=>Rs(t),Km=(t,s)=>({key:t,value:ei({abort:s})}),j4=(t,s)=>({key:t,value:ei({can:s})}),Hw=t=>({key:t,value:ei({run:(s,c)=>{c.event.prevent()}})}),Ye=(t,s)=>({key:t,value:ei({run:s})}),uy=(t,s,c)=>({key:t,value:ei({run:(i,d)=>{s.apply(void 0,[i,d].concat(c))}})}),dy=t=>s=>Ye(t,s),Uh=t=>s=>({key:t,value:ei({run:(c,i)=>{Um(c,i)&&s(c,i)}})}),G4=(t,s)=>Ye(t,(c,i)=>{c.getSystem().getByUid(s).each(d=>{ly(d,d.element,t,i)})}),Rg=(t,s,c)=>{const i=s.partUids[c];return G4(t,i)},g1=(t,s)=>Ye(t,(c,i)=>{const d=i.event,g=c.getSystem().getByDom(d.target).getOrThunk(()=>Qd(d.target,C=>c.getSystem().getByDom(C).toOptional(),eo).getOr(c));s(c,g,i)}),If=t=>Ye(t,(s,c)=>{c.cut()}),cb=t=>Ye(t,(s,c)=>{c.stop()}),cm=(t,s)=>Uh(t)(s),Gs=Uh(Bu()),pd=Uh($u()),zw=Uh(d1()),Ym=dy(ti()),q4=(t,s,c)=>{const i=c.toString(),d=i.indexOf(")")+1,g=i.indexOf("("),h=i.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:ab(h.slice(0,1).concat(h.slice(3)))}),t},ab=t=>Re(t,s=>ec(s,"/*")?s.substring(0,s.length-2):s),h1=(t,s)=>{const c=t.toString(),i=c.indexOf(")")+1,d=c.indexOf("("),g=c.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:ab(g)}),t},K4=(t,s)=>{const c=s.toString(),i=c.indexOf(")")+1,d=c.indexOf("("),g=c.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:ab(g.slice(1))}),t},Fu=t=>({classes:Yo(t.classes)?[]:t.classes,attributes:Yo(t.attributes)?{}:t.attributes,styles:Yo(t.styles)?{}:t.styles}),ib=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),Wh=(t,s,c)=>Ym(i=>{c(i,t,s)}),my=(t,s,c)=>zw((i,d)=>{c(i,t,s)}),Mg=(t,s,c,i,d,g)=>{const h=_a(t),C=Aa(s,[Ui("config",t)]);return gy(h,C,s,c,i,d,g)},lb=(t,s,c,i,d,g)=>{const h=t,C=Aa(s,[Ru("config",t)]);return gy(h,C,s,c,i,d,g)},Xm=(t,s,c)=>q4((d,...g)=>{const h=[d].concat(g);return d.config({name:Z(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+c)},C=>{const w=Array.prototype.slice.call(h,1);return s.apply(void 0,[d,C.config,C.state].concat(w))})},c,s),fy=t=>({key:t,value:void 0}),gy=(t,s,c,i,d,g,h)=>{const C=P=>dr(P,c)?P[c]():A.none(),w=Ke(d,(P,H)=>Xm(c,P,H)),O={...Ke(g,(P,H)=>h1(P,H)),...w,revoke:On(fy,c),config:P=>{const H=Qa(c+"-config",t,P);return{key:c,value:{config:H,me:O,configAsRaw:wn(()=>Qa(c+"-config",t,P)),initialConfig:P,state:h}}},schema:Z(s),exhibit:(P,H)=>Qr(C(P),Ct(i,"exhibit"),(j,Q)=>Q(H,j.config,j.state)).getOrThunk(()=>Fu({})),name:Z(c),handlers:P=>C(P).map(H=>Ct(i,"events").getOr(()=>({}))(H.config,H.state)).getOr({})};return O},iu={init:()=>Vl({readState:Z("No State required")})},Vl=t=>t,xt=t=>Rs(t),Vw=_a([nt("fields"),nt("name"),Ee("active",{}),Ee("apis",{}),Ee("state",iu),Ee("extra",{})]),gc=t=>{const s=Qa("Creating behaviour: "+t.name,Vw,t);return Mg(s.fields,s.name,s.active,s.apis,s.extra,s.state)},Uw=_a([nt("branchKey"),nt("branches"),nt("name"),Ee("active",{}),Ee("apis",{}),Ee("state",iu),Ee("extra",{})]),Ww=t=>{const s=Qa("Creating behaviour: "+t.name,Uw,t);return lb(Nc(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},p1=Z(void 0),hy=(t,s)=>{const c=ho(t,s);return c===void 0||c===""?[]:c.split(" ")},Sr=(t,s,c)=>{const d=hy(t,s).concat([c]);return Xe(t,s,d.join(" ")),!0},py=(t,s,c)=>{const i=to(hy(t,s),d=>d!==c);return i.length>0?Xe(t,s,i.join(" ")):V(t,s),!1},Zh=t=>t.dom.classList!==void 0,b1=t=>hy(t,"class"),v1=(t,s)=>Sr(t,"class",s),by=(t,s)=>py(t,"class",s),yl=(t,s)=>fo(b1(t),s)?by(t,s):v1(t,s),Jr=(t,s)=>{Zh(t)?t.dom.classList.add(s):v1(t,s)},Zw=t=>{(Zh(t)?t.dom.classList:b1(t)).length===0&&V(t,"class")},ic=(t,s)=>{Zh(t)?t.dom.classList.remove(s):by(t,s),Zw(t)},y1=(t,s)=>{const c=Zh(t)?t.dom.classList.toggle(s):yl(t,s);return Zw(t),c},ni=(t,s)=>Zh(t)&&t.dom.classList.contains(s),Lf=(t,s)=>{ot(s,c=>{Jr(t,c)})},lu=(t,s)=>{ot(s,c=>{ic(t,c)})},Jm=(t,s)=>{ot(s,c=>{y1(t,c)})},zR=(t,s)=>bo(s,c=>ni(t,c)),VR=t=>{const s=t.dom.classList,c=new Array(s.length);for(let i=0;i<s.length;i++){const d=s.item(i);d!==null&&(c[i]=d)}return c},Y4=t=>Zh(t)?VR(t):b1(t),bd=(t,s,c,i,d)=>{const g=h=>h+"px";return{position:t,left:s.map(g),top:c.map(g),right:i.map(g),bottom:d.map(g)}},UR=t=>({...t,position:A.some(t.position)}),Zi=(t,s)=>{Hr(t,UR(s))},Va=t=>(vr(Es(t,"position"),"fixed")?A.none():zi(t)).orThunk(()=>{const i=ze.fromTag("span");return oc(t).bind(d=>{Ai(d,i);const g=zi(i);return dl(i),g})}),jh=t=>Va(t).map(wc).getOrThunk(()=>Zs(0,0)),ub=(t,s)=>{const c=t.element;Jr(c,s.transitionClass),ic(c,s.fadeOutClass),Jr(c,s.fadeInClass),s.onShow(t)},X4=(t,s)=>{const c=t.element;Jr(c,s.transitionClass),ic(c,s.fadeInClass),Jr(c,s.fadeOutClass),s.onHide(t)},C1=(t,s)=>t.y<s.bottom&&t.bottom>s.y,Hf=(t,s)=>t.y>=s.y,Ng=(t,s)=>t.bottom<=s.bottom,am=(t,s,c)=>({location:"top",leftX:s,topY:c.bounds.y-t.y}),zf=(t,s,c)=>({location:"bottom",leftX:s,bottomY:t.bottom-c.bounds.bottom}),Vf=t=>t.box.x-t.win.x,w1=(t,s,c)=>{const i=s.win,d=s.box,g=Vf(s);return ps(t,h=>{switch(h){case"bottom":return Ng(d,c.bounds)?A.none():A.some(zf(i,g,c));case"top":return Hf(d,c.bounds)?A.none():A.some(am(i,g,c));default:return A.none()}}).getOr({location:"no-dock"})},jw=(t,s,c)=>bo(t,i=>{switch(i){case"bottom":return Ng(s,c.bounds);case"top":return Hf(s,c.bounds)}}),Gw=(t,s)=>{const c=s.optScrollEnv.fold(Z(t.bounds.y),i=>i.scrollElmTop+(t.bounds.y-i.currentScrollTop));return Zs(t.bounds.x,c)},db=(t,s)=>{const c=s.optScrollEnv.fold(Z(t.y),i=>t.y+i.currentScrollTop-i.scrollElmTop);return Zs(t.x,c)},Pg=(t,s,c)=>c.getInitialPos().map(i=>{const d=Gw(i,s);return{box:kr(d.left,d.top,ee(t),Pr(t)),location:i.location}}),Gh=(t,s,c,i,d)=>{const g=db(s,c),h=kr(g.left,g.top,s.width,s.height);i.setInitialPos({style:ki(t),position:at(t,"position")||"static",bounds:h,location:d.location})},mb=(t,s,c,i,d)=>{i.getInitialPos().fold(()=>Gh(t,s,c,i,d),()=>oe)},qw=(t,s,c)=>c.getInitialPos().bind(i=>{var d;switch(c.clearInitialPos(),i.position){case"static":return A.some({morph:"static"});case"absolute":const g=Va(t).getOr(ye()),h=cc(g),C=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return A.some({morph:"absolute",positionCss:bd("absolute",Ct(i.style,"left").map(w=>s.x-h.x),Ct(i.style,"top").map(w=>s.y-h.y+C),Ct(i.style,"right").map(w=>h.right-s.right),Ct(i.style,"bottom").map(w=>h.bottom-s.bottom))});default:return A.none()}}),Kw=(t,s,c)=>Pg(t,s,c).filter(({box:i})=>jw(c.getModes(),i,s)).bind(({box:i})=>qw(t,i,c)),S1=t=>{switch(t.location){case"top":return A.some({morph:"fixed",positionCss:bd("fixed",A.some(t.leftX),A.some(t.topY),A.none(),A.none())});case"bottom":return A.some({morph:"fixed",positionCss:bd("fixed",A.some(t.leftX),A.none(),A.none(),A.some(t.bottomY))});default:return A.none()}},Yw=(t,s,c)=>{const i=cc(t),d=xc(),g=w1(c.getModes(),{win:d,box:i},s);return g.location==="top"||g.location==="bottom"?(Gh(t,i,s,c,g),S1(g)):A.none()},Xw=(t,s,c)=>Kw(t,s,c).orThunk(()=>s.optScrollEnv.bind(i=>Pg(t,s,c)).bind(({box:i,location:d})=>{const g=xc(),h=Vf({win:g,box:i}),C=d==="top"?am(g,h,s):zf(g,h,s);return S1(C)})),Bg=(t,s,c)=>{const i=t.element;return vr(Es(i,"position"),"fixed")?Xw(i,s,c):Yw(i,s,c)},vy=(t,s,c)=>{const i=t.element;return Pg(i,s,c).bind(({box:d})=>qw(i,d,c))},Jw=(t,s,c,i)=>{const d=cc(t),g=xc(),h=Vf({win:g,box:d}),C=i(g,h,s);return C.location==="bottom"||C.location==="top"?(mb(t,d,s,c,C),S1(C)):A.none()},fb=(t,s,c)=>{c.setDocked(!1),ot(["left","right","top","bottom","position"],i=>xo(t.element,i)),s.onUndocked(t)},im=(t,s,c,i)=>{const d=i.position==="fixed";c.setDocked(d),Zi(t.element,i),(d?s.onDocked:s.onUndocked)(t)},Qw=(t,s,c,i,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(h=>{const C=C1(h,i.bounds);C!==c.isVisible()&&(c.setVisible(C),d&&!C?(Lf(t.element,[g.fadeOutClass]),g.onHide(t)):(C?ub:X4)(t,g))})})},J4=(t,s,c,i,d)=>{Qw(t,s,c,i,!0),im(t,s,c,d.positionCss)},x1=(t,s,c,i,d)=>{switch(d.morph){case"static":return fb(t,s,c);case"absolute":return im(t,s,c,d.positionCss);case"fixed":return J4(t,s,c,i,d)}},qh=(t,s,c)=>{const i=s.lazyViewport(t);Qw(t,s,c,i),Bg(t,i,c).each(d=>{x1(t,s,c,i,d)})},Uf=(t,s,c)=>{const i=t.element;c.setDocked(!1);const d=s.lazyViewport(t);vy(t,d,c).each(g=>{switch(g.morph){case"static":{fb(t,s,c);break}case"absolute":{im(t,s,c,g.positionCss);break}}}),c.setVisible(!0),s.contextual.each(g=>{lu(i,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),yy(t,s,c)},yy=(t,s,c)=>{t.getSystem().isConnected()&&qh(t,s,c)},gb=(t,s,c)=>{c.isDocked()&&Uf(t,s,c)},Kh=t=>(s,c,i)=>{const d=c.lazyViewport(s);Jw(s.element,d,i,t).each(h=>{J4(s,c,i,d,h)})},Q4=Kh(am),eS=Kh(zf);var E1=Object.freeze({__proto__:null,refresh:yy,reset:gb,isDocked:(t,s,c)=>c.isDocked(),getModes:(t,s,c)=>c.getModes(),setModes:(t,s,c,i)=>c.setModes(i),forceDockToTop:Q4,forceDockToBottom:eS}),hb=Object.freeze({__proto__:null,events:(t,s)=>ir([cm(Hh(),(c,i)=>{t.contextual.each(d=>{ni(c.element,d.transitionClass)&&(lu(c.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(c)),i.stop()})}),Ye(iy(),(c,i)=>{yy(c,t,s)}),Ye(qm(),(c,i)=>{yy(c,t,s)}),Ye(zh(),(c,i)=>{gb(c,t,s)})])});const Wf=(t,s)=>{const i=(s||document).createElement("div");return i.innerHTML=t,Lr(ze.fromDom(i))},T1=t=>t.dom.innerHTML,Fr=(t,s)=>{const i=er(t).dom,d=ze.fromDom(i.createDocumentFragment()),g=Wf(s,i);zc(d,g),_u(t),Ai(t,d)},tS=t=>{const s=ze.fromTag("div"),c=ze.fromDom(t.dom.cloneNode(!0));return Ai(s,c),T1(s)},Yh=(t,s)=>ze.fromDom(t.dom.cloneNode(s)),Xh=t=>Yh(t,!1),t3=t=>Yh(t,!0),ji=t=>{if(Ia(t))return"#shadow-root";{const s=Xh(t);return tS(s)}},Gi=t=>ji(t),nS="unknown";var $g;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})($g||($g={}));const Zf=pn({}),jf=(t,s)=>{const c=[],i=new Date().getTime();return{logEventCut:(d,g,h)=>{c.push({outcome:"cut",target:g,purpose:h})},logEventStopped:(d,g,h)=>{c.push({outcome:"stopped",target:g,purpose:h})},logNoParent:(d,g,h)=>{c.push({outcome:"no-parent",target:g,purpose:h})},logEventNoHandlers:(d,g)=>{c.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,h)=>{c.push({outcome:"response",purpose:h,target:g})},write:()=>{const d=new Date().getTime();fo(["mousemove","mouseover","mouseout",d1()],t)||console.log(t,{event:t,time:d-i,target:s.dom,sequence:Re(c,g=>fo(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+Gi(g.target)+")":g.outcome)})}}},n3=(t,s,c)=>{switch(Ct(Zf.get(),t).orThunk(()=>{const d=os(Zf.get());return ps(d,g=>t.indexOf(g)>-1?A.some(Zf.get()[g]):A.none())}).getOr($g.NORMAL)){case $g.NORMAL:return c(oS());case $g.LOGGING:{const d=jf(t,s),g=c(d);return d.write(),g}case $g.STOP:return!0}},Jc=["alloy/data/Fields","alloy/debugging/Debugging"],pb=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return We(s,c=>c.indexOf("alloy")>0&&!Bs(Jc,i=>c.indexOf(i)>-1)).getOr(nS)}else return nS},Ul={logEventCut:oe,logEventStopped:oe,logNoParent:oe,logEventNoHandlers:oe,logEventResponse:oe,write:oe},Cy=(t,s,c)=>n3(t,s,c),oS=Z(Ul),Gf=Z([nt("menu"),nt("selectedMenu")]),Fg=Z([nt("item"),nt("selectedItem")]);Z(Vn(Fg().concat(Gf())));const vd=Z(Vn(Fg())),uu=Du("initSize",[nt("numColumns"),nt("numRows")]),wy=()=>ds("markers",vd()),k1=()=>Du("markers",[nt("backgroundMenu")].concat(Gf()).concat(Fg())),yd=t=>Du("markers",Re(t,nt)),Jh=(t,s,c)=>(pb(),Pc(s,s,c,kg(i=>ro.value((...d)=>i.apply(void 0,d))))),rs=t=>Jh("onHandler",t,Kd(oe)),pi=t=>Jh("onKeyboardHandler",t,Kd(A.none)),Wl=t=>Jh("onHandler",t,gl()),Sy=t=>Jh("onKeyboardHandler",t,gl()),gr=(t,s)=>ls(t,Z(s)),xy=t=>ls(t,Mt),qf=Z(uu);var Ig=[Aa("contextual",[Xr("fadeInClass"),Xr("fadeOutClass"),Xr("transitionClass"),Xc("lazyContext"),rs("onShow"),rs("onShown"),rs("onHide"),rs("onHidden")]),js("lazyViewport",()=>({bounds:xc(),optScrollEnv:A.none()})),_("modes",["top","bottom"],Vt),rs("onDocked"),rs("onUndocked")],rS=Object.freeze({__proto__:null,init:t=>{const s=pn(!1),c=pn(!0),i=ys(),d=pn(t.modes),g=()=>`docked:  ${s.get()}, visible: ${c.get()}, modes: ${d.get().join(",")}`;return Vl({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:c.get,setVisible:c.set,getModes:d.get,setModes:d.set,readState:g})}});const xr=gc({fields:Ig,name:"docking",active:hb,apis:E1,state:rS}),Qh=(t,s,c)=>Bo(s,t.element)&&!Bo(s,c),_1=ir([j4(sm(),(t,s)=>{const c=s.event,i=c.originator,d=c.target;return Qh(t,i,d)?(console.warn(sm()+` did not get interpreted by the desired target. 
Originator: `+Gi(i)+`
Target: `+Gi(d)+`
Check the `+sm()+" event handlers"),!1):!0})]);var cS=Object.freeze({__proto__:null,events:_1});const ep=(t,s,c,i)=>{const d=t+s;return d>i?c:d<c?i:d},du=(t,s,c)=>Math.min(Math.max(t,s),c),o3=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let A1=0;const Kt=t=>{const c=new Date().getTime(),i=Math.floor(o3()*1e9);return A1++,t+"_"+i+A1+String(c)},s3=Z("alloy-id-"),r3=Z("data-alloy-id"),Ey=s3(),aS=r3(),c3=(t,s)=>{const c=Kt(Ey+t);return O1(s,c),c},O1=(t,s)=>{Object.defineProperty(t.dom,aS,{value:s,writable:!0})},Lg=t=>{const s=vo(t)?t.dom[aS]:null;return A.from(s)},Hg=t=>Kt(t),a3=Mt,D1=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+Gi(t().element)+" is not in context.":""),c=d=>()=>{throw new Error(s(d))},i=d=>()=>{console.warn(s(d))};return{debugInfo:Z("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:c("build"),buildOrPatch:c("buildOrPatch"),addToWorld:c("addToWorld"),removeFromWorld:c("removeFromWorld"),addToGui:c("addToGui"),removeFromGui:c("removeFromGui"),getByUid:c("getByUid"),getByDom:c("getByDom"),isConnected:eo}},iS=D1(),R1=Kt("alloy-premade"),i3=t=>(Object.defineProperty(t.element.dom,R1,{value:t.uid,writable:!0}),Ds(R1,t)),Pi=t=>uo(t.dom,R1),l3=t=>Ct(t,R1),Cd=t=>K4((s,...c)=>t(s.getApis(),s,...c),t),u3=(t,s)=>{const c=Re(s,d=>Aa(d.name(),[nt("config"),Ee("state",iu)])),i=_r("component.behaviours",Vn(c),t.behaviours).fold(d=>{throw new Error(au(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},Mt);return{list:s,data:Ke(i,d=>{const g=d.map(h=>({config:h.config,state:h.state.init(h.config)}));return Z(g)})}},d3=t=>t.list,m3=t=>t.data,Ty=(t,s)=>{const c={};return xs(t,(i,d)=>{xs(i,(g,h)=>{const C=Ct(c,h).getOr([]);c[h]=C.concat([s(d,g)])})}),c},lS=(t,s,c,i)=>{const d={...s};ot(c,O=>{d[O.name()]=O.exhibit(t,i)});const g=Ty(d,(O,P)=>({name:O,modification:P})),h=O=>wo(O,(P,H)=>({...H.modification,...P}),{}),C=wo(g.classes,(O,P)=>P.modification.concat(O),[]),w=h(g.attributes),k=h(g.styles);return Fu({classes:C,attributes:w,styles:k})},f3=(t,s,c,i)=>{try{const d=Xs(c,(g,h)=>{const C=g[s],w=h[s],k=i.indexOf(C),O=i.indexOf(w);if(k===-1)throw new Error("The ordering for "+t+" does not have an entry for "+C+`.
Order specified: `+JSON.stringify(i,null,2));if(O===-1)throw new Error("The ordering for "+t+" does not have an entry for "+w+`.
Order specified: `+JSON.stringify(i,null,2));return k<O?-1:O<k?1:0});return ro.value(d)}catch(d){return ro.error([d])}},uS=(t,s)=>({handler:t,purpose:s}),g3=(t,s)=>({cHandler:t,purpose:s}),zg=(t,s)=>g3(On.apply(void 0,[t.handler].concat(s)),t.purpose),bb=t=>t.cHandler,tp=(t,s)=>({name:t,handler:s}),ky=(t,s)=>{const c={};return ot(t,i=>{c[i.name()]=i.handlers(s)}),c},dS=(t,s,c)=>{const i={...c,...ky(s,t)};return Ty(i,tp)},Qm=(t,s,c,i)=>{const d=dS(t,c,i);return Ay(d,s)},vb=t=>{const s=Ih(t);return(c,i,...d)=>{const g=[c,i].concat(d);s.abort.apply(void 0,g)?i.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},yb=(t,s)=>ro.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Re(s,c=>c.name),null,2)]),_y=(t,s,c)=>{const i=s[c];return i?f3("Event: "+c,"name",t,i).map(d=>{const g=Re(d,h=>h.handler);return Q0(g)}):yb(c,t)},Ay=(t,s)=>{const c=ur(t,(i,d)=>(i.length===1?ro.value(i[0].handler):_y(i,s,d)).map(h=>{const C=vb(h),w=i.length>1?to(s[d],k=>Bs(i,O=>O.name===k)).join(" > "):i[0].name;return Ds(d,uS(C,w))}));return bl(c,{})},Vg="alloy.base.behaviour",h3=Vn([Pc("dom","dom",gl(),Vn([nt("tag"),Ee("styles",{}),Ee("classes",[]),Ee("attributes",{}),ms("value"),ms("innerHtml")])),nt("components"),nt("uid"),Ee("events",{}),Ee("apis",{}),Pc("eventOrder","eventOrder",M({[ti()]:["disabling",Vg,"toggling","typeaheadevents"],[sm()]:[Vg,"focusing","keying"],[d1()]:[Vg,"disabling","toggling","representing","tooltipping"],[nm()]:[Vg,"representing","streaming","invalidating"],[$u()]:[Vg,"representing","item-events","toolbar-button-events","tooltipping"],[Mi()]:["focusing",Vg,"item-type-events"],[zo()]:["focusing",Vg,"item-type-events"],[Mu()]:["item-type-events","tooltipping"],[Pu()]:["receiving","reflecting","tooltipping"]}),Il()),ms("domModification")]),Oy=t=>_r("custom.definition",h3,t),Ug=t=>({...t.dom,uid:t.uid,domChildren:Re(t.components,s=>s.element)}),Da=t=>t.domModification.fold(()=>Fu({}),Fu),p3=t=>t.events,Ue=t=>t.dom.value,lm=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},b3=(t,s,c)=>li(t,s).map(d=>{if(c.exists(h=>!Bo(h,d))){const h=c.map(ss).getOr("span"),C=ze.fromTag(h);return Tu(d,C),C}else return d}),Cb=(t,s,c)=>{c.fold(()=>Ai(t,s),i=>{Bo(i,s)||(Tu(i,s),dl(i))})},np=(t,s,c)=>{const i=Re(s,c),d=Lr(t);return ot(d.slice(i.length),dl),i},Iu=(t,s,c,i)=>{const d=li(t,s),g=i(c,d),h=b3(t,s,d);return Cb(t,g.element,h),g},mS=(t,s,c)=>np(t,s,(i,d)=>Iu(t,d,i,c)),fS=(t,s)=>np(t,s,(c,i)=>{const d=li(t,i);return Cb(t,c,d),c}),wb=(t,s)=>{const c=os(t),i=os(s),d=jt(i,c),g=lo(t,(h,C)=>!uo(s,C)||h!==s[C]).t;return{toRemove:d,toSet:g}},Sb=(t,s)=>{const{class:c,style:i,...d}=ue(s),{toSet:g,toRemove:h}=wb(t.attributes,d),C=()=>{ot(h,Ce=>V(s,Ce)),cn(s,g)},w=ki(s),{toSet:k,toRemove:O}=wb(t.styles,w),P=()=>{ot(O,Ce=>xo(s,Ce)),es(s,k)},H=Y4(s),j=jt(H,t.classes),Q=jt(t.classes,H),te=()=>{Lf(s,Q),lu(s,j)},we=Ce=>{Fr(s,Ce)},ce=()=>{const Ce=t.domChildren;fS(s,Ce)},xe=()=>{const Ce=s,Pe=t.value.getOrUndefined();Pe!==Ue(Ce)&&lm(Ce,Pe??"")};return C(),te(),P(),t.innerHtml.fold(ce,we),xe(),s},xb=t=>{const s=ze.fromTag(t.tag);cn(s,t.attributes),Lf(s,t.classes),es(s,t.styles),t.innerHtml.each(i=>Fr(s,i));const c=t.domChildren;return zc(s,c),t.value.each(i=>{lm(s,i)}),s},gS=(t,s)=>{try{const c=Sb(t,s);return A.some(c)}catch{return A.none()}},v3=t=>t.innerHtml.isSome()&&t.domChildren.length>0,Bi=(t,s)=>{const c=d=>ss(d)===t.tag&&!v3(t)&&!Pi(d),i=s.filter(c).bind(d=>gS(t,d)).getOrThunk(()=>xb(t));return O1(i,t.uid),i},Eb=t=>{const s=Ct(t,"behaviours").getOr({});return fe(os(s),c=>{const i=s[c];return io(i)?[i.me]:[]})},hS=(t,s)=>u3(t,s),y3=t=>{const s=Eb(t);return hS(t,s)},C3=(t,s,c)=>{const i=Ug(t),d=Da(t),g={"alloy.base.modification":d},h=s.length>0?lS(c,g,s,i):d;return ib(i,h)},pS=(t,s,c)=>{const i={"alloy.base.behaviour":p3(t)};return Qm(c,t.eventOrder,s,i).getOrDie()},Tb=(t,s)=>{const c=()=>Ce,i=pn(iS),d=wt(Oy(t)),g=y3(t),h=d3(g),C=m3(g),w=C3(d,h,C),k=Bi(w,s),O=pS(d,h,C),P=pn(d.components),H=Pe=>{i.set(Pe)},j=()=>{i.set(D1(c))},Q=()=>{const Pe=Lr(k),Fe=fe(Pe,Lt=>i.get().getByDom(Lt).fold(()=>[],Wn));P.set(Fe)},te=Pe=>{const Fe=C;return(Rt(Fe[Pe.name()])?Fe[Pe.name()]:()=>{throw new Error("Could not find "+Pe.name()+" in "+JSON.stringify(t,null,2))})()},we=Pe=>Rt(C[Pe.name()]),ce=()=>d.apis,xe=Pe=>C[Pe]().map(Fe=>Fe.state.readState()).getOr("not enabled"),Ce={uid:t.uid,getSystem:i.get,config:te,hasConfigured:we,spec:t,readState:xe,getApis:ce,connect:H,disconnect:j,element:k,syncComponents:Q,components:P.get,events:O};return Ce},w3=(t,s)=>{const c=Ct(t,"components").getOr([]);return s.fold(()=>Re(c,oi),i=>Re(c,(d,g)=>kb(d,li(i,g))))},bS=(t,s)=>{const{events:c,...i}=a3(t),d=w3(i,s),g={...i,events:{...cS,...c},components:d};return ro.value(Tb(g,s))},Ar=t=>{const s=ze.fromText(t);return op({element:s})},op=t=>{const s=Qa("external.component",_a([nt("element"),ms("uid")]),t),c=pn(D1()),i=C=>{c.set(C)},d=()=>{c.set(D1(()=>h))},g=s.uid.getOrThunk(()=>Hg("external"));O1(s.element,g);const h={uid:g,getSystem:c.get,config:A.none,hasConfigured:eo,connect:i,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:Z("No state"),syncComponents:oe,components:Z([]),events:{}};return i3(h)},vS=Hg,yS=t=>uo(t,"uid"),kb=(t,s)=>l3(t).getOrThunk(()=>{const c=yS(t)?t:{uid:vS(""),...t};return bS(c,s).getOrDie()}),oi=t=>kb(t,A.none()),Cl=i3;var CS=(t,s,c,i,d)=>t(c,i)?A.some(c):Rt(d)&&d(c)?A.none():s(c,i,d);const wS=(t,s,c)=>{let i=t.dom;const d=Rt(c)?c:eo;for(;i.parentNode;){i=i.parentNode;const g=ze.fromDom(i);if(s(g))return A.some(g);if(d(g))break}return A.none()},Dy=(t,s,c)=>CS((d,g)=>g(d),wS,t,s,c),M1=(t,s)=>{const c=t.dom;return c.parentNode?SS(ze.fromDom(c.parentNode),i=>!Bo(t,i)&&s(i)):A.none()},SS=(t,s)=>{const c=d=>s(ze.fromDom(d));return We(t.dom.childNodes,c).map(ze.fromDom)},Ry=(t,s)=>{const c=i=>{for(let d=0;d<i.childNodes.length;d++){const g=ze.fromDom(i.childNodes[d]);if(s(g))return A.some(g);const h=c(i.childNodes[d]);if(h.isSome())return h}return A.none()};return c(t.dom)},My=(t,s,c)=>Dy(t,s,c).isSome(),xS=t=>Ol(t),um=(t,s,c)=>wS(t,i=>Fs(i,s),c),qi=(t,s)=>M1(t,c=>Fs(c,s)),ES=(t,s)=>SS(t,c=>Fs(c,s)),Cs=(t,s)=>Ol(s,t),Lu=(t,s,c)=>CS((d,g)=>Fs(d,g),um,t,s,c),sp="aria-controls",TS=t=>Dy(t,c=>{if(!vo(c))return!1;const i=ho(c,"id");return i!==void 0&&i.indexOf(sp)>-1}).bind(c=>{const i=ho(c,"id"),d=Or(c);return Cs(d,`[${sp}="${i}"]`)}),Ny=()=>{const t=Kt(sp);return{id:t,link:i=>{Xe(i,sp,t)},unlink:i=>{V(i,sp)}}},kS=(t,s)=>TS(s).exists(c=>Kf(t,c)),Kf=(t,s)=>My(s,c=>Bo(c,t.element),eo)||kS(t,s),ma=(t,s,c,i,d,g,h,C=!1)=>({x:t,y:s,bubble:c,direction:i,placement:d,restriction:g,label:`${h}-${d}`,alwaysFit:C}),dm=ve.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),rp=(t,s,c,i,d,g,h,C,w)=>t.fold(s,c,i,d,g,h,C,w),_S=(t,s,c,i)=>t.fold(s,s,i,i,s,i,c,c),S3=(t,s,c,i)=>t.fold(s,i,s,i,c,c,s,i),_b=dm.southeast,Py=dm.southwest,By=dm.northeast,$y=dm.northwest,AS=dm.south,OS=dm.north,DS=dm.east,RS=dm.west,x3=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Ua=(t,s)=>hs(["left","right","top","bottom"],c=>Ct(s,c).map(i=>x3(t,i))),E3=(t,s,c)=>{const i=(w,k)=>s[w].map(O=>{const P=w==="top"||w==="bottom",H=P?c.top:c.left,Q=(w==="left"||w==="top"?Math.max:Math.min)(O,k)+H;return P?du(Q,t.y,t.bottom):du(Q,t.x,t.right)}).getOr(k),d=i("left",t.x),g=i("top",t.y),h=i("right",t.right),C=i("bottom",t.bottom);return kr(d,g,h-d,C-g)},ef="layout",Fy=t=>t.x,Iy=(t,s)=>t.x+t.width/2-s.width/2,MS=(t,s)=>t.x+t.width-s.width,Ab=(t,s)=>t.y-s.height,Ly=t=>t.y+t.height,Hy=(t,s)=>t.y+t.height/2-s.height/2,T3=t=>t.x+t.width,k3=(t,s)=>t.x-s.width,Tc=(t,s,c)=>ma(Fy(t),Ly(t),c.southeast(),_b(),"southeast",Ua(t,{left:1,top:3}),ef),$c=(t,s,c)=>ma(MS(t,s),Ly(t),c.southwest(),Py(),"southwest",Ua(t,{right:0,top:3}),ef),Ra=(t,s,c)=>ma(Fy(t),Ab(t,s),c.northeast(),By(),"northeast",Ua(t,{left:1,bottom:2}),ef),kc=(t,s,c)=>ma(MS(t,s),Ab(t,s),c.northwest(),$y(),"northwest",Ua(t,{right:0,bottom:2}),ef),Qc=(t,s,c)=>ma(Iy(t,s),Ab(t,s),c.north(),OS(),"north",Ua(t,{bottom:2}),ef),Uc=(t,s,c)=>ma(Iy(t,s),Ly(t),c.south(),AS(),"south",Ua(t,{top:3}),ef),zy=(t,s,c)=>ma(T3(t),Hy(t,s),c.east(),DS(),"east",Ua(t,{left:0}),ef),N1=(t,s,c)=>ma(k3(t,s),Hy(t,s),c.west(),RS(),"west",Ua(t,{right:1}),ef),P1=()=>[Tc,$c,Ra,kc,Uc,Qc,zy,N1],fa=()=>[$c,Tc,kc,Ra,Uc,Qc,zy,N1],NS=()=>[Ra,kc,Tc,$c,Qc,Uc],Ob=()=>[kc,Ra,$c,Tc,Qc,Uc],sn=()=>[Tc,$c,Ra,kc,Uc,Qc],Wg=()=>[$c,Tc,kc,Ra,Uc,Qc],Vy=(t,s)=>s.universal?t:to(t,c=>fo(s.channels,c));var _3=Object.freeze({__proto__:null,events:t=>ir([Ye(Pu(),(s,c)=>{const i=t.channels,d=os(i),g=c,h=Vy(d,g);ot(h,C=>{const w=i[C],k=w.schema,O=Qa("channel["+C+`] data
Receiver: `+Gi(s.element),k,g.data);w.onReceive(s,O)})})])}),A3=[ds("channels",cu(ro.value,_a([Wl("onReceive"),Ee("schema",Il())])))];const Ki=gc({fields:A3,name:"receiving",active:_3});var PS=Object.freeze({__proto__:null,exhibit:(t,s)=>Fu({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const bi=(t,s=!1)=>t.dom.focus({preventScroll:s}),mm=t=>t.dom.blur(),ea=t=>{const s=Or(t).dom;return t.dom===s.activeElement},mu=(t=Wd())=>A.from(t.dom.activeElement).map(ze.fromDom),vi=t=>mu(Or(t)).filter(s=>t.dom.contains(s.dom)),Uy=(t,s)=>{const c=Or(s),i=mu(c).bind(g=>{const h=C=>Bo(g,C);return h(s)?A.some(s):Ry(s,h)}),d=t(s);return i.each(g=>{mu(c).filter(h=>Bo(h,g)).fold(()=>{bi(g)},oe)}),d},Rb=ve.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Wy=(t,s,c,i,d,g)=>{const h=s.rect,C=h.x-c,w=h.y-i,k=h.width,O=h.height,P=d-(C+k),H=g-(w+O),j=A.some(C),Q=A.some(w),te=A.some(P),we=A.some(H),ce=A.none();return rp(s.direction,()=>bd(t,j,Q,ce,ce),()=>bd(t,ce,Q,te,ce),()=>bd(t,j,ce,ce,we),()=>bd(t,ce,ce,te,we),()=>bd(t,j,Q,ce,ce),()=>bd(t,j,ce,ce,we),()=>bd(t,j,Q,ce,ce),()=>bd(t,ce,Q,te,ce))},BS=(t,s)=>t.fold(()=>{const c=s.rect;return bd("absolute",A.some(c.x),A.some(c.y),A.none(),A.none())},(c,i,d,g)=>Wy("absolute",s,c,i,d,g),(c,i,d,g)=>Wy("fixed",s,c,i,d,g)),Mb=(t,s)=>{const c=On(Bl,s),i=t.fold(c,c,()=>{const h=Ea();return Bl(s).translate(-h.left,-h.top)}),d=ke(s),g=il(s);return kr(i.left,i.top,d,g)},$S=(t,s)=>s.fold(()=>t.fold(xc,xc,kr),c=>t.fold(Z(c),Z(c),()=>{const i=FS(t,c.x,c.y);return kr(i.left,i.top,c.width,c.height)})),FS=(t,s,c)=>{const i=Zs(s,c),d=()=>{const g=Ea();return i.translate(-g.left,-g.top)};return t.fold(Z(i),Z(i),d)},IS=(t,s,c,i)=>t.fold(s,c,i);Rb.none;const O3=Rb.relative,D3=Rb.fixed,R3=(t,s)=>({anchorBox:t,origin:s}),Zy=(t,s)=>R3(t,s),Nb="data-alloy-placement",LS=(t,s)=>{Xe(t,Nb,s)},B1=t=>Gn(t,Nb),cp=t=>V(t,Nb),Yf=ve.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),Pb=(t,s)=>{const{x:c,y:i,right:d,bottom:g}=s,{x:h,y:C,right:w,bottom:k,width:O,height:P}=t,H=h>=c&&h<=d,j=C>=i&&C<=g,Q=H&&j,te=w<=d&&w>=c,we=k<=g&&k>=i,ce=te&&we,xe=Math.min(O,h>=c?d-h:w-c),Ce=Math.min(P,C>=i?g-C:k-i);return{originInBounds:Q,sizeInBounds:ce,visibleW:xe,visibleH:Ce}},M3=(t,s)=>{const{x:c,y:i,right:d,bottom:g}=s,{x:h,y:C,width:w,height:k}=t,O=Math.max(c,d-w),P=Math.max(i,g-k),H=du(h,c,O),j=du(C,i,P),Q=Math.min(H+w,d)-H,te=Math.min(j+k,g)-j;return kr(H,j,Q,te)},HS=(t,s,c)=>{const i=Z(s.bottom-c.y),d=Z(c.bottom-s.y),g=_S(t,d,d,i),h=Z(s.right-c.x),C=Z(c.right-s.x);return{maxWidth:S3(t,C,C,h),maxHeight:g}},N3=(t,s,c,i)=>{const d=t.bubble,g=d.offset,h=E3(i,t.restriction,g),C=t.x+g.left,w=t.y+g.top,k=kr(C,w,s,c),{originInBounds:O,sizeInBounds:P,visibleW:H,visibleH:j}=Pb(k,h),Q=O&&P,te=Q?k:M3(k,h),we=te.width>0&&te.height>0,{maxWidth:ce,maxHeight:xe}=HS(t.direction,te,i),Ce={rect:te,maxHeight:xe,maxWidth:ce,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:w};return Q||t.alwaysFit?Yf.fit(Ce):Yf.nofit(Ce,H,j,we)},zS=(t,s,c,i,d,g)=>{const h=i.width,C=i.height,w=(O,P,H,j,Q)=>{const te=O(c,i,d,t,g),we=N3(te,h,C,g);return we.fold(Z(we),(ce,xe,Ce,Pe)=>(Q===Pe?Ce>j||xe>H:!Q&&Pe)?we:Yf.nofit(P,H,j,Q))};return No(s,(O,P)=>{const H=On(w,P);return O.fold(Z(O),H)},Yf.nofit({rect:c,maxHeight:i.height,maxWidth:i.width,direction:_b(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:c.y},-1,-1,!1)).fold(Mt,Mt)},VS=Bt,$i=(t,s,c)=>xa(t,s,VS,c),Bb=(t,s,c)=>_f(t,s,VS,c),US=ru,jy=["top","bottom","right","left"],$1="data-alloy-transition-timer",P3=(t,s)=>zR(t,s.classes),ap=(t,s,c)=>c.exists(i=>{const d=t.mode;return d==="all"?!0:i[d]!==s[d]}),B3=(t,s)=>{const c=i=>parseFloat(i).toFixed(3);return Yn(s,(i,d)=>{const g=t[d].map(c),h=i.map(c);return!dc(g,h)}).isSome()},Gy=t=>{const s=g=>{const C=at(t,g).split(/\s*,\s*/);return to(C,le)},c=g=>{if(je(g)&&/^[\d.]+/.test(g)){const h=parseFloat(g);return ec(g,"ms")?h:h*1e3}else return 0},i=s("transition-delay"),d=s("transition-duration");return No(d,(g,h,C)=>{const w=c(i[C])+c(h);return Math.max(g,w)},0)},$3=(t,s)=>{const c=di(),i=di();let d;const g=k=>{var O;const P=(O=k.raw.pseudoElement)!==null&&O!==void 0?O:"";return Bo(k.target,t)&&re(P)&&fo(jy,k.raw.propertyName)},h=k=>{if(Ps(k)||g(k)){c.clear(),i.clear();const O=k==null?void 0:k.raw.type;(Ps(O)||O===Hh())&&(clearTimeout(d),V(t,$1),lu(t,s.classes))}},C=$i(t,U4(),k=>{g(k)&&(C.unbind(),c.set($i(t,Hh(),h)),i.set($i(t,V4(),h)))}),w=Gy(t);requestAnimationFrame(()=>{d=setTimeout(h,w+17),Xe(t,$1,d)})},F1=(t,s)=>{Lf(t,s.classes),Gn(t,$1).each(c=>{clearTimeout(parseInt(c,10)),V(t,$1)}),$3(t,s)},F3=(t,s,c,i,d,g)=>{const h=ap(i,d,g);if(h||P3(t,i)){Nt(t,"position",c.position);const C=Mb(s,t),w=BS(s,{...d,rect:C}),k=hs(jy,O=>w[O]);B3(c,k)&&(Hr(t,k),h&&F1(t,i),Gc(t))}else lu(t,i.classes)},I3=t=>({width:ke(t),height:il(t)}),$b=(t,s,c,i)=>{xo(s,"max-height"),xo(s,"max-width");const d=I3(s);return zS(s,i.preference,t,d,c,i.bounds)},WS=(t,s)=>{const c=s.classes;lu(t,c.off),Lf(t,c.on)},qy=(t,s,c)=>{const i=c.maxHeightFunction;i(t,s.maxHeight)},I1=(t,s,c)=>{const i=c.maxWidthFunction;i(t,s.maxWidth)},ZS=(t,s,c)=>{const i=BS(c.origin,s);c.transition.each(d=>{F3(t,c.origin,i,d,s,c.lastPlacement)}),Zi(t,i)},Ky=(t,s)=>{LS(t,s.placement)},Yy=(t,s)=>{Nm(t,Math.floor(s))},Xy=Z((t,s)=>{Yy(t,s),es(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Zg=Z((t,s)=>{Yy(t,s)}),jS=(t,s,c)=>t[s]===void 0?c:t[s],Jy=(t,s,c,i,d,g,h,C)=>{const w=jS(h,"maxHeightFunction",Xy()),k=jS(h,"maxWidthFunction",oe),O=t.anchorBox,P=t.origin,H={bounds:$S(P,g),origin:P,preference:i,maxHeightFunction:w,maxWidthFunction:k,lastPlacement:d,transition:C};return GS(O,s,c,H)},GS=(t,s,c,i)=>{const d=$b(t,s,c,i);return ZS(s,d,i),Ky(s,d),WS(s,d),qy(s,d,i),I1(s,d,i),{layout:d.layout,placement:d.placement}},qS=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Fi=(t,s,c,i=1)=>{const d=t*i,g=s*i,h=w=>Ct(c,w).getOr([]),C=(w,k,O)=>{const P=jt(qS,O);return{offset:Zs(w,k),classesOn:fe(O,h),classesOff:fe(P,h)}};return{southeast:()=>C(-t,s,["top","alignLeft"]),southwest:()=>C(t,s,["top","alignRight"]),south:()=>C(-t/2,s,["top","alignCentre"]),northeast:()=>C(-t,-s,["bottom","alignLeft"]),northwest:()=>C(t,-s,["bottom","alignRight"]),north:()=>C(-t/2,-s,["bottom","alignCentre"]),east:()=>C(t,-s/2,["valignCentre","left"]),west:()=>C(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>C(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>C(-d,g,["top","alignRight","inset"]),insetNorth:()=>C(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>C(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>C(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>C(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>C(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>C(d,-g/2,["valignCentre","left","inset"])}},Fb=()=>Fi(0,0,{}),Ib=Mt,Qy=(t,s)=>c=>e2(c)==="rtl"?s:t,e2=t=>at(t,"direction")==="rtl"?"rtl":"ltr";var fm;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(fm||(fm={}));const Lb="data-alloy-vertical-dir",L3=t=>My(t,s=>vo(s)&&ho(s,"data-alloy-vertical-dir")===fm.BottomToTop),Xf=()=>Aa("layouts",[nt("onLtr"),nt("onRtl"),ms("onBottomLtr"),ms("onBottomRtl")]),Hb=(t,s,c,i,d,g,h)=>{const C=h.map(L3).getOr(!1),w=s.layouts.map(j=>j.onLtr(t)),k=s.layouts.map(j=>j.onRtl(t)),O=C?s.layouts.bind(j=>j.onBottomLtr.map(Q=>Q(t))).or(w).getOr(d):w.getOr(c),P=C?s.layouts.bind(j=>j.onBottomRtl.map(Q=>Q(t))).or(k).getOr(g):k.getOr(i);return Qy(O,P)(t)},Ii=(t,s,c)=>{const i=s.hotspot,d=Mb(c,i.element),g=Hb(t.element,s,sn(),Wg(),NS(),Ob(),A.some(s.hotspot.element));return A.some(Ib({anchorBox:d,bubble:s.bubble.getOr(Fb()),overrides:s.overrides,layouts:g}))};var qR=[nt("hotspot"),ms("bubble"),Ee("overrides",{}),Xf(),gr("placement",Ii)];const ip=(t,s,c)=>{const i=FS(c,s.x,s.y),d=kr(i.left,i.top,s.width,s.height),g=Hb(t.element,s,P1(),fa(),P1(),fa(),A.none());return A.some(Ib({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var H3=[nt("x"),nt("y"),Ee("height",0),Ee("width",0),Ee("bubble",Fb()),Ee("overrides",{}),Xf(),gr("placement",ip)];const L1=ve.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),z3=t=>t.fold(Mt,(s,c,i)=>s.translate(-c,-i)),V3=t=>t.fold(Mt,Mt),KS=t=>No(t,(s,c)=>s.translate(c.left,c.top),Zs(0,0)),YS=t=>{const s=Re(t,z3);return KS(s)},zb=t=>{const s=Re(t,V3);return KS(s)},U3=L1.screen,W3=L1.absolute,H1=(t,s,c)=>{const i=ii(c.root).dom,d=g=>{const h=er(g),C=er(t.element);return Bo(h,C)};return A.from(i.frameElement).map(ze.fromDom).filter(d).map(wc)},t2=(t,s,c)=>{const i=er(t.element),d=Ea(i),g=H1(t,s,c).getOr(d);return W3(g,d.left,d.top)},n2=(t,s,c,i)=>{const d=U3(Zs(t,s));return A.some(Sg(d,c,i))},XS=(t,s,c,i,d)=>t.map(g=>{const h=[s,g.point],C=IS(i,()=>zb(h),()=>zb(h),()=>YS(h)),w=ml(C.left,C.top,g.width,g.height),k=c.showAbove?NS():sn(),O=c.showAbove?Ob():Wg(),P=Hb(d,c,k,O,k,O,A.none());return Ib({anchorBox:w,bubble:c.bubble.getOr(Fb()),overrides:c.overrides,layouts:P})}),JS=(t,s,c)=>{const i=t2(t,c,s);return s.node.filter(se).bind(d=>{const g=d.dom.getBoundingClientRect(),h=n2(g.left,g.top,g.width,g.height),C=s.node.getOr(t.element);return XS(h,i,s,c,C)})};var Vb=[nt("node"),nt("root"),ms("bubble"),Xf(),Ee("overrides",{}),Ee("showAbove",!1),gr("placement",JS)];const KR="\uFEFF",lp=" ",z1={create:(t,s,c,i)=>({start:t,soffset:s,finish:c,foffset:i})},V1=ve.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Ub=(t,s,c,i)=>t.fold(s,c,i),Z3=t=>t.fold(Mt,Mt,Mt),QS=V1.before,j3=V1.on,o2=V1.after,s2={before:QS,on:j3,after:o2,cata:Ub,getStart:Z3},tf=ve.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),U1=t=>tf.exact(t.start,t.soffset,t.finish,t.foffset),G3=t=>t.match({domRange:s=>ze.fromDom(s.startContainer),relative:(s,c)=>s2.getStart(s),exact:(s,c,i,d)=>s}),r2=tf.domRange,ex=tf.relative,YR=tf.exact,tx=t=>{const s=G3(t);return ii(s)},c2=z1.create,Jf={domRange:r2,relative:ex,exact:YR,exactFromRange:U1,getWin:tx,range:c2},q3=(t,s)=>{s.fold(c=>{t.setStartBefore(c.dom)},(c,i)=>{t.setStart(c.dom,i)},c=>{t.setStartAfter(c.dom)})},a2=(t,s)=>{s.fold(c=>{t.setEndBefore(c.dom)},(c,i)=>{t.setEnd(c.dom,i)},c=>{t.setEndAfter(c.dom)})},i2=(t,s,c)=>{const i=t.document.createRange();return q3(i,s),a2(i,c),i},l2=(t,s,c,i,d)=>{const g=t.document.createRange();return g.setStart(s.dom,c),g.setEnd(i.dom,d),g},Wb=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),u2=t=>{const s=t.getClientRects(),c=s.length>0?s[0]:t.getBoundingClientRect();return c.width>0||c.height>0?A.some(c).map(Wb):A.none()},Zb=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?A.some(s).map(Wb):A.none()},up=ve.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),d2=(t,s,c)=>s(ze.fromDom(c.startContainer),c.startOffset,ze.fromDom(c.endContainer),c.endOffset),K3=(t,s)=>s.match({domRange:c=>({ltr:Z(c),rtl:A.none}),relative:(c,i)=>({ltr:wn(()=>i2(t,c,i)),rtl:wn(()=>A.some(i2(t,i,c)))}),exact:(c,i,d,g)=>({ltr:wn(()=>l2(t,c,i,d,g)),rtl:wn(()=>A.some(l2(t,d,g,c,i)))})}),Y3=(t,s)=>{const c=s.ltr();return c.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>up.rtl(ze.fromDom(d.endContainer),d.endOffset,ze.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>d2(t,up.ltr,c)):d2(t,up.ltr,c)},jg=(t,s)=>{const c=K3(t,s);return Y3(t,c)},W1=(t,s)=>jg(t,s).match({ltr:(i,d,g,h)=>{const C=t.document.createRange();return C.setStart(i.dom,d),C.setEnd(g.dom,h),C},rtl:(i,d,g,h)=>{const C=t.document.createRange();return C.setStart(g.dom,h),C.setEnd(i.dom,d),C}});up.ltr,up.rtl;const nx=(t,s,c)=>to(sl(t,c),s),Li=(t,s)=>Ba(s,t),XR=(t,s,c,i)=>{const g=er(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(c.dom,i),g},X3=(t,s,c,i)=>{const d=XR(t,s,c,i),g=Bo(t,c)&&s===i;return d.collapsed&&!g},dp=t=>A.from(t.getSelection()),ox=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),c=t.getRangeAt(t.rangeCount-1);return A.some(z1.create(ze.fromDom(s.startContainer),s.startOffset,ze.fromDom(c.endContainer),c.endOffset))}else return A.none()},sx=t=>{if(t.anchorNode===null||t.focusNode===null)return ox(t);{const s=ze.fromDom(t.anchorNode),c=ze.fromDom(t.focusNode);return X3(s,t.anchorOffset,c,t.focusOffset)?A.some(z1.create(s,t.anchorOffset,c,t.focusOffset)):ox(t)}},Z1=t=>dp(t).filter(s=>s.rangeCount>0).bind(sx),Qf=(t,s)=>{const c=W1(t,s);return u2(c)},m2=(t,s)=>{const c=W1(t,s);return Zb(c)},J3=((t,s)=>{const c=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return i(g).getOr("")},i=g=>t(g)?A.from(g.dom.nodeValue):A.none();return{get:c,getOption:i,set:(g,h)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=h}}})(So,"text"),cx=t=>J3.get(t),j1=(t,s)=>({element:t,offset:s}),ax=(t,s)=>{const c=Lr(t);if(c.length===0)return j1(t,s);if(s<c.length)return j1(c[s],0);{const i=c[c.length-1],d=So(i)?cx(i).length:Lr(i).length;return j1(i,d)}},G1=(t,s)=>So(t)?j1(t,s):ax(t,s),mp=t=>t.foffset!==void 0,f2=(t,s)=>s.getSelection.getOrThunk(()=>()=>Z1(t))().map(i=>{if(mp(i)){const d=G1(i.start,i.soffset),g=G1(i.finish,i.foffset);return Jf.range(d.element,d.offset,g.element,g.offset)}else return i}),fp=(t,s,c)=>{const i=ii(s.root).dom,d=t2(t,c,s),g=f2(i,s).bind(w=>{if(mp(w))return m2(i,Jf.exactFromRange(w)).orThunk(()=>{const O=ze.fromText(KR);Tu(w.start,O);const P=Qf(i,Jf.exact(O,0,O,1));return dl(O),P}).bind(O=>n2(O.left,O.top,O.width,O.height));{const k=Ke(w,P=>P.dom.getBoundingClientRect()),O={left:Math.min(k.firstCell.left,k.lastCell.left),right:Math.max(k.firstCell.right,k.lastCell.right),top:Math.min(k.firstCell.top,k.lastCell.top),bottom:Math.max(k.firstCell.bottom,k.lastCell.bottom)};return n2(O.left,O.top,O.right-O.left,O.bottom-O.top)}}),C=f2(i,s).bind(w=>mp(w)?vo(w.start)?A.some(w.start):Fa(w.start):A.some(w.firstCell)).getOr(t.element);return XS(g,d,s,c,C)};var Gg=[ms("getSelection"),nt("root"),ms("bubble"),Xf(),Ee("overrides",{}),Ee("showAbove",!1),gr("placement",fp)];const qg="link-layout",nf=t=>t.x+t.width,g2=(t,s)=>t.x-s.width,gm=(t,s)=>t.y-s.height+t.height,Hu=t=>t.y,hm=(t,s,c)=>ma(nf(t),Hu(t),c.southeast(),_b(),"southeast",Ua(t,{left:0,top:2}),qg),h2=(t,s,c)=>ma(g2(t,s),Hu(t),c.southwest(),Py(),"southwest",Ua(t,{right:1,top:2}),qg),wd=(t,s,c)=>ma(nf(t),gm(t,s),c.northeast(),By(),"northeast",Ua(t,{left:0,bottom:3}),qg),p2=(t,s,c)=>ma(g2(t,s),gm(t,s),c.northwest(),$y(),"northwest",Ua(t,{right:1,bottom:3}),qg),Kg=()=>[hm,h2,wd,p2],gp=()=>[h2,hm,p2,wd],ix=(t,s,c)=>{const i=Mb(c,s.item.element),d=Hb(t.element,s,Kg(),gp(),Kg(),gp(),A.none());return A.some(Ib({anchorBox:i,bubble:Fb(),overrides:s.overrides,layouts:d}))};var lx=[nt("item"),Xf(),Ee("overrides",{}),gr("placement",ix)],q1=Nc("type",{selection:Gg,node:Vb,hotspot:qR,submenu:lx,makeshift:H3});const jb=[gi("classes",Vt),zl("mode","all",["all","layout","placement"])],Q3=[Ee("useFixed",eo),ms("getBounds")],K1=[ds("anchor",q1),Aa("transition",jb)],Gb=()=>{const t=document.documentElement;return D3(0,0,t.clientWidth,t.clientHeight)},ux=t=>{const s=wc(t.element),c=t.element.dom.getBoundingClientRect();return O3(s.left,s.top,c.width,c.height)},zu=(t,s,c,i,d,g)=>{const h=Zy(s.anchorBox,t);return Jy(h,i.element,s.bubble,s.layouts,d,c,s.overrides,g)},dx=(t,s,c,i,d)=>{const g=A.none();qb(t,s,c,i,d,g)},qb=(t,s,c,i,d,g)=>{const h=Qa("placement.info",Vn(K1),d),C=h.anchor,w=i.element,k=c.get(i.uid);Uy(()=>{Nt(w,"position","fixed");const O=Es(w,"visibility");Nt(w,"visibility","hidden");const P=s.useFixed()?Gb():ux(t);C.placement(t,C,P).each(H=>{const j=g.orThunk(()=>s.getBounds.map(Go)),Q=zu(P,H,j,i,k,h.transition);c.set(i.uid,Q)}),O.fold(()=>{xo(w,"visibility")},H=>{Nt(w,"visibility",H)}),Es(w,"left").isNone()&&Es(w,"top").isNone()&&Es(w,"right").isNone()&&Es(w,"bottom").isNone()&&vr(Es(w,"position"),"fixed")&&xo(w,"position")},w)};var Y1=Object.freeze({__proto__:null,position:dx,positionWithinBounds:qb,getMode:(t,s,c)=>s.useFixed()?"fixed":"absolute",reset:(t,s,c,i)=>{const d=i.element;ot(["position","left","right","top","bottom"],g=>xo(d,g)),cp(d),c.clear(i.uid)}}),fx=Object.freeze({__proto__:null,init:()=>{let t={};return Vl({readState:()=>t,clear:d=>{io(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>Ct(t,d)})}});const Wa=gc({fields:Q3,name:"positioning",active:PS,apis:Y1,state:fx}),Kb=t=>t.getSystem().isConnected(),eg=t=>{Io(t,$u());const s=t.components();ot(s,eg)},Zl=t=>{const s=t.components();ot(s,Zl),Io(t,Bu())},gx=(t,s)=>{t.getSystem().addToWorld(s),se(t.element)&&Zl(s)},Yb=t=>{eg(t),t.getSystem().removeFromWorld(t)},X1=(t,s)=>{Ai(t.element,s.element)},hx=t=>{ot(t.components(),s=>dl(s.element)),_u(t.element),t.syncComponents()},J1=(t,s,c)=>{const i=t.components();hx(t);const d=c(s),g=jt(i,d);ot(g,h=>{eg(h),t.getSystem().removeFromWorld(h)}),ot(d,h=>{Kb(h)?X1(t,h):(t.getSystem().addToWorld(h),X1(t,h),se(t.element)&&Zl(h))}),t.syncComponents()},px=(t,s,c)=>{const i=t.components(),d=fe(s,C=>l3(C).toArray());ot(i,C=>{fo(d,C)||Yb(C)});const g=c(s),h=jt(i,g);ot(h,C=>{Kb(C)&&Yb(C)}),ot(g,C=>{Kb(C)||gx(t,C)}),t.syncComponents()},Xg=(t,s)=>{jl(t,s,Ai)},jl=(t,s,c)=>{t.getSystem().addToWorld(s),c(t.element,s.element),se(t.element)&&Zl(s),t.syncComponents()},tg=t=>{eg(t),dl(t.element),t.getSystem().removeFromWorld(t)},Sd=t=>{const s=oc(t.element).bind(c=>t.getSystem().getByDom(c).toOptional());tg(t),s.each(c=>{c.syncComponents()})},Vu=t=>{const s=t.components();ot(s,tg),_u(t.element),t.syncComponents()},Za=(t,s)=>{Wc(t,s,Ai)},Ma=(t,s)=>{Wc(t,s,ku)},Wc=(t,s,c)=>{c(t,s.element);const i=Lr(s.element);ot(i,d=>{s.getByDom(d).each(Zl)})},Uu=t=>{const s=Lr(t.element);ot(s,c=>{t.getByDom(c).each(eg)}),dl(t.element)},Xb=(t,s,c,i)=>{c.get().each(h=>{Vu(t)});const d=s.getAttachPoint(t);Xg(d,t);const g=t.getSystem().build(i);return Xg(t,g),c.set(g),g},Gl=(t,s,c,i)=>{const d=Xb(t,s,c,i);return s.onOpen(t,d),d},Jg=(t,s,c,i)=>c.get().map(()=>Xb(t,s,c,i)),Jb=(t,s,c,i,d)=>{Sx(t,s),Gl(t,s,c,i),d(),xx(t,s)},bx=(t,s,c)=>{c.get().each(i=>{Vu(t),Sd(t),s.onClose(t,i),c.clear()})},vx=(t,s,c)=>c.isOpen(),yx=(t,s,c,i)=>vx(t,s,c)&&c.get().exists(d=>s.isPartOf(t,d,i)),Cx=(t,s,c)=>c.get(),Qb=(t,s,c,i)=>{Es(t.element,s).fold(()=>{V(t.element,c)},d=>{Xe(t.element,c,d)}),Nt(t.element,s,i)},wx=(t,s,c)=>{Gn(t.element,c).fold(()=>xo(t.element,s),i=>Nt(t.element,s,i))},Sx=(t,s,c)=>{const i=s.getAttachPoint(t);Nt(t.element,"position",Wa.getMode(i)),Qb(t,"visibility",s.cloakVisibilityAttr,"hidden")},hp=t=>Bs(["top","left","right","bottom"],s=>Es(t,s).isSome()),xx=(t,s,c)=>{hp(t.element)||xo(t.element,"position"),wx(t,"visibility",s.cloakVisibilityAttr)};var ek=Object.freeze({__proto__:null,cloak:Sx,decloak:xx,open:Gl,openWhileCloaked:Jb,close:bx,isOpen:vx,isPartOf:yx,getState:Cx,setContent:Jg}),Ex=Object.freeze({__proto__:null,events:(t,s)=>ir([Ye(rm(),(c,i)=>{bx(c,t,s)})])}),pp=[rs("onOpen"),rs("onClose"),nt("isPartOf"),nt("getAttachPoint"),Ee("cloakVisibilityAttr","data-precloak-visibility")],ok=Object.freeze({__proto__:null,init:()=>{const t=ys(),s=Z("not-implemented");return Vl({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const cs=gc({fields:pp,name:"sandboxing",active:Ex,apis:ek,state:ok}),ng=Z("dismiss.popups"),of=Z("reposition.popups"),ev=Z("mouse.released"),b2=_a([Ee("isExtraPart",eo),Aa("fireEventInstead",[Ee("event",$f())])]),wl=t=>{const s=Qa("Dismissal",b2,t);return{[ng()]:{schema:_a([nt("target")]),onReceive:(c,i)=>{cs.isOpen(c)&&(cs.isPartOf(c,i.target)||s.isExtraPart(c,i.target)||s.fireEventInstead.fold(()=>cs.close(c),g=>Io(c,g.event)))}}}},sk=_a([Aa("fireEventInstead",[Ee("event",Dg())]),Xc("doReposition")]),Qg=t=>{const s=Qa("Reposition",sk,t);return{[of()]:{onReceive:c=>{cs.isOpen(c)&&s.fireEventInstead.fold(()=>s.doReposition(c),i=>Io(c,i.event))}}}},pm=(t,s,c)=>{s.store.manager.onLoad(t,s,c)},Q1=(t,s,c)=>{s.store.manager.onUnload(t,s,c)};var kx=Object.freeze({__proto__:null,onLoad:pm,onUnload:Q1,setValue:(t,s,c,i)=>{s.store.manager.setValue(t,s,c,i)},getValue:(t,s,c)=>s.store.manager.getValue(t,s,c),getState:(t,s,c)=>c}),_x=Object.freeze({__proto__:null,events:(t,s)=>{const c=t.resetOnDom?[Gs((i,d)=>{pm(i,t,s)}),pd((i,d)=>{Q1(i,t,s)})]:[my(t,s,pm)];return ir(c)}});const eh=()=>{const t=pn(null),s=()=>({mode:"memory",value:t.get()}),c=()=>t.get()===null,i=()=>{t.set(null)};return Vl({set:t.set,get:t.get,isNotSet:c,clear:i,readState:s})},th=()=>Vl({readState:oe}),nh=()=>{const t=pn({}),s=pn({});return Vl({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:h=>Ct(t.get(),h).orThunk(()=>Ct(s.get(),h)),update:h=>{const C=t.get(),w=s.get(),k={},O={};ot(h,P=>{k[P.value]=P,Ct(P,"meta").each(H=>{Ct(H,"text").each(j=>{O[j]=P})})}),t.set({...C,...k}),s.set({...w,...O})},clear:()=>{t.set({}),s.set({})}})};var v2=Object.freeze({__proto__:null,memory:eh,dataset:nh,manual:th,init:t=>t.store.manager.state(t)});const bp=(t,s,c,i)=>{const d=s.store;c.update([i]),d.setValue(t,i),s.onSetValue(t,i)},y2=(t,s,c)=>{const i=s.store,d=i.getDataKey(t);return c.lookup(d).getOrThunk(()=>i.getFallbackEntry(d))},C2=(t,s,c)=>{s.store.initialValue.each(d=>{bp(t,s,c,d)})},vp=(t,s,c)=>{c.clear()};var w2=[ms("initialValue"),nt("getFallbackEntry"),nt("getDataKey"),nt("setValue"),gr("manager",{setValue:bp,getValue:y2,onLoad:C2,onUnload:vp,state:nh})];const Ax=(t,s,c)=>s.store.getValue(t),og=(t,s,c,i)=>{s.store.setValue(t,i),s.onSetValue(t,i)},S2=(t,s,c)=>{s.store.initialValue.each(i=>{s.store.setValue(t,i)})};var ck=[nt("getValue"),Ee("setValue",oe),ms("initialValue"),gr("manager",{setValue:og,getValue:Ax,onLoad:S2,onUnload:oe,state:iu.init})];const Ox=(t,s,c,i)=>{c.set(i),s.onSetValue(t,i)},sf=(t,s,c)=>c.get(),Dx=(t,s,c)=>{s.store.initialValue.each(i=>{c.isNotSet()&&c.set(i)})},x2=(t,s,c)=>{c.clear()};var sg=[ms("initialValue"),gr("manager",{setValue:Ox,getValue:sf,onLoad:Dx,onUnload:x2,state:eh})],E2=[Wi("store",{mode:"memory"},Nc("mode",{memory:sg,manual:ck,dataset:w2})),rs("onSetValue"),Ee("resetOnDom",!1)];const qt=gc({fields:E2,name:"representing",active:_x,apis:kx,extra:{setValueFrom:(t,s)=>{const c=qt.getValue(s);qt.setValue(t,c)}},state:v2}),ga=(t,s)=>L(t,{},Re(s,c=>ay(c.name(),"Cannot configure "+c.name()+" for "+t)).concat([ls("dump",Mt)])),tv=t=>t.dump,hc=(t,s)=>({...xt(s),...t.dump}),ql={field:ga,augment:hc,get:tv},nv="placeholder",oh=ve.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),ov=t=>uo(t,"uiType"),sv=(t,s,c,i)=>t.exists(d=>d!==c.owner)?oh.single(!0,Z(c)):Ct(i,c.name).fold(()=>{throw new Error("Unknown placeholder component: "+c.name+`
Known: [`+os(i)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(c,null,2))},d=>d.replace()),T2=(t,s,c,i)=>ov(c)&&c.uiType===nv?sv(t,s,c,i):oh.single(!1,Z(c)),Rx=(t,s,c,i)=>T2(t,s,c,i).fold((g,h)=>{const C=ov(c)?h(s,c.config,c.validated):h(s),w=Ct(C,"components").getOr([]),k=fe(w,O=>Rx(t,s,O,i));return[{...C,components:k}]},(g,h)=>{if(ov(c)){const C=h(s,c.config,c.validated);return c.validated.preprocess.getOr(Mt)(C)}else return h(s)}),ak=(t,s,c,i)=>fe(c,d=>Rx(t,s,d,i)),bm=(t,s)=>{let c=!1;const i=()=>c,d=()=>{if(c)throw new Error("Trying to use the same placeholder more than once: "+t);return c=!0,s},g=()=>s.fold((h,C)=>h,(h,C)=>h);return{name:Z(t),required:g,used:i,replace:d}},ik=(t,s,c,i)=>{const d=Ke(i,(h,C)=>bm(C,h)),g=ak(t,s,c,d);return xs(d,h=>{if(h.used()===!1&&h.required())throw new Error("Placeholder: "+h.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},k2=oh.single,fu=oh.multiple,ta=Z(nv),rv=ve.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),yp=Ee("factory",{sketch:Mt}),_2=Ee("schema",[]),vm=nt("name"),rf=Pc("pname","pname",Fo(t=>"<alloy."+Kt(t.name)+">"),Il()),rg=ls("schema",()=>[ms("preprocess")]),e0=Ee("defaults",Z({})),Yi=Ee("overrides",Z({})),sh=Vn([yp,_2,vm,rf,e0,Yi]),lk=Vn([yp,_2,vm,e0,Yi]),Cp=Vn([yp,_2,vm,rf,e0,Yi]),Mx=Vn([yp,rg,vm,nt("unit"),rf,e0,Yi]),Nx=t=>t.fold(A.some,A.none,A.some,A.some),Px=t=>{const s=c=>c.name;return t.fold(s,s,s,s)},Bx=t=>t.fold(Mt,Mt,Mt,Mt),t0=(t,s)=>c=>{const i=Qa("Converting part type",s,c);return t(i)},ja=t0(rv.required,sh),gu=t0(rv.external,lk),Xi=t0(rv.optional,Cp),rh=t0(rv.group,Mx),cf=Z("entirety");var n0=Object.freeze({__proto__:null,required:ja,external:gu,optional:Xi,group:rh,asNamedPart:Nx,name:Px,asCommon:Bx,original:cf});const A2=(t,s,c,i)=>rr(s.defaults(t,c,i),c,{uid:t.partUids[s.name]},s.overrides(t,c,i)),uk=(t,s,c)=>{const i={},d={};return ot(c,g=>{g.fold(h=>{i[h.pname]=k2(!0,(C,w,k)=>h.factory.sketch(A2(C,h,w,k)))},h=>{const C=s.parts[h.name];d[h.name]=Z(h.factory.sketch(A2(s,h,C[cf()]),C))},h=>{i[h.pname]=k2(!1,(C,w,k)=>h.factory.sketch(A2(C,h,w,k)))},h=>{i[h.pname]=fu(!0,(C,w,k)=>{const O=C[h.name];return Re(O,P=>h.factory.sketch(rr(h.defaults(C,P,k),P,h.overrides(C,P))))})})}),{internals:Z(i),externals:Z(d)}},O2=(t,s)=>{const c={};return ot(s,i=>{Nx(i).each(d=>{const g=dk(t,d.pname);c[d.name]=h=>{const C=Qa("Part: "+d.name+" in "+t,Vn(d.schema),h);return{...g,config:h,validated:C}}})}),c},dk=(t,s)=>({uiType:ta(),owner:t,name:s}),cv=(t,s,c)=>({uiType:ta(),owner:t,name:s,config:c,validated:{}}),D2=t=>fe(t,s=>s.fold(A.none,A.some,A.none,A.none).map(c=>Du(c.name,c.schema.concat([xy(cf())]))).toArray()),$x=t=>Re(t,Px),av=(t,s,c)=>uk(t,s,c),R2=(t,s,c)=>ik(A.some(t),s,s.components,c),tr=(t,s,c)=>{const i=s.partUids[c];return t.getSystem().getByUid(i).toOptional()},xd=(t,s,c)=>tr(t,s,c).getOrDie("Could not find part: "+c),Fx=(t,s,c)=>{const i={},d=s.partUids,g=t.getSystem();return ot(c,h=>{i[h]=Z(g.getByUid(d[h]))}),i},Ix=(t,s)=>{const c=t.getSystem();return Ke(s.partUids,(i,d)=>Z(c.getByUid(i)))},M2=t=>os(t.partUids),iv=(t,s,c)=>{const i={},d=s.partUids,g=t.getSystem();return ot(c,h=>{i[h]=Z(g.getByUid(d[h]).getOrDie())}),i},N2=(t,s)=>{const c=$x(s);return Rs(Re(c,i=>({key:i,value:t+"-"+i})))},wp=t=>Pc("partUids","partUids",E(s=>N2(s.uid,t)),Il());var n5=Object.freeze({__proto__:null,generate:O2,generateOne:cv,schemas:D2,names:$x,substitutes:av,components:R2,defaultUids:N2,defaultUidsSchema:wp,getAllParts:Ix,getAllPartNames:M2,getPart:tr,getPartOrDie:xd,getParts:Fx,getPartsOrDie:iv});const Lx=(t,s)=>(t.length>0?[Du("parts",t)]:[]).concat([nt("uid"),Ee("dom",{}),Ee("components",[]),xy("originalSpec"),Ee("debug.sketcher",{})]).concat(s),lv=(t,s,c,i,d)=>{const g=Lx(i,d);return Qa(t+" [SpecSchema]",_a(g.concat(s)),c)},mk=(t,s,c,i)=>{const d=P2(i),g=lv(t,s,d,[],[]);return c(g,d)},o0=(t,s,c,i,d)=>{const g=P2(d),h=D2(c),C=wp(c),w=lv(t,s,g,h,[C]),k=av(t,w,c),O=R2(t,w,k.internals());return i(w,O,g,k.externals())},Hx=t=>uo(t,"uid"),P2=t=>Hx(t)?t:{...t,uid:Hg("uid")},zx=t=>t.uid!==void 0,af=_a([nt("name"),nt("factory"),nt("configFields"),Ee("apis",{}),Ee("extraApis",{})]),uv=_a([nt("name"),nt("factory"),nt("configFields"),nt("partFields"),Ee("apis",{}),Ee("extraApis",{})]),Ji=t=>{const s=Qa("Sketcher for "+t.name,af,t),c=g=>mk(s.name,s.configFields,s.factory,g),i=Ke(s.apis,Cd),d=Ke(s.extraApis,(g,h)=>h1(g,h));return{name:s.name,configFields:s.configFields,sketch:c,...i,...d}},si=t=>{const s=Qa("Sketcher for "+t.name,uv,t),c=h=>o0(s.name,s.configFields,s.partFields,s.factory,h),i=O2(s.name,s.partFields),d=Ke(s.apis,Cd),g=Ke(s.extraApis,(h,C)=>h1(h,C));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:c,parts:i,...d,...g}},Sp=t=>yc("input")(t)&&ho(t,"type")!=="radio"||yc("textarea")(t);var fk=Object.freeze({__proto__:null,getCurrent:(t,s,c)=>s.find(t)});const B2=[nt("find")],Qo=gc({fields:B2,name:"composing",apis:fk}),xp=["input","button","textarea","select"],$2=(t,s,c)=>{(s.disabled()?dv:I2)(t,s)},F2=(t,s)=>s.useNative===!0&&fo(xp,ss(t.element)),Vx=t=>$(t.element,"disabled"),Ux=t=>{Xe(t.element,"disabled","disabled")},gk=t=>{V(t.element,"disabled")},s5=t=>ho(t.element,"aria-disabled")==="true",hk=t=>{Xe(t.element,"aria-disabled","true")},pk=t=>{Xe(t.element,"aria-disabled","false")},dv=(t,s,c)=>{s.disableClass.each(d=>{Jr(t.element,d)}),(F2(t,s)?Ux:hk)(t),s.onDisabled(t)},I2=(t,s,c)=>{s.disableClass.each(d=>{ic(t.element,d)}),(F2(t,s)?gk:pk)(t),s.onEnabled(t)},mv=(t,s)=>F2(t,s)?Vx(t):s5(t);var r5=Object.freeze({__proto__:null,enable:I2,disable:dv,isDisabled:mv,onLoad:$2,set:(t,s,c,i)=>{(i?dv:I2)(t,s)}}),vk=Object.freeze({__proto__:null,exhibit:(t,s)=>Fu({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>ir([Km(ti(),(c,i)=>mv(c,t)),my(t,s,$2)])}),yk=[js("disabled",eo),Ee("useNative",!0),ms("disableClass"),rs("onDisabled"),rs("onEnabled")];const rn=gc({fields:yk,name:"disabling",active:vk,apis:r5}),Wx=(t,s,c,i)=>{const d=Li(t.element,"."+s.highlightClass);ot(d,g=>{Bs(i,C=>Bo(C.element,g))||(ic(g,s.highlightClass),t.getSystem().getByDom(g).each(C=>{s.onDehighlight(t,C),Io(C,nb())}))})},Zx=(t,s,c)=>Wx(t,s,c,[]),H2=(t,s,c,i)=>{r0(t,s,c,i)&&(ic(i.element,s.highlightClass),s.onDehighlight(t,i),Io(i,nb()))},s0=(t,s,c,i)=>{Wx(t,s,c,[i]),r0(t,s,c,i)||(Jr(i.element,s.highlightClass),s.onHighlight(t,i),Io(i,tb()))},Ck=(t,s,c)=>{l(t,s).each(i=>{s0(t,s,c,i)})},Ep=(t,s,c)=>{m(t,s).each(i=>{s0(t,s,c,i)})},z2=(t,s,c,i)=>{V2(t,s,c,i).fold(d=>{throw d},d=>{s0(t,s,c,d)})},wk=(t,s,c,i)=>{const d=D(t,s);We(d,i).each(h=>{s0(t,s,c,h)})},r0=(t,s,c,i)=>ni(i.element,s.highlightClass),fv=(t,s,c)=>Cs(t.element,"."+s.highlightClass).bind(i=>t.getSystem().getByDom(i).toOptional()),V2=(t,s,c,i)=>{const d=Li(t.element,"."+s.itemClass);return A.from(d[i]).fold(()=>ro.error(new Error("No element found with index "+i)),t.getSystem().getByDom)},l=(t,s,c)=>Cs(t.element,"."+s.itemClass).bind(i=>t.getSystem().getByDom(i).toOptional()),m=(t,s,c)=>{const i=Li(t.element,"."+s.itemClass);return(i.length>0?A.some(i[i.length-1]):A.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},p=(t,s,c,i)=>{const d=Li(t.element,"."+s.itemClass);return Tt(d,h=>ni(h,s.highlightClass)).bind(h=>{const C=ep(h,i,0,d.length-1);return t.getSystem().getByDom(d[C]).toOptional()})},v=(t,s,c)=>p(t,s,c,-1),T=(t,s,c)=>p(t,s,c,1),D=(t,s,c)=>{const i=Li(t.element,"."+s.itemClass);return Dc(Re(i,d=>t.getSystem().getByDom(d).toOptional()))};var I=Object.freeze({__proto__:null,dehighlightAll:Zx,dehighlight:H2,highlight:s0,highlightFirst:Ck,highlightLast:Ep,highlightAt:z2,highlightBy:wk,isHighlighted:r0,getHighlighted:fv,getFirst:l,getLast:m,getPrevious:v,getNext:T,getCandidates:D}),G=[nt("highlightClass"),nt("itemClass"),rs("onHighlight"),rs("onDehighlight")];const K=gc({fields:G,name:"highlighting",apis:I}),pe=[8],_e=[9],ft=[13],Ut=[27],kt=[32],_t=[37],mn=[38],ht=[39],$n=[40],rt=(t,s,c)=>{const i=ko(t.slice(0,s)),d=ko(t.slice(s+1));return We(i.concat(d),c)},Xt=(t,s,c)=>{const i=ko(t.slice(0,s));return We(i,c)},Ms=(t,s,c)=>{const i=t.slice(0,s),d=t.slice(s+1);return We(d.concat(i),c)},Ns=(t,s,c)=>{const i=t.slice(s+1);return We(i,c)},Sn=t=>s=>{const c=s.raw;return fo(t,c.which)},nr=t=>s=>bo(t,c=>c(s)),yi=t=>t.raw.shiftKey===!0,cg=t=>t.raw.ctrlKey===!0,Wu=De(yi),qo=(t,s)=>({matches:t,classification:s}),Vs=(t,s)=>We(t,i=>i.matches(s)).map(i=>i.classification),Ga=(t,s,c)=>{s.exists(d=>c.exists(g=>Bo(g,d)))||kn(t,m1(),{prevFocus:s,newFocus:c})},na=()=>{const t=c=>vi(c.element);return{get:t,set:(c,i)=>{const d=t(c);c.getSystem().triggerFocus(i,c.element);const g=t(c);Ga(c,d,g)}}},hu=()=>{const t=c=>K.getHighlighted(c).map(i=>i.element);return{get:t,set:(c,i)=>{const d=t(c);c.getSystem().getByDom(i).fold(oe,h=>{K.highlight(c,h)});const g=t(c);Ga(c,d,g)}}};var qa;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(qa||(qa={}));const Zu=(t,s,c,i,d)=>{const g=()=>t.concat([Ee("focusManager",na()),Wi("focusInside","onFocus",kg(k=>fo(["onFocus","onEnterOrSpace","onApi"],k)?ro.value(k):ro.error("Invalid value for focusInside"))),gr("handler",w),gr("state",s),gr("sendFocusIn",d)]),h=(k,O,P,H,j)=>{const Q=P(k,O,H,j);return Vs(Q,O.event).bind(te=>te(k,O,H,j))},w={schema:g,processKey:h,toEvents:(k,O)=>{const P=k.focusInside!==qa.OnFocusMode?A.none():d(k).map(Q=>Ye(sm(),(te,we)=>{Q(te,k,O),we.stop()})),H=(Q,te)=>{const we=Sn(kt.concat(ft))(te.event);k.focusInside===qa.OnEnterOrSpaceMode&&we&&Um(Q,te)&&d(k).each(ce=>{ce(Q,k,O),te.stop()})},j=[Ye(za(),(Q,te)=>{h(Q,te,c,k,O).fold(()=>{H(Q,te)},we=>{te.stop()})}),Ye(eb(),(Q,te)=>{h(Q,te,i,k,O).each(we=>{te.stop()})})];return ir(P.toArray().concat(j))}};return w},Ci=t=>{const s=[ms("onEscape"),ms("onEnter"),Ee("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Ee("firstTabstop",0),Ee("useTabstopAt",Bt),ms("visibilitySelector")].concat([t]),c=(ce,xe)=>{const Ce=ce.visibilitySelector.bind(Pe=>Lu(xe,Pe)).getOr(xe);return Pr(Ce)>0},i=(ce,xe)=>{const Ce=Li(ce.element,xe.selector),Pe=to(Ce,Fe=>c(xe,Fe));return A.from(Pe[xe.firstTabstop])},d=(ce,xe)=>xe.focusManager.get(ce).bind(Ce=>Lu(Ce,xe.selector)),g=(ce,xe)=>c(ce,xe)&&ce.useTabstopAt(xe),h=(ce,xe,Ce)=>{i(ce,xe).each(Pe=>{xe.focusManager.set(ce,Pe)})},C=(ce,xe,Ce,Pe,Fe)=>Fe(xe,Ce,Lt=>g(Pe,Lt)).fold(()=>Pe.cyclic?A.some(!0):A.none(),Lt=>(Pe.focusManager.set(ce,Lt),A.some(!0))),w=(ce,xe,Ce,Pe)=>{const Fe=to(Li(ce.element,Ce.selector),Lt=>c(Ce,Lt));return d(ce,Ce).bind(Lt=>Tt(Fe,On(Bo,Lt)).bind(He=>C(ce,Fe,He,Ce,Pe)))},k=(ce,xe,Ce)=>{const Pe=Ce.cyclic?rt:Xt;return w(ce,xe,Ce,Pe)},O=(ce,xe,Ce)=>{const Pe=Ce.cyclic?Ms:Ns;return w(ce,xe,Ce,Pe)},P=ce=>ol(ce).bind(Vi).exists(xe=>Bo(xe,ce)),H=(ce,xe,Ce)=>d(ce,Ce).filter(Pe=>!Ce.useTabstopAt(Pe)).bind(Pe=>(P(Pe)?k:O)(ce,xe,Ce)),j=(ce,xe,Ce)=>Ce.onEnter.bind(Pe=>Pe(ce,xe)),Q=(ce,xe,Ce)=>Ce.onEscape.bind(Pe=>Pe(ce,xe)),te=Z([qo(nr([yi,Sn(_e)]),k),qo(Sn(_e),O),qo(nr([Wu,Sn(ft)]),j)]),we=Z([qo(Sn(Ut),Q),qo(Sn(_e),H)]);return Zu(s,iu.init,te,we,()=>A.some(h))};var U2=Ci(ls("cyclic",eo)),c0=Ci(ls("cyclic",Bt));const ym=(t,s,c)=>(ob(t,c,ti()),A.some(!0)),oa=(t,s,c)=>Sp(c)&&Sn(kt)(s.event)?A.none():ym(t,s,c),lf=(t,s)=>A.some(!0),Sk=[Ee("execute",oa),Ee("useSpace",!1),Ee("useEnter",!0),Ee("useControlEnter",!1),Ee("useDown",!1)],W2=(t,s,c)=>c.execute(t,s,t.element),xk=(t,s,c,i)=>{const d=c.useSpace&&!Sp(t.element)?kt:[],g=c.useEnter?ft:[],h=c.useDown?$n:[],C=d.concat(g).concat(h);return[qo(Sn(C),W2)].concat(c.useControlEnter?[qo(nr([cg,Sn(ft)]),W2)]:[])},Z2=(t,s,c,i)=>c.useSpace&&!Sp(t.element)?[qo(Sn(kt),lf)]:[];var j2=Zu(Sk,iu.init,xk,Z2,()=>A.none());const jx=()=>{const t=ys();return Vl({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var Ek=Object.freeze({__proto__:null,flatgrid:jx,init:t=>t.state(t)});const c5=t=>(s,c,i,d)=>{const g=t(s.element);return _k(g,s,c,i,d)},Gx=(t,s)=>{const c=Qy(t,s);return c5(c)},Tk=(t,s)=>{const c=Qy(s,t);return c5(c)},kk=t=>(s,c,i,d)=>_k(t,s,c,i,d),_k=(t,s,c,i,d)=>i.focusManager.get(s).bind(h=>t(s.element,h,i,d)).map(h=>(i.focusManager.set(s,h),!0)),a5=kk,i5=kk,gv=kk,l5=t=>t.offsetWidth<=0&&t.offsetHeight<=0,G2=t=>!l5(t.dom),qx=(t,s)=>Tt(t,s).map(c=>({index:c,candidates:t})),q2=(t,s,c)=>{const i=h=>Bo(h,s),d=Li(t,c),g=to(d,G2);return qx(g,i)},Tp=(t,s)=>Tt(t,c=>Bo(s,c)),OI=(t,s,c,i)=>{const d=Math.floor(s/c),g=s%c;return i(d,g).bind(h=>{const C=h.row*c+h.column;return C>=0&&C<t.length?A.some(t[C]):A.none()})},u5=(t,s,c,i,d)=>OI(t,s,i,(g,h)=>{const w=g===c-1?t.length-g*i:i,k=ep(h,d,0,w-1);return A.some({row:g,column:k})}),d5=(t,s,c,i,d)=>OI(t,s,i,(g,h)=>{const C=ep(g,d,0,c-1),k=C===c-1?t.length-C*i:i,O=du(h,0,k-1);return A.some({row:C,column:O})}),m5=(t,s,c,i)=>u5(t,s,c,i,1),DI=(t,s,c,i)=>u5(t,s,c,i,-1),hG=(t,s,c,i)=>d5(t,s,c,i,-1),pG=(t,s,c,i)=>d5(t,s,c,i,1),RI=[nt("selector"),Ee("execute",oa),pi("onEscape"),Ee("captureTab",!1),qf()],MI=(t,s,c)=>{Cs(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},Ak=(t,s)=>s.focusManager.get(t).bind(c=>Lu(c,s.selector)),NI=(t,s,c,i)=>Ak(t,c).bind(d=>c.execute(t,s,d)),Kx=t=>(s,c,i,d)=>q2(s,c,i.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(i.initSize.numRows),d.getNumColumns().getOr(i.initSize.numColumns))),f5=(t,s,c)=>c.captureTab?A.some(!0):A.none(),g5=(t,s,c)=>c.onEscape(t,s),h5=Kx(DI),p5=Kx(m5),b5=Kx(hG),v5=Kx(pG),PI=Z([qo(Sn(_t),Gx(h5,p5)),qo(Sn(ht),Tk(h5,p5)),qo(Sn(mn),a5(b5)),qo(Sn($n),i5(v5)),qo(nr([yi,Sn(_e)]),f5),qo(nr([Wu,Sn(_e)]),f5),qo(Sn(kt.concat(ft)),NI)]),y5=Z([qo(Sn(Ut),g5),qo(Sn(kt),lf)]);var BI=Zu(RI,jx,PI,y5,()=>A.some(MI));const Yx=(t,s,c,i,d)=>{const g=C=>ss(C)==="button"&&ho(C,"disabled")==="disabled",h=(C,w,k)=>d(C,w,i,0,k.length-1,k[w],O=>g(k[O])?h(C,O,k):A.from(k[O]));return q2(t,c,s).bind(C=>{const w=C.index,k=C.candidates;return h(w,w,k)})},Ok=(t,s,c,i)=>Yx(t,s,c,i,(d,g,h,C,w,k,O)=>{const P=du(g+h,C,w);return P===d?A.from(k):O(P)}),K2=(t,s,c,i)=>Yx(t,s,c,i,(d,g,h,C,w,k,O)=>{const P=ep(g,h,C,w);return P===d?A.none():O(P)}),C5=[nt("selector"),Ee("getInitial",A.none),Ee("execute",oa),pi("onEscape"),Ee("executeOnMove",!1),Ee("allowVertical",!0),Ee("allowHorizontal",!0),Ee("cycles",!0)],$I=(t,s)=>s.focusManager.get(t).bind(c=>Lu(c,s.selector)),Dk=(t,s,c)=>$I(t,c).bind(i=>c.execute(t,s,i)),FI=(t,s,c)=>{s.getInitial(t).orThunk(()=>Cs(t.element,s.selector)).each(i=>{s.focusManager.set(t,i)})},w5=(t,s,c)=>(c.cycles?K2:Ok)(t,c.selector,s,-1),S5=(t,s,c)=>(c.cycles?K2:Ok)(t,c.selector,s,1),hv=t=>(s,c,i,d)=>t(s,c,i,d).bind(()=>i.executeOnMove?Dk(s,c,i):A.some(!0)),x5=(t,s,c)=>c.onEscape(t,s),E5=(t,s,c,i)=>{const d=[...c.allowHorizontal?_t:[]].concat(c.allowVertical?mn:[]),g=[...c.allowHorizontal?ht:[]].concat(c.allowVertical?$n:[]);return[qo(Sn(d),hv(Gx(w5,S5))),qo(Sn(g),hv(Tk(w5,S5))),qo(Sn(ft),Dk),qo(Sn(kt),Dk)]},T5=Z([qo(Sn(kt),lf),qo(Sn(Ut),x5)]);var k5=Zu(C5,iu.init,E5,T5,()=>A.some(FI));const Y2=(t,s,c)=>A.from(t[s]).bind(i=>A.from(i[c]).map(d=>({rowIndex:s,columnIndex:c,cell:d}))),_5=(t,s,c,i)=>{const g=t[s].length,h=ep(c,i,0,g-1);return Y2(t,s,h)},A5=(t,s,c,i)=>{const d=ep(c,i,0,t.length-1),g=t[d].length,h=du(s,0,g-1);return Y2(t,d,h)},O5=(t,s,c,i)=>{const g=t[s].length,h=du(c+i,0,g-1);return Y2(t,s,h)},Xx=(t,s,c,i)=>{const d=du(c+i,0,t.length-1),g=t[d].length,h=du(s,0,g-1);return Y2(t,d,h)},II=(t,s,c)=>_5(t,s,c,1),Jx=(t,s,c)=>_5(t,s,c,-1),LI=(t,s,c)=>A5(t,c,s,-1),D5=(t,s,c)=>A5(t,c,s,1),Sl=(t,s,c)=>O5(t,s,c,-1),HI=(t,s,c)=>O5(t,s,c,1),R5=(t,s,c)=>Xx(t,c,s,-1),M5=(t,s,c)=>Xx(t,c,s,1),zI=[Du("selectors",[nt("row"),nt("cell")]),Ee("cycles",!0),Ee("previousSelector",A.none),Ee("execute",oa)],N5=(t,s,c)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return Cs(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},P5=(t,s,c)=>vi(t.element).bind(i=>c.execute(t,s,i)),VI=(t,s)=>Re(t,c=>Li(c,s.selectors.cell)),Qx=(t,s)=>(c,i,d)=>{const g=d.cycles?t:s;return Lu(i,d.selectors.row).bind(h=>{const C=Li(h,d.selectors.cell);return Tp(C,i).bind(w=>{const k=Li(c,d.selectors.row);return Tp(k,h).bind(O=>{const P=VI(k,d);return g(P,O,w).map(H=>H.cell)})})})},B5=Qx(Jx,Sl),$5=Qx(II,HI),F5=Qx(LI,R5),UI=Qx(D5,M5),WI=Z([qo(Sn(_t),Gx(B5,$5)),qo(Sn(ht),Tk(B5,$5)),qo(Sn(mn),a5(F5)),qo(Sn($n),i5(UI)),qo(Sn(kt.concat(ft)),P5)]),I5=Z([qo(Sn(kt),lf)]);var L5=Zu(zI,iu.init,WI,I5,()=>A.some(N5));const H5=[nt("selector"),Ee("execute",oa),Ee("moveOnTab",!1)],z5=(t,s,c)=>c.focusManager.get(t).bind(i=>c.execute(t,s,i)),ZI=(t,s,c)=>{Cs(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},V5=(t,s,c)=>K2(t,c.selector,s,-1),U5=(t,s,c)=>K2(t,c.selector,s,1),W5=(t,s,c,i)=>c.moveOnTab?gv(V5)(t,s,c,i):A.none(),Z5=(t,s,c,i)=>c.moveOnTab?gv(U5)(t,s,c,i):A.none(),kp=Z([qo(Sn(mn),gv(V5)),qo(Sn($n),gv(U5)),qo(nr([yi,Sn(_e)]),W5),qo(nr([Wu,Sn(_e)]),Z5),qo(Sn(ft),z5),qo(Sn(kt),z5)]),j5=Z([qo(Sn(kt),lf)]);var G5=Zu(H5,iu.init,kp,j5,()=>A.some(ZI));const q5=[pi("onSpace"),pi("onEnter"),pi("onShiftEnter"),pi("onLeft"),pi("onRight"),pi("onTab"),pi("onShiftTab"),pi("onUp"),pi("onDown"),pi("onEscape"),Ee("stopSpaceKeyup",!1),ms("focusIn")],jI=(t,s,c)=>[qo(Sn(kt),c.onSpace),qo(nr([Wu,Sn(ft)]),c.onEnter),qo(nr([yi,Sn(ft)]),c.onShiftEnter),qo(nr([yi,Sn(_e)]),c.onShiftTab),qo(nr([Wu,Sn(_e)]),c.onTab),qo(Sn(mn),c.onUp),qo(Sn($n),c.onDown),qo(Sn(_t),c.onLeft),qo(Sn(ht),c.onRight),qo(Sn(kt),c.onSpace)],pv=(t,s,c)=>[...c.stopSpaceKeyup?[qo(Sn(kt),lf)]:[],qo(Sn(Ut),c.onEscape)];var GI=Zu(q5,iu.init,jI,pv,t=>t.focusIn);const qI=U2.schema(),K5=c0.schema(),KI=k5.schema(),YI=BI.schema(),XI=L5.schema(),Y5=j2.schema(),Rk=G5.schema(),Mk=GI.schema();var JI=Object.freeze({__proto__:null,acyclic:qI,cyclic:K5,flow:KI,flatgrid:YI,matrix:XI,execution:Y5,menu:Rk,special:Mk});const _p=t=>dr(t,"setGridSize"),En=Ww({branchKey:"mode",branches:JI,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,c)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},i=>{i(t,s,c)})},setGridSize:(t,s,c,i,d)=>{_p(c)?c.setGridSize(i,d):console.error("Layout does not support setGridSize")}},state:Ek}),Nk=(t,s)=>{Uy(()=>{J1(t,s,()=>Re(s,t.getSystem().build))},t.element)},X5=(t,s)=>{Uy(()=>{px(t,s,()=>mS(t.element,s,t.getSystem().buildOrPatch))},t.element)},QI=(t,s,c,i)=>{Yb(s);const d=Iu(t.element,c,i,t.getSystem().buildOrPatch);gx(t,d),t.syncComponents()},i0=(t,s,c)=>{const i=t.getSystem().build(c);jl(t,i,s)},X2=(t,s,c,i)=>{Sd(s),i0(t,(d,g)=>$m(d,g,c),i)},J5=(t,s,c,i)=>(s.reuseDom?X5:Nk)(t,i),Pk=(t,s,c,i)=>{i0(t,Ai,i)},Ap=(t,s,c,i)=>{i0(t,Bm,i)},Op=(t,s,c,i)=>{const d=eE(t);We(d,h=>Bo(i.element,h.element)).each(Sd)},eE=(t,s)=>t.components(),Q5=(t,s,c,i,d)=>{const g=eE(t);return A.from(g[i]).map(h=>(d.fold(()=>Sd(h),C=>{(s.reuseDom?QI:X2)(t,h,i,C)}),h))};var ch=Object.freeze({__proto__:null,append:Pk,prepend:Ap,remove:Op,replaceAt:Q5,replaceBy:(t,s,c,i,d)=>{const g=eE(t);return Tt(g,i).bind(h=>Q5(t,s,c,h,d))},set:J5,contents:eE});const Kn=gc({fields:[Ur("reuseDom",!0)],name:"replacing",apis:ch}),t7=(t,s)=>{const c=ir(s);return gc({fields:[nt("enabled")],name:t,active:{events:Z(c)}})},Qn=(t,s)=>{const c=t7(t,s);return{key:t,value:{config:{},me:c,configAsRaw:Z({}),initialConfig:{},state:iu}}},Bk=(t,s)=>{s.ignore||(bi(t.element),s.onFocus(t))};var tM=Object.freeze({__proto__:null,focus:Bk,blur:(t,s)=>{s.ignore||mm(t.element)},isFocused:t=>ea(t.element)}),o7=Object.freeze({__proto__:null,exhibit:(t,s)=>{const c=s.ignore?{}:{attributes:{tabindex:"-1"}};return Fu(c)},events:t=>ir([Ye(sm(),(s,c)=>{Bk(s,t),c.stop()})].concat(t.stopMousedown?[Ye(Mi(),(s,c)=>{c.event.prevent()})]:[]))}),tE=[rs("onFocus"),Ee("stopMousedown",!1),Ee("ignore",!1)];const zn=gc({fields:tE,name:"focusing",active:o7,apis:tM}),nE=t=>({init:()=>{const c=pn(t);return{get:()=>c.get(),set:C=>c.set(C),clear:()=>c.set(t),readState:()=>c.get()}}}),nM=(t,s,c)=>{const i=s.aria;i.update(t,i,c.get())},s7=(t,s,c)=>{s.toggleClass.each(i=>{c.get()?Jr(t.element,i):ic(t.element,i)})},bv=(t,s,c,i)=>{const d=c.get();c.set(i),s7(t,s,c),nM(t,s,c),d!==i&&s.onToggled(t,i)},$k=(t,s,c)=>{bv(t,s,c,!c.get())},oM=(t,s,c)=>{bv(t,s,c,!0)},sM=(t,s,c)=>{bv(t,s,c,!1)},r7=(t,s,c)=>c.get(),oE=(t,s,c)=>{bv(t,s,c,s.selected)};var c7=Object.freeze({__proto__:null,onLoad:oE,toggle:$k,isOn:r7,on:oM,off:sM,set:bv}),a7=Object.freeze({__proto__:null,exhibit:()=>Fu({}),events:(t,s)=>{const c=Wh(t,s,$k),i=my(t,s,oE);return ir(et([t.toggleOnExecute?[c]:[],[i]]))}});const rM=(t,s,c)=>{Xe(t.element,"aria-pressed",c),s.syncWithExpanded&&Fk(t,s,c)},i7=(t,s,c)=>{Xe(t.element,"aria-selected",c)},l7=(t,s,c)=>{Xe(t.element,"aria-checked",c)},Fk=(t,s,c)=>{Xe(t.element,"aria-expanded",c)};var J2=[Ee("selected",!1),ms("toggleClass"),Ee("toggleOnExecute",!0),rs("onToggled"),Wi("aria",{mode:"none"},Nc("mode",{pressed:[Ee("syncWithExpanded",!1),gr("update",rM)],checked:[gr("update",l7)],expanded:[gr("update",Fk)],selected:[gr("update",i7)],none:[gr("update",oe)]}))];const Ao=gc({fields:J2,name:"toggling",active:a7,apis:c7,state:nE(!1)}),vv=()=>{const t=(s,c)=>{c.stop(),Ni(s)};return[Ye(om(),t),Ye(u1(),t),If(zo()),If(Mi())]},yv=t=>{const s=c=>Ym((i,d)=>{c(i),d.stop()});return ir(et([t.map(s).toArray(),vv()]))},Ik="alloy.item-hover",Lk="alloy.item-focus",cM="alloy.item-toggled",aM=t=>{(vi(t.element).isNone()||zn.isFocused(t))&&(zn.isFocused(t)||zn.focus(t),kn(t,Ik,{item:t}))},Hk=t=>{kn(t,Lk,{item:t})},u7=(t,s)=>{kn(t,cM,{item:t,state:s})},zk=Z(Ik),d7=Z(Lk),m7=Z(cM),iM=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),Mt),sE=(t,s)=>({aria:{mode:s?"selected":"checked"},...bs(t,(c,i)=>i!=="exclusive"),onToggled:(c,i)=>{Rt(t.onToggled)&&t.onToggled(c,i),u7(c,i)}}),Vk=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:iM(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:ql.augment(t.itemBehaviours,[t.toggling.fold(Ao.revoke,s=>Ao.config(sE(s,t.role.exists(c=>c==="option")))),zn.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{Hk(s)}}),En.config({mode:"execution"}),qt.config({store:{mode:"memory",initialValue:t.data}}),Qn("item-type-events",[...vv(),Ye(Mu(),aM),Ye(Og(),zn.focus)])]),components:t.components,eventOrder:t.eventOrder}),Uk=[nt("data"),nt("components"),nt("dom"),Ee("hasSubmenu",!1),ms("toggling"),ms("role"),ql.field("itemBehaviours",[Ao,zn,En,qt]),Ee("ignoreFocus",!1),Ee("domModification",{}),gr("builder",Vk),Ee("eventOrder",{})],f7=t=>({dom:t.dom,components:t.components,events:ir([cb(Og())])}),g7=[nt("dom"),nt("components"),gr("builder",f7)],Wk=Z("item-widget"),Zk=Z([ja({name:"widget",overrides:t=>({behaviours:xt([qt.config({store:{mode:"manual",getValue:s=>t.data,setValue:oe}})])})})]),lM=t=>{const s=av(Wk(),t,Zk()),c=R2(Wk(),t,s.internals()),i=g=>tr(g,t,"widget").map(h=>(En.focusIn(h),h)),d=(g,h)=>Sp(h.event.target)?A.none():(t.autofocus&&h.setSource(g.element),A.none());return{dom:t.dom,components:c,domModification:t.domModification,events:ir([Ym((g,h)=>{i(g).each(C=>{h.stop()})}),Ye(Mu(),aM),Ye(Og(),(g,h)=>{t.autofocus?i(g):zn.focus(g)})]),behaviours:ql.augment(t.widgetBehaviours,[qt.config({store:{mode:"memory",initialValue:t.data}}),zn.config({ignore:t.ignoreFocus,onFocus:g=>{Hk(g)}}),En.config({mode:"special",focusIn:t.autofocus?g=>{i(g)}:p1(),onLeft:d,onRight:d,onEscape:(g,h)=>!zn.isFocused(g)&&!t.autofocus?(zn.focus(g),A.some(!0)):(t.autofocus&&h.setSource(g.element),A.none())})])}},uM=[nt("uid"),nt("data"),nt("components"),nt("dom"),Ee("autofocus",!1),Ee("ignoreFocus",!1),ql.field("widgetBehaviours",[qt,zn,En]),Ee("domModification",{}),wp(Zk()),gr("builder",lM)],h7=Nc("type",{widget:uM,item:Uk,separator:g7}),p7=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),b7=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),v7=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),y7=Z([rh({factory:{sketch:t=>{const s=Qa("menu.spec item",h7,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>uo(s,"uid")?s:{...s,uid:Hg("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),C7=Z([$r("role"),nt("value"),nt("items"),nt("dom"),nt("components"),Ee("eventOrder",{}),ga("menuBehaviours",[K,qt,Qo,En]),Wi("movement",{mode:"menu",moveOnTab:!0},Nc("mode",{grid:[qf(),gr("config",p7)],matrix:[gr("config",b7),nt("rowSelector"),Ee("previousSelector",A.none)],menu:[Ee("moveOnTab",!0),gr("config",v7)]})),wy(),Ee("fakeFocus",!1),Ee("focusManager",na()),rs("onHighlight"),rs("onDehighlight"),Ee("showMenuRole",!0)]),jk=Z("alloy.menu-focus"),w7=(t,s)=>{const c=Li(t.element,'[role="menuitemradio"][aria-checked="true"]');ot(c,i=>{Bo(i,s.element)||t.getSystem().getByDom(i).each(d=>{Ao.off(d)})})},S7=(t,s,c,i)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:hc(t.menuBehaviours,[K.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),qt.config({store:{mode:"memory",initialValue:t.value}}),Qo.config({find:A.some}),En.config(t.movement.config(t,t.movement))]),events:ir([Ye(d7(),(d,g)=>{const h=g.event;d.getSystem().getByDom(h.target).each(C=>{K.highlight(d,C),g.stop(),kn(d,jk(),{menu:d,item:C})})}),Ye(zk(),(d,g)=>{const h=g.event.item;K.highlight(d,h)}),Ye(m7(),(d,g)=>{const{item:h,state:C}=g.event;C&&ho(h.element,"role")==="menuitemradio"&&w7(d,h)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),l0=si({name:"Menu",configFields:C7(),partFields:y7(),factory:S7}),x7=t=>Gt(t,(s,c)=>({k:s,v:c})),dM=(t,s,c,i)=>Ct(c,i).bind(d=>Ct(t,d).bind(g=>{const h=dM(t,s,c,g);return A.some([g].concat(h))})).getOr([]),u0=(t,s)=>{const c={};xs(t,(h,C)=>{ot(h,w=>{c[w]=C})});const i=s,d=x7(s),g=Ke(d,(h,C)=>[C].concat(dM(c,i,d,C)));return Ke(c,h=>Ct(g,h).getOr([h]))},E7=()=>{const t=pn({}),s=pn({}),c=pn({}),i=ys(),d=pn({}),g=()=>{t.set({}),s.set({}),c.set({}),i.clear()},h=()=>i.get().isNone(),C=(Fe,Lt)=>{s.set({...s.get(),[Fe]:{type:"prepared",menu:Lt}})},w=(Fe,Lt,bt,He)=>{i.set(Fe),t.set(bt),s.set(Lt),d.set(He);const Zt=u0(He,bt);c.set(Zt)},k=Fe=>Yn(t.get(),(Lt,bt)=>Lt===Fe),O=(Fe,Lt,bt)=>te(Fe).bind(He=>k(Fe).bind(Zt=>Lt(Zt).map(Pt=>({triggeredMenu:He,triggeringItem:Pt,triggeringPath:bt})))),P=(Fe,Lt)=>{const bt=to(ce(Fe).toArray(),He=>te(He).isSome());return Ct(c.get(),Fe).bind(He=>{const Zt=ko(bt.concat(He)),Pt=fe(Zt,(en,Do)=>O(en,Lt,Zt.slice(0,Do+1)).fold(()=>vr(i.get(),en)?[]:[A.none()],or=>[A.some(or)]));return us(Pt)})},H=Fe=>Ct(t.get(),Fe).map(Lt=>{const bt=Ct(c.get(),Fe).getOr([]);return[Lt].concat(bt)}),j=Fe=>Ct(c.get(),Fe).bind(Lt=>Lt.length>1?A.some(Lt.slice(1)):A.none()),Q=Fe=>Ct(c.get(),Fe),te=Fe=>we(Fe).bind(mM),we=Fe=>Ct(s.get(),Fe),ce=Fe=>Ct(t.get(),Fe);return{setMenuBuilt:C,setContents:w,expand:H,refresh:Q,collapse:j,lookupMenu:we,lookupItem:ce,otherMenus:Fe=>{const Lt=d.get();return jt(os(Lt),Fe)},getPrimary:()=>i.get().bind(te),getMenus:()=>s.get(),clear:g,isClear:h,getTriggeringPath:P}},mM=t=>t.type==="prepared"?A.some(t.menu):A.none(),Dp={init:E7,extractPreparedMenu:mM},Gk=Kt("tiered-menu-item-highlight"),fM=Kt("tiered-menu-item-dehighlight");var ha;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(ha||(ha={}));const T7=(t,s)=>{const c=ys(),i=(vt,Wt,Zn)=>Ke(Zn,(yo,Nn)=>{const co=()=>l0.sketch({...yo,value:Nn,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Ys,Ws)=>{kn(Ys,Gk,{menuComp:Ys,itemComp:Ws})},onDehighlight:(Ys,Ws)=>{kn(Ys,fM,{menuComp:Ys,itemComp:Ws})},focusManager:t.fakeFocus?hu():na()});return Nn===Wt?{type:"prepared",menu:vt.getSystem().build(co())}:{type:"notbuilt",nbMenu:co}}),d=Dp.init(),g=vt=>{const Wt=i(vt,t.data.primary,t.data.menus),Zn=w();return d.setContents(t.data.primary,Wt,t.data.expansions,Zn),d.getPrimary()},h=vt=>qt.getValue(vt).value,C=(vt,Wt,Zn)=>ps(Wt,yo=>{if(!yo.getSystem().isConnected())return A.none();const Nn=K.getCandidates(yo);return We(Nn,co=>h(co)===Zn)}),w=vt=>Ke(t.data.menus,(Wt,Zn)=>fe(Wt.items,yo=>yo.type==="separator"?[]:[yo.data.value])),k=K.highlight,O=(vt,Wt)=>{k(vt,Wt),K.getHighlighted(Wt).orThunk(()=>K.getFirst(Wt)).each(Zn=>{t.fakeFocus?K.highlight(Wt,Zn):ob(vt,Zn.element,Og())})},P=(vt,Wt)=>Dc(Re(Wt,Zn=>vt.lookupMenu(Zn).bind(yo=>yo.type==="prepared"?A.some(yo.menu):A.none()))),H=(vt,Wt,Zn)=>{const yo=P(Wt,Wt.otherMenus(Zn));ot(yo,Nn=>{lu(Nn.element,[t.markers.backgroundMenu]),t.stayInDom||Kn.remove(vt,Nn)})},j=vt=>c.get().getOrThunk(()=>{const Wt={},Zn=Li(vt.element,`.${t.markers.item}`),yo=to(Zn,Nn=>ho(Nn,"aria-haspopup")==="true");return ot(yo,Nn=>{vt.getSystem().getByDom(Nn).each(co=>{const Ys=h(co);Wt[Ys]=co})}),c.set(Wt),Wt}),Q=(vt,Wt)=>{const Zn=j(vt);xs(Zn,(yo,Nn)=>{const co=fo(Wt,Nn);Xe(yo.element,"aria-expanded",co)})},te=(vt,Wt,Zn)=>A.from(Zn[0]).bind(yo=>Wt.lookupMenu(yo).bind(Nn=>{if(Nn.type==="notbuilt")return A.none();{const co=Nn.menu,Ys=P(Wt,Zn.slice(1));return ot(Ys,Ws=>{Jr(Ws.element,t.markers.backgroundMenu)}),se(co.element)||Kn.append(vt,Cl(co)),lu(co.element,[t.markers.backgroundMenu]),O(vt,co),H(vt,Wt,Zn),A.some(co)}}));let we;(function(vt){vt[vt.HighlightSubmenu=0]="HighlightSubmenu",vt[vt.HighlightParent=1]="HighlightParent"})(we||(we={}));const ce=(vt,Wt,Zn)=>{if(Zn.type==="notbuilt"){const yo=vt.getSystem().build(Zn.nbMenu());return d.setMenuBuilt(Wt,yo),yo}else return Zn.menu},xe=(vt,Wt,Zn=we.HighlightSubmenu)=>{if(Wt.hasConfigured(rn)&&rn.isDisabled(Wt))return A.some(Wt);{const yo=h(Wt);return d.expand(yo).bind(Nn=>(Q(vt,Nn),A.from(Nn[0]).bind(co=>d.lookupMenu(co).bind(Ys=>{const Ws=ce(vt,co,Ys);return se(Ws.element)||Kn.append(vt,Cl(Ws)),t.onOpenSubmenu(vt,Wt,Ws,ko(Nn)),Zn===we.HighlightSubmenu?(K.highlightFirst(Ws),te(vt,d,Nn)):(K.dehighlightAll(Ws),A.some(Wt))}))))}},Ce=(vt,Wt)=>{const Zn=h(Wt);return d.collapse(Zn).bind(yo=>(Q(vt,yo),te(vt,d,yo).map(Nn=>(t.onCollapseMenu(vt,Wt,Nn),Nn))))},Pe=(vt,Wt)=>{const Zn=h(Wt);return d.refresh(Zn).bind(yo=>(Q(vt,yo),te(vt,d,yo)))},Fe=(vt,Wt)=>Sp(Wt.element)?A.none():xe(vt,Wt,we.HighlightSubmenu),Lt=(vt,Wt)=>Sp(Wt.element)?A.none():Ce(vt,Wt),bt=(vt,Wt)=>Ce(vt,Wt).orThunk(()=>t.onEscape(vt,Wt).map(()=>vt)),He=vt=>(Wt,Zn)=>Lu(Zn.getSource(),`.${t.markers.item}`).bind(yo=>Wt.getSystem().getByDom(yo).toOptional().bind(Nn=>vt(Wt,Nn).map(Bt))),Zt=ir([Ye(jk(),(vt,Wt)=>{const Zn=Wt.event.item;d.lookupItem(h(Zn)).each(()=>{const yo=Wt.event.menu;K.highlight(vt,yo);const Nn=h(Wt.event.item);d.refresh(Nn).each(co=>H(vt,d,co))})}),Ym((vt,Wt)=>{const Zn=Wt.event.target;vt.getSystem().getByDom(Zn).each(yo=>{h(yo).indexOf("collapse-item")===0&&Ce(vt,yo),xe(vt,yo,we.HighlightSubmenu).fold(()=>{t.onExecute(vt,yo)},oe)})}),Gs((vt,Wt)=>{g(vt).each(Zn=>{Kn.append(vt,Cl(Zn)),t.onOpenMenu(vt,Zn),t.highlightOnOpen===ha.HighlightMenuAndItem?O(vt,Zn):t.highlightOnOpen===ha.HighlightJustMenu&&k(vt,Zn)})}),Ye(Gk,(vt,Wt)=>{t.onHighlightItem(vt,Wt.event.menuComp,Wt.event.itemComp)}),Ye(fM,(vt,Wt)=>{t.onDehighlightItem(vt,Wt.event.menuComp,Wt.event.itemComp)}),...t.navigateOnHover?[Ye(zk(),(vt,Wt)=>{const Zn=Wt.event.item;Pe(vt,Zn),xe(vt,Zn,we.HighlightParent),t.onHover(vt,Zn)})]:[]]),Pt=vt=>K.getHighlighted(vt).bind(K.getHighlighted),en=vt=>{Pt(vt).each(Wt=>{Ce(vt,Wt)})},Do=vt=>{d.getPrimary().each(Wt=>{O(vt,Wt)})},or=vt=>A.from(vt.components()[0]).filter(Wt=>ho(Wt.element,"role")==="menu"),vn={collapseMenu:en,highlightPrimary:Do,repositionMenus:vt=>{d.getPrimary().bind(Zn=>Pt(vt).bind(yo=>{const Nn=h(yo),co=Er(d.getMenus()),Ys=Dc(Re(co,Dp.extractPreparedMenu));return d.getTriggeringPath(Nn,Ws=>C(vt,Ys,Ws))}).map(yo=>({primary:Zn,triggeringPath:yo}))).fold(()=>{or(vt).each(Zn=>{t.onRepositionMenu(vt,Zn,[])})},({primary:Zn,triggeringPath:yo})=>{t.onRepositionMenu(vt,Zn,yo)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:hc(t.tmenuBehaviours,[En.config({mode:"special",onRight:He(Fe),onLeft:He(Lt),onEscape:He(bt),focusIn:(vt,Wt)=>{d.getPrimary().each(Zn=>{ob(vt,Zn.element,Og())})}}),K.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Qo.config({find:vt=>K.getHighlighted(vt)}),Kn.config({})]),eventOrder:t.eventOrder,apis:vn,events:Zt}},k7=Z("collapse-item"),Ed=(t,s,c)=>({primary:t,menus:s,expansions:c}),gM=(t,s)=>({primary:t,menus:Ds(t,s),expansions:{}}),hM=t=>({value:Kt(k7()),meta:{text:t}}),Rp=Ji({name:"TieredMenu",configFields:[Sy("onExecute"),Sy("onEscape"),Wl("onOpenMenu"),Wl("onOpenSubmenu"),rs("onRepositionMenu"),rs("onCollapseMenu"),Ee("highlightOnOpen",ha.HighlightMenuAndItem),Du("data",[nt("primary"),nt("menus"),nt("expansions")]),Ee("fakeFocus",!1),rs("onHighlightItem"),rs("onDehighlightItem"),rs("onHover"),k1(),nt("dom"),Ee("navigateOnHover",!0),Ee("stayInDom",!1),ga("tmenuBehaviours",[En,K,Qo,Kn]),Ee("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:T7,extraApis:{tieredData:Ed,singleData:gM,collapseItem:hM}}),_7=(t,s,c,i,d)=>{const g=()=>t.lazySink(s),h=i.type==="horizontal"?{layouts:{onLtr:()=>sn(),onRtl:()=>Wg()}}:{},C=k=>k.length===2,w=k=>C(k)?h:{};return Rp.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(cs.close(s),t.onEscape.map(k=>k(s)),A.some(!0)),onExecute:()=>A.some(!0),onOpenMenu:(k,O)=>{Wa.positionWithinBounds(g().getOrDie(),O,c,d())},onOpenSubmenu:(k,O,P,H)=>{const j=g().getOrDie();Wa.position(j,P,{anchor:{type:"submenu",item:O,...w(H)}})},onRepositionMenu:(k,O,P)=>{const H=g().getOrDie();Wa.positionWithinBounds(H,O,c,d()),ot(P,j=>{const Q=w(j.triggeringPath);Wa.position(H,j.triggeredMenu,{anchor:{type:"submenu",item:j.triggeringItem,...Q}})})}})},rE=(t,s)=>{const c=(H,j)=>t.getRelated(H).exists(te=>Kf(te,j)),i=(H,j)=>{cs.setContent(H,j)},d=(H,j,Q)=>{const te=A.none;g(H,j,Q,te)},g=(H,j,Q,te)=>{const we=t.lazySink(H).getOrDie();cs.openWhileCloaked(H,j,()=>Wa.positionWithinBounds(we,H,Q,te())),qt.setValue(H,A.some({mode:"position",config:Q,getBounds:te}))},h=(H,j,Q)=>{C(H,j,Q,A.none)},C=(H,j,Q,te)=>{const we=_7(t,H,j,Q,te);cs.open(H,we),qt.setValue(H,A.some({mode:"menu",menu:we}))},w=H=>{cs.isOpen(H)&&(qt.setValue(H,A.none()),cs.close(H))},k=H=>cs.getState(H),O=H=>{cs.isOpen(H)&&qt.getValue(H).each(j=>{switch(j.mode){case"menu":cs.getState(H).each(Rp.repositionMenus);break;case"position":const Q=t.lazySink(H).getOrDie();Wa.positionWithinBounds(Q,H,j.config,j.getBounds());break}})},P={setContent:i,showAt:d,showWithinBounds:g,showMenuAt:h,showMenuWithinBounds:C,hide:w,getContent:k,reposition:O,isOpen:cs.isOpen};return{uid:t.uid,dom:t.dom,behaviours:hc(t.inlineBehaviours,[cs.config({isPartOf:(H,j,Q)=>Kf(j,Q)||c(H,Q),getAttachPoint:H=>t.lazySink(H).getOrDie(),onOpen:H=>{t.onShow(H)},onClose:H=>{t.onHide(H)}}),qt.config({store:{mode:"memory",initialValue:A.none()}}),Ki.config({channels:{...wl({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(H=>({fireEventInstead:{event:H.event}})).getOr({})}),...Qg({...t.fireRepositionEventInstead.map(H=>({fireEventInstead:{event:H.event}})).getOr({}),doReposition:O})}})]),eventOrder:t.eventOrder,apis:P}},Ir=Ji({name:"InlineView",configFields:[nt("lazySink"),rs("onShow"),rs("onHide"),gd("onEscape"),ga("inlineBehaviours",[cs,qt,Ki]),Aa("fireDismissalEventInstead",[Ee("event",$f())]),Aa("fireRepositionEventInstead",[Ee("event",Dg())]),Ee("getRelated",A.none),Ee("isExtraPart",eo),Ee("eventOrder",A.none)],factory:rE,apis:{showAt:(t,s,c,i)=>{t.showAt(s,c,i)},showWithinBounds:(t,s,c,i,d)=>{t.showWithinBounds(s,c,i,d)},showMenuAt:(t,s,c,i)=>{t.showMenuAt(s,c,i)},showMenuWithinBounds:(t,s,c,i,d)=>{t.showMenuWithinBounds(s,c,i,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,c)=>{t.setContent(s,c)},reposition:(t,s)=>{t.reposition(s)}}});var cE=tinymce.util.Tools.resolve("tinymce.util.Delay"),Q2=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),aE=tinymce.util.Tools.resolve("tinymce.EditorManager"),Mp=tinymce.util.Tools.resolve("tinymce.Env"),ju;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(ju||(ju={}));var Cv;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(Cv||(Cv={}));const qs=t=>s=>s.options.get(t),eC=t=>s=>A.from(t(s)),iE=t=>{const s=Mp.deviceType.isPhone(),c=Mp.deviceType.isTablet()||s,i=t.options.register,d=h=>je(h)||h===!1,g=h=>je(h)||jn(h);i("skin",{processor:h=>je(h)||h===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),i("width",{processor:g,default:Q2.DOM.getStyle(t.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("font_size_input_default_unit",{processor:"string",default:"pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:h=>je(h)||Wo(h),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:h=>Wo(h)||je(h)||Ko(h)?{value:h,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),St(9,h=>{i("toolbar"+(h+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:c?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:Cv.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:t.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("ui_mode",{processor:"string",default:"combined"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:d,default:"#top"}),i("anchor_bottom",{processor:d,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:h=>h==="both"||Wo(h),default:!Mp.deviceType.isTouch()}),i("sidebar_show",{processor:"string"}),i("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),i("default_font_stack",{processor:"string[]",default:[]})},qk=qs("readonly"),lE=qs("disabled"),Kk=qs("height"),Yk=qs("width"),tC=eC(qs("min_width")),Xk=eC(qs("min_height")),Np=eC(qs("max_width")),wv=eC(qs("max_height")),Jk=eC(qs("style_formats")),Qk=qs("style_formats_merge"),pM=qs("style_formats_autohide"),bM=qs("content_langs"),vM=qs("removed_menuitems"),Sv=qs("toolbar_mode"),uE=qs("toolbar_groups"),dE=qs("toolbar_location"),yM=qs("fixed_toolbar_container"),e_=qs("fixed_toolbar_container_target"),CM=qs("toolbar_persist"),t_=qs("toolbar_sticky_offset"),wM=qs("menubar"),mE=qs("toolbar"),SM=qs("file_picker_callback"),n_=qs("file_picker_validator_handler"),xM=qs("font_size_input_default_unit"),EM=qs("file_picker_types"),fE=qs("typeahead_urls"),o_=qs("anchor_top"),s_=qs("anchor_bottom"),TM=qs("draggable_modal"),gE=qs("statusbar"),kM=qs("elementpath"),r_=qs("branding"),_M=qs("resize"),AM=qs("paste_as_text"),OM=qs("sidebar_show"),c_=qs("promotion"),hE=qs("help_accessibility"),DM=qs("default_font_stack"),nC=qs("skin"),a_=t=>t.options.get("skin")===!1,pE=t=>t.options.get("menubar")!==!1,RM=t=>{const s=t.options.get("skin_url");if(a_(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const c=t.options.get("skin");return aE.baseURL+"/skins/ui/"+c}},A7=t=>A.from(t.options.get("skin_url")),MM=t=>t.options.get("line_height_formats").split(" "),bE=t=>{const s=mE(t),c=je(s),i=Ko(s)&&s.length>0;return!oC(t)&&(i||c||s===!0)},vE=t=>{const s=St(9,i=>t.options.get("toolbar"+(i+1))),c=to(s,je);return Cn(c.length>0,c)},oC=t=>vE(t).fold(()=>{const s=mE(t);return Ze(s,je)&&s.length>0},Bt),i_=t=>dE(t)===Cv.bottom,yE=t=>{var s;if(!t.inline)return A.none();const c=(s=yM(t))!==null&&s!==void 0?s:"";if(c.length>0)return Cs(ye(),c);const i=e_(t);return io(i)?A.some(ze.fromDom(i)):A.none()},Cm=t=>t.inline&&yE(t).isSome(),l_=t=>yE(t).getOrThunk(()=>Dr(Or(ze.fromDom(t.getElement())))),u_=t=>t.inline&&!pE(t)&&!bE(t)&&!oC(t),Pp=t=>(t.options.get("toolbar_sticky")||t.inline)&&!Cm(t)&&!u_(t),ah=t=>!Cm(t)&&t.options.get("ui_mode")==="split",NM=t=>{const s=t.options.get("menu");return Ke(s,c=>({...c,items:c.items}))};var O7=Object.freeze({__proto__:null,get ToolbarMode(){return ju},get ToolbarLocation(){return Cv},register:iE,getSkinUrl:RM,getSkinUrlOption:A7,isReadOnly:qk,isDisabled:lE,getSkin:nC,isSkinDisabled:a_,getHeightOption:Kk,getWidthOption:Yk,getMinWidthOption:tC,getMinHeightOption:Xk,getMaxWidthOption:Np,getMaxHeightOption:wv,getUserStyleFormats:Jk,shouldMergeStyleFormats:Qk,shouldAutoHideStyleFormats:pM,getLineHeightFormats:MM,getContentLanguages:bM,getRemovedMenuItems:vM,isMenubarEnabled:pE,isMultipleToolbars:oC,isToolbarEnabled:bE,isToolbarPersist:CM,getMultipleToolbarsOption:vE,getUiContainer:l_,useFixedContainer:Cm,isSplitUiMode:ah,getToolbarMode:Sv,isDraggableModal:TM,isDistractionFree:u_,isStickyToolbar:Pp,getStickyToolbarOffset:t_,getToolbarLocation:dE,isToolbarLocationBottom:i_,getToolbarGroups:uE,getMenus:NM,getMenubar:wM,getToolbar:mE,getFilePickerCallback:SM,getFilePickerTypes:EM,useTypeaheadUrls:fE,getAnchorTop:o_,getAnchorBottom:s_,getFilePickerValidatorHandler:n_,getFontSizeInputDefaultUnit:xM,useStatusBar:gE,useElementPath:kM,promotionEnabled:c_,useBranding:r_,getResize:_M,getPasteAsText:AM,getSidebarShow:OM,useHelpAccessibility:hE,getDefaultFontStack:DM});const PM=["visible","hidden","clip"],BM=t=>Qs(t).length>0&&!fo(PM,t),d_=t=>{if(Xn(t)){const s=at(t,"overflow-x"),c=at(t,"overflow-y");return BM(s)||BM(c)}else return!1},m_=t=>t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen(),f_=(t,s)=>{const c=nx(s,d_),i=c.length===0?cl(s).map(al).map(d=>nx(d,d_)).getOr([]):c;return As(i).map(d=>({element:d,others:i.slice(1),isFullscreen:()=>m_(t)}))},Bp=(t,s)=>ah(t)?f_(t,s):A.none(),$p=t=>{const s=[...Re(t.others,cc),xc()];return t.isFullscreen()?xc():jd(cc(t.element),s)},sa=Ji({name:"Button",factory:t=>{const s=yv(t.action),c=t.dom.tag,i=g=>Ct(t.dom,"attributes").bind(h=>Ct(h,g)),d=()=>{if(c==="button"){const g=i("type").getOr("button"),h=i("role").map(C=>({role:C})).getOr({});return{type:g,...h}}else return{role:t.role.getOr(i("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:ql.augment(t.buttonBehaviours,[zn.config({}),En.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[Ee("uid",void 0),nt("dom"),Ee("components",[]),ql.field("buttonBehaviours",[zn,En]),ms("action"),ms("role"),Ee("eventOrder",{})]}),D7=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return No(s,(c,i)=>i.name==="class"?c:{...c,[i.name]:i.value},{})},R7=t=>Array.prototype.slice.call(t.dom.classList,0),uf=t=>{const s=ze.fromHtml(t),c=Lr(s),i=D7(s),d=R7(s),g=c.length===0?{}:{innerHtml:T1(s)};return{tag:ss(s),classes:d,attributes:i,...g}},ws=t=>{const s=zx(t)&&dr(t,"uid")?t.uid:Hg("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var g_=Object.freeze({__proto__:null,exhibit:(t,s)=>Fu({attributes:Rs([{key:s.tabAttr,value:"true"}])})}),M7=[Ee("tabAttr","data-alloy-tabstop")];const lr=gc({fields:M7,name:"tabstopping",active:g_}),CE=Kt("tooltip.exclusive"),sC=Kt("tooltip.show"),rC=Kt("tooltip.hide"),cC=Kt("tooltip.immediateHide"),aC=Kt("tooltip.immediateShow"),$M=(t,s,c)=>{t.getSystem().broadcastOn([CE],{})};var N7=Object.freeze({__proto__:null,hideAllExclusive:$M,immediateOpenClose:(t,s,c,i)=>Io(t,i?aC:cC),isEnabled:(t,s,c)=>c.isEnabled(),setComponents:(t,s,c,i)=>{c.getTooltip().each(d=>{d.getSystem().isConnected()&&Kn.set(d,i)})},setEnabled:(t,s,c,i)=>c.setEnabled(i)}),P7=Object.freeze({__proto__:null,events:(t,s)=>{const c=h=>{s.getTooltip().each(C=>{C.getSystem().isConnected()&&(Sd(C),t.onHide(h,C),s.clearTooltip())}),s.clearTimer()},i=h=>{if(!s.isShowing()&&s.isEnabled()){$M(h);const C=t.lazySink(h).getOrDie(),w=h.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:ir(t.mode==="normal"?[Ye(Mu(),k=>{Io(h,sC)}),Ye(em(),k=>{Io(h,rC)})]:[]),behaviours:xt([Kn.config({})])});s.setTooltip(w),Xg(C,w),t.onShow(h,w),Wa.position(C,w,{anchor:t.anchor(h)})}},d=h=>{s.getTooltip().each(C=>{const w=t.lazySink(h).getOrDie();Wa.position(w,C,{anchor:t.anchor(h)})})},g=()=>{switch(t.mode){case"normal":return[Ye(Nu(),h=>{Io(h,aC)}),Ye(Gm(),h=>{Io(h,cC)}),Ye(Mu(),h=>{Io(h,sC)}),Ye(em(),h=>{Io(h,rC)})];case"follow-highlight":return[Ye(tb(),(h,C)=>{Io(h,sC)}),Ye(nb(),h=>{Io(h,rC)})];case"children-normal":return[Ye(Nu(),(h,C)=>{vi(h.element).each(w=>{Fs(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Io(h,aC)},k=>{s.isShowing()&&(t.onShow(h,k),d(h))})})}),Ye(Gm(),h=>{vi(h.element).fold(()=>{Io(h,cC)},oe)}),Ye(Mu(),h=>{Cs(h.element,"[data-mce-tooltip]:hover").each(C=>{s.getTooltip().fold(()=>{Io(h,sC)},w=>{s.isShowing()&&(t.onShow(h,w),d(h))})})}),Ye(em(),h=>{Cs(h.element,"[data-mce-tooltip]:hover").fold(()=>{Io(h,rC)},oe)})];default:return[Ye(Nu(),(h,C)=>{vi(h.element).each(w=>{Fs(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Io(h,aC)},k=>{s.isShowing()&&(t.onShow(h,k),d(h))})})}),Ye(Gm(),h=>{vi(h.element).fold(()=>{Io(h,cC)},oe)})]}};return ir(et([[zw(h=>{t.onSetup(h)}),Ye(sC,h=>{s.resetTimer(()=>{i(h)},t.delayForShow())}),Ye(rC,h=>{s.resetTimer(()=>{c(h)},t.delayForHide())}),Ye(aC,h=>{s.resetTimer(()=>{i(h)},0)}),Ye(cC,h=>{s.resetTimer(()=>{c(h)},0)}),Ye(Pu(),(h,C)=>{const w=C;w.universal||fo(w.channels,CE)&&c(h)}),pd(h=>{c(h)})],g()]))}}),h_=[nt("lazySink"),nt("tooltipDom"),Ee("exclusive",!0),Ee("tooltipComponents",[]),js("delayForShow",Z(300)),js("delayForHide",Z(100)),js("onSetup",oe),zl("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),Ee("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:Z([Uc,Qc,Tc,Ra,$c,kc]),onRtl:Z([Uc,Qc,Tc,Ra,$c,kc])},bubble:Fi(0,-2,{})})),rs("onHide"),rs("onShow")],B7=Object.freeze({__proto__:null,init:()=>{const t=pn(!0),s=ys(),c=ys(),i=()=>{s.on(clearTimeout)},d=(h,C)=>{i(),s.set(setTimeout(h,C))},g=Z("not-implemented");return Vl({getTooltip:c.get,isShowing:c.isSet,setTooltip:c.set,clearTooltip:c.clear,clearTimer:i,resetTimer:d,readState:g,isEnabled:()=>t.get(),setEnabled:h=>t.set(h)})}});const Wr=gc({fields:h_,name:"tooltipping",active:P7,state:B7,apis:N7});/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:p_,setPrototypeOf:FM,isFrozen:$7,getPrototypeOf:F7,getOwnPropertyDescriptor:I7}=Object;let{freeze:pu,seal:wm,create:wE}=Object,{apply:b_,construct:v_}=typeof Reflect<"u"&&Reflect;pu||(pu=function(s){return s}),wm||(wm=function(s){return s}),b_||(b_=function(s,c,i){return s.apply(c,i)}),v_||(v_=function(s,c){return new s(...c)});const SE=xl(Array.prototype.forEach),L7=xl(Array.prototype.lastIndexOf),IM=xl(Array.prototype.pop),iC=xl(Array.prototype.push),H7=xl(Array.prototype.splice),xE=xl(String.prototype.toLowerCase),y_=xl(String.prototype.toString),LM=xl(String.prototype.match),lC=xl(String.prototype.replace),z7=xl(String.prototype.indexOf),V7=xl(String.prototype.trim),df=xl(Object.prototype.hasOwnProperty),Qi=xl(RegExp.prototype.test),uC=U7(TypeError);function xl(t){return function(s){for(var c=arguments.length,i=new Array(c>1?c-1:0),d=1;d<c;d++)i[d-1]=arguments[d];return b_(t,s,i)}}function U7(t){return function(){for(var s=arguments.length,c=new Array(s),i=0;i<s;i++)c[i]=arguments[i];return v_(t,c)}}function hr(t,s){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xE;FM&&FM(t,null);let i=s.length;for(;i--;){let d=s[i];if(typeof d=="string"){const g=c(d);g!==d&&($7(s)||(s[i]=g),d=g)}t[d]=!0}return t}function W7(t){for(let s=0;s<t.length;s++)df(t,s)||(t[s]=null);return t}function Fp(t){const s=wE(null);for(const[c,i]of p_(t))df(t,c)&&(Array.isArray(i)?s[c]=W7(i):i&&typeof i=="object"&&i.constructor===Object?s[c]=Fp(i):s[c]=i);return s}function dC(t,s){for(;t!==null;){const i=I7(t,s);if(i){if(i.get)return xl(i.get);if(typeof i.value=="function")return xl(i.value)}t=F7(t)}function c(){return null}return c}const EE=pu(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),mC=pu(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),TE=pu(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),C_=pu(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),xv=pu(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),HM=pu(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),mf=pu(["#text"]),kE=pu(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),w_=pu(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),zM=pu(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),_E=pu(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Z7=wm(/\{\{[\w\W]*|[\w\W]*\}\}/gm),fC=wm(/<%[\w\W]*|[\w\W]*%>/gm),j7=wm(/\$\{[\w\W]*/gm),VM=wm(/^data-[\-\w.\u00B7-\uFFFF]+$/),S_=wm(/^aria-[\-\w]+$/),UM=wm(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),x_=wm(/^(?:\w+script|data):/i),E_=wm(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),WM=wm(/^html$/i),ZM=wm(/^[a-z][.\w]*(-[.\w]+)+$/i);var T_=Object.freeze({__proto__:null,ARIA_ATTR:S_,ATTR_WHITESPACE:E_,CUSTOM_ELEMENT:ZM,DATA_ATTR:VM,DOCTYPE_NAME:WM,ERB_EXPR:fC,IS_ALLOWED_URI:UM,IS_SCRIPT_OR_DATA:x_,MUSTACHE_EXPR:Z7,TMPLIT_EXPR:j7});const gC={element:1,text:3,progressingInstruction:7,comment:8,document:9},jM=function(){return typeof window>"u"?null:window},GM=function(s,c){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let i=null;const d="data-tt-policy-suffix";c&&c.hasAttribute(d)&&(i=c.getAttribute(d));const g="dompurify"+(i?"#"+i:"");try{return s.createPolicy(g,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}},qM=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function KM(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:jM();const s=ts=>KM(ts);if(s.version="3.2.4",s.removed=[],!t||!t.document||t.document.nodeType!==gC.document||!t.Element)return s.isSupported=!1,s;let{document:c}=t;const i=c,d=i.currentScript,{DocumentFragment:g,HTMLTemplateElement:h,Node:C,Element:w,NodeFilter:k,NamedNodeMap:O=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:P,DOMParser:H,trustedTypes:j}=t,Q=w.prototype,te=dC(Q,"cloneNode"),we=dC(Q,"remove"),ce=dC(Q,"nextSibling"),xe=dC(Q,"childNodes"),Ce=dC(Q,"parentNode");if(typeof h=="function"){const ts=c.createElement("template");ts.content&&ts.content.ownerDocument&&(c=ts.content.ownerDocument)}let Pe,Fe="";const{implementation:Lt,createNodeIterator:bt,createDocumentFragment:He,getElementsByTagName:Zt}=c,{importNode:Pt}=i;let en=qM();s.isSupported=typeof p_=="function"&&typeof Ce=="function"&&Lt&&Lt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Do,ERB_EXPR:or,TMPLIT_EXPR:gs,DATA_ATTR:vn,ARIA_ATTR:vt,IS_SCRIPT_OR_DATA:Wt,ATTR_WHITESPACE:Zn,CUSTOM_ELEMENT:yo}=T_;let{IS_ALLOWED_URI:Nn}=T_,co=null;const Ys=hr({},[...EE,...mC,...TE,...xv,...mf]);let Ws=null;const tu=hr({},[...kE,...w_,...zM,..._E]);let Gr=Object.seal(wE(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),nd=null,Ti=null,od=!0,sd=!0,Rm=!1,Bw=!0,bg=!1,PR=!0,G0=!1,BR=!1,tG=!1,$4=!1,wI=!1,SI=!1,Rq=!0,Mq=!1;const dY="user-content-";let nG=!0,$R=!1,F4={},I4=null;const Nq=hr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Pq=null;const Bq=hr({},["audio","video","img","source","image","track"]);let oG=null;const $q=hr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),xI="http://www.w3.org/1998/Math/MathML",EI="http://www.w3.org/2000/svg",q0="http://www.w3.org/1999/xhtml";let L4=q0,sG=!1,rG=null;const mY=hr({},[xI,EI,q0],y_);let TI=hr({},["mi","mo","mn","ms","mtext"]),kI=hr({},["annotation-xml"]);const fY=hr({},["title","style","font","a","script"]);let FR=null;const gY=["application/xhtml+xml","text/html"],hY="text/html";let nu=null,H4=null;const pY=c.createElement("form"),Fq=function(Ie){return Ie instanceof RegExp||Ie instanceof Function},cG=function(){let Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(H4&&H4===Ie)){if((!Ie||typeof Ie!="object")&&(Ie={}),Ie=Fp(Ie),FR=gY.indexOf(Ie.PARSER_MEDIA_TYPE)===-1?hY:Ie.PARSER_MEDIA_TYPE,nu=FR==="application/xhtml+xml"?y_:xE,co=df(Ie,"ALLOWED_TAGS")?hr({},Ie.ALLOWED_TAGS,nu):Ys,Ws=df(Ie,"ALLOWED_ATTR")?hr({},Ie.ALLOWED_ATTR,nu):tu,rG=df(Ie,"ALLOWED_NAMESPACES")?hr({},Ie.ALLOWED_NAMESPACES,y_):mY,oG=df(Ie,"ADD_URI_SAFE_ATTR")?hr(Fp($q),Ie.ADD_URI_SAFE_ATTR,nu):$q,Pq=df(Ie,"ADD_DATA_URI_TAGS")?hr(Fp(Bq),Ie.ADD_DATA_URI_TAGS,nu):Bq,I4=df(Ie,"FORBID_CONTENTS")?hr({},Ie.FORBID_CONTENTS,nu):Nq,nd=df(Ie,"FORBID_TAGS")?hr({},Ie.FORBID_TAGS,nu):{},Ti=df(Ie,"FORBID_ATTR")?hr({},Ie.FORBID_ATTR,nu):{},F4=df(Ie,"USE_PROFILES")?Ie.USE_PROFILES:!1,od=Ie.ALLOW_ARIA_ATTR!==!1,sd=Ie.ALLOW_DATA_ATTR!==!1,Rm=Ie.ALLOW_UNKNOWN_PROTOCOLS||!1,Bw=Ie.ALLOW_SELF_CLOSE_IN_ATTR!==!1,bg=Ie.SAFE_FOR_TEMPLATES||!1,PR=Ie.SAFE_FOR_XML!==!1,G0=Ie.WHOLE_DOCUMENT||!1,$4=Ie.RETURN_DOM||!1,wI=Ie.RETURN_DOM_FRAGMENT||!1,SI=Ie.RETURN_TRUSTED_TYPE||!1,tG=Ie.FORCE_BODY||!1,Rq=Ie.SANITIZE_DOM!==!1,Mq=Ie.SANITIZE_NAMED_PROPS||!1,nG=Ie.KEEP_CONTENT!==!1,$R=Ie.IN_PLACE||!1,Nn=Ie.ALLOWED_URI_REGEXP||UM,L4=Ie.NAMESPACE||q0,TI=Ie.MATHML_TEXT_INTEGRATION_POINTS||TI,kI=Ie.HTML_INTEGRATION_POINTS||kI,Gr=Ie.CUSTOM_ELEMENT_HANDLING||{},Ie.CUSTOM_ELEMENT_HANDLING&&Fq(Ie.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Gr.tagNameCheck=Ie.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ie.CUSTOM_ELEMENT_HANDLING&&Fq(Ie.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Gr.attributeNameCheck=Ie.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ie.CUSTOM_ELEMENT_HANDLING&&typeof Ie.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Gr.allowCustomizedBuiltInElements=Ie.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),bg&&(sd=!1),wI&&($4=!0),F4&&(co=hr({},mf),Ws=[],F4.html===!0&&(hr(co,EE),hr(Ws,kE)),F4.svg===!0&&(hr(co,mC),hr(Ws,w_),hr(Ws,_E)),F4.svgFilters===!0&&(hr(co,TE),hr(Ws,w_),hr(Ws,_E)),F4.mathMl===!0&&(hr(co,xv),hr(Ws,zM),hr(Ws,_E))),Ie.ADD_TAGS&&(co===Ys&&(co=Fp(co)),hr(co,Ie.ADD_TAGS,nu)),Ie.ADD_ATTR&&(Ws===tu&&(Ws=Fp(Ws)),hr(Ws,Ie.ADD_ATTR,nu)),Ie.ADD_URI_SAFE_ATTR&&hr(oG,Ie.ADD_URI_SAFE_ATTR,nu),Ie.FORBID_CONTENTS&&(I4===Nq&&(I4=Fp(I4)),hr(I4,Ie.FORBID_CONTENTS,nu)),nG&&(co["#text"]=!0),G0&&hr(co,["html","head","body"]),co.table&&(hr(co,["tbody"]),delete nd.tbody),Ie.TRUSTED_TYPES_POLICY){if(typeof Ie.TRUSTED_TYPES_POLICY.createHTML!="function")throw uC('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ie.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw uC('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Pe=Ie.TRUSTED_TYPES_POLICY,Fe=Pe.createHTML("")}else Pe===void 0&&(Pe=GM(j,d)),Pe!==null&&typeof Fe=="string"&&(Fe=Pe.createHTML(""));pu&&pu(Ie),H4=Ie}},Iq=hr({},[...mC,...TE,...C_]),Lq=hr({},[...xv,...HM]),bY=function(Ie){let Pn=Ce(Ie);(!Pn||!Pn.tagName)&&(Pn={namespaceURI:L4,tagName:"template"});const Uo=xE(Ie.tagName),Ya=xE(Pn.tagName);return rG[Ie.namespaceURI]?Ie.namespaceURI===EI?Pn.namespaceURI===q0?Uo==="svg":Pn.namespaceURI===xI?Uo==="svg"&&(Ya==="annotation-xml"||TI[Ya]):!!Iq[Uo]:Ie.namespaceURI===xI?Pn.namespaceURI===q0?Uo==="math":Pn.namespaceURI===EI?Uo==="math"&&kI[Ya]:!!Lq[Uo]:Ie.namespaceURI===q0?Pn.namespaceURI===EI&&!kI[Ya]||Pn.namespaceURI===xI&&!TI[Ya]?!1:!Lq[Uo]&&(fY[Uo]||!Iq[Uo]):!!(FR==="application/xhtml+xml"&&rG[Ie.namespaceURI]):!1},n1=function(Ie){iC(s.removed,{element:Ie});try{Ce(Ie).removeChild(Ie)}catch{we(Ie)}},IR=function(Ie,Pn){try{iC(s.removed,{attribute:Pn.getAttributeNode(Ie),from:Pn})}catch{iC(s.removed,{attribute:null,from:Pn})}if(Pn.removeAttribute(Ie),Ie==="is")if($4||wI)try{n1(Pn)}catch{}else try{Pn.setAttribute(Ie,"")}catch{}},Hq=function(Ie){let Pn=null,Uo=null;if(tG)Ie="<remove></remove>"+Ie;else{const ou=LM(Ie,/^[\r\n\t ]+/);Uo=ou&&ou[0]}FR==="application/xhtml+xml"&&L4===q0&&(Ie='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ie+"</body></html>");const Ya=Pe?Pe.createHTML(Ie):Ie;if(L4===q0)try{Pn=new H().parseFromString(Ya,FR)}catch{}if(!Pn||!Pn.documentElement){Pn=Lt.createDocument(L4,"template",null);try{Pn.documentElement.innerHTML=sG?Fe:Ya}catch{}}const rd=Pn.body||Pn.documentElement;return Ie&&Uo&&rd.insertBefore(c.createTextNode(Uo),rd.childNodes[0]||null),L4===q0?Zt.call(Pn,G0?"html":"body")[0]:G0?Pn.documentElement:rd},zq=function(Ie){return bt.call(Ie.ownerDocument||Ie,Ie,k.SHOW_ELEMENT|k.SHOW_COMMENT|k.SHOW_TEXT|k.SHOW_PROCESSING_INSTRUCTION|k.SHOW_CDATA_SECTION,null)},aG=function(Ie){return Ie instanceof P&&(typeof Ie.nodeName!="string"||typeof Ie.textContent!="string"||typeof Ie.removeChild!="function"||!(Ie.attributes instanceof O)||typeof Ie.removeAttribute!="function"||typeof Ie.setAttribute!="function"||typeof Ie.namespaceURI!="string"||typeof Ie.insertBefore!="function"||typeof Ie.hasChildNodes!="function")},Vq=function(Ie){return typeof C=="function"&&Ie instanceof C};function K0(ts,Ie,Pn){SE(ts,Uo=>{Uo.call(s,Ie,Pn,H4)})}const Uq=function(Ie){let Pn=null;if(K0(en.beforeSanitizeElements,Ie,null),aG(Ie))return n1(Ie),!0;const Uo=nu(Ie.nodeName);if(K0(en.uponSanitizeElement,Ie,{tagName:Uo,allowedTags:co}),Ie.hasChildNodes()&&!Vq(Ie.firstElementChild)&&Qi(/<[/\w]/g,Ie.innerHTML)&&Qi(/<[/\w]/g,Ie.textContent)||Ie.nodeType===gC.progressingInstruction||PR&&Ie.nodeType===gC.comment&&Qi(/<[/\w]/g,Ie.data))return n1(Ie),!0;if(!co[Uo]||nd[Uo]){if(!nd[Uo]&&Zq(Uo)&&(Gr.tagNameCheck instanceof RegExp&&Qi(Gr.tagNameCheck,Uo)||Gr.tagNameCheck instanceof Function&&Gr.tagNameCheck(Uo)))return!1;if(nG&&!I4[Uo]){const Ya=Ce(Ie)||Ie.parentNode,rd=xe(Ie)||Ie.childNodes;if(rd&&Ya){const ou=rd.length;for(let Mm=ou-1;Mm>=0;--Mm){const o1=te(rd[Mm],!0);o1.__removalCount=(Ie.__removalCount||0)+1,Ya.insertBefore(o1,ce(Ie))}}}return n1(Ie),!0}return Ie instanceof w&&!bY(Ie)||(Uo==="noscript"||Uo==="noembed"||Uo==="noframes")&&Qi(/<\/no(script|embed|frames)/i,Ie.innerHTML)?(n1(Ie),!0):(bg&&Ie.nodeType===gC.text&&(Pn=Ie.textContent,SE([Do,or,gs],Ya=>{Pn=lC(Pn,Ya," ")}),Ie.textContent!==Pn&&(iC(s.removed,{element:Ie.cloneNode()}),Ie.textContent=Pn)),K0(en.afterSanitizeElements,Ie,null),!1)},Wq=function(Ie,Pn,Uo){if(Rq&&(Pn==="id"||Pn==="name")&&(Uo in c||Uo in pY))return!1;if(!(sd&&!Ti[Pn]&&Qi(vn,Pn))){if(!(od&&Qi(vt,Pn))){if(!Ws[Pn]||Ti[Pn]){if(!(Zq(Ie)&&(Gr.tagNameCheck instanceof RegExp&&Qi(Gr.tagNameCheck,Ie)||Gr.tagNameCheck instanceof Function&&Gr.tagNameCheck(Ie))&&(Gr.attributeNameCheck instanceof RegExp&&Qi(Gr.attributeNameCheck,Pn)||Gr.attributeNameCheck instanceof Function&&Gr.attributeNameCheck(Pn))||Pn==="is"&&Gr.allowCustomizedBuiltInElements&&(Gr.tagNameCheck instanceof RegExp&&Qi(Gr.tagNameCheck,Uo)||Gr.tagNameCheck instanceof Function&&Gr.tagNameCheck(Uo))))return!1}else if(!oG[Pn]){if(!Qi(Nn,lC(Uo,Zn,""))){if(!((Pn==="src"||Pn==="xlink:href"||Pn==="href")&&Ie!=="script"&&z7(Uo,"data:")===0&&Pq[Ie])){if(!(Rm&&!Qi(Wt,lC(Uo,Zn,"")))){if(Uo)return!1}}}}}}return!0},Zq=function(Ie){return Ie!=="annotation-xml"&&LM(Ie,yo)},jq=function(Ie){K0(en.beforeSanitizeAttributes,Ie,null);const{attributes:Pn}=Ie;if(!Pn||aG(Ie))return;const Uo={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ws,forceKeepAttr:void 0};let Ya=Pn.length;for(;Ya--;){const rd=Pn[Ya],{name:ou,namespaceURI:Mm,value:o1}=rd,LR=nu(ou);let wu=ou==="value"?o1:V7(o1);const yY=wu;if(Uo.attrName=LR,Uo.attrValue=wu,Uo.keepAttr=!0,Uo.forceKeepAttr=void 0,K0(en.uponSanitizeAttribute,Ie,Uo),wu=Uo.attrValue,Mq&&(LR==="id"||LR==="name")&&(IR(ou,Ie),wu=dY+wu),PR&&Qi(/((--!?|])>)|<\/(style|title)/i,wu)){IR(ou,Ie);continue}if(Uo.forceKeepAttr)continue;if(!Uo.keepAttr){IR(ou,Ie);continue}if(!Bw&&Qi(/\/>/i,wu)){IR(ou,Ie);continue}bg&&SE([Do,or,gs],qq=>{wu=lC(wu,qq," ")});const Gq=nu(Ie.nodeName);if(!Wq(Gq,LR,wu)){IR(ou,Ie);continue}if(Pe&&typeof j=="object"&&typeof j.getAttributeType=="function"&&!Mm)switch(j.getAttributeType(Gq,LR)){case"TrustedHTML":{wu=Pe.createHTML(wu);break}case"TrustedScriptURL":{wu=Pe.createScriptURL(wu);break}}if(wu!==yY)try{Mm?Ie.setAttributeNS(Mm,ou,wu):Ie.setAttribute(ou,wu),aG(Ie)?n1(Ie):IM(s.removed)}catch{}}K0(en.afterSanitizeAttributes,Ie,null)},vY=function ts(Ie){let Pn=null;const Uo=zq(Ie);for(K0(en.beforeSanitizeShadowDOM,Ie,null);Pn=Uo.nextNode();)K0(en.uponSanitizeShadowNode,Pn,null),Uq(Pn),jq(Pn),Pn.content instanceof g&&ts(Pn.content);K0(en.afterSanitizeShadowDOM,Ie,null)};return s.sanitize=function(ts){let Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Pn=null,Uo=null,Ya=null,rd=null;if(sG=!ts,sG&&(ts="<!-->"),typeof ts!="string"&&!Vq(ts))if(typeof ts.toString=="function"){if(ts=ts.toString(),typeof ts!="string")throw uC("dirty is not a string, aborting")}else throw uC("toString is not a function");if(!s.isSupported)return ts;if(BR||cG(Ie),s.removed=[],typeof ts=="string"&&($R=!1),$R){if(ts.nodeName){const o1=nu(ts.nodeName);if(!co[o1]||nd[o1])throw uC("root node is forbidden and cannot be sanitized in-place")}}else if(ts instanceof C)Pn=Hq("<!---->"),Uo=Pn.ownerDocument.importNode(ts,!0),Uo.nodeType===gC.element&&Uo.nodeName==="BODY"||Uo.nodeName==="HTML"?Pn=Uo:Pn.appendChild(Uo);else{if(!$4&&!bg&&!G0&&ts.indexOf("<")===-1)return Pe&&SI?Pe.createHTML(ts):ts;if(Pn=Hq(ts),!Pn)return $4?null:SI?Fe:""}Pn&&tG&&n1(Pn.firstChild);const ou=zq($R?ts:Pn);for(;Ya=ou.nextNode();)Uq(Ya),jq(Ya),Ya.content instanceof g&&vY(Ya.content);if($R)return ts;if($4){if(wI)for(rd=He.call(Pn.ownerDocument);Pn.firstChild;)rd.appendChild(Pn.firstChild);else rd=Pn;return(Ws.shadowroot||Ws.shadowrootmode)&&(rd=Pt.call(i,rd,!0)),rd}let Mm=G0?Pn.outerHTML:Pn.innerHTML;return G0&&co["!doctype"]&&Pn.ownerDocument&&Pn.ownerDocument.doctype&&Pn.ownerDocument.doctype.name&&Qi(WM,Pn.ownerDocument.doctype.name)&&(Mm="<!DOCTYPE "+Pn.ownerDocument.doctype.name+`>
`+Mm),bg&&SE([Do,or,gs],o1=>{Mm=lC(Mm,o1," ")}),Pe&&SI?Pe.createHTML(Mm):Mm},s.setConfig=function(){let ts=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};cG(ts),BR=!0},s.clearConfig=function(){H4=null,BR=!1},s.isValidAttribute=function(ts,Ie,Pn){H4||cG({});const Uo=nu(ts),Ya=nu(Ie);return Wq(Uo,Ya,Pn)},s.addHook=function(ts,Ie){typeof Ie=="function"&&iC(en[ts],Ie)},s.removeHook=function(ts,Ie){if(Ie!==void 0){const Pn=L7(en[ts],Ie);return Pn===-1?void 0:H7(en[ts],Pn,1)[0]}return IM(en[ts])},s.removeHooks=function(ts){en[ts]=[]},s.removeAllHooks=function(){en=qM()},s}var G7=KM();const YM=t=>G7().sanitize(t);var Td=tinymce.util.Tools.resolve("tinymce.util.I18n");const XM={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},k_="temporary-placeholder",__=t=>()=>Ct(t,k_).getOr("!not found!"),AE=(t,s)=>{const c=t.toLowerCase();if(Td.isRtl()){const i=mr(c,"-rtl");return uo(s,i)?i:c}else return c},Ev=(t,s)=>Ct(s,AE(t,s)),A_=(t,s)=>{const c=s();return Ev(t,c).getOrThunk(__(c))},q7=(t,s,c)=>{const i=s();return Ev(t,i).or(c).getOrThunk(__(i))},K7=t=>Td.isRtl()?uo(XM,t):!1,O_=()=>Qn("add-focusable",[Gs(t=>{ES(t.element,"svg").each(s=>Xe(s,"focusable","false"))})]),JM=(t,s,c,i)=>{var d,g;const h=K7(s)?["tox-icon--flip"]:[],C=Ct(c,AE(s,c)).or(i).getOrThunk(__(c));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(h),innerHtml:C},behaviours:xt([...(g=t.behaviours)!==null&&g!==void 0?g:[],O_()])}},Gu=(t,s,c,i=A.none())=>JM(s,t,c(),i),QM=(t,s,c)=>{const i=c(),d=We(t,g=>uo(i,AE(g,i)));return JM(s,d.getOr(k_),i,A.none())},eN={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},OE=Ji({name:"Notification",factory:t=>{const s=Kt("notification-text"),c=ws({dom:uf(`<p id=${s}>${YM(t.backstageProvider.translate(t.text))}</p>`),behaviours:xt([Kn.config({})])}),i=Q=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${Q}%`}}}),d=Q=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${Q}%`}}),g=ws({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(0)]},d(0)],behaviours:xt([Kn.config({})])}),w={updateProgress:(Q,te)=>{Q.getSystem().isConnected()&&g.getOpt(Q).each(we=>{Kn.set(we,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(te)]},d(te)])})},updateText:(Q,te)=>{if(Q.getSystem().isConnected()){const we=c.get(Q);Kn.set(we,[Ar(te)])}}},k=et([t.icon.toArray(),[t.level],A.from(eN[t.level]).toArray()]),O=ws(sa.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[Gu("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:xt([lr.config({}),Wr.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:Q=>{t.onAction(Q)}})),P=QM(k,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),H={dom:{tag:"div",classes:["tox-notification__body"]},components:[c.asSpec()],behaviours:xt([Kn.config({})])},j=[P,H];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},behaviours:xt([lr.config({}),zn.config({}),En.config({mode:"special",onEscape:Q=>(t.onAction(Q),A.some(!0))})]),components:j.concat(t.progress?[g.asSpec()]:[]).concat([O.asSpec()]),apis:w}},configFields:[zl("level","info",["success","error","warning","warn","info"]),nt("progress"),ms("icon"),nt("onAction"),nt("text"),nt("iconProvider"),nt("backstageProvider")],apis:{updateProgress:(t,s,c)=>{t.updateProgress(s,c)},updateText:(t,s,c)=>{t.updateText(s,c)}}});var X7=(t,s,c,i)=>{const d=s.backstage.shared,g=()=>ze.fromDom(t.queryCommandValue("ToggleView")===""?t.getContentAreaContainer():t.getContainer()),h=()=>{const P=cc(g());return A.some(P)},C=P=>{h().each(H=>{ot(P,j=>{xo(j.element,"width"),ee(j.element)>H.width&&Nt(j.element,"width",H.width+"px")})})};return{open:(P,H,j)=>{const Q=()=>{const Ce=bt=>{Kn.remove(bt,we),ce()},Pe=(bt,He)=>{Lr(bt.element).length===0?Fe(bt,He):Lt(bt,He)},Fe=(bt,He)=>{Ir.hide(bt),i.clear(),He&&t.focus()},Lt=(bt,He)=>{He&&En.focusIn(bt)};i.on(bt=>{H();const He=j();Ce(bt),Pe(bt,He)})},te=()=>!Pp(t)||!d.header.isPositionedAtTop(),we=oi(OE.sketch({text:P.text,level:fo(["success","error","warning","warn","info"],P.type)?P.type:void 0,progress:P.progressBar===!0,icon:P.icon,onAction:Q,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(i.isSet()){const Ce=Cl(we);i.on(Pe=>{Kn.append(Pe,Ce),Ir.reposition(Pe),we.hasConfigured(xr)&&xr.refresh(Pe),C(Pe.components())})}else{const Ce=oi(Ir.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:xt([En.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),Kn.config({}),...te()?[xr.config({contextual:{lazyContext:()=>A.some(cc(g())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:bt=>Bp(t,bt.element).map(Zt=>({bounds:$p(Zt),optScrollEnv:A.some({currentScrollTop:Zt.element.dom.scrollTop,scrollElmTop:wc(Zt.element).top})})).getOrThunk(()=>({bounds:xc(),optScrollEnv:A.none()}))})]:[]])})),Pe=Cl(we),Fe={maxHeightFunction:Zg()},Lt={...d.anchors.banner(),overrides:Fe};i.set(Ce),c.add(Ce),Ir.showWithinBounds(Ce,Pe,{anchor:Lt},h)}jn(P.timeout)&&P.timeout>0&&cE.setEditorTimeout(t,()=>{Q()},P.timeout);const ce=()=>{i.on(Ce=>{Ir.reposition(Ce),Ce.hasConfigured(xr)&&xr.refresh(Ce),C(Ce.components())})};return{close:Q,reposition:ce,text:Ce=>{OE.updateText(we,Ce)},settings:P,getEl:()=>we.element.dom,progressBar:{value:Ce=>{OE.updateProgress(we,Ce)}}}},close:P=>{P.close()},getArgs:P=>P.settings}};const tN={setup:(t,s)=>{const c=(d,g)=>{kn(d,za(),{raw:g})},i=()=>t.getMenu().bind(K.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(i().each(Ni),d.preventDefault()):g===40?(i().fold(()=>{t.getMenu().each(K.highlightFirst)},h=>{c(h,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&i().each(h=>{c(h,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var hC;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(hC||(hC={}));var kd=hC;const DE="tox-menu-nav__js",pC="tox-collection__item",RE="tox-swatch",J7={normal:DE,color:RE},ME="tox-collection__item--enabled",Q7="tox-collection__group-heading",D_="tox-collection__item-icon",NE="tox-collection__item-label",d0="tox-collection__item-accessory",nN="tox-collection__item-caret",R_="tox-collection__item-checkmark",ag="tox-collection__item--active",oN="tox-collection__item-container",sN="tox-collection__item-container--column",M_="tox-collection__item-container--row",rN="tox-collection__item-container--align-right",N_="tox-collection__item-container--align-left",cN="tox-collection__item-container--valign-top",eL="tox-collection__item-container--valign-middle",aN="tox-collection__item-container--valign-bottom",P_=t=>Ct(J7,t).getOr(DE),iN=t=>t==="color"?"tox-swatches":"tox-menu",PE=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:iN(t),tieredMenu:"tox-tiered-menu"}),m0=t=>{const s=PE(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:P_(t)}},lN=(t,s,c)=>{const i=PE(c);return{tag:"div",classes:et([[i.menu,`tox-menu-${s}-column`],t?[i.hasIcons]:[]])}},tL=[l0.parts.items({})],BE=(t,s,c)=>{const i=PE(c);return{dom:{tag:"div",classes:et([[i.tieredMenu]])},markers:m0(c)}},uN=Z([ar("type","text"),ms("data"),Ee("inputAttributes",{}),Ee("inputStyles",{}),Ee("tag","input"),Ee("inputClasses",[]),rs("onSetValue"),js("fromInputValue",Mt),js("toInputValue",Mt),Ee("styles",{}),Ee("eventOrder",{}),ga("inputBehaviours",[qt,zn]),Ee("selectOnFocus",!0)]),dN=t=>xt([zn.config({onFocus:t.selectOnFocus?s=>{const c=s.element,i=Ue(c);t.type!=="range"&&c.dom.setSelectionRange(0,i.length)}:oe})]),mN=t=>({...dN(t),...hc(t.inputBehaviours,[qt.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>t.fromInputValue(Ue(s.element)),setValue:(s,c)=>{Ue(s.element)!==c&&lm(s.element,t.toInputValue(c))}},onSetValue:t.onSetValue})])}),Tv=t=>({tag:t.tag,attributes:{type:t.type,...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),fN=(t,s)=>({uid:t.uid,dom:Tv(t),components:[],behaviours:mN(t),eventOrder:t.eventOrder}),ih=Ji({name:"Input",configFields:uN(),factory:fN}),gN=Kt("refetch-trigger-event"),hN=Kt("redirect-menu-item-interaction"),pN="tox-menu__searcher",$E=t=>Cs(t.element,`.${pN}`).bind(s=>t.getSystem().getByDom(s).toOptional()),bC=$E,nL=(t,s)=>{qt.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},B_=t=>{const s=qt.getValue(t),c=t.element.dom.selectionStart,i=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:c,selectionEnd:i}},oL=(t,s)=>{Gn(s.element,"id").each(c=>Xe(t.element,"aria-activedescendant",c))},bN=t=>{const s=(d,g)=>(g.cut(),A.none()),c=(d,g)=>{const h={interactionEvent:g.event,eventType:g.event.raw.type};return kn(d,hN,h),A.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[pC]},components:[ih.sketch({inputClasses:[pN,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:xt([Qn(i,[Ye(nm(),d=>{Io(d,gN)}),Ye(za(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),En.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:c,onEscape:c,onUp:c,onDown:c})]),eventOrder:{keydown:[i,En.name()]}})]}},vC="tox-collection--results__js",vN=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:Kt("aria-item-search-result-id"),"aria-selected":"false"}}}:t},FE=(t,s)=>c=>{const i=Tn(c,s);return Re(i,d=>({dom:t,components:d}))},yN=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[l0.parts.items({preprocess:t!=="auto"?FE({tag:"div",classes:["tox-swatches__row"]},t):Mt})]}]}),CN=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[l0.parts.items({preprocess:FE({tag:"div",classes:["tox-collection__group"]},t)})]}),$_=(t,s)=>{const c=[];let i=[];return ot(t,(d,g)=>{s(d,g)?(i.length>0&&c.push(i),i=[],(uo(d.dom,"innerHtml")||d.components&&d.components.length>0)&&i.push(d)):i.push(d)}),i.length>0&&c.push(i),Re(c,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},F_=(t,s,c)=>l0.parts.items({preprocess:i=>{const d=Re(i,c);return t!=="auto"&&t>1?FE({tag:"div",classes:["tox-collection__group"]},t)(d):$_(d,(g,h)=>s[h].type==="separator")}}),wN=(t,s,c=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[F_(t,s,Mt)]}),sL=(t,s,c=!0)=>{const i=Kt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",vC].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[F_(t,s,vN)]}},rL=(t,s,c)=>{const i=Kt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[bN({i18n:Td.translate,placeholder:c.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],vC],attributes:{id:i}},components:[F_(t,s,vN)]}]}},SN=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[l0.parts.items({preprocess:c=>$_(c,(i,d)=>t[d].type==="separator")})]}),yC=t=>Bs(t,s=>"icon"in s&&s.icon!==void 0),lh=t=>(console.error(au(t)),console.log(t),A.none()),cL=(t,s,c,i,d)=>{const g=SN(c);return{value:t,dom:g.dom,components:g.components,items:c}},I_=(t,s,c,i,d)=>{const g=()=>d.menuType!=="searchable"?wN(i,c):d.searchMode.searchMode==="search-with-field"?rL(i,c,d.searchMode):sL(i,c);if(d.menuType==="color"){const h=yN(i);return{value:t,dom:h.dom,components:h.components,items:c}}else if(d.menuType==="normal"&&i==="auto"){const h=wN(i,c);return{value:t,dom:h.dom,components:h.components,items:c}}else if(d.menuType==="normal"||d.menuType==="searchable"){const h=g();return{value:t,dom:h.dom,components:h.components,items:c}}else if(d.menuType==="listpreview"&&i!=="auto"){const h=CN(i);return{value:t,dom:h.dom,components:h.components,items:c}}else return{value:t,dom:lN(s,i,d.menuType),components:tL,items:c}},Fc=Xr("type"),L_=Xr("name"),H_=Xr("label"),uh=Xr("text"),xN=Xr("title"),IE=Xr("icon"),kv=Xr("value"),aL=Xc("fetch"),iL=Xc("getSubmenuItems"),f0=Xc("onAction"),lL=Xc("onItemAction"),g0=js("onSetup",()=>oe),EN=$r("name"),dh=$r("text"),TN=$r("role"),_d=$r("icon"),CC=$r("tooltip"),z_=$r("label"),LE=$r("shortcut"),V_=gd("select"),HE=Ur("active",!1),uL=Ur("borderless",!1),Sm=Ur("enabled",!0),zE=Ur("primary",!1),kN=t=>Ee("columns",t),U_=Ee("meta",{}),VE=js("onAction",oe),h0=t=>ar("type",t),W_=t=>Pc("name","name",Fo(()=>Kt(`${t}-name`)),Vt),dL=t=>Pc("value","value",Fo(()=>Kt(`${t}-value`)),Il()),_N=Vn([Fc,dh]),bu=t=>_r("separatormenuitem",_N,t),xm=Vn([h0("autocompleteitem"),HE,Sm,U_,kv,dh,_d]),AN=t=>_r("Autocompleter.Separator",_N,t),Z_=t=>_r("Autocompleter.Item",xm,t),p0=[Sm,CC,_d,dh,g0,ar("context","mode:design")],UE=Vn([Fc,f0,LE].concat(p0)),ON=t=>_r("toolbarbutton",UE,t),WE=[HE].concat(p0),wC=Vn(WE.concat([Fc,f0,LE])),DN=t=>_r("ToggleButton",wC,t),b0=[js("predicate",eo),zl("scope","node",["node","editor"]),zl("position","selection",["node","selection","line"])],j_=p0.concat([h0("contextformbutton"),ar("align","end"),zE,f0,ls("original",Mt)]),RN=WE.concat([h0("contextformbutton"),ar("align","end"),zE,f0,ls("original",Mt)]),SC=p0.concat([h0("contextformbutton")]),mL=WE.concat([h0("contextformtogglebutton")]),fL=Nc("type",{contextformbutton:j_,contextformtogglebutton:RN}),Ad=[z_,gi("commands",fL),Ru("launch",Nc("type",{contextformbutton:SC,contextformtogglebutton:mL})),js("onInput",oe),js("onSetup",oe)],vu=[...b0,...Ad,Hl("type",["contextform"]),js("initValue",Z("")),$r("placeholder")],xC=[...b0,...Ad,Hl("type",["contextsliderform"]),js("initValue",Z(0)),js("min",Z(0)),js("max",Z(100))],yu=[...b0,...Ad,Hl("type",["contextsizeinputform"]),js("initValue",Z({width:"",height:""}))],gL=Nc("type",{contextform:vu,contextsliderform:xC,contextsizeinputform:yu}),pr=t=>_r("ContextForm",gL,t),hL=Vn([h0("contexttoolbar"),ds("items",Yd([Vt,Ph([$r("name"),$r("label"),gi("items",Vt)])]))].concat(b0)),v0=t=>({name:t.name.getOrUndefined(),label:t.label.getOrUndefined(),items:t.items}),EC=t=>({...t,items:je(t.items)?t.items:Re(t.items,v0)}),MN=t=>_r("ContextToolbar",hL,t),G_=[Fc,Xr("src"),$r("alt"),_("classes",[],Vt)],q_=Vn(G_),pL=[Fc,uh,EN,_("classes",["tox-collection__item-label"],Vt)],K_=Vn(pL),NN=fc(()=>Jd("type",{cardimage:q_,cardtext:K_,cardcontainer:PN})),PN=Vn([Fc,ar("direction","horizontal"),ar("align","left"),ar("valign","middle"),gi("items",NN)]),y0=[Sm,dh,TN,LE,dL("menuitem"),U_,ar("context","mode:design")],Y_=Vn([Fc,z_,gi("items",NN),g0,VE].concat(y0)),BN=t=>_r("cardmenuitem",Y_,t),ZE=Vn([Fc,HE,_d].concat(y0)),bL=t=>_r("choicemenuitem",ZE,t),$N=[Fc,Xr("fancytype"),VE],vL=[Ee("initData",{})].concat($N),yL=[gd("select"),L("initData",{},[Ur("allowCustomColors",!0),ar("storageKey","default"),l1("colors",Il())])].concat($N),CL=Nc("fancytype",{inserttable:vL,colorswatch:yL}),FN=t=>_r("fancymenuitem",CL,t),wL=Vn([Fc,g0,VE,_d].concat(y0)),SL=t=>_r("menuitem",wL,t),IN=Vn([Fc,iL,g0,_d].concat(y0)),xL=t=>_r("nestedmenuitem",IN,t),LN=Vn([Fc,_d,HE,g0,f0].concat(y0)),TC=t=>_r("togglemenuitem",LN,t),X_=(t,s,c)=>{const i=Li(t.element,"."+c);if(i.length>0){const d=Tt(i,g=>{const h=g.dom.getBoundingClientRect().top,C=i[0].dom.getBoundingClientRect().top;return Math.abs(h-C)>s}).getOr(i.length);return A.some({numColumns:d,numRows:Math.ceil(i.length/d)})}else return A.none()},HN=(t,s)=>xt([Qn(t,s)]),_v={namedEvents:HN,unnamedEvents:t=>HN(Kt("unnamed-events"),t)},J_=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Od={item:t=>rn.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>rn.config({disabled:t}),splitButton:t=>rn.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>rn.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},kC=(t,s)=>{const c=t.getApi(s);return i=>{i(c)}},ff=(t,s)=>Gs(c=>{Rt(t.onBeforeSetup)&&t.onBeforeSetup(c),kC(t,c)(d=>{const g=t.onSetup(d);Rt(g)&&s.set(g)})}),mh=(t,s)=>pd(c=>kC(t,c)(s.get())),qu=(t,s,c)=>pd(i=>(c.set(qt.getValue(i)),kC(t,i)(s.get()))),zN="silver.uistate",C0="setDisabled",VN="setEnabled",Q_="init",UN=["switchmode",Q_],Av=(t,s)=>{const c=t.mainUi.outerContainer,i=[t.mainUi.mothership,...t.uiMotherships];s===C0&&ot(i,d=>{d.broadcastOn([ng()],{target:c.element})}),ot(i,d=>{d.broadcastOn([zN],s)})},eA=(t,s)=>{t.on("init SwitchMode",c=>{Av(s,c.type)}),t.on("DisabledStateChange",c=>{if(!c.isDefaultPrevented()){const i=c.state?C0:Q_;Av(s,i),c.state||t.nodeChanged()}}),t.on("NodeChange",c=>{const i=t.ui.isEnabled()?c.type:C0;Av(s,i)}),qk(t)&&t.mode.set("readonly")},_c=t=>Ki.config({channels:{[zN]:{onReceive:(s,c)=>{if(c===C0||c===VN){rn.set(s,c===C0);return}const{contextType:i,shouldDisable:d}=t();i==="mode"&&!fo(UN,c)||rn.set(s,d)}}}}),kL=(t,s)=>Ym((c,i)=>{kC(t,c)(t.onAction),!t.triggersSubmenu&&s===kd.CLOSE_ON_EXECUTE&&(c.getSystem().isConnected()&&Io(c,rm()),i.stop())}),_L={[ti()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Ov=Dc,Dv=(t,s,c,i)=>{const d=pn(oe);return{type:"item",dom:s.dom,components:Ov(s.optComponents),data:t.data,eventOrder:_L,hasSubmenu:t.triggersSubmenu,itemBehaviours:xt([Qn("item-events",[kL(t,c),ff(t,d),mh(t,d)]),Od.item(()=>!t.enabled||i.checkUiComponentContext(t.context).shouldDisable),_c(()=>i.checkUiComponentContext(t.context)),Kn.config({})].concat(t.itemBehaviours))}},Rv=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),tA=t=>{const s=Mp.os.isMacOS()||Mp.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),h=Re(g,C=>{const w=C.toLowerCase().trim();return uo(d,w)?d[w]:C});return s?h.join(""):h.join("+")},jE=(t,s,c=[D_])=>Gu(t,{tag:"div",classes:c},s),nA=t=>({dom:{tag:"div",classes:[NE]},components:[Ar(Td.translate(t))]}),oA=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),AL=(t,s)=>({dom:{tag:"div",classes:[NE]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Ar(Td.translate(s))]}]}),OL=t=>({dom:{tag:"div",classes:[d0]},components:[Ar(tA(t))]}),WN=t=>jE("checkmark",t,[R_]),Mv=t=>jE("chevron-right",t,[nN]),DL=t=>jE("chevron-down",t,[nN]),ZN=(t,s)=>{const c=t.direction==="vertical"?sN:M_,i=t.align==="left"?N_:rN;return{dom:{tag:"div",classes:[oN,c,i,(()=>{switch(t.valign){case"top":return cN;case"middle":return eL;case"bottom":return aN}})()]},components:s}},jN=(t,s,c)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:c.getOr("")}}}),GN=(t,s,c)=>{const i="custom",d="remove",g=t.value,h=t.iconContent.map(k=>q7(k,s.icons,c)),C=t.ariaLabel.map(k=>({"aria-label":s.translate(k),"data-mce-name":k})).getOr({});return{dom:(()=>{const k=RE,O=h.getOr(""),P={tag:"div",attributes:C,classes:[k]};return g===i?{...P,tag:"button",classes:[...P.classes,"tox-swatches__picker-btn"],innerHtml:O}:g===d?{...P,classes:[...P.classes,"tox-swatch--remove"],innerHtml:O}:io(g)?{...P,attributes:{...P.attributes,"data-mce-color":g},styles:{"background-color":g},innerHtml:O}:P})(),optComponents:[]}},sA=t=>{const s=t.map(c=>({attributes:{id:Kt("menu-item"),"aria-label":Td.translate(c)}})).getOr({});return{tag:"div",classes:[DE,pC],...s}},rA=(t,s,c,i)=>{const d={tag:"div",classes:[D_]},g=H=>Gu(H,d,s.icons,i),h=()=>A.some({dom:d}),C=c?t.iconContent.map(g).orThunk(h):A.none(),w=t.checkMark,k=A.from(t.meta).fold(()=>nA,H=>uo(H,"style")?On(AL,H.style):nA),O=t.htmlContent.fold(()=>t.textContent.map(k),H=>A.some(oA(H,[NE])));return{dom:sA(t.ariaLabel),optComponents:[C,O,t.shortcutContent.map(OL),w,t.caret]}},w0=(t,s,c,i=A.none())=>t.presets==="color"?GN(t,s,i):rA(t,s,c,i),GE=(t,s,c)=>Ct(t,"tooltipWorker").map(i=>[Wr.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:Zg}}),mode:"follow-highlight",onShow:(d,g)=>{i(h=>{Wr.setComponents(d,[op({element:ze.fromDom(h)})])})}})]).getOrThunk(()=>c.map(i=>[Wr.config({...s.providers.tooltips.getConfig({tooltipText:i}),mode:"follow-highlight"})]).getOr([])),qN=t=>Q2.DOM.encode(t),KN=(t,s)=>{const c=Td.translate(t),i=qN(c);if(s.length>0){const d=new RegExp(J_(s),"gi");return i.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return i},YN=(t,s,c,i,d,g,h,C=!0)=>{const w=w0({presets:i,textContent:A.none(),htmlContent:c?t.text.map(O=>KN(O,s)):A.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:A.none(),checkMark:A.none(),caret:A.none(),value:t.value},h.providers,C,t.icon),k=t.text.filter(O=>!c&&O!=="");return Dv({context:"mode:design",data:Rv(t),enabled:t.enabled,getApi:Z({}),onAction:O=>d(t.value,t.meta),onSetup:Z(oe),triggersSubmenu:!1,itemBehaviours:GE(t,h,k)},w,g,h.providers)},XN=(t,s)=>Re(t,c=>{switch(c.type){case"cardcontainer":return ZN(c,XN(c.items,s));case"cardimage":return jN(c.src,c.classes,c.alt);case"cardtext":const d=c.name.exists(g=>fo(s.cardText.highlightOn,g))?A.from(s.cardText.matchText).getOr(""):"";return oA(KN(c.text,d),c.classes)}}),RL=(t,s,c,i)=>{const d=h=>({isEnabled:()=>!rn.isDisabled(h),setEnabled:C=>{rn.set(h,!C),ot(Li(h.element,"*"),w=>{h.getSystem().getByDom(w).each(k=>{k.hasConfigured(rn)&&rn.set(k,!C)})})}}),g={dom:sA(t.label),optComponents:[A.some({dom:{tag:"div",classes:[oN,M_]},components:XN(t.items,i)})]};return Dv({context:"mode:design",data:Rv({text:A.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:A.from(i.itemBehaviours).getOr([])},g,s,c.providers)},ML=(t,s,c,i,d,g,h,C=!0)=>{const w=P=>({setActive:H=>{Ao.set(P,H)},isActive:()=>Ao.isOn(P),isEnabled:()=>!rn.isDisabled(P),setEnabled:H=>rn.set(P,!H)}),k=w0({presets:c,textContent:s?t.text:A.none(),htmlContent:A.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:A.none(),checkMark:s?A.some(WN(h.icons)):A.none(),caret:A.none(),value:t.value},h,C),O=t.text.filter(Z(!s)).map(P=>Wr.config(h.tooltips.getConfig({tooltipText:h.translate(P)})));return rr(Dv({context:t.context,data:Rv(t),enabled:t.enabled,getApi:w,onAction:P=>i(t.value),onSetup:P=>(P.setActive(d),oe),triggersSubmenu:!1,itemBehaviours:[...O.toArray()]},k,g,h),{toggling:{toggleClass:ME,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},cA=O2(Wk(),Zk()),aA=t=>({value:e6(t)}),iA=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,JN=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,QN=t=>iA.test(t)||JN.test(t),e6=t=>ci(t,"#").toUpperCase(),NL=t=>QN(t)?A.some({value:e6(t)}):A.none(),PL=t=>({value:t.value.replace(iA,(c,i,d,g)=>i+i+d+d+g+g)}),BL=t=>{const s=PL(t),c=JN.exec(s.value);return c===null?["FFFFFF","FF","FF","FF"]:c},lA=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},_C=t=>{const s=lA(t.red)+lA(t.green)+lA(t.blue);return aA(s)},t6=Math.min,n6=Math.max,qE=Math.round,o6=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,$L=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,S0=(t,s,c,i)=>({red:t,green:s,blue:c,alpha:i}),uA=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},s6=t=>{let s,c,i;const d=(t.hue||0)%360;let g=t.saturation/100,h=t.value/100;if(g=n6(0,t6(g,1)),h=n6(0,t6(h,1)),g===0)return s=c=i=qE(255*h),S0(s,c,i,1);const C=d/60,w=h*g,k=w*(1-Math.abs(C%2-1)),O=h-w;switch(Math.floor(C)){case 0:s=w,c=k,i=0;break;case 1:s=k,c=w,i=0;break;case 2:s=0,c=w,i=k;break;case 3:s=0,c=k,i=w;break;case 4:s=k,c=0,i=w;break;case 5:s=w,c=0,i=k;break;default:s=c=i=0}return s=qE(255*(s+O)),c=qE(255*(c+O)),i=qE(255*(i+O)),S0(s,c,i,1)},AC=t=>{const s=BL(t),c=parseInt(s[1],16),i=parseInt(s[2],16),d=parseInt(s[3],16);return S0(c,i,d,1)},OC=(t,s,c,i)=>{const d=parseInt(t,10),g=parseInt(s,10),h=parseInt(c,10),C=parseFloat(i);return S0(d,g,h,C)},KE=t=>{const s=o6.exec(t);if(s!==null)return A.some(OC(s[1],s[2],s[3],"1"));const c=$L.exec(t);return c!==null?A.some(OC(c[1],c[2],c[3],c[4])):A.none()},r6=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,c6=S0(255,0,0,1),FL=t=>{t.dispatch("SkinLoaded")},IL=(t,s)=>{t.dispatch("SkinLoadError",s)},LL=t=>{t.dispatch("ResizeEditor")},dA=(t,s)=>{t.dispatch("ResizeContent",s)},mA=(t,s)=>{t.dispatch("ScrollContent",s)},fA=(t,s)=>{t.dispatch("TextColorChange",s)},a6=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},HL=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),i6=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},zL=(t,s)=>{t.dispatch("StylesTextUpdate",s)},VL=(t,s)=>{t.dispatch("AlignTextUpdate",s)},UL=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},WL=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},ZL=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},jL=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},GL=t=>{t.dispatch("ToggleSidebar")},qL=t=>{t.dispatch("ToggleView")},l6=t=>{t.dispatch("ContextToolbarClose")},KL=t=>{t.dispatch("ContextFormSlideBack")},x0=(t,s)=>()=>{t(),s()},wi=t=>E0(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),gA=(t,s)=>c=>{const i=di(),d=()=>{c.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,c.setActive);i.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),i.clear()}},DC=(t,s)=>c=>{const i=wi(t)(c),d=gA(t,s)(c);return()=>{i(),d()}},E0=(t,s,c)=>i=>{const d=()=>c(i),g=()=>{c(i),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},u6=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},El=(t,s)=>()=>t.execCommand(s);var fh=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const RC={},d6=(t,s=10)=>{const c=fh.getItem(t),i=je(c)?JSON.parse(c):[],g=(k=>s-k.length<0?k.slice(0,s):k)(i),h=k=>{Qe(g,k).each(C),g.unshift(k),g.length>s&&g.pop(),fh.setItem(t,JSON.stringify(g))},C=k=>{g.splice(k,1)};return{add:h,state:()=>g.slice(0)}},m6=t=>Ct(RC,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,c=fh.getItem(s);if(Ps(c)){const d=fh.getItem("tinymce-custom-colors");fh.setItem(s,io(d)?d:"[]")}const i=d6(s,10);return RC[t]=i,i}),YL=t=>Re(m6(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),f6=(t,s)=>{m6(t).add(s)},MC=(t,s,c)=>({hue:t,saturation:s,value:c}),hA=t=>{let s=0,c=0,i=0;const d=t.red/255,g=t.green/255,h=t.blue/255,C=Math.min(d,Math.min(g,h)),w=Math.max(d,Math.max(g,h));if(C===w)return i=C,MC(0,0,i*100);const k=d===C?g-h:h===C?d-g:h-d;return s=d===C?3:h===C?1:5,s=60*(s-k/(w-C)),c=(w-C)/w,i=w,MC(Math.round(s),Math.round(c*100),Math.round(i*100))},XL=t=>hA(AC(t)),g6=t=>_C(s6(t)),JL=t=>NL(t).orThunk(()=>KE(t).map(_C)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const c=s.getContext("2d");c.clearRect(0,0,s.width,s.height),c.fillStyle="#FFFFFF",c.fillStyle=t,c.fillRect(0,0,1,1);const i=c.getImageData(0,0,1,1).data,d=i[0],g=i[1],h=i[2],C=i[3];return _C(S0(d,g,h,C))}),pA="forecolor",bA="hilitecolor",QL=5,eH=t=>h6(t.map((s,c)=>c%2===0?"#"+JL(s).value:s)),h6=t=>{const s=[];for(let c=0;c<t.length;c+=2)s.push({text:t[c+1],value:t[c],icon:"checkmark",type:"choiceitem"});return s},Em=t=>s=>s.options.get(t),vA="#000000",tH=t=>{const s=t.options.register,c=g=>Ze(g,je)?{value:eH(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},i=g=>Ze(g,je)?{value:h6(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},d=g=>jn(g)&&g>0?{value:g,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:c,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_raw",{processor:i}),s("color_map_background",{processor:c}),s("color_map_foreground",{processor:c}),s("color_cols",{processor:d,default:yA(t)}),s("color_cols_foreground",{processor:d,default:p6(t,pA)}),s("color_cols_background",{processor:d,default:p6(t,bA)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:vA}),s("color_default_background",{processor:"string",default:vA})},Dd=(t,s)=>s===pA&&t.options.isSet("color_map_foreground")?Em("color_map_foreground")(t):s===bA&&t.options.isSet("color_map_background")?Em("color_map_background")(t):t.options.isSet("color_map_raw")?Em("color_map_raw")(t):Em("color_map")(t),yA=(t,s="default")=>Math.max(QL,Math.ceil(Math.sqrt(Dd(t,s).length))),p6=(t,s)=>{const c=Em("color_cols")(t),i=yA(t,s);return c===yA(t)?i:c},YE=(t,s="default")=>Math.round(s===pA?Em("color_cols_foreground")(t):s===bA?Em("color_cols_background")(t):Em("color_cols")(t)),pa=Em("custom_colors"),nH=Em("color_default_foreground"),oH=Em("color_default_background"),sH="rgba(0, 0, 0, 0)",rH=t=>KE(t).exists(s=>s.alpha!==0),cH=t=>Qd(t,s=>{if(vo(s)){const c=at(s,"background-color");return Cn(rH(c),c)}else return A.none()}).getOr(sH),b6=(t,s)=>{const c=ze.fromDom(t.selection.getStart()),i=s==="hilitecolor"?cH(c):at(c,"color");return KE(i).map(d=>"#"+_C(d).value)},aH=(t,s,c)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:c}),t.nodeChanged()})},iH=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},lH=t=>{t.addCommand("mceApplyTextcolor",(s,c)=>{aH(t,s,c)}),t.addCommand("mceRemoveTextcolor",s=>{iH(t,s)})},v6=t=>{const s="choiceitem",c={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[c,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[c]},CA=(t,s,c,i)=>{c==="custom"?E6(t)(g=>{g.each(h=>{f6(s,h),t.execCommand("mceApplyTextcolor",s,h),i(h)})},b6(t,s).getOr(vA)):c==="remove"?(i(""),t.execCommand("mceRemoveTextcolor",s)):(i(c),t.execCommand("mceApplyTextcolor",s,c))},wA=(t,s,c)=>t.concat(YL(s).concat(v6(c))),y6=(t,s,c)=>i=>{i(wA(t,s,c))},SA=(t,s,c)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(i,c)},C6=(t,s)=>{t.setTooltip(s)},w6=(t,s)=>c=>{const i=b6(t,s);return vr(i,c.toUpperCase())},xA=(t,s,c)=>{if(re(c))return s==="forecolor"?"Text color":"Background color";const i=s==="forecolor"?"Text color {0}":"Background color {0}",d=wA(Dd(t,s),s,!1),g=We(d,h=>h.value===c).getOr({text:""}).text;return t.translate([i,t.translate(g)])},S6=(t,s,c,i)=>{t.ui.registry.addSplitButton(s,{tooltip:xA(t,c,i.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:w6(t,c),columns:YE(t,c),fetch:y6(Dd(t,c),c,pa(t)),onAction:d=>{CA(t,c,i.get(),oe)},onItemAction:(d,g)=>{CA(t,c,g,h=>{i.set(h),fA(t,{name:s,color:h})})},onSetup:d=>{SA(d,s,i.get());const g=h=>{h.name===s&&(SA(d,h.name,h.color),C6(d,xA(t,c,h.color)))};return t.on("TextColorChange",g),x0(wi(t)(d),()=>{t.off("TextColorChange",g)})}})},x6=(t,s,c,i,d)=>{t.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(C6(g,xA(t,c,d.get())),SA(g,s,d.get()),wi(t)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:w6(t,c),initData:{storageKey:c},onAction:g=>{CA(t,c,g.value,h=>{d.set(h),fA(t,{name:s,color:h})})}}]})},E6=t=>(s,c)=>{let i=!1;const d=C=>{const k=C.getData().colorpicker;i?(s(A.from(k)),C.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",k]))},g=(C,w)=>{w.name==="hex-valid"&&(i=w.value)},h={colorpicker:c};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onAction:g,onSubmit:d,onClose:oe,onCancel:()=>{s(A.none())}})},uH=t=>{lH(t);const s=nH(t),c=oH(t),i=pn(s),d=pn(c);S6(t,"forecolor","forecolor",i),S6(t,"backcolor","hilitecolor",d),x6(t,"forecolor","forecolor","Text color",i),x6(t,"backcolor","hilitecolor","Background color",d)},EA=(t,s,c,i,d,g,h,C)=>{const w=yC(s),O=dH(s,c,i,d!=="color"?"normal":"color",g,h,C);return I_(t,w,O,i,{menuType:d})},dH=(t,s,c,i,d,g,h)=>Dc(Re(t,C=>C.type==="choiceitem"?bL(C).fold(lh,w=>A.some(ML(w,c===1,i,s,g(w.value),d,h,yC(t)))):A.none())),XE=(t,s)=>{const c=m0(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+c.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?Cs(d.element,"[aria-checked=true]"):A.none()}},mH=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${RE}`:`.${pC}`}},T6=(t,s)=>{const c=fH(t,s),i=s.colorinput.getColorCols(t.initData.storageKey),d="color",h={...EA(Kt("menu-value"),c,C=>{t.onAction({value:C})},i,d,kd.CLOSE_ON_EXECUTE,t.select.getOr(eo),s.shared.providers),markers:m0(d),movement:XE(i,d),showMenuRole:!1};return{type:"widget",data:{value:Kt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[cA.widget(l0.sketch(h))]}},fH=(t,s)=>{const c=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>wA(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,c),i=>i.concat(v6(c)))},TA=Kt("cell-over"),k6=Kt("cell-execute"),gH=t=>(s,c)=>t.shared.providers.translate(["{0} columns, {1} rows",c,s]),hH=(t,s,c)=>{const i=h=>kn(h,TA,{row:t,col:s}),d=h=>kn(h,k6,{row:t,col:s}),g=(h,C)=>{C.stop(),d(h)};return oi({dom:{tag:"div",attributes:{role:"button","aria-label":c}},behaviours:xt([Qn("insert-table-picker-cell",[Ye(Mu(),zn.focus),Ye(ti(),d),Ye(om(),g),Ye(u1(),g)]),Ao.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),zn.config({onFocus:i})])})},_6=(t,s,c)=>{const i=[];for(let d=0;d<s;d++){const g=[];for(let h=0;h<c;h++){const C=t(d+1,h+1);g.push(hH(d,h,C))}i.push(g)}return i},pH=(t,s,c,i,d)=>{for(let g=0;g<i;g++)for(let h=0;h<d;h++)Ao.set(t[g][h],g<=s&&h<=c)},bH=t=>fe(t,s=>Re(s,Cl)),A6=(t,s)=>Ar(`${s}x${t}`),O6={inserttable:(t,s)=>{const d=gH(s),g=_6(d,10,10),h=A6(0,0),C=ws({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[h],behaviours:xt([Kn.config({})])});return{type:"widget",data:{value:Kt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[cA.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:bH(g).concat(C.asSpec()),behaviours:xt([Qn("insert-table-picker",[Gs(w=>{Kn.set(C.get(w),[h])}),g1(TA,(w,k,O)=>{const{row:P,col:H}=O.event;pH(g,P,H,10,10),Kn.set(C.get(w),[A6(P+1,H+1)])}),g1(k6,(w,k,O)=>{const{row:P,col:H}=O.event;Io(w,rm()),t.onAction({numRows:P+1,numColumns:H+1})})]),En.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:T6},vH=(t,s)=>Ct(O6,t.fancytype).map(c=>c(t,s)),D6=(t,s,c,i=!0,d=!1)=>{const g=d?DL(c.icons):Mv(c.icons),h=w=>({isEnabled:()=>!rn.isDisabled(w),setEnabled:k=>rn.set(w,!k),setIconFill:(k,O)=>{Cs(w.element,`svg path[class="${k}"], rect[class="${k}"]`).each(P=>{Xe(P,"fill",O)})},setTooltip:k=>{const O=c.translate(k);Xe(w.element,"aria-label",O)}}),C=w0({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,caret:A.some(g),checkMark:A.none(),shortcutContent:t.shortcut},c,i);return Dv({context:t.context,data:Rv(t),getApi:h,enabled:t.enabled,onAction:oe,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},C,s,c)},yH=(t,s,c,i=!0)=>{const d=h=>({isEnabled:()=>!rn.isDisabled(h),setEnabled:C=>rn.set(h,!C)}),g=w0({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,caret:A.none(),checkMark:A.none(),shortcutContent:t.shortcut},c,i);return Dv({context:t.context,data:Rv(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,c)},R6=t=>({type:"separator",dom:{tag:"div",classes:[pC,Q7]},components:t.text.map(Ar).toArray()}),CH=(t,s,c,i=!0)=>{const d=h=>({setActive:C=>{Ao.set(h,C)},isActive:()=>Ao.isOn(h),isEnabled:()=>!rn.isDisabled(h),setEnabled:C=>rn.set(h,!C)}),g=w0({iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,checkMark:A.some(WN(c.icons)),caret:A.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},c,i);return rr(Dv({context:t.context,data:Rv(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,c),{toggling:{toggleClass:ME,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},wH=YN,M6=R6,SH=yH,xH=D6,EH=CH,TH=vH,kH=RL;var _H=Object.freeze({__proto__:null,getCoupled:(t,s,c,i)=>c.getOrCreate(t,s,i),getExistingCoupled:(t,s,c,i)=>c.getExisting(t,s,i)}),AH=[ds("others",cu(ro.value,Il()))],N6=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,h)=>{if(os(g.others).length===0)throw new Error("Cannot find any known coupled components");return Ct(t,h)},c=(g,h,C)=>s(h,C).getOrThunk(()=>{const k=Ct(h.others,C).getOrDie("No information found for coupled component: "+C)(g),O=g.getSystem().build(k);return t[C]=O,O}),i=(g,h,C)=>s(h,C).orThunk(()=>(Ct(h.others,C).getOrDie("No information found for coupled component: "+C),A.none())),d=Z({});return Vl({readState:d,getExisting:i,getOrCreate:c})}});const pc=gc({fields:AH,name:"coupling",apis:_H,state:N6}),kA=t=>{let s=A.none(),c=[];const i=k=>kA(O=>{d(P=>{O(k(P))})}),d=k=>{h()?w(k):c.push(k)},g=k=>{h()||(s=A.some(k),C(c),c=[])},h=()=>s.isSome(),C=k=>{ot(k,w)},w=k=>{s.each(O=>{setTimeout(()=>{k(O)},0)})};return t(g),{get:d,map:i,isReady:h}},OH={nu:kA,pure:t=>kA(s=>{s(t)})},DH=t=>{setTimeout(()=>{throw t},0)},Ip=t=>{const s=w=>{t().then(w,DH)};return{map:w=>Ip(()=>t().then(w)),bind:w=>Ip(()=>t().then(k=>w(k).toPromise())),anonBind:w=>Ip(()=>t().then(()=>w.toPromise())),toLazy:()=>OH.nu(s),toCached:()=>{let w=null;return Ip(()=>(w===null&&(w=t()),w))},toPromise:t,get:s}},Si={nu:t=>Ip(()=>new Promise(t)),pure:t=>Ip(()=>Promise.resolve(t))},_A=Z("sink"),AA=Z(Xi({name:_A(),overrides:Z({dom:{tag:"div"},behaviours:xt([Wa.config({useFixed:Bt})]),events:ir([If(za()),If(Mi()),If(om())])})})),P6=(t,s)=>{const c=t.getHotspot(s).getOr(s),i="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:i,hotspot:c,overrides:d}),g=>({type:i,hotspot:c,overrides:d,layouts:g}))},RH=(t,s,c)=>{const i=t.fetch;return i(c).map(s)},B6=(t,s,c,i,d,g,h)=>{const C=RH(t,s,i),w=$6(i,t);return C.map(k=>k.bind(O=>{const P=O.menus[O.primary];return A.from(P).each(H=>{t.listRole.each(j=>{H.role=j})}),A.from(Rp.sketch({...g.menu(),uid:Hg(""),data:O,highlightOnOpen:h,onOpenMenu:(H,j)=>{const Q=w().getOrDie();Wa.position(Q,j,{anchor:c}),cs.decloak(d)},onOpenSubmenu:(H,j,Q)=>{const te=w().getOrDie();Wa.position(te,Q,{anchor:{type:"submenu",item:j}}),cs.decloak(d)},onRepositionMenu:(H,j,Q)=>{const te=w().getOrDie();Wa.position(te,j,{anchor:c}),ot(Q,we=>{Wa.position(te,we.triggeredMenu,{anchor:{type:"submenu",item:we.triggeringItem}})})},onEscape:()=>(zn.focus(i),cs.close(d),A.some(!0))}))}))},JE=(t,s,c,i,d,g,h)=>{const C=P6(t,c);return B6(t,s,C,c,i,d,h).map(k=>(k.fold(()=>{cs.isOpen(i)&&cs.close(i)},O=>{cs.cloak(i),cs.open(i,O),g(i)}),i))},MH=(t,s,c,i,d,g,h)=>(cs.close(i),Si.pure(i)),OA=(t,s,c,i,d,g)=>{const h=pc.getCoupled(c,"sandbox");return(cs.isOpen(h)?MH:JE)(t,s,c,h,i,d,g)},NH=(t,s,c)=>{const i=Qo.getCurrent(s).getOr(s),d=ee(t.element);c?Nt(i.element,"min-width",d+"px"):Y(i.element,d)},$6=(t,s)=>t.getSystem().getByUid(s.uid+"-"+_A()).map(c=>()=>ro.value(c)).getOrThunk(()=>s.lazySink.fold(()=>()=>ro.error(new Error("No internal sink is specified, nor could an external sink be found")),c=>()=>c(t))),F6=t=>{cs.getState(t).each(s=>{Rp.repositionMenus(s)})},Nv=(t,s,c)=>{const i=Ny(),d=(C,w)=>{const k=P6(t,s);i.link(s.element),t.matchWidth&&NH(k.hotspot,w,t.useMinWidth),t.onOpen(k,C,w),c!==void 0&&c.onOpen!==void 0&&c.onOpen(C,w)},g=(C,w)=>{i.unlink(s.element),h().getOr(w).element.dom.dispatchEvent(new window.FocusEvent("focusout")),c!==void 0&&c.onClose!==void 0&&c.onClose(C,w)},h=$6(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:i.id}},behaviours:ql.augment(t.sandboxBehaviours,[qt.config({store:{mode:"memory",initialValue:s}}),cs.config({onOpen:d,onClose:g,isPartOf:(C,w,k)=>Kf(w,k)||Kf(s,k),getAttachPoint:()=>h().getOrDie()}),Qo.config({find:C=>cs.getState(C).bind(w=>Qo.getCurrent(w))}),Ki.config({channels:{...wl({isExtraPart:eo}),...Qg({doReposition:F6})}})])}},I6=t=>{const s=pc.getCoupled(t,"sandbox");F6(s)},Pv=()=>[Ee("sandboxClasses",[]),ql.field("sandboxBehaviours",[Qo,Ki,cs,qt])],PH=Z([nt("dom"),nt("fetch"),rs("onOpen"),pi("onExecute"),Ee("getHotspot",A.some),Ee("getAnchorOverrides",Z({})),Xf(),ga("dropdownBehaviours",[Ao,pc,En,zn]),nt("toggleClass"),Ee("eventOrder",{}),ms("lazySink"),Ee("matchWidth",!1),Ee("useMinWidth",!1),ms("role"),ms("listRole")].concat(Pv())),BH=Z([gu({schema:[k1(),Ee("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),AA()]),$H=(t,s,c,i)=>{const d=O=>Ct(t.dom,"attributes").bind(P=>Ct(P,O)),g=O=>{cs.getState(O).each(P=>{Rp.highlightPrimary(P)})},h=(O,P,H)=>OA(t,Mt,O,i,P,H),C=O=>{h(O,g,ha.HighlightMenuAndItem).get(oe)},w={expand:O=>{Ao.isOn(O)||h(O,oe,ha.HighlightNone).get(oe)},open:O=>{Ao.isOn(O)||h(O,oe,ha.HighlightMenuAndItem).get(oe)},refetch:O=>pc.getExistingCoupled(O,"sandbox").fold(()=>h(O,oe,ha.HighlightMenuAndItem).map(oe),H=>JE(t,Mt,O,H,i,oe,ha.HighlightMenuAndItem).map(oe)),isOpen:Ao.isOn,close:O=>{Ao.isOn(O)&&h(O,oe,ha.HighlightMenuAndItem).get(oe)},repositionMenus:O=>{Ao.isOn(O)&&I6(O)}},k=(O,P)=>(Ni(O),A.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:hc(t.dropdownBehaviours,[Ao.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),pc.config({others:{sandbox:O=>Nv(t,O,{onOpen:()=>Ao.on(O),onClose:()=>Ao.off(O)})}}),En.config({mode:"special",onSpace:k,onEnter:k,onDown:(O,P)=>{if(Ku.isOpen(O)){const H=pc.getCoupled(O,"sandbox");g(H)}else Ku.open(O);return A.some(!0)},onEscape:(O,P)=>Ku.isOpen(O)?(Ku.close(O),A.some(!0)):A.none()}),zn.config({})]),events:yv(A.some(C)),eventOrder:{...t.eventOrder,[ti()]:["disabling","toggling","alloy.base.behaviour"]},apis:w,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),O=>({role:O})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},Ku=si({name:"Dropdown",configFields:PH(),partFields:BH(),factory:$H,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),zG=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},QE=t=>{const s=qt.getValue(t),c=$E(t).map(B_);Ku.refetch(s).get(()=>{const i=pc.getCoupled(s,"sandbox");c.each(d=>$E(i).each(g=>nL(g,d)))})},Bv=(t,s)=>{L6(t).each(c=>{rb(t,c.element,s.event.eventType,s.event.interactionEvent)})},L6=t=>cs.getState(t).bind(K.getHighlighted).bind(K.getHighlighted),H6=t=>ni(t.element,vC)?A.some(t.element):Cs(t.element,"."+vC),z6=(t,s,c)=>{bC(t).each(i=>{oL(i,c),H6(s).each(g=>{Gn(g,"id").each(h=>Xe(i.element,"aria-controls",h))})}),Xe(c.element,"aria-selected","true")},FH=(t,s,c)=>{Xe(c.element,"aria-selected","false")},IH=t=>{bC(t).each(s=>zn.focus(s))},LH=t=>pc.getExistingCoupled(t,"sandbox").bind($E).map(B_).map(c=>c.fetchPattern).getOr("");var eT;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(eT||(eT={}));const HH=(t,s,c,i,d)=>{const g=c.shared.providers,h=C=>d?{...C,shortcut:A.none(),icon:C.text.isSome()?A.none():C.icon}:C;switch(t.type){case"menuitem":return SL(t).fold(lh,C=>A.some(SH(h(C),s,g,i)));case"nestedmenuitem":return xL(t).fold(lh,C=>A.some(xH(h(C),s,g,i,d)));case"togglemenuitem":return TC(t).fold(lh,C=>A.some(EH(h(C),s,g,i)));case"separator":return bu(t).fold(lh,C=>A.some(M6(C)));case"fancymenuitem":return FN(t).fold(lh,C=>TH(C,c));default:return console.error("Unknown item in general menu",t),A.none()}},zH=(t,s,c,i,d,g,h)=>{const C=i===1,w=!C||yC(t);return Dc(Re(t,k=>{switch(k.type){case"separator":return AN(k).fold(lh,O=>A.some(M6(O)));case"cardmenuitem":return BN(k).fold(lh,O=>A.some(kH({...O,onAction:P=>{O.onAction(P),c(O.value,O.meta)}},d,g,{itemBehaviours:GE(O.meta,g,A.none()),cardText:{matchText:s,highlightOn:h}})));case"autocompleteitem":default:return Z_(k).fold(lh,O=>A.some(wH(O,s,C,"normal",c,d,g,w)))}}))},V6=(t,s,c,i,d,g)=>{const h=yC(s),C=Dc(Re(s,O=>{const P=j=>d?!uo(j,"text"):h,H=j=>HH(j,c,i,P(j),d);return O.type==="nestedmenuitem"&&O.getSubmenuItems().length<=0?H({...O,enabled:!1}):H(O)})),w=zG(g);return(d?cL:I_)(t,h,C,1,w)},DA=t=>Rp.singleData(t.value,t),VH=(t,s,c,i)=>{const d=XE(s,i),g=m0(i);return{data:DA({...t,movement:d,menuBehaviours:_v.unnamedEvents(s!=="auto"?[]:[Gs((h,C)=>{X_(h,4,g.item).each(({numColumns:w,numRows:k})=>{En.setGridSize(h,k,w)})})])}),menu:{markers:m0(i),fakeFocus:c===eT.ContentFocus}}},UH=t=>z1.create(ze.fromDom(t.startContainer),t.startOffset,ze.fromDom(t.endContainer),t.endOffset),$v={register:(t,s)=>{const c=Kt("autocompleter"),i=pn(!1),d=pn(!1),g=ys(),h=oi(Ir.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:c}},components:[],fireDismissalEventInstead:{},inlineBehaviours:xt([Qn("dismissAutocompleter",[Ye($f(),()=>P()),Ye(tb(),(ce,xe)=>{Gn(xe.event.target,"id").each(Ce=>Xe(ze.fromDom(t.getBody()),"aria-activedescendant",Ce))})])]),lazySink:s.getSink})),C=()=>Ir.isOpen(h),w=d.get,k=()=>{if(C()){Ir.hide(h),t.dom.remove(c,!1);const ce=ze.fromDom(t.getBody());Gn(ce,"aria-owns").filter(xe=>xe===c).each(()=>{V(ce,"aria-owns"),V(ce,"aria-activedescendant")})}},O=()=>Ir.getContent(h).bind(ce=>Ho(ce.components(),0)),P=()=>t.execCommand("mceAutocompleterClose"),H=ce=>{const xe=ps(ce,Ce=>A.from(Ce.columns)).getOr(1);return fe(ce,Ce=>{const Pe=Ce.items;return zH(Pe,Ce.matchText,(Fe,Lt)=>{const bt={hide:()=>P(),reload:He=>{k(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:He})}};t.execCommand("mceAutocompleterRefreshActiveRange"),g.get().each(He=>{i.set(!0),Ce.onAction(bt,He,Fe,Lt),i.set(!1)})},xe,kd.BUBBLE_TO_SANDBOX,s,Ce.highlightOn)})},j=(ce,xe)=>{const Ce=ps(ce,Pe=>A.from(Pe.columns)).getOr(1);Ir.showMenuAt(h,{anchor:{type:"selection",getSelection:()=>g.get().map(UH),root:ze.fromDom(t.getBody())}},VH(I_("autocompleter-value",!0,xe,Ce,{menuType:"normal"}),Ce,eT.ContentFocus,"normal")),O().each(K.highlightFirst)},Q=ce=>{const xe=H(ce);xe.length>0?(j(ce,xe),Xe(ze.fromDom(t.getBody()),"aria-owns",c),t.inline||te()):k()},te=()=>{t.dom.get(c)&&t.dom.remove(c,!1);const ce=t.getDoc().documentElement,xe=t.selection.getNode(),Ce=t3(h.element);es(Ce,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${xe.offsetTop}px`,left:`${xe.offsetLeft}px`}),t.dom.add(ce,Ce.dom),Cs(Ce,'[role="menu"]').each(Pe=>{xo(Pe,"position"),xo(Pe,"max-height")})};t.on("AutocompleterStart",({lookupData:ce})=>{d.set(!0),i.set(!1),Q(ce)}),t.on("AutocompleterUpdate",({lookupData:ce})=>Q(ce)),t.on("AutocompleterUpdateActiveRange",({range:ce})=>g.set(ce)),t.on("AutocompleterEnd",()=>{k(),d.set(!1),i.set(!1),g.clear()});const we={cancelIfNecessary:P,isMenuOpen:C,isActive:w,isProcessingAction:i.get,getMenu:O};tN.setup(we,t)}},gf=(t,s,c)=>Lu(t,s,c).isSome(),U6=(t,s)=>{let c=null;return{cancel:()=>{c!==null&&(clearTimeout(c),c=null)},schedule:(...g)=>{c=setTimeout(()=>{t.apply(null,g),c=null},s)}}},RA=5,W6=400,NC=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?A.none():A.some(s.touches[0])},ZH=(t,s)=>{const c=Math.abs(t.clientX-s.x),i=Math.abs(t.clientY-s.y);return c>RA||i>RA},PC=t=>{const s=ys(),c=pn(!1),i=U6(k=>{t.triggerEvent(HR(),k),c.set(!0)},W6),d=k=>(NC(k).each(O=>{i.cancel();const P={x:O.clientX,y:O.clientY,target:k.target};i.schedule(k),c.set(!1),s.set(P)}),A.none()),g=k=>(i.cancel(),NC(k).each(O=>{s.on(P=>{ZH(O,P)&&s.clear()})}),A.none()),h=k=>{i.cancel();const O=P=>Bo(P.target,k.target);return s.get().filter(O).map(P=>c.get()?(k.prevent(),!1):t.triggerEvent(u1(),k))},C=Rs([{key:zo(),value:d},{key:fr(),value:g},{key:Ec(),value:h}]);return{fireIfReady:(k,O)=>Ct(C,O).bind(P=>P(k))}},BC=t=>t.raw.which===pe[0]&&!fo(["input","textarea"],ss(t.target))&&!gf(t.target,'[contenteditable="true"]'),jH=(t,s)=>{const c={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=PC(c),g=Re(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),j=>$i(t,j,Q=>{d.fireIfReady(Q,j).each(we=>{we&&Q.kill()}),c.triggerEvent(j,Q)&&Q.kill()})),h=ys(),C=$i(t,"paste",j=>{d.fireIfReady(j,"paste").each(te=>{te&&j.kill()}),c.triggerEvent("paste",j)&&j.kill(),h.set(setTimeout(()=>{c.triggerEvent(Ag(),j)},0))}),w=$i(t,"keydown",j=>{c.triggerEvent("keydown",j)?j.kill():c.stopBackspace&&BC(j)&&j.prevent()}),k=$i(t,"focusin",j=>{c.triggerEvent("focusin",j)&&j.kill()}),O=ys(),P=$i(t,"focusout",j=>{c.triggerEvent("focusout",j)&&j.kill(),O.set(setTimeout(()=>{c.triggerEvent(Gm(),j)},0))});return{unbind:()=>{ot(g,j=>{j.unbind()}),w.unbind(),k.unbind(),P.unbind(),C.unbind(),h.on(clearTimeout),O.on(clearTimeout)}}},Z6=(t,s)=>{const c=Ct(t,"target").getOr(s);return pn(c)},GH=(t,s)=>{const c=pn(!1),i=pn(!1);return{stop:()=>{c.set(!0)},cut:()=>{i.set(!0)},isStopped:c.get,isCut:i.get,event:t,setSource:s.set,getSource:s.get}},qH=t=>{const s=pn(!1);return{stop:()=>{s.set(!0)},cut:oe,isStopped:s.get,isCut:eo,event:t,setSource:ie("Cannot set source of a broadcasted event"),getSource:ie("Cannot get source of a broadcasted event")}},$C=ve.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),j6=(t,s,c,i,d,g)=>{const h=t(s,i),C=GH(c,d);return h.fold(()=>(g.logEventNoHandlers(s,i),$C.complete()),w=>{const k=w.descHandler;return bb(k)(C),C.isStopped()?(g.logEventStopped(s,w.element,k.purpose),$C.stopped()):C.isCut()?(g.logEventCut(s,w.element,k.purpose),$C.complete()):oc(w.element).fold(()=>(g.logNoParent(s,w.element,k.purpose),$C.complete()),P=>(g.logEventResponse(s,w.element,k.purpose),$C.resume(P)))})},FC=(t,s,c,i,d,g)=>j6(t,s,c,i,d,g).fold(Bt,h=>FC(t,s,c,h,d,g),eo),KH=(t,s,c,i,d)=>{const g=Z6(c,i);return j6(t,s,c,i,g,d)},MA=(t,s,c)=>{const i=qH(s);return ot(t,d=>{const g=d.descHandler;bb(g)(i)}),i.isStopped()},YH=(t,s,c,i)=>G6(t,s,c,c.target,i),G6=(t,s,c,i,d)=>{const g=Z6(c,i);return FC(t,s,c,i,g,d)},q6=(t,s)=>({element:t,descHandler:s}),K6=(t,s)=>({id:t,descHandler:s}),Y6=()=>{const t={},s=(h,C,w)=>{xs(w,(k,O)=>{const P=t[O]!==void 0?t[O]:{};P[C]=zg(k,h),t[O]=P})},c=(h,C)=>Lg(C).bind(w=>Ct(h,w)).map(w=>q6(C,w));return{registerId:s,unregisterId:h=>{xs(t,(C,w)=>{uo(C,h)&&delete C[h]})},filterByType:h=>Ct(t,h).map(C=>ur(C,(w,k)=>K6(k,w))).getOr([]),find:(h,C,w)=>Ct(t,C).bind(k=>Qd(w,O=>c(k,O),h))}},gh=()=>{const t=Y6(),s={},c=k=>{const O=k.element;return Lg(O).getOrThunk(()=>c3("uid-",k.element))},i=(k,O)=>{const P=s[O];if(P===k)g(k);else throw new Error('The tagId "'+O+'" is already used by: '+Gi(P.element)+`
Cannot use it for: `+Gi(k.element)+`
The conflicting element is`+(se(P.element)?" ":" not ")+"already in the DOM")},d=k=>{const O=c(k);dr(s,O)&&i(k,O);const P=[k];t.registerId(P,O,k.events),s[O]=k},g=k=>{Lg(k.element).each(O=>{delete s[O],t.unregisterId(O)})};return{find:(k,O,P)=>t.find(k,O,P),filter:k=>t.filterByType(k),register:d,unregister:g,getById:k=>Ct(s,k)}},hf=Ji({name:"Container",factory:t=>{const{attributes:s,...c}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...c},components:t.components,behaviours:tv(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[Ee("components",[]),ga("containerBehaviours",[]),Ee("events",{}),Ee("domModification",{}),Ee("eventOrder",{})]}),NA=t=>{const s=ce=>oc(t.element).fold(Bt,xe=>Bo(ce,xe)),c=gh(),i=(ce,xe)=>c.find(s,ce,xe),d=jH(t.element,{triggerEvent:(ce,xe)=>Cy(ce,xe.target,Ce=>YH(i,ce,xe,Ce))}),g={debugInfo:Z("real"),triggerEvent:(ce,xe,Ce)=>{Cy(ce,xe,Pe=>G6(i,ce,Ce,xe,Pe))},triggerFocus:(ce,xe)=>{Lg(ce).fold(()=>{bi(ce)},Ce=>{Cy(sm(),ce,Pe=>(KH(i,sm(),{originator:xe,kill:oe,prevent:oe,target:ce},ce,Pe),!1))})},triggerEscape:(ce,xe)=>{g.triggerEvent("keydown",ce.element,xe.event)},getByUid:ce=>te(ce),getByDom:ce=>we(ce),build:oi,buildOrPatch:kb,addToGui:ce=>{w(ce)},removeFromGui:ce=>{k(ce)},addToWorld:ce=>{h(ce)},removeFromWorld:ce=>{C(ce)},broadcast:ce=>{H(ce)},broadcastOn:(ce,xe)=>{j(ce,xe)},broadcastEvent:(ce,xe)=>{Q(ce,xe)},isConnected:Bt},h=ce=>{ce.connect(g),So(ce.element)||(c.register(ce),ot(ce.components(),h),g.triggerEvent(d1(),ce.element,{target:ce.element}))},C=ce=>{So(ce.element)||(ot(ce.components(),C),c.unregister(ce)),ce.disconnect()},w=ce=>{Xg(t,ce)},k=ce=>{Sd(ce)},O=()=>{d.unbind(),dl(t.element)},P=ce=>{const xe=c.filter(Pu());ot(xe,Ce=>{const Pe=Ce.descHandler;bb(Pe)(ce)})},H=ce=>{P({universal:!0,data:ce})},j=(ce,xe)=>{P({universal:!1,channels:ce,data:xe})},Q=(ce,xe)=>{const Ce=c.filter(ce);return MA(Ce,xe)},te=ce=>c.getById(ce).fold(()=>ro.error(new Error('Could not find component with uid: "'+ce+'" in system.')),ro.value),we=ce=>{const xe=Lg(ce).getOr("not found");return te(xe)};return h(t),{root:t,element:t.element,destroy:O,add:w,remove:k,getByUid:te,getByDom:we,addToWorld:h,removeFromWorld:C,broadcast:H,broadcastOn:j,broadcastEvent:Q}},X6=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Re(t.items,s.interpreter)}),XH=Z([Ee("prefix","form-field"),ga("fieldBehaviours",[Qo,qt])]),J6=Z([Xi({schema:[nt("dom")],name:"label"}),Xi({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[nt("text")],name:"aria-descriptor"}),ja({factory:{sketch:t=>{const s=Eo(t,["factory"]);return t.factory.sketch(s)}},schema:[nt("factory")],name:"field"})]),JH=(t,s,c,i)=>{const d=hc(t.fieldBehaviours,[Qo.config({find:C=>tr(C,t,"field")}),qt.config({store:{mode:"manual",getValue:C=>Qo.getCurrent(C).bind(qt.getValue),setValue:(C,w)=>{Qo.getCurrent(C).each(k=>{qt.setValue(k,w)})}}})]),g=ir([Gs((C,w)=>{const k=Fx(C,t,["label","field","aria-descriptor"]);k.field().each(O=>{const P=Kt(t.prefix);k.label().each(H=>{Xe(H.element,"for",P),Xe(O.element,"id",P)}),k["aria-descriptor"]().each(H=>{const j=Kt(t.prefix);Xe(H.element,"id",j),Xe(O.element,"aria-describedby",j)})})})]),h={getField:C=>tr(C,t,"field"),getLabel:C=>tr(C,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:h}},Vo=si({name:"FormField",configFields:XH(),partFields:J6(),factory:JH,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var QH=tinymce.util.Tools.resolve("tinymce.html.Entities");const IC=(t,s,c,i)=>{const d=t9(t,s,c,i);return Vo.sketch(d)},e9=(t,s)=>IC(t,s,[],[]),t9=(t,s,c,i)=>({dom:Q6(c),components:t.toArray().concat([s]),fieldBehaviours:xt(i)}),n9=()=>Q6([]),Q6=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),ig=(t,s)=>Vo.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Ar(s.translate(t))]}),Kl=Kt("form-component-change"),eP=Kt("form-component-input"),LC=Kt("form-close"),hh=Kt("form-cancel"),lg=Kt("form-action"),HC=Kt("form-submit"),PA=Kt("form-block"),tT=Kt("form-unblock"),tP=Kt("form-tabchange"),nP=Kt("form-resize"),o9=(t,s,c)=>{const i=t.label.map(j=>ig(j,s)),d=s.icons(),g=j=>{var Q;return(Q=d[j])!==null&&Q!==void 0?Q:j},h=j=>(Q,te)=>{Lu(te.event.target,"[data-collection-item-value]").each(we=>{j(Q,te,we,ho(we,"data-collection-item-value"))})},C=(j,Q)=>{const we=s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()?" tox-collection__item--state-disabled":"",ce=Re(Q,Pe=>{const Fe=Td.translate(Pe.text),Lt=t.columns===1?`<div class="tox-collection__item-label">${Fe}</div>`:"",bt=`<div class="tox-collection__item-icon">${g(Pe.icon)}</div>`,He={_:" "," - ":" ","-":" "},Zt=Fe.replace(/\_| \- |\-/g,Pt=>He[Pt]);return`<div data-mce-tooltip="${Zt}" class="tox-collection__item${we}" tabindex="-1" data-collection-item-value="${QH.encodeAllRaw(Pe.value)}" aria-label="${Zt}">${bt}${Lt}</div>`}),xe=t.columns!=="auto"&&t.columns>1?Tn(ce,t.columns):[ce],Ce=Re(xe,Pe=>`<div class="tox-collection__group">${Pe.join("")}</div>`);Fr(j.element,Ce.join(""))},w=h((j,Q,te,we)=>{Q.stop(),s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()||kn(j,lg,{name:t.name,value:we})}),k=[Ye(Mu(),h((j,Q,te)=>{bi(te,!0)})),Ye(om(),w),Ye(u1(),w),Ye(Nu(),h((j,Q,te)=>{Cs(j.element,"."+ag).each(we=>{ic(we,ag)}),Jr(te,ag)})),Ye(Iw(),h(j=>{Cs(j.element,"."+ag).each(Q=>{ic(Q,ag),mm(Q)})})),Ym(h((j,Q,te,we)=>{kn(j,lg,{name:t.name,value:we})}))],O=(j,Q)=>Re(Li(j.element,".tox-collection__item"),Q),P=Vo.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Mt},behaviours:xt([rn.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable,onDisabled:j=>{O(j,Q=>{Jr(Q,"tox-collection__item--state-disabled"),Xe(Q,"aria-disabled",!0)})},onEnabled:j=>{O(j,Q=>{ic(Q,"tox-collection__item--state-disabled"),V(Q,"aria-disabled")})}}),_c(()=>s.checkUiComponentContext(t.context)),Kn.config({}),Wr.config({...s.tooltips.getConfig({tooltipText:"",onShow:j=>{Cs(j.element,"."+ag+"[data-mce-tooltip]").each(Q=>{Gn(Q,"data-mce-tooltip").each(te=>{Wr.setComponents(j,s.tooltips.getComponents({tooltipText:te}))})})}}),mode:"children-keyboard-focus",anchor:j=>({type:"node",node:Cs(j.element,"."+ag).orThunk(()=>xS(".tox-collection__item")),root:j.element,layouts:{onLtr:Z([Uc,Qc,Tc,Ra,$c,kc]),onRtl:Z([Uc,Qc,Tc,Ra,$c,kc])},bubble:Fi(0,-2,{})})}),qt.config({store:{mode:"memory",initialValue:c.getOr([])},onSetValue:(j,Q)=>{C(j,Q),t.columns==="auto"&&X_(j,5,"tox-collection__item").each(({numRows:te,numColumns:we})=>{En.setGridSize(j,te,we)}),Io(j,nP)}}),lr.config({}),En.config(mH(t.columns,"normal")),Qn("collection-events",k)]),eventOrder:{[ti()]:["disabling","alloy.base.behaviour","collection-events"],[Nu()]:["collection-events","tooltipping"]}});return IC(i,P,["tox-form__group--collection"],[])},s9=["input","textarea"],oP=t=>{const s=ss(t);return fo(s9,s)},BA=(t,s)=>{const c=s.getRoot(t).getOr(t.element);ic(c,s.invalidClass),s.notify.each(i=>{oP(t.element)&&Xe(t.element,"aria-invalid",!1),i.getContainer(t).each(d=>{Fr(d,i.validHtml)}),i.onValid(t)})},$A=(t,s,c,i)=>{const d=s.getRoot(t).getOr(t.element);Jr(d,s.invalidClass),s.notify.each(g=>{oP(t.element)&&Xe(t.element,"aria-invalid",!0),g.getContainer(t).each(h=>{Fr(h,i)}),g.onInvalid(t,i)})},sP=(t,s,c)=>s.validator.fold(()=>Si.pure(ro.value(!0)),i=>i.validate(t)),FA=(t,s,c)=>(s.notify.each(i=>{i.onValidate(t)}),sP(t,s).map(i=>t.getSystem().isConnected()?i.fold(d=>($A(t,s,c,d),ro.error(d)),d=>(BA(t,s),ro.value(d))):ro.error("No longer in system")));var r9=Object.freeze({__proto__:null,markValid:BA,markInvalid:$A,query:sP,run:FA,isInvalid:(t,s)=>{const c=s.getRoot(t).getOr(t.element);return ni(c,s.invalidClass)}}),rP=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(c=>ir([Ye(c.onEvent,i=>{FA(i,t,s).get(Mt)})].concat(c.validateOnLoad?[Gs(i=>{FA(i,t,s).get(oe)})]:[]))).getOr({})}),Iv=[nt("invalidClass"),Ee("getRoot",A.none),Aa("notify",[Ee("aria","alert"),Ee("getContainer",A.none),Ee("validHtml",""),rs("onValid"),rs("onInvalid"),rs("onValidate")]),Aa("validator",[nt("validate"),Ee("onEvent","input"),Ee("validateOnLoad",!0)])];const ug=gc({fields:Iv,name:"invalidating",active:rP,apis:r9,extra:{validation:t=>s=>{const c=qt.getValue(s);return Si.pure(t(c))}}});var nT=Object.freeze({__proto__:null,events:()=>ir([Km(Bf(),Bt)]),exhibit:()=>Fu({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const Tl=gc({fields:[],name:"unselecting",active:nT}),IA=(t,s)=>Ku.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:xt([Od.button(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),_c(()=>s.providers.checkUiComponentContext(t.context)),Tl.config({}),lr.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:c=>Si.nu(i=>t.fetch(i)).map(i=>A.from(DA(rr(EA(Kt("menu-value"),i,d=>{t.onItemAction(c,d)},t.columns,t.presets,kd.CLOSE_ON_EXECUTE,eo,s.providers),{movement:XE(t.columns,t.presets)})))),parts:{menu:BE(!1,1,t.presets)}}),LA=Kt("color-input-change"),cP=Kt("color-swatch-change"),aP=Kt("color-picker-cancel"),c9=(t,s,c,i)=>{const d=Vo.parts.field({factory:ih,inputClasses:["tox-textfield"],data:i,onSetValue:k=>ug.run(k).get(oe),inputBehaviours:xt([rn.config({disabled:()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable}),_c(()=>s.providers.checkUiComponentContext(t.context)),lr.config({}),ug.config({invalidClass:"tox-textbox-field-invalid",getRoot:k=>Fa(k.element),notify:{onValid:k=>{const O=qt.getValue(k);kn(k,LA,{color:O})}},validator:{validateOnLoad:!1,validate:k=>{const O=qt.getValue(k);if(O.length===0)return Si.pure(ro.value(!0));{const P=ze.fromTag("span");Nt(P,"background-color",O);const H=Es(P,"background-color").fold(()=>ro.error("blah"),j=>ro.value(O));return Si.pure(H)}}}})]),selectOnFocus:!1}),g=t.label.map(k=>ig(k,s.providers)),h=(k,O)=>{kn(k,cP,{value:O})},C=(k,O)=>{w.getOpt(k).each(P=>{O==="custom"?c.colorPicker(H=>{H.fold(()=>Io(P,aP),j=>{h(P,j),f6(t.storageKey,j)})},"#ffffff"):O==="remove"?h(P,""):h(P,O)})},w=ws(IA({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[$c,Tc,Uc],onLtr:()=>[Tc,$c,Uc]},components:[],fetch:y6(c.getColors(t.storageKey),t.storageKey,c.hasCustomColors()),columns:c.getColorCols(t.storageKey),presets:"color",onItemAction:C,context:t.context},s));return Vo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,w.asSpec()]}]),fieldBehaviours:xt([Qn("form-field-events",[Ye(LA,(k,O)=>{w.getOpt(k).each(P=>{Nt(P.element,"background-color",O.event.color)}),kn(k,Kl,{name:t.name})}),Ye(cP,(k,O)=>{Vo.getField(k).each(P=>{qt.setValue(P,O.event.value),Qo.getCurrent(k).each(zn.focus)})}),Ye(aP,(k,O)=>{Vo.getField(k).each(P=>{Qo.getCurrent(k).each(zn.focus)})})])])})},a9=Xi({schema:[nt("dom")],name:"label"}),ph=t=>Xi({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),i=>({events:ir([uy(zo(),(d,g,h)=>i(d,h),[s]),uy(Mi(),(d,g,h)=>i(d,h),[s]),uy(Lh(),(d,g,h)=>{h.mouseIsDown.get()&&i(d,h)},[s])])}))}),iP=ph("top-left"),i9=ph("top"),l9=ph("top-right"),lP=ph("right"),u9=ph("bottom-right"),uP=ph("bottom"),dP=ph("bottom-left"),mP=ph("left"),d9=ja({name:"thumb",defaults:Z({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:ir([Rg(zo(),t,"spectrum"),Rg(fr(),t,"spectrum"),Rg(Ec(),t,"spectrum"),Rg(Mi(),t,"spectrum"),Rg(Lh(),t,"spectrum"),Rg(tm(),t,"spectrum")])})}),oT=t=>yi(t.event),m9=ja({schema:[ls("mouseIsDown",()=>pn(!1))],name:"spectrum",overrides:t=>{const c=t.model.manager,i=(d,g)=>c.getValueFromEvent(g).map(h=>c.setValueFrom(d,t,h));return{behaviours:xt([En.config({mode:"special",onLeft:(d,g)=>c.onLeft(d,t,oT(g)),onRight:(d,g)=>c.onRight(d,t,oT(g)),onUp:(d,g)=>c.onUp(d,t,oT(g)),onDown:(d,g)=>c.onDown(d,t,oT(g))}),lr.config({}),zn.config({})]),events:ir([Ye(zo(),i),Ye(fr(),i),Ye(Mi(),i),Ye(Lh(),(d,g)=>{t.mouseIsDown.get()&&i(d,g)})])}}});var f9=[a9,mP,lP,i9,uP,iP,l9,dP,u9,d9,m9];const zC=Z("slider.change.value"),HA=t=>t.type.indexOf("touch")!==-1,zA=t=>{const s=t.event.raw;if(HA(s)){const c=s;return c.touches!==void 0&&c.touches.length===1?A.some(c.touches[0]).map(i=>Zs(i.clientX,i.clientY)):A.none()}else{const c=s;return c.clientX!==void 0?A.some(c).map(i=>Zs(i.clientX,i.clientY)):A.none()}},g9="top",fP="right",h9="bottom",p9="left",T0=t=>t.model.minX,k0=t=>t.model.minY,sT=t=>t.model.minX-1,rT=t=>t.model.minY-1,_0=t=>t.model.maxX,Lp=t=>t.model.maxY,VC=t=>t.model.maxX+1,cT=t=>t.model.maxY+1,gP=(t,s,c)=>s(t)-c(t),VA=t=>gP(t,_0,T0),UA=t=>gP(t,Lp,k0),hP=t=>VA(t)/2,pP=t=>UA(t)/2,A0=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,WA=t=>t.snapToGrid,ZA=t=>t.snapStart,aT=t=>t.rounded,iT=(t,s)=>t[s+"-edge"]!==void 0,jA=t=>iT(t,p9),bP=t=>iT(t,fP),vP=t=>iT(t,g9),yP=t=>iT(t,h9),bh=t=>t.model.value.get(),dg=(t,s)=>({x:t,y:s}),xi=(t,s)=>{kn(t,zC(),{value:s})},b9=(t,s)=>{xi(t,dg(sT(s),rT(s)))},UC=(t,s)=>{xi(t,rT(s))},v9=(t,s)=>{xi(t,dg(hP(s),rT(s)))},GA=(t,s)=>{xi(t,dg(VC(s),rT(s)))},y9=(t,s)=>{xi(t,VC(s))},C9=(t,s)=>{xi(t,dg(VC(s),pP(s)))},w9=(t,s)=>{xi(t,dg(VC(s),cT(s)))},CP=(t,s)=>{xi(t,cT(s))},S9=(t,s)=>{xi(t,dg(hP(s),cT(s)))},qA=(t,s)=>{xi(t,dg(sT(s),cT(s)))},KA=(t,s)=>{xi(t,sT(s))},YA=(t,s)=>{xi(t,dg(sT(s),pP(s)))},XA=(t,s,c,i)=>t<s?t:t>c?c:t===s?s-1:Math.max(s,t-i),Yl=(t,s,c,i)=>t>c?t:t<s?s:t===c?c+1:Math.min(c,t+i),wP=(t,s,c)=>Math.max(s,Math.min(c,t)),x9=(t,s,c,i,d)=>d.fold(()=>{const g=t-s,h=Math.round(g/i)*i;return wP(s+h,s-1,c+1)},g=>{const h=(t-g)%i,C=Math.round(h/i),w=Math.floor((t-g)/i),k=Math.floor((c-g)/i),O=Math.min(k,w+C),P=g+O*i;return Math.max(g,P)}),SP=(t,s,c)=>Math.min(c,Math.max(t,s))-s,JA=t=>{const{min:s,max:c,range:i,value:d,step:g,snap:h,snapStart:C,rounded:w,hasMinEdge:k,hasMaxEdge:O,minBound:P,maxBound:H,screenRange:j}=t,Q=k?s-1:s,te=O?c+1:c;if(d<P)return Q;if(d>H)return te;{const we=SP(d,P,H),ce=wP(we/j*i+s,Q,te);return h&&ce>=s&&ce<=c?x9(ce,s,c,g,C):w?Math.round(ce):ce}},xP=t=>{const{min:s,max:c,range:i,value:d,hasMinEdge:g,hasMaxEdge:h,maxBound:C,maxOffset:w,centerMinEdge:k,centerMaxEdge:O}=t;return d<s?g?0:k:d>c?h?C:O:(d-s)/i*w},QA="top",EP="right",TP="bottom",eO="left",E9="width",T9="height",pf=t=>t.element.dom.getBoundingClientRect(),Tm=(t,s)=>t[s],lT=t=>{const s=pf(t);return Tm(s,eO)},kP=t=>{const s=pf(t);return Tm(s,EP)},WC=t=>{const s=pf(t);return Tm(s,QA)},uT=t=>{const s=pf(t);return Tm(s,TP)},tO=t=>{const s=pf(t);return Tm(s,E9)},nO=t=>{const s=pf(t);return Tm(s,T9)},oO=(t,s,c)=>(t+s)/2-c,sO=(t,s)=>{const c=pf(t),i=pf(s),d=Tm(c,eO),g=Tm(c,EP),h=Tm(i,eO);return oO(d,g,h)},dT=(t,s)=>{const c=pf(t),i=pf(s),d=Tm(c,QA),g=Tm(c,TP),h=Tm(i,QA);return oO(d,g,h)},mT=(t,s)=>{kn(t,zC(),{value:s})},ZC=(t,s,c)=>{const i={min:T0(s),max:_0(s),range:VA(s),value:c,step:A0(s),snap:WA(s),snapStart:ZA(s),rounded:aT(s),hasMinEdge:jA(s),hasMaxEdge:bP(s),minBound:lT(t),maxBound:kP(t),screenRange:tO(t)};return JA(i)},Lv=(t,s,c)=>{const i=ZC(t,s,c);return mT(t,i),i},_P=(t,s)=>{const c=T0(s);mT(t,c)},AP=(t,s)=>{const c=_0(s);mT(t,c)},OP=(t,s,c,i)=>{const g=(t>0?Yl:XA)(bh(c),T0(c),_0(c),A0(c,i));return mT(s,g),A.some(g)},DP=t=>(s,c,i)=>OP(t,s,c,i).map(Bt),k9=t=>zA(t).map(c=>c.left),fT=(t,s,c,i,d)=>{const h=tO(t),C=i.bind(O=>A.some(sO(O,t))).getOr(0),w=d.bind(O=>A.some(sO(O,t))).getOr(h),k={min:T0(s),max:_0(s),range:VA(s),value:c,hasMinEdge:jA(s),hasMaxEdge:bP(s),minBound:lT(t),maxBound:kP(t),maxOffset:h,centerMinEdge:C,centerMaxEdge:w};return xP(k)},rO=(t,s,c,i,d,g)=>{const h=fT(s,g,c,i,d);return lT(s)-lT(t)+h},_9=(t,s,c,i)=>{const d=bh(c),g=rO(t,i.getSpectrum(t),d,i.getLeftEdge(t),i.getRightEdge(t),c),h=ee(s.element)/2;Nt(s.element,"left",g-h+"px")},RP=DP(-1),MP=DP(1),cO=A.none,NP=A.none,kl={"top-left":A.none(),top:A.none(),"top-right":A.none(),right:A.some(y9),"bottom-right":A.none(),bottom:A.none(),"bottom-left":A.none(),left:A.some(KA)};var PP=Object.freeze({__proto__:null,setValueFrom:Lv,setToMin:_P,setToMax:AP,findValueOfOffset:ZC,getValueFromEvent:k9,findPositionOfValue:rO,setPositionFromValue:_9,onLeft:RP,onRight:MP,onUp:cO,onDown:NP,edgeActions:kl});const gT=(t,s)=>{kn(t,zC(),{value:s})},aO=(t,s,c)=>{const i={min:k0(s),max:Lp(s),range:UA(s),value:c,step:A0(s),snap:WA(s),snapStart:ZA(s),rounded:aT(s),hasMinEdge:vP(s),hasMaxEdge:yP(s),minBound:WC(t),maxBound:uT(t),screenRange:nO(t)};return JA(i)},BP=(t,s,c)=>{const i=aO(t,s,c);return gT(t,i),i},A9=(t,s)=>{const c=k0(s);gT(t,c)},O9=(t,s)=>{const c=Lp(s);gT(t,c)},D9=(t,s,c,i)=>{const g=(t>0?Yl:XA)(bh(c),k0(c),Lp(c),A0(c,i));return gT(s,g),A.some(g)},iO=t=>(s,c,i)=>D9(t,s,c,i).map(Bt),mg=t=>zA(t).map(c=>c.top),lO=(t,s,c,i,d)=>{const h=nO(t),C=i.bind(O=>A.some(dT(O,t))).getOr(0),w=d.bind(O=>A.some(dT(O,t))).getOr(h),k={min:k0(s),max:Lp(s),range:UA(s),value:c,hasMinEdge:vP(s),hasMaxEdge:yP(s),minBound:WC(t),maxBound:uT(t),maxOffset:h,centerMinEdge:C,centerMaxEdge:w};return xP(k)},hT=(t,s,c,i,d,g)=>{const h=lO(s,g,c,i,d);return WC(s)-WC(t)+h},pT=(t,s,c,i)=>{const d=bh(c),g=hT(t,i.getSpectrum(t),d,i.getTopEdge(t),i.getBottomEdge(t),c),h=Pr(s.element)/2;Nt(s.element,"top",g-h+"px")},uO=A.none,R9=A.none,M9=iO(-1),N9=iO(1),P9={"top-left":A.none(),top:A.some(UC),"top-right":A.none(),right:A.none(),"bottom-right":A.none(),bottom:A.some(CP),"bottom-left":A.none(),left:A.none()};var B9=Object.freeze({__proto__:null,setValueFrom:BP,setToMin:A9,setToMax:O9,findValueOfOffset:aO,getValueFromEvent:mg,findPositionOfValue:hT,setPositionFromValue:pT,onLeft:uO,onRight:R9,onUp:M9,onDown:N9,edgeActions:P9});const bT=(t,s)=>{kn(t,zC(),{value:s})},vT=(t,s)=>({x:t,y:s}),$P=(t,s,c)=>{const i=ZC(t,s,c.left),d=aO(t,s,c.top),g=vT(i,d);return bT(t,g),g},$9=(t,s,c,i,d)=>{const g=t>0?Yl:XA,h=s?bh(i).x:g(bh(i).x,T0(i),_0(i),A0(i,d)),C=s?g(bh(i).y,k0(i),Lp(i),A0(i,d)):bh(i).y;return bT(c,vT(h,C)),A.some(h)},Rd=(t,s)=>(c,i,d)=>$9(t,s,c,i,d).map(Bt),yT=(t,s)=>{const c=T0(s),i=k0(s);bT(t,vT(c,i))},F9=(t,s)=>{const c=_0(s),i=Lp(s);bT(t,vT(c,i))},I9=t=>zA(t),FP=(t,s,c,i)=>{const d=bh(c),g=rO(t,i.getSpectrum(t),d.x,i.getLeftEdge(t),i.getRightEdge(t),c),h=hT(t,i.getSpectrum(t),d.y,i.getTopEdge(t),i.getBottomEdge(t),c),C=ee(s.element)/2,w=Pr(s.element)/2;Nt(s.element,"left",g-C+"px"),Nt(s.element,"top",h-w+"px")},IP=Rd(-1,!1),dO=Rd(1,!1),CT=Rd(-1,!0),jC=Rd(1,!0),GC={"top-left":A.some(b9),top:A.some(v9),"top-right":A.some(GA),right:A.some(C9),"bottom-right":A.some(w9),bottom:A.some(S9),"bottom-left":A.some(qA),left:A.some(YA)};var LP=Object.freeze({__proto__:null,setValueFrom:$P,setToMin:yT,setToMax:F9,getValueFromEvent:I9,setPositionFromValue:FP,onLeft:IP,onRight:dO,onUp:CT,onDown:jC,edgeActions:GC});const HP=[Ee("stepSize",1),Ee("speedMultiplier",10),Ee("onChange",oe),Ee("onChoose",oe),Ee("onInit",oe),Ee("onDragStart",oe),Ee("onDragEnd",oe),Ee("snapToGrid",!1),Ee("rounded",!0),ms("snapStart"),ds("model",Nc("mode",{x:[Ee("minX",0),Ee("maxX",100),ls("value",t=>pn(t.mode.minX)),nt("getInitialValue"),gr("manager",PP)],y:[Ee("minY",0),Ee("maxY",100),ls("value",t=>pn(t.mode.minY)),nt("getInitialValue"),gr("manager",B9)],xy:[Ee("minX",0),Ee("maxX",100),Ee("minY",0),Ee("maxY",100),ls("value",t=>pn({x:t.mode.minX,y:t.mode.minY})),nt("getInitialValue"),gr("manager",LP)]})),ga("sliderBehaviours",[En,qt]),ls("mouseIsDown",()=>pn(!1))],Md=si({name:"Slider",configFields:HP,partFields:f9,factory:(t,s,c,i)=>{const d=Fe=>xd(Fe,t,"thumb"),g=Fe=>xd(Fe,t,"spectrum"),h=Fe=>tr(Fe,t,"left-edge"),C=Fe=>tr(Fe,t,"right-edge"),w=Fe=>tr(Fe,t,"top-edge"),k=Fe=>tr(Fe,t,"bottom-edge"),O=t.model,P=O.manager,H=(Fe,Lt)=>{P.setPositionFromValue(Fe,Lt,t,{getLeftEdge:h,getRightEdge:C,getTopEdge:w,getBottomEdge:k,getSpectrum:g})},j=(Fe,Lt)=>{O.value.set(Lt);const bt=d(Fe);H(Fe,bt)},Q=(Fe,Lt)=>{j(Fe,Lt);const bt=d(Fe);return t.onChange(Fe,bt,Lt),A.some(!0)},te=Fe=>{P.setToMin(Fe,t)},we=Fe=>{P.setToMax(Fe,t)},ce=Fe=>{const Lt=()=>{tr(Fe,t,"thumb").each(He=>{const Zt=O.value.get();t.onChoose(Fe,He,Zt)})},bt=t.mouseIsDown.get();t.mouseIsDown.set(!1),bt&&Lt()},xe=(Fe,Lt)=>{Lt.stop(),t.mouseIsDown.set(!0),t.onDragStart(Fe,d(Fe))},Ce=(Fe,Lt)=>{Lt.stop(),t.onDragEnd(Fe,d(Fe)),ce(Fe)},Pe=Fe=>{tr(Fe,t,"spectrum").map(En.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:hc(t.sliderBehaviours,[En.config({mode:"special",focusIn:Pe}),qt.config({store:{mode:"manual",getValue:Fe=>O.value.get(),setValue:j}}),Ki.config({channels:{[ev()]:{onReceive:ce}}})]),events:ir([Ye(zC(),(Fe,Lt)=>{Q(Fe,Lt.event.value)}),Gs((Fe,Lt)=>{const bt=O.getInitialValue();O.value.set(bt);const He=d(Fe);H(Fe,He);const Zt=g(Fe);t.onInit(Fe,He,Zt,O.value.get())}),Ye(zo(),xe),Ye(Ec(),Ce),Ye(Mi(),(Fe,Lt)=>{Pe(Fe),xe(Fe,Lt)}),Ye(tm(),Ce)]),apis:{resetToMin:te,resetToMax:we,setValue:j,refresh:H},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,c)=>{t.setValue(s,c)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),mO=Kt("rgb-hex-update"),zP=Kt("slider-update"),VP=Kt("palette-update"),H9=(t,s)=>{const c=Md.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=Md.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Md.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:Z(0)},components:[c,i],sliderBehaviours:xt([zn.config({})]),onChange:(d,g,h)=>{Xe(d.element,"aria-valuenow",Math.floor(360-h*3.6)),kn(d,zP,{value:h})}})},UP="form",WP=[ga("formBehaviours",[qt])],fO=t=>"<alloy.field."+t+">",z9=t=>{const s=(()=>{const g=[];return{field:(C,w)=>(g.push(C),cv(UP,fO(C),w)),record:Z(g)}})(),c=t(s),i=s.record(),d=Re(i,g=>ja({name:g,pname:fO(g)}));return o0(UP,WP,d,V9,c)},ZP=(t,s)=>t.fold(()=>ro.error(s),ro.value),V9=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:hc(t.formBehaviours,[qt.config({store:{mode:"manual",getValue:c=>{const i=Ix(c,t);return Ke(i,(d,g)=>d().bind(h=>{const C=Qo.getCurrent(h);return ZP(C,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+Gi(h.element)))}).map(qt.getValue))},setValue:(c,i)=>{xs(i,(d,g)=>{tr(c,t,g).each(h=>{Qo.getCurrent(h).each(C=>{qt.setValue(C,d)})})})}}})]),apis:{getField:(c,i)=>tr(c,t,i).bind(Qo.getCurrent)}}),O0={getField:Cd((t,s,c)=>t.getField(s,c)),sketch:z9},Hp=Kt("valid-input"),jP=Kt("invalid-input"),gO=Kt("validating-input"),hO="colorcustom.rgb.",U9={isEnabled:Bt,setEnabled:oe,immediatelyShow:oe,immediatelyHide:oe},W9=(t,s,c,i,d,g)=>{const h=(te,we)=>{const ce=we.get();te!==ce.isEnabled()&&(ce.setEnabled(te),te?ce.immediatelyShow():ce.immediatelyHide())},C=(te,we,ce)=>ug.config({invalidClass:s("invalid"),notify:{onValidate:xe=>{kn(xe,gO,{type:te})},onValid:xe=>{h(!1,ce),kn(xe,Hp,{type:te,value:qt.getValue(xe)})},onInvalid:xe=>{h(!0,ce),kn(xe,jP,{type:te,value:qt.getValue(xe)})}},validator:{validate:xe=>{const Ce=qt.getValue(xe),Pe=we(Ce)?ro.value(!0):ro.error(t("aria.input.invalid"));return Si.pure(Pe)},validateOnLoad:!1}}),w=(te,we,ce,xe,Ce)=>{const Pe=pn(U9),Fe=t(hO+"range"),Lt=Vo.parts.label({dom:{tag:"label"},components:[Ar(ce)]}),bt=Vo.parts.field({data:Ce,factory:ih,inputAttributes:{type:"text","aria-label":xe,...we==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:xt([C(we,te,Pe),lr.config({}),Wr.config({...d({tooltipText:"",onSetup:gs=>{Pe.set({isEnabled:()=>Wr.isEnabled(gs),setEnabled:vn=>Wr.setEnabled(gs,vn),immediatelyShow:()=>Wr.immediateOpenClose(gs,!0),immediatelyHide:()=>Wr.immediateOpenClose(gs,!1)}),Wr.setEnabled(gs,!1)},onShow:(gs,vn)=>{Wr.setComponents(gs,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[Ar(t(we==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:gs=>{ug.isInvalid(gs)&&ug.run(gs).get(oe)}}),He=Kt("aria-invalid"),Zt=ws(g("invalid",A.some(He),"warning")),Pt=ws({dom:{tag:"div",classes:[s("invalid-icon")]},components:[Zt.asSpec()]}),en=[Lt,bt,Pt.asSpec()],Do=we!=="hex"?[Vo.parts["aria-descriptor"]({text:Fe})]:[],or=en.concat(Do);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:or}},k=(te,we)=>{const ce=_C(we);return O0.getField(te,"hex").each(xe=>{zn.isFocused(xe)||qt.setValue(te,{hex:ce.value})}),ce},O=(te,we)=>{const ce=we.red,xe=we.green,Ce=we.blue;qt.setValue(te,{red:ce,green:xe,blue:Ce})},P=ws({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),H=(te,we)=>{P.getOpt(te).each(ce=>{Nt(ce.element,"background-color","#"+we.value)})};return Ji({factory:()=>{const te={red:pn(A.some(255)),green:pn(A.some(255)),blue:pn(A.some(255)),hex:pn(A.some("ffffff"))},we=(vn,vt)=>{const Wt=AC(vt);O(vn,Wt),Pe(Wt)},ce=vn=>te[vn].get(),xe=(vn,vt)=>{te[vn].set(vt)},Ce=()=>ce("red").bind(vn=>ce("green").bind(vt=>ce("blue").map(Wt=>S0(vn,vt,Wt,1)))),Pe=vn=>{const vt=vn.red,Wt=vn.green,Zn=vn.blue;xe("red",A.some(vt)),xe("green",A.some(Wt)),xe("blue",A.some(Zn))},Fe=(vn,vt)=>{const Wt=vt.event;Wt.type!=="hex"?xe(Wt.type,A.none()):i(vn)},Lt=(vn,vt)=>{c(vn);const Wt=aA(vt);xe("hex",A.some(Wt.value));const Zn=AC(Wt);O(vn,Zn),Pe(Zn),kn(vn,mO,{hex:Wt}),H(vn,Wt)},bt=(vn,vt,Wt)=>{const Zn=parseInt(Wt,10);xe(vt,A.some(Zn)),Ce().each(yo=>{const Nn=k(vn,yo);kn(vn,mO,{hex:Nn}),H(vn,Nn)})},He=vn=>vn.type==="hex",Zt=(vn,vt)=>{const Wt=vt.event;He(Wt)?Lt(vn,Wt.value):bt(vn,Wt.type,Wt.value)},Pt=vn=>({label:t(hO+vn+".label"),description:t(hO+vn+".description")}),en=Pt("red"),Do=Pt("green"),or=Pt("blue"),gs=Pt("hex");return rr(O0.sketch(vn=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[vn.field("red",Vo.sketch(w(uA,"red",en.label,en.description,255))),vn.field("green",Vo.sketch(w(uA,"green",Do.label,Do.description,255))),vn.field("blue",Vo.sketch(w(uA,"blue",or.label,or.description,255))),vn.field("hex",Vo.sketch(w(QN,"hex",gs.label,gs.description,"ffffff"))),P.asSpec()],formBehaviours:xt([ug.config({invalidClass:s("form-invalid")}),Qn("rgb-form-events",[Ye(Hp,Zt),Ye(jP,Fe),Ye(gO,Fe)])])})),{apis:{updateHex:(vn,vt)=>{qt.setValue(vn,{hex:vt.value}),we(vn,vt),H(vn,vt)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(te,we,ce)=>{te.updateHex(we,ce)}},extraApis:{}})},Z9=(t,s)=>{const c=Md.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=Md.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(k,O)=>{const{width:P,height:H}=k,j=k.getContext("2d");if(j===null)return;j.fillStyle=O,j.fillRect(0,0,P,H);const Q=j.createLinearGradient(0,0,P,0);Q.addColorStop(0,"rgba(255,255,255,1)"),Q.addColorStop(1,"rgba(255,255,255,0)"),j.fillStyle=Q,j.fillRect(0,0,P,H);const te=j.createLinearGradient(0,0,0,H);te.addColorStop(0,"rgba(0,0,0,0)"),te.addColorStop(1,"rgba(0,0,0,1)"),j.fillStyle=te,j.fillRect(0,0,P,H)},g=(k,O)=>{const P=k.components()[0].element.dom,H=MC(O,100,100),j=s6(H);d(P,r6(j))},h=(k,O)=>{const P=hA(AC(O));Md.setValue(k,{x:P.saturation,y:100-P.value}),Xe(k.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",P.saturation,P.value]))};return Ji({factory:k=>{const O=Z({x:0,y:0}),P=(Q,te,we)=>{jn(we)||Xe(Q.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(we.x),Math.floor(100-we.y)])),kn(Q,VP,{value:we})},H=(Q,te,we,ce)=>{d(we.element.dom,r6(c6))},j=xt([Qo.config({find:A.some}),zn.config({})]);return Md.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:O},rounded:!1,components:[c,i],onChange:P,onInit:H,sliderBehaviours:j})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(k,O,P)=>{g(O,P)},setThumb:(k,O,P)=>{h(O,P)}},extraApis:{}})},GP=(t,s,c,i)=>{const d=h=>{const C=W9(t,s,h.onValidHex,h.onInvalidHex,c,i),w=Z9(t,s),k=He=>(100-He)/100*360,O=He=>100-He/360*100,P={paletteRgba:pn(c6),paletteHue:pn(0)},H=ws(H9(t,s)),j=ws(w.sketch({})),Q=ws(C.sketch({})),te=(He,Zt,Pt)=>{j.getOpt(He).each(en=>{w.setHue(en,Pt)})},we=(He,Zt)=>{Q.getOpt(He).each(Pt=>{C.updateHex(Pt,Zt)})},ce=(He,Zt,Pt)=>{H.getOpt(He).each(en=>{Md.setValue(en,O(Pt))})},xe=(He,Zt)=>{j.getOpt(He).each(Pt=>{w.setThumb(Pt,Zt)})},Ce=(He,Zt)=>{const Pt=AC(He);P.paletteRgba.set(Pt),P.paletteHue.set(Zt)},Pe=(He,Zt,Pt,en)=>{Ce(Zt,Pt),ot(en,Do=>{Do(He,Zt,Pt)})},Fe=()=>{const He=[we];return(Zt,Pt)=>{const en=Pt.event.value,Do=P.paletteHue.get(),or=MC(Do,en.x,100-en.y),gs=g6(or);Pe(Zt,gs,Do,He)}},Lt=()=>{const He=[te,we];return(Zt,Pt)=>{const en=k(Pt.event.value),Do=P.paletteRgba.get(),or=hA(Do),gs=MC(en,or.saturation,or.value),vn=g6(gs);Pe(Zt,vn,en,He)}},bt=()=>{const He=[te,ce,xe];return(Zt,Pt)=>{const en=Pt.event.hex,Do=XL(en);Pe(Zt,en,Do.hue,He)}};return{uid:h.uid,dom:h.dom,components:[j.asSpec(),H.asSpec(),Q.asSpec()],behaviours:xt([Qn("colour-picker-events",[Ye(mO,bt()),Ye(VP,Fe()),Ye(zP,Lt())]),Qo.config({find:He=>Q.getOpt(He)}),En.config({mode:"acyclic"})])}};return Ji({name:"ColourPicker",configFields:[nt("dom"),Ee("onValidHex",oe),Ee("onInvalidHex",oe)],factory:d})},Ei={self:()=>Qo.config({find:A.some}),memento:t=>Qo.config({find:t.getOpt}),childAt:t=>Qo.config({find:s=>li(s.element,t).bind(c=>s.getSystem().getByDom(c).toOptional())})},pO=Vn([Ee("preprocess",Mt),Ee("postprocess",Mt)]),KP=(t,s)=>{const c=Qa("RepresentingConfigs.memento processors",pO,s);return qt.config({store:{mode:"manual",getValue:i=>{const d=t.get(i),g=qt.getValue(d);return c.postprocess(g)},setValue:(i,d)=>{const g=c.preprocess(d),h=t.get(i);qt.setValue(h,g)}}})},zp=(t,s,c)=>qt.config({store:{mode:"manual",...t.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:c}}),wT=(t,s,c)=>zp(t,i=>s(i.element),(i,d)=>c(i.element,d)),YP=t=>wT(t,T1,Fr),D0=t=>qt.config({store:{mode:"memory",initialValue:t}}),XP={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},JP=t=>s=>je(s)?t.translate(XP[s]):t.translate(s),G9=(t,s,c)=>{const i=k=>"tox-"+k,d=(k,O,P=k,H=k)=>Gu(P,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+k],attributes:{title:s.translate(H),"aria-live":"polite",...O.fold(()=>({}),j=>({id:j}))}},s.icons),g=GP(JP(s),i,s.tooltips.getConfig,d),h=k=>{kn(k,lg,{name:"hex-valid",value:!0})},C=k=>{kn(k,lg,{name:"hex-valid",value:!1})},w=ws(g.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:h,onInvalidHex:C}));return{dom:{tag:"div"},components:[w.asSpec()],behaviours:xt([zp(c,k=>{const O=w.get(k);return Qo.getCurrent(O).bind(j=>qt.getValue(j).hex).map(j=>"#"+ci(j,"#")).getOr("")},(k,O)=>{const P=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,H=A.from(P.exec(O)).bind(te=>Ho(te,1)),j=w.get(k);Qo.getCurrent(j).fold(()=>{console.log("Can not find form")},te=>{qt.setValue(te,{hex:H.getOr("")}),O0.getField(te,"hex").each(we=>{Io(we,nm())})})}),Ei.self()])}};var q9=tinymce.util.Tools.resolve("tinymce.Resource");const QP=t=>uo(t,"init"),K9=t=>{const s=ys(),c=ws({dom:{tag:t.tag}}),i=ys(),d=!QP(t)&&t.onFocus.isSome()?[zn.config({onFocus:g=>{t.onFocus.each(h=>{h(g.element.dom)})}}),lr.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:xt([Qn("custom-editor-events",[Gs(g=>{c.getOpt(g).each(h=>{(QP(t)?t.init(h.element.dom):q9.load(t.scriptId,t.scriptUrl).then(C=>C(h.element.dom,t.settings))).then(C=>{i.on(w=>{C.setValue(w)}),i.clear(),s.set(C)})})})]),zp(A.none(),()=>s.get().fold(()=>i.get().getOr(""),g=>g.getValue()),(g,h)=>{s.get().fold(()=>i.set(h),C=>C.setValue(h))}),Ei.self()].concat(d)),components:[c.asSpec()]}};var vh=tinymce.util.Tools.resolve("tinymce.util.Tools");const ST=Kt("browse.files.event"),eB=(t,s)=>{const c=vh.explode(s.getOption("images_file_types")),i=d=>Bs(c,g=>ec(d.name.toLowerCase(),`.${g.toLowerCase()}`));return to(Js(t),i)},Y9=(t,s,c)=>{const i=(H,j)=>{j.stop()},d=H=>(j,Q)=>{ot(H,te=>{te(j,Q)})},g=(H,j)=>{var Q;if(!rn.isDisabled(H)){const te=j.event.raw;kn(H,ST,{files:(Q=te.dataTransfer)===null||Q===void 0?void 0:Q.files})}},h=(H,j)=>{const Q=j.event.raw.target;kn(H,ST,{files:Q.files})},C=(H,j)=>{j&&(qt.setValue(H,eB(j,s)),kn(H,Kl,{name:t.name}))},w=ws({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:xt([Qn("input-file-events",[If(om()),If(u1())])])}),k=t.label.map(H=>ig(H,s)),O=Vo.parts.field({factory:sa,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Ar(s.translate("Browse for an image")),w.asSpec()],action:H=>{w.get(H).element.dom.click()},buttonBehaviours:xt([Ei.self(),D0(c.getOr([])),lr.config({}),Od.button(()=>s.checkUiComponentContext(t.context).shouldDisable),_c(()=>s.checkUiComponentContext(t.context))])}),P={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:xt([rn.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable}),_c(()=>s.checkUiComponentContext(t.context)),Ao.config({toggleClass:"dragenter",toggleOnExecute:!1}),Qn("dropzone-events",[Ye("dragenter",d([i,Ao.toggle])),Ye("dragleave",d([i,Ao.toggle])),Ye("dragover",i),Ye("drop",d([i,g])),Ye(jm(),h)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Ar(s.translate("Drop an image here"))]},O]}]};return IC(k,P,["tox-form__group--stretched"],[Qn("handle-files",[Ye(ST,(H,j)=>{Vo.getField(H).each(Q=>{C(Q,j.event.files)})})])])},X9=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Re(t.items,s.interpreter)}),J9=(t,s)=>{let c=null,i=null;return{cancel:()=>{jo(c)||(clearTimeout(c),c=null,i=null)},throttle:(...h)=>{i=h,jo(c)&&(c=setTimeout(()=>{const C=i;c=null,i=null,t.apply(null,C)},s))}}},xT=(t,s)=>{let c=null;return{cancel:()=>{jo(c)||(clearTimeout(c),c=null)},throttle:(...g)=>{jo(c)&&(c=setTimeout(()=>{c=null,t.apply(null,g)},s))}}},bO=(t,s)=>{let c=null;const i=()=>{jo(c)||(clearTimeout(c),c=null)};return{cancel:i,throttle:(...g)=>{i(),c=setTimeout(()=>{c=null,t.apply(null,g)},s)}}},vO=Kt("alloy-fake-before-tabstop"),ET=Kt("alloy-fake-after-tabstop"),yO=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:xt([zn.config({ignore:!0}),lr.config({})])}),tB=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[yO([vO]),s,yO([ET])],behaviours:xt([Ei.childAt(1)])}),nB=(t,s)=>{kn(t,za(),{raw:{which:9,shiftKey:s}})},CO=(t,s)=>{const c=s.element;ni(c,vO)?nB(t,!0):ni(c,ET)&&nB(t,!1)},qC=t=>gf(t,["."+vO,"."+ET].join(","),eo),KC=Kt("update-dialog"),oB=Kt("update-title"),sB=Kt("update-body"),rB=Kt("update-footer"),wO=Kt("body-send-message"),YC=Kt("dialog-focus-shifted"),SO=Mr().browser,XC=SO.isSafari(),Q9=SO.isFirefox(),cB=XC||Q9,aB=SO.isChromium(),ez=({scrollTop:t,scrollHeight:s,clientHeight:c})=>Math.ceil(t)+c>=s,xO=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),tz=(t,s)=>{const c=t.body;return A.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!aB&&!XC||io(c)&&(c.scrollTop!==0||Math.abs(c.scrollHeight-c.clientHeight)>1))?c:t.documentElement)},iB=(t,s,c)=>{const i=t.dom;A.from(i.contentDocument).fold(c,d=>{let g=0;const h=tz(d,s).map(w=>(g=w.scrollTop,w)).forall(ez),C=()=>{const w=i.contentWindow;io(w)&&(h?xO(w,"bottom"):!h&&cB&&g!==0&&xO(w,g))};XC&&i.addEventListener("load",C,{once:!0}),d.open(),d.write(s),d.close(),XC||C()})},nz=Cn(cB,XC?500:200).map(t=>J9(iB,t)),oz=(t,s)=>{const c=pn(t.getOr(""));return{getValue:i=>c.get(),setValue:(i,d)=>{if(c.get()!==d){const g=i.element,h=()=>Xe(g,"srcdoc",d);s?nz.fold(Z(iB),C=>C.throttle)(g,d,h):h()}c.set(d)}}},sz=(t,s,c)=>{const i="tox-dialog__iframe",d=t.transparent?[]:[`${i}--opaque`],g=t.border?["tox-navobj-bordered"]:[],h={...t.label.map(P=>({title:P})).getOr({}),...c.map(P=>({srcdoc:P})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},C=oz(c,t.streamContent),w=t.label.map(P=>ig(P,s)),k=P=>tB(A.from(g),{uid:P.uid,dom:{tag:"iframe",attributes:h,classes:[i,...d]},behaviours:xt([lr.config({}),zn.config({}),zp(c,C.getValue,C.setValue),Ki.config({channels:{[YC]:{onReceive:(H,j)=>{j.newFocus.each(Q=>{Fa(H.element).each(te=>{(Bo(H.element,Q)?Jr:ic)(te,"tox-navobj-bordered-focus")})})}}}})])}),O=Vo.parts.field({factory:{sketch:k}});return IC(w,O,["tox-form__group--stretched"],[])},rz=t=>new Promise((s,c)=>{const i=()=>{g(),s(t)},d=[$i(t,"load",i),$i(t,"error",()=>{g(),c("Unable to load data from image: "+t.dom.src)})],g=()=>ot(d,h=>h.unbind());t.dom.complete&&i()}),cz=(t,s,c,i,d)=>{const g=c*d,h=i*d,C=Math.max(0,t/2-g/2),w=Math.max(0,s/2-h/2);return{left:C.toString()+"px",top:w.toString()+"px",width:g.toString()+"px",height:h.toString()+"px"}},az=(t,s,c)=>{const i=ee(t),d=Pr(t);return Math.min(i/s,d/c,1)},EO=(t,s)=>{const c=pn(s.getOr({url:""})),i=ws({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(w=>({src:w.url})).getOr({})}}),d=ws({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),g=(w,k)=>{const O={url:k.url};k.zoom.each(H=>O.zoom=H),k.cachedWidth.each(H=>O.cachedWidth=H),k.cachedHeight.each(H=>O.cachedHeight=H),c.set(O);const P=()=>{const{cachedWidth:H,cachedHeight:j,zoom:Q}=O;if(!Yo(H)&&!Yo(j)){if(Yo(Q)){const we=az(w.element,H,j);O.zoom=we}const te=cz(ee(w.element),Pr(w.element),H,j,O.zoom);d.getOpt(w).each(we=>{es(we.element,te)})}};i.getOpt(w).each(H=>{const j=H.element;k.url!==ho(j,"src")&&(Xe(j,"src",k.url),ic(w.element,"tox-imagepreview__loaded")),P(),rz(j).then(Q=>{w.getSystem().isConnected()&&(Jr(w.element,"tox-imagepreview__loaded"),O.cachedWidth=Q.dom.naturalWidth,O.cachedHeight=Q.dom.naturalHeight,P())})})},h={};t.height.each(w=>h.height=w);const C=s.map(w=>({url:w.url,zoom:A.from(w.zoom),cachedWidth:A.from(w.cachedWidth),cachedHeight:A.from(w.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:h,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:xt([Ei.self(),zp(C,()=>c.get(),g)])}},iz=(t,s,c)=>{const i="tox-label",d=t.align==="center"?[`${i}--center`]:[],g=t.align==="end"?[`${i}--end`]:[],h=ws({dom:{tag:"label",classes:[i,...d,...g]},components:[Ar(s.providers.translate(t.label))]}),C=Re(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[h.asSpec(),...C],behaviours:xt([Ei.self(),Kn.config({}),YP(A.none()),En.config({mode:"acyclic"}),Qn("label",[Gs(w=>{t.for.each(k=>{c(k).each(O=>{h.getOpt(w).each(P=>{var H;const j=(H=ho(O.element,"id"))!==null&&H!==void 0?H:Kt("form-field");Xe(O.element,"id",j),Xe(P.element,"for",j)})})})})])])}},lB=Kt("toolbar.button.execute"),lz=t=>Ym((s,c)=>{kC(t,s)(i=>{kn(s,lB,{buttonApi:i}),t.onAction(i)})}),km=Kt("common-button-display-events"),TT={[ti()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[Bu()]:["toolbar-button-events",km],[$u()]:["toolbar-button-events","dropdown-events","tooltipping"],[Mi()]:["focusing","alloy.base.behaviour",km]},TO=t=>Nt(t.element,"width",at(t.element,"width")),uB=(t,s,c)=>Gu(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:c},s),JC=(t,s)=>uB(t,s,[]),Vp=(t,s)=>uB(t,s,[Kn.config({})]),kT=(t,s,c)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[Ar(c.translate(t))],behaviours:xt([Kn.config({})])}),Yu=Kt("update-menu-text"),R0=Kt("update-menu-icon"),kO=(t,s,c,i)=>{const d=pn(oe),g=t.text.map(te=>ws(kT(te,s,c.providers))),h=t.icon.map(te=>ws(Vp(te,c.providers.icons))),C=(te,we)=>{const ce=qt.getValue(te);return zn.focus(ce),kn(ce,"keydown",{raw:we.event.raw}),Ku.close(ce),A.some(!0)},w=t.role.fold(()=>({}),te=>({role:te})),k=A.from(t.listRole).map(te=>({listRole:te})).getOr({}),O=t.ariaLabel.fold(()=>({}),te=>({"aria-label":c.providers.translate(te)})),P=Gu("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},c.providers.icons),H=Kt("common-button-display-events"),j="dropdown-events";return ws(Ku.sketch({...t.uid?{uid:t.uid}:{},...w,...k,dom:{tag:"button",classes:[s,`${s}--select`].concat(Re(t.classes,te=>`${s}--${te}`)),attributes:{...O,...io(i)?{"data-mce-name":i}:{}}},components:Ov([h.map(te=>te.asSpec()),g.map(te=>te.asSpec()),A.some(P)]),matchWidth:!0,useMinWidth:!0,onOpen:(te,we,ce)=>{t.searchable&&IH(ce)},dropdownBehaviours:xt([...t.dropdownBehaviours,Od.button(()=>t.disabled||c.providers.checkUiComponentContext(t.context).shouldDisable),_c(()=>c.providers.checkUiComponentContext(t.context)),Tl.config({}),Kn.config({}),...t.tooltip.map(te=>Wr.config(c.providers.tooltips.getConfig({tooltipText:c.providers.translate(te)}))).toArray(),Qn(j,[ff(t,d),mh(t,d)]),Qn(H,[Gs((te,we)=>{t.listRole!=="listbox"&&TO(te)})]),Qn("update-dropdown-width-variable",[Ye(zh(),(te,we)=>Ku.close(te))]),Qn("menubutton-update-display-text",[Ye(Yu,(te,we)=>{g.bind(ce=>ce.getOpt(te)).each(ce=>{Kn.set(ce,[Ar(c.providers.translate(we.event.text))])})}),Ye(R0,(te,we)=>{h.bind(ce=>ce.getOpt(te)).each(ce=>{Kn.set(ce,[Vp(we.event.icon,c.providers.icons)])})})])]),eventOrder:rr(TT,{[Mi()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Bu()]:["toolbar-button-events",Wr.name(),j,H]}),sandboxBehaviours:xt([En.config({mode:"special",onLeft:C,onRight:C}),Qn("dropdown-sandbox-events",[Ye(gN,(te,we)=>{QE(te),we.stop()}),Ye(hN,(te,we)=>{Bv(te,we),we.stop()})])]),lazySink:c.getSink,toggleClass:`${s}--active`,parts:{menu:{...BE(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:z6,onCollapseMenu:(te,we,ce)=>{K.getHighlighted(ce).each(xe=>{z6(te,ce,xe)})},onDehighlightItem:FH}}},getAnchorOverrides:()=>({maxHeightFunction:(te,we)=>{Xy()(te,we-10)}}),fetch:te=>Si.nu(On(t.fetch,te))})).asSpec()},dB=t=>je(t),_O=t=>t.type==="separator",uz=t=>uo(t,"getSubmenuItems"),mB={type:"separator"},fB=(t,s)=>{const c=No(t,(i,d)=>dB(d)?d===""?i:d==="|"?i.length>0&&!_O(i[i.length-1])?i.concat([mB]):i:uo(s,d.toLowerCase())?i.concat([s[d.toLowerCase()]]):i:i.concat([d]),[]);return c.length>0&&_O(c[c.length-1])&&c.pop(),c},dz=(t,s)=>{const c=t.getSubmenuItems(),i=AO(c,s),d=rr(i.menus,{[t.value]:i.items}),g=rr(i.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},gB=t=>{const s=Ct(t,"value").getOrThunk(()=>Kt("generated-menu-item"));return rr({value:s},t)},AO=(t,s)=>{const c=fB(je(t)?t.split(" "):t,s);return wo(c,(i,d)=>{if(uz(d)){const g=gB(d),h=dz(g,s);return{menus:rr(i.menus,h.menus),items:[h.item,...i.items],expansions:rr(i.expansions,h.expansions)}}else return{...i,items:[d,...i.items]}},{menus:{},expansions:{},items:[]})},hB=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),mz=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),Hv=(t,s,c,i)=>{const d=Kt("primary-menu"),g=AO(t,c.shared.providers.menuItems());if(g.items.length===0)return A.none();const h=hB(i),C=V6(d,g.items,s,c,i.isHorizontalMenu,h),w=mz(i),k=Ke(g.menus,(P,H)=>V6(H,P,s,c,!1,w)),O=rr(k,Ds(d,C));return A.from(Rp.tieredData(d,O,g.expansions))},_T=t=>!uo(t,"items"),OO="data-value",pB=(t,s,c,i,d)=>Re(c,g=>_T(g)?{type:"togglemenuitem",...d?{}:{role:"option"},text:g.text,value:g.value,active:g.value===i,onAction:()=>{qt.setValue(t,g.value),kn(t,Kl,{name:s}),zn.focus(t)}}:{type:"nestedmenuitem",text:g.text,getSubmenuItems:()=>pB(t,s,g.items,i,d)}),AT=(t,s)=>ps(t,c=>_T(c)?Cn(c.value===s,c):AT(c.items,s)),fz=(t,s,c)=>{const i=Bs(t.items,k=>!_T(k)),d=s.shared.providers,g=c.bind(k=>AT(t.items,k)).orThunk(()=>As(t.items).filter(_T)),h=t.label.map(k=>ig(k,d)),C=Vo.parts.field({dom:{},factory:{sketch:k=>kO({context:t.context,uid:k.uid,text:g.map(O=>O.text),icon:A.none(),tooltip:A.none(),role:Cn(!i,"combobox"),...i?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(O,P)=>{const H=pB(O,t.name,t.items,qt.getValue(O),i);P(Hv(H,kd.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:A.none()}))},onSetup:Z(oe),getApi:Z({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[lr.config({}),zp(g.map(O=>O.value),O=>ho(O.element,OO),(O,P)=>{AT(t.items,P).each(H=>{Xe(O.element,OO,H.value),kn(O,Yu,{text:H.text})})})]},"tox-listbox",s.shared)}}),w={dom:{tag:"div",classes:["tox-listboxfield"]},components:[C]};return Vo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:et([h.toArray(),[w]]),fieldBehaviours:xt([rn.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:k=>{Vo.getField(k).each(rn.disable)},onEnabled:k=>{Vo.getField(k).each(rn.enable)}})])})},gz=(t,s)=>({dom:{tag:"div",classes:t.classes},components:Re(t.items,s.shared.interpreter)}),DO=(t,s)=>{const c=Re(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),i=t.data.map(d=>Ds("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:c,behaviours:hc(t.selectBehaviours,[zn.config({}),qt.config({store:{mode:"manual",getValue:d=>Ue(d.element),setValue:(d,g)=>{const h=As(t.options);We(t.options,w=>w.value===g).isSome()?lm(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&h.each(w=>lm(d.element,w.value))},...i}})])}},hz=Ji({name:"HtmlSelect",configFields:[nt("options"),ga("selectBehaviours",[zn,qt]),Ee("selectClasses",[]),Ee("selectAttributes",{}),ms("data")],factory:DO}),pz=(t,s,c)=>{const i=Re(t.items,w=>({text:s.translate(w.text),value:w.value})),d=t.label.map(w=>ig(w,s)),g=Vo.parts.field({dom:{},...c.map(w=>({data:w})).getOr({}),selectAttributes:{size:t.size},options:i,factory:hz,selectBehaviours:xt([rn.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),lr.config({}),Qn("selectbox-change",[Ye(jm(),(w,k)=>{kn(w,Kl,{name:t.name})})])])}),h=t.size>1?A.none():A.some(Gu("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),C={dom:{tag:"div",classes:["tox-selectfield"]},components:et([[g],h.toArray()])};return Vo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:et([d.toArray(),[C]]),fieldBehaviours:xt([rn.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:w=>{Vo.getField(w).each(rn.disable)},onEnabled:w=>{Vo.getField(w).each(rn.enable)}}),_c(()=>s.checkUiComponentContext(t.context))])})},bz=Z([Ee("field1Name","field1"),Ee("field2Name","field2"),Wl("onLockedChange"),yd(["lockClass"]),Ee("locked",!1),ql.field("coupledFieldBehaviours",[Qo,qt]),js("onInput",oe)]),RO=(t,s,c)=>tr(t,s,c).bind(Qo.getCurrent),bB=(t,s)=>ja({factory:Vo,name:t,overrides:c=>({fieldBehaviours:xt([Qn("coupled-input-behaviour",[Ye(nm(),i=>{RO(i,c,s).each(d=>{tr(i,c,"lock").each(g=>{Ao.isOn(g)&&c.onLockedChange(i,d,g),c.onInput(i)})})})])])})}),vB=Z([bB("field1","field2"),bB("field2","field1"),ja({factory:sa,schema:[nt("dom")],name:"lock",overrides:t=>({buttonBehaviours:xt([Ao.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),vz=(t,s,c,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:ql.augment(t.coupledFieldBehaviours,[Qo.config({find:A.some}),qt.config({store:{mode:"manual",getValue:d=>{const g=iv(d,t,["field1","field2"]);return{[t.field1Name]:qt.getValue(g.field1()),[t.field2Name]:qt.getValue(g.field2())}},setValue:(d,g)=>{const h=iv(d,t,["field1","field2"]);dr(g,t.field1Name)&&qt.setValue(h.field1(),g[t.field1Name]),dr(g,t.field2Name)&&qt.setValue(h.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>tr(d,t,"field1"),getField2:d=>tr(d,t,"field2"),getLock:d=>tr(d,t,"lock")}}),bc=si({name:"FormCoupledInputs",configFields:bz(),partFields:vB(),factory:vz,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),yB=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},c=d=>d in s?s[d]:1;let i=t.value.toFixed(c(t.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+t.unit},OT=t=>{const c=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(c!==null){const i=parseFloat(c[1]),d=c[2];return ro.value({value:i,unit:d})}else return ro.error(t)},CB=(t,s)=>{const c={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=d=>uo(c,d);return t.unit===s?A.some(t.value):i(t.unit)&&i(s)?c[t.unit]===c[s]?A.some(t.value):A.some(t.value/c[t.unit]*c[s]):A.none()},DT=t=>A.none(),yz=(t,s)=>c=>CB(c,s).map(i=>({value:i*t,unit:s})),MO=(t,s)=>{const c=OT(t).toOptional(),i=OT(s).toOptional();return Qr(c,i,(d,g)=>CB(d,g.unit).map(h=>g.value/h).map(h=>yz(h,g.unit)).getOr(DT)).getOr(DT)},Cz=(t,s)=>{let c=DT;const i=Kt("ratio-event"),d=te=>Gu(te,{tag:"span",classes:["tox-icon","tox-lock-icon__"+te]},s.icons),g=()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,h=_c(()=>s.checkUiComponentContext(t.context)),C=t.label.getOr("Constrain proportions"),w=s.translate(C),k=bc.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":w,"data-mce-name":C}},components:[d("lock"),d("unlock")],buttonBehaviours:xt([rn.config({disabled:g}),h,lr.config({}),Wr.config(s.tooltips.getConfig({tooltipText:w}))])}),O=te=>({dom:{tag:"div",classes:["tox-form__group"]},components:te}),P=te=>Vo.parts.field({factory:ih,inputClasses:["tox-textfield"],inputBehaviours:xt([rn.config({disabled:g}),h,lr.config({}),Qn("size-input-events",[Ye(Nu(),(we,ce)=>{kn(we,i,{isField1:te})}),Ye(jm(),(we,ce)=>{kn(we,Kl,{name:t.name})})])]),selectOnFocus:!1}),H=te=>({dom:{tag:"label",classes:["tox-label"]},components:[Ar(s.translate(te))]}),j=bc.parts.field1(O([Vo.parts.label(H("Width")),P(!0)])),Q=bc.parts.field2(O([Vo.parts.label(H("Height")),P(!1)]));return bc.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[j,Q,O([H(lp),k])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(te,we,ce)=>{OT(qt.getValue(te)).each(xe=>{c(xe).each(Ce=>{qt.setValue(we,yB(Ce))})})},coupledFieldBehaviours:xt([rn.config({disabled:g,onDisabled:te=>{bc.getField1(te).bind(Vo.getField).each(rn.disable),bc.getField2(te).bind(Vo.getField).each(rn.disable),bc.getLock(te).each(rn.disable)},onEnabled:te=>{bc.getField1(te).bind(Vo.getField).each(rn.enable),bc.getField2(te).bind(Vo.getField).each(rn.enable),bc.getLock(te).each(rn.enable)}}),_c(()=>s.checkUiComponentContext("mode:design")),Qn("size-input-events2",[Ye(i,(te,we)=>{const ce=we.event.isField1,xe=ce?bc.getField1(te):bc.getField2(te),Ce=ce?bc.getField2(te):bc.getField1(te),Pe=xe.map(qt.getValue).getOr(""),Fe=Ce.map(qt.getValue).getOr("");c=MO(Pe,Fe)})])])})},wz=(t,s,c)=>{const i=Md.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Ar(s.translate(t.label))]}),d=Md.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=Md.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Md.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:Z(c.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[i,d,g],sliderBehaviours:xt([Ei.self(),zn.config({})]),onChoose:(h,C,w)=>{kn(h,Kl,{name:t.name,value:w})},onChange:(h,C,w)=>{kn(h,Kl,{name:t.name,value:w})}})},wB=(t,s)=>{const c=C=>({dom:{tag:"th",innerHtml:s.translate(C)}}),i=C=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Re(C,c)}]}),d=C=>({dom:{tag:"td",innerHtml:s.translate(C)}}),g=C=>({dom:{tag:"tr"},components:Re(C,d)}),h=C=>({dom:{tag:"tbody"},components:Re(C,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(t.header),h(t.cells)],behaviours:xt([lr.config({}),zn.config({})])}},SB=(t,s)=>{const c=t.label.map(j=>ig(j,s)),i=[rn.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable}),_c(()=>s.checkUiComponentContext(t.context)),En.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:j=>(Io(j,HC),A.some(!0))}),Qn("textfield-change",[Ye(nm(),(j,Q)=>{kn(j,Kl,{name:t.name})}),Ye(Ag(),(j,Q)=>{kn(j,Kl,{name:t.name})})]),lr.config({})],d=t.validation.map(j=>ug.config({getRoot:Q=>Fa(Q.element),invalidClass:"tox-invalid",validator:{validate:Q=>{const te=qt.getValue(Q),we=j.validator(te);return Si.pure(we===!0?ro.value(te):ro.error(we))},validateOnLoad:j.validateOnLoad}})).toArray(),g=t.placeholder.fold(Z({}),j=>({placeholder:s.translate(j)})),h=t.inputMode.fold(Z({}),j=>({inputmode:j})),C={...g,...h,"data-mce-name":t.name},w=Vo.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(j=>({data:j})).getOr({}),inputAttributes:C,inputClasses:[t.classname],inputBehaviours:xt(et([i,d])),selectOnFocus:!1,factory:ih}),k=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[w]}:w,P=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),H=[rn.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:j=>{Vo.getField(j).each(rn.disable)},onEnabled:j=>{Vo.getField(j).each(rn.enable)}}),_c(()=>s.checkUiComponentContext(t.context))];return IC(c,k,P,H)},Sz=(t,s,c)=>SB({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:A.none(),maximized:t.maximized,data:c,context:t.context},s),xz=(t,s,c)=>SB({name:t.name,multiline:!0,label:t.label,inputMode:A.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:A.none(),maximized:t.maximized,data:c,context:t.context},s),zv=(t,s)=>s.getAnimationRoot.fold(()=>t.element,c=>c(t)),yh=t=>t.dimension.property,M0=(t,s)=>t.dimension.getDimension(s),RT=(t,s)=>{const c=zv(t,s);lu(c,[s.shrinkingClass,s.growingClass])},MT=(t,s)=>{ic(t.element,s.openClass),Jr(t.element,s.closedClass),Nt(t.element,yh(s),"0px"),Gc(t.element)},NT=(t,s)=>{ic(t.element,s.closedClass),Jr(t.element,s.openClass),xo(t.element,yh(s))},NO=(t,s,c,i)=>{c.setCollapsed(),Nt(t.element,yh(s),M0(s,t.element)),RT(t,s),MT(t,s),s.onStartShrink(t),s.onShrunk(t)},PT=(t,s,c,i)=>{const d=i.getOrThunk(()=>M0(s,t.element));c.setCollapsed(),Nt(t.element,yh(s),d),Gc(t.element);const g=zv(t,s);ic(g,s.growingClass),Jr(g,s.shrinkingClass),MT(t,s),s.onStartShrink(t)},xB=(t,s,c)=>{const i=M0(s,t.element);(i==="0px"?NO:PT)(t,s,c,A.some(i))},EB=(t,s,c)=>{const i=zv(t,s),d=ni(i,s.shrinkingClass),g=M0(s,t.element);NT(t,s);const h=M0(s,t.element);(d?()=>{Nt(t.element,yh(s),g),Gc(t.element)}:()=>{MT(t,s)})(),ic(i,s.shrinkingClass),Jr(i,s.growingClass),NT(t,s),Nt(t.element,yh(s),h),c.setExpanded(),s.onStartGrow(t)},Ez=(t,s,c)=>{if(c.isExpanded()){xo(t.element,yh(s));const i=M0(s,t.element);Nt(t.element,yh(s),i)}},Tz=(t,s,c)=>{c.isExpanded()||EB(t,s,c)},TB=(t,s,c)=>{c.isExpanded()&&xB(t,s,c)},kz=(t,s,c)=>{c.isExpanded()&&NO(t,s,c)},_z=(t,s,c)=>c.isExpanded(),Az=(t,s,c)=>c.isCollapsed(),PO=(t,s,c)=>{const i=zv(t,s);return ni(i,s.growingClass)===!0},BO=(t,s,c)=>{const i=zv(t,s);return ni(i,s.shrinkingClass)===!0};var Dz=Object.freeze({__proto__:null,refresh:Ez,grow:Tz,shrink:TB,immediateShrink:kz,hasGrown:_z,hasShrunk:Az,isGrowing:PO,isShrinking:BO,isTransitioning:(t,s,c)=>PO(t,s)||BO(t,s),toggleGrow:(t,s,c)=>{(c.isExpanded()?xB:EB)(t,s,c)},disableTransitions:RT,immediateGrow:(t,s,c)=>{c.isExpanded()||(NT(t,s),Nt(t.element,yh(s),M0(s,t.element)),RT(t,s),c.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),QC=Object.freeze({__proto__:null,exhibit:(t,s,c)=>{const i=s.expanded;return Fu(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:Ds(s.dimension.property,"0px")})},events:(t,s)=>ir([cm(Hh(),(c,i)=>{i.event.raw.propertyName===t.dimension.property&&(RT(c,t),s.isExpanded()&&xo(c.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(c))})])}),kB=[nt("closedClass"),nt("openClass"),nt("shrinkingClass"),nt("growingClass"),ms("getAnimationRoot"),rs("onShrunk"),rs("onStartShrink"),rs("onGrown"),rs("onStartGrow"),Ee("expanded",!1),ds("dimension",Nc("property",{width:[gr("property","width"),gr("getDimension",t=>ee(t)+"px")],height:[gr("property","height"),gr("getDimension",t=>Pr(t)+"px")]}))],_B=Object.freeze({__proto__:null,init:t=>{const s=pn(t.expanded),c=()=>"expanded: "+s.get();return Vl({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:On(s.set,!1),setExpanded:On(s.set,!0),readState:c})}});const _l=gc({fields:kB,name:"sliding",active:QC,apis:Dz,state:_B}),$O=t=>({isEnabled:()=>!rn.isDisabled(t),setEnabled:s=>rn.set(t,!s),setActive:s=>{const c=t.element;s?(Jr(c,"tox-tbtn--enabled"),Xe(c,"aria-pressed",!0)):(ic(c,"tox-tbtn--enabled"),V(c,"aria-pressed"))},isActive:()=>ni(t.element,"tox-tbtn--enabled"),setText:s=>{kn(t,Yu,{text:s})},setIcon:s=>kn(t,R0,{icon:s})}),BT=(t,s,c,i,d=!0,g)=>kO({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:i,fetch:(h,C)=>{const w={pattern:t.search.isSome()?LH(h):""};t.fetch(k=>{C(Hv(k,kd.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!1,search:t.search}))},w,$O(h))},onSetup:t.onSetup,getApi:$O,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[lr.config({})]:[]],context:t.context},s,c.shared,g),ew=(t,s,c)=>{const i=g=>h=>{const C=!h.isActive();h.setActive(C),g.storage.set(C),c.shared.getSink().each(w=>{s().getOpt(w).each(k=>{bi(k.element),kn(k,lg,{name:g.name,value:g.storage.get()})})})},d=g=>h=>{h.setActive(g.storage.get())};return g=>{g(Re(t,h=>{const C=h.text.fold(()=>({}),w=>({text:w}));return{type:h.type,active:!1,...C,context:h.context,onAction:i(h),onSetup:d(h)}}))}},AB=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[Ar(t)]}),FO=(t,s,c)=>{t.customStateIcon.each(i=>s.push(DB(i,c.shared.providers.icons,t.customStateIconTooltip.fold(()=>[],d=>[Wr.config(c.shared.providers.tooltips.getConfig({tooltipText:d}))]),["tox-icon-custom-state"])))},OB=Kt("leaf-label-event-id"),IO=({leaf:t,onLeafAction:s,visible:c,treeId:i,selectedId:d,backstage:g})=>{const h=t.menu.map(w=>BT(w,"tox-mbtn",g,A.none(),c)),C=[AB(t.title)];return FO(t,C,g),h.each(w=>C.push(w)),sa.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(c?["tox-tree--leaf__label--visible"]:[])},components:C,role:"treeitem",action:w=>{s(t.id),w.getSystem().broadcastOn([`update-active-item-${i}`],{value:t.id})},eventOrder:{[za()]:[OB,"keying"]},buttonBehaviours:xt([...c?[lr.config({})]:[],Ao.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Ki.config({channels:{[`update-active-item-${i}`]:{onReceive:(w,k)=>{(k.value===t.id?Ao.on:Ao.off)(w)}}}}),Qn(OB,[Gs((w,k)=>{d.each(O=>{(O===t.id?Ao.on:Ao.off)(w)})}),Ye(za(),(w,k)=>{const O=k.event.raw.code==="ArrowLeft",P=k.event.raw.code==="ArrowRight";O?(um(w.element,".tox-tree--directory").each(H=>{w.getSystem().getByDom(H).each(j=>{ES(H,".tox-tree--directory__label").each(Q=>{j.getSystem().getByDom(Q).each(zn.focus)})})}),k.stop()):P&&k.stop()})])])})},DB=(t,s,c,i,d)=>Gu(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(i||[]),behaviours:c,attributes:d},s),RB=(t,s)=>DB(t,s,[]),$T=Kt("directory-label-event-id"),MB=({directory:t,visible:s,noChildren:c,backstage:i})=>{const d=t.menu.map(C=>BT(C,"tox-mbtn",i,A.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[RB("chevron-right",i.shared.providers.icons)]},AB(t.title)];FO(t,g,i),d.each(C=>{g.push(C)});const h=C=>{um(C.element,".tox-tree--directory").each(w=>{C.getSystem().getByDom(w).each(k=>{const O=!Ao.isOn(k);Ao.toggle(k),kn(C,"expand-tree-node",{expanded:O,node:t.id})})})};return sa.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:h,eventOrder:{[za()]:[$T,"keying"]},buttonBehaviours:xt([...s?[lr.config({})]:[],Qn($T,[Ye(za(),(C,w)=>{const k=w.event.raw.code==="ArrowRight",O=w.event.raw.code==="ArrowLeft";k&&c&&w.stop(),(k||O)&&um(C.element,".tox-tree--directory").each(P=>{C.getSystem().getByDom(P).each(H=>{!Ao.isOn(H)&&k||Ao.isOn(H)&&O?(h(C),w.stop()):O&&!Ao.isOn(H)&&(um(H.element,".tox-tree--directory").each(j=>{ES(j,".tox-tree--directory__label").each(Q=>{H.getSystem().getByDom(Q).each(zn.focus)})}),w.stop())})})})])])})},Mz=({children:t,onLeafAction:s,visible:c,treeId:i,expandedIds:d,selectedId:g,backstage:h})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(C=>C.type==="leaf"?IO({leaf:C,selectedId:g,onLeafAction:s,visible:c,treeId:i,backstage:h}):LO({directory:C,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:c,treeId:i,backstage:h})),behaviours:xt([_l.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:c}),Kn.config({})])}),Nz=Kt("directory-event-id"),LO=({directory:t,onLeafAction:s,labelTabstopping:c,treeId:i,backstage:d,expandedIds:g,selectedId:h})=>{const{children:C}=t,w=pn(g),k=P=>C.map(H=>H.type==="leaf"?IO({leaf:H,selectedId:h,onLeafAction:s,visible:P,treeId:i,backstage:d}):LO({directory:H,expandedIds:w.get(),selectedId:h,onLeafAction:s,labelTabstopping:P,treeId:i,backstage:d})),O=g.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[MB({directory:t,visible:c,noChildren:t.children.length===0,backstage:d}),Mz({children:C,expandedIds:g,selectedId:h,onLeafAction:s,visible:O,treeId:i,backstage:d})],behaviours:xt([Qn(Nz,[Gs((P,H)=>{Ao.set(P,O)}),Ye("expand-tree-node",(P,H)=>{const{expanded:j,node:Q}=H.event;w.set(j?[...w.get(),Q]:w.get().filter(te=>te!==Q))})]),Ao.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(P,H)=>{const j=P.components()[1],Q=k(H);H?_l.grow(j):_l.shrink(j),Kn.set(j,Q)}})])}},Pz=Kt("tree-event-id"),Bz=(t,s)=>{const c=t.onLeafAction.getOr(oe),i=t.onToggleExpand.getOr(oe),d=t.defaultExpandedIds,g=pn(d),h=pn(t.defaultSelectedId),C=Kt("tree-id"),w=(k,O)=>t.items.map(P=>P.type==="leaf"?IO({leaf:P,selectedId:k,onLeafAction:c,visible:!0,treeId:C,backstage:s}):LO({directory:P,selectedId:k,onLeafAction:c,expandedIds:O,labelTabstopping:!0,treeId:C,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:w(h.get(),g.get()),behaviours:xt([En.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Qn(Pz,[Ye("expand-tree-node",(k,O)=>{const{expanded:P,node:H}=O.event;g.set(P?[...g.get(),H]:g.get().filter(j=>j!==H)),i(g.get(),{expanded:P,node:H})})]),Ki.config({channels:{[`update-active-item-${C}`]:{onReceive:(k,O)=>{h.set(A.some(O.value)),Kn.set(k,w(A.some(O.value),g.get()))}}}}),Kn.config({})])}};var $z=Object.freeze({__proto__:null,events:(t,s)=>{const i=t.stream.streams.setup(t,s);return ir([Ye(t.event,i),pd(()=>s.cancel())].concat(t.cancelEvent.map(d=>[Ye(d,()=>s.cancel())]).getOr([])))}});const NB=t=>{const s=pn(null);return Vl({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var Fz=Object.freeze({__proto__:null,throttle:NB,init:t=>t.stream.streams.state(t)});const PB=(t,s)=>{const c=t.stream,i=bO(t.onStream,c.delay);return s.setTimer(i),(d,g)=>{i.throttle(d,g),c.stopEvent&&g.stop()}};var Iz=[ds("stream",Nc("mode",{throttle:[nt("delay"),Ee("stopEvent",!0),gr("streams",{setup:PB,state:NB})]})),Ee("event","input"),ms("cancelEvent"),Wl("onStream")];const HO=gc({fields:Iz,name:"streaming",active:$z,state:Fz}),FT=(t,s,c)=>{const i=qt.getValue(c);qt.setValue(s,i),$B(s)},BB=(t,s)=>{const c=t.element,i=Ue(c),d=c.dom;ho(c,"type")!=="number"&&s(d,i)},$B=t=>{BB(t,(s,c)=>s.setSelectionRange(c.length,c.length))},Lz=(t,s)=>{BB(t,(c,i)=>c.setSelectionRange(s,i.length))},Hz=(t,s,c)=>{if(t.selectsOver){const i=qt.getValue(s),d=t.getDisplayText(i),g=qt.getValue(c);return t.getDisplayText(g).indexOf(d)===0?A.some(()=>{FT(t,s,c),Lz(s,d.length)}):A.none()}else return A.none()},zO=Z("alloy.typeahead.itemexecute"),zz=(t,s,c,i)=>{const d=(P,H,j)=>{t.previewing.set(!1);const Q=pc.getCoupled(P,"sandbox");if(cs.isOpen(Q))Qo.getCurrent(Q).each(te=>{K.getHighlighted(te).fold(()=>{j(te)},()=>{ly(Q,te.element,"keydown",H)})});else{const te=we=>{Qo.getCurrent(we).each(j)};JE(t,h(P),P,Q,i,te,ha.HighlightMenuAndItem).get(oe)}},g=dN(t),h=P=>H=>H.map(j=>{const Q=Er(j.menus),te=fe(Q,ce=>to(ce.items,xe=>xe.type==="item"));return qt.getState(P).update(Re(te,ce=>ce.data)),j}),C=P=>Qo.getCurrent(P),w="typeaheadevents",k=[zn.config({}),qt.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:P=>Ue(P.element),getFallbackEntry:P=>({value:P,meta:{}}),setValue:(P,H)=>{lm(P.element,t.model.getDisplayText(H))},...t.initialData.map(P=>Ds("initialValue",P)).getOr({})}}),HO.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(P,H)=>{const j=pc.getCoupled(P,"sandbox");if(zn.isFocused(P)&&Ue(P.element).length>=t.minChars){const te=C(j).bind(ce=>K.getHighlighted(ce).map(qt.getValue));t.previewing.set(!0);const we=ce=>{C(j).each(xe=>{te.fold(()=>{t.model.selectsOver&&K.highlightFirst(xe)},Ce=>{K.highlightBy(xe,Pe=>qt.getValue(Pe).value===Ce.value),K.getHighlighted(xe).orThunk(()=>(K.highlightFirst(xe),A.none()))})})};JE(t,h(P),P,j,i,we,ha.HighlightJustMenu).get(oe)}},cancelEvent:Oa()}),En.config({mode:"special",onDown:(P,H)=>(d(P,H,K.highlightFirst),A.some(!0)),onEscape:P=>{const H=pc.getCoupled(P,"sandbox");return cs.isOpen(H)?(cs.close(H),A.some(!0)):A.none()},onUp:(P,H)=>(d(P,H,K.highlightLast),A.some(!0)),onEnter:P=>{const H=pc.getCoupled(P,"sandbox"),j=cs.isOpen(H);if(j&&!t.previewing.get())return C(H).bind(Q=>K.getHighlighted(Q)).map(Q=>(kn(P,zO(),{item:Q}),!0));{const Q=qt.getValue(P);return Io(P,Oa()),t.onExecute(H,P,Q),j&&cs.close(H),A.some(!0)}}}),Ao.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),pc.config({others:{sandbox:P=>Nv(t,P,{onOpen:()=>Ao.on(P),onClose:()=>{t.lazyTypeaheadComp.get().each(H=>V(H.element,"aria-activedescendant")),Ao.off(P)}})}}),Qn(w,[Gs(P=>{t.lazyTypeaheadComp.set(A.some(P))}),pd(P=>{t.lazyTypeaheadComp.set(A.none())}),Ym(P=>{const H=oe;OA(t,h(P),P,i,H,ha.HighlightMenuAndItem).get(oe)}),Ye(zO(),(P,H)=>{const j=pc.getCoupled(P,"sandbox");FT(t.model,P,H.event.item),Io(P,Oa()),t.onItemExecute(P,j,H.event.item,qt.getValue(P)),cs.close(j),$B(P)})].concat(t.dismissOnBlur?[Ye(Gm(),P=>{const H=pc.getCoupled(P,"sandbox");vi(H.element).isNone()&&cs.close(H)})]:[]))],O={[$u()]:[qt.name(),HO.name(),w],...t.eventOrder};return{uid:t.uid,dom:Tv(rr(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...hc(t.typeaheadBehaviours,k)},eventOrder:O}},Vz=Z([ms("lazySink"),nt("fetch"),Ee("minChars",5),Ee("responseTime",1e3),rs("onOpen"),Ee("getHotspot",A.some),Ee("getAnchorOverrides",Z({})),Ee("layouts",A.none()),Ee("eventOrder",{}),L("model",{},[Ee("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),Ee("selectsOver",!0),Ee("populateFromBrowse",!0)]),rs("onSetValue"),pi("onExecute"),rs("onItemExecute"),Ee("inputClasses",[]),Ee("inputAttributes",{}),Ee("inputStyles",{}),Ee("matchWidth",!0),Ee("useMinWidth",!1),Ee("dismissOnBlur",!0),yd(["openClass"]),ms("initialData"),ms("listRole"),ga("typeaheadBehaviours",[zn,qt,HO,En,Ao,pc]),ls("lazyTypeaheadComp",()=>pn(A.none)),ls("previewing",()=>pn(!0))].concat(uN()).concat(Pv())),Uz=Z([gu({schema:[k1()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,c,i)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{Hz(t.model,d,i).fold(()=>{t.model.selectsOver?(K.dehighlight(c,i),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&FT(t.model,d,i),Gn(i.element,"id").each(g=>Xe(d.element,"aria-activedescendant",g))})},onExecute:(s,c)=>t.lazyTypeaheadComp.get().map(i=>(kn(i,zO(),{item:c}),!0)),onHover:(s,c)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(i=>{t.model.populateFromBrowse&&FT(t.model,i,c)})}})})]),FB=si({name:"Typeahead",configFields:Vz(),partFields:Uz(),factory:zz}),_m=t=>({...t,toCached:()=>_m(t.toCached()),bindFuture:w=>_m(t.bind(k=>k.fold(O=>Si.pure(ro.error(O)),O=>w(O)))),bindResult:w=>_m(t.map(k=>k.bind(w))),mapResult:w=>_m(t.map(k=>k.map(w))),mapError:w=>_m(t.map(k=>k.mapError(w))),foldResult:(w,k)=>t.map(O=>O.fold(w,k)),withTimeout:(w,k)=>_m(Si.nu(O=>{let P=!1;const H=setTimeout(()=>{P=!0,O(ro.error(k()))},w);t.get(j=>{P||(clearTimeout(H),O(j))})}))}),IB=t=>_m(Si.nu(t)),LB=t=>_m(Si.pure(ro.value(t))),Zz={nu:IB,wrap:_m,pure:LB,value:LB,error:t=>_m(Si.pure(ro.error(t))),fromResult:t=>_m(Si.pure(t)),fromFuture:t=>_m(t.map(ro.value)),fromPromise:t=>IB(s=>{t.then(c=>{s(ro.value(c))},c=>{s(ro.error(c))})})},tw=(t,s,c=[],i,d,g,h)=>{const C=s.fold(()=>({}),O=>({action:O})),w={buttonBehaviours:xt([Od.item(()=>!t.enabled||h.checkUiComponentContext(t.context).shouldDisable),_c(()=>h.checkUiComponentContext(t.context)),lr.config({}),...g.map(O=>Wr.config(h.tooltips.getConfig({tooltipText:h.translate(O)}))).toArray(),Qn("button press",[Hw("click")])].concat(c)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...C},k=rr(w,{dom:i});return rr(k,{components:d})},jz=(t,s,c,i=[],d)=>{const g=t.tooltip.map(k=>({"aria-label":c.translate(k)})).getOr({}),h={tag:"button",classes:["tox-tbtn"],attributes:{...g,"data-mce-name":d}},C=t.icon.map(k=>JC(k,c.icons)),w=Ov([C]);return tw(t,s,i,h,w,t.tooltip,c)},IT=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},VO=(t,s,c,i=[],d=[])=>{const g=c.translate(t.text),h=t.icon.map(j=>JC(j,c.icons)),C=[h.getOrThunk(()=>Ar(g))],w=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),P={tag:"button",classes:[...IT(w),...h.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":g,"data-mce-name":t.text}},H=t.icon.map(Z(g));return tw(t,s,i,P,C,H,c)},LT=(t,s,c,i=[],d=[])=>{const g=VO(t,A.some(s),c,i,d);return sa.sketch(g)},HB=(t,s)=>c=>{s==="custom"?kn(c,lg,{name:t,value:{}}):s==="submit"?Io(c,HC):s==="cancel"?Io(c,hh):console.error("Unknown button type: ",s)},zB=(t,s)=>s==="menu",Gz=(t,s)=>s==="custom"||s==="cancel"||s==="submit",VB=(t,s)=>s==="togglebutton",qz=(t,s,c)=>{var i,d;const g=t.icon.map(Ce=>Vp(Ce,s.icons)).map(ws),h=Ce=>{kn(Ce,lg,{name:t.name,value:{setIcon:Pe=>{g.map(Fe=>Fe.getOpt(Ce).each(Lt=>{Kn.set(Lt,[Vp(Pe,s.icons)])}))}}})},C=t.buttonType.getOr(t.primary?"primary":"secondary"),w={...t,name:(i=t.name)!==null&&i!==void 0?i:"",tooltip:t.tooltip,enabled:(d=t.enabled)!==null&&d!==void 0?d:!1},k=w.tooltip.or(t.text).map(Ce=>({"aria-label":s.translate(Ce)})).getOr({}),O=IT(C??"secondary"),P=t.icon.isSome()&&t.text.isSome(),H={tag:"button",classes:[...O.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...P?["tox-button--icon-and-text"]:[]],attributes:{...k,...io(c)?{"data-mce-name":c}:{}}},j=[],Q=s.translate(t.text.getOr("")),te=Ar(Q),ce=[...Ov([g.map(Ce=>Ce.asSpec())]),...t.text.isSome()?[te]:[]],xe=tw(w,A.some(h),j,H,ce,t.tooltip,s);return sa.sketch(xe)},nw=(t,s,c)=>{if(zB(t,s)){const i=()=>h,d=t,g={...t,type:"menubutton",search:A.none(),onSetup:C=>(C.setEnabled(t.enabled),oe),fetch:ew(d.items,i,c)},h=ws(BT(g,"tox-tbtn",c,A.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return h.asSpec()}else if(Gz(t,s)){const i=HB(t.name,s),d={...t,context:s==="cancel"?"any":t.context,borderless:!1};return LT(d,i,c.shared.providers,[])}else{if(VB(t,s))return qz(t,c.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},Kz=(t,s)=>{const c=HB(t.name,"custom");return e9(A.none(),Vo.parts.field({factory:sa,...VO(t,A.some(c),s,[D0(""),Ei.self()])}))},UB={type:"separator"},Yz=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:oe}),UO=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:oe}),bf=t=>Re(t,Yz),HT=(t,s)=>to(s,c=>c.type===t),ow=(t,s)=>bf(HT(t,s)),Xz=t=>ow("header",t.targets),WO=t=>ow("anchor",t.targets),Jz=t=>A.from(t.anchorTop).map(s=>UO("<top>",s)).toArray(),ZO=t=>A.from(t.anchorBottom).map(s=>UO("<bottom>",s)).toArray(),WB=t=>Re(t,s=>UO(s,s)),jO=t=>No(t,(s,c)=>s.length===0||c.length===0?s.concat(c):s.concat(UB,c),[]),GO=(t,s)=>{const c=t.toLowerCase();return to(s,i=>{var d;const g=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,h=(d=i.value)!==null&&d!==void 0?d:"";return vs(g.toLowerCase(),c)||vs(h.toLowerCase(),c)})},Qz=(t,s,c)=>{var i,d;const g=qt.getValue(s),h=(d=(i=g==null?void 0:g.meta)===null||i===void 0?void 0:i.text)!==null&&d!==void 0?d:g.value;return c.getLinkInformation().fold(()=>[],w=>{const k=GO(h,WB(c.getHistory(t)));return t==="file"?jO([k,GO(h,Xz(w)),GO(h,et([Jz(w),WO(w),ZO(w)]))]):k})},qO=Kt("aria-invalid"),eV=(t,s,c,i)=>{const d=s.shared.providers,g=xe=>{const Ce=qt.getValue(xe);c.addToHistory(Ce.value,t.filetype)},h={...i.map(xe=>({initialData:xe})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":qO,type:"url"},minChars:0,responseTime:0,fetch:xe=>{const Ce=Qz(t.filetype,xe,c),Pe=Hv(Ce,kd.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:A.none()});return Si.pure(Pe)},getHotspot:xe=>Q.getOpt(xe),onSetValue:(xe,Ce)=>{xe.hasConfigured(ug)&&ug.run(xe).get(oe)},typeaheadBehaviours:xt([...c.getValidationHandler().map(xe=>ug.config({getRoot:Ce=>Fa(Ce.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(Ce,Pe)=>{O.getOpt(Ce).each(Fe=>{Xe(Fe.element,"title",d.translate(Pe))})}},validator:{validate:Ce=>{const Pe=qt.getValue(Ce);return Zz.nu(Fe=>{xe({type:t.filetype,url:Pe.value},Lt=>{if(Lt.status==="invalid"){const bt=ro.error(Lt.message);Fe(bt)}else{const bt=ro.value(Lt.message);Fe(bt)}})})},validateOnLoad:!1}})).toArray(),rn.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable}),lr.config({}),Qn("urlinput-events",[Ye(nm(),xe=>{const Ce=Ue(xe.element),Pe=Ce.trim();Pe!==Ce&&lm(xe.element,Pe),t.filetype==="file"&&kn(xe,Kl,{name:t.name})}),Ye(jm(),xe=>{kn(xe,Kl,{name:t.name}),g(xe)}),Ye(Ag(),xe=>{kn(xe,Kl,{name:t.name}),g(xe)})])]),eventOrder:{[nm()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:xe=>xe.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:BE(!1,1,"normal")},onExecute:(xe,Ce,Pe)=>{kn(Ce,HC,{})},onItemExecute:(xe,Ce,Pe,Fe)=>{g(xe),kn(xe,Kl,{name:t.name})}},C=Vo.parts.field({...h,factory:FB}),w=t.label.map(xe=>ig(xe,d)),O=ws(((xe,Ce,Pe=xe,Fe=xe)=>Gu(Pe,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+xe],attributes:{title:d.translate(Fe),"aria-live":"polite",...Ce.fold(()=>({}),Lt=>({id:Lt}))}},d.icons))("invalid",A.some(qO),"warning")),P=ws({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[O.asSpec()]}),H=c.getUrlPicker(t.filetype),j=Kt("browser.url.event"),Q=ws({dom:{tag:"div",classes:["tox-control-wrap"]},components:[C,P.asSpec()],behaviours:xt([rn.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable})])}),te=ws(LT({context:t.context,name:t.name,icon:A.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:A.none(),borderless:!0},xe=>Io(xe,j),d,[],["tox-browse-url"])),we=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:et([[Q.asSpec()],H.map(()=>te.asSpec()).toArray()])}),ce=xe=>{Qo.getCurrent(xe).each(Ce=>{const Pe=qt.getValue(Ce),Fe={fieldname:t.name,...Pe};H.each(Lt=>{Lt(Fe).get(bt=>{qt.setValue(Ce,bt),kn(xe,Kl,{name:t.name})})})})};return Vo.sketch({dom:n9(),components:w.toArray().concat([we()]),fieldBehaviours:xt([rn.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:xe=>{Vo.getField(xe).each(rn.disable),te.getOpt(xe).each(rn.disable)},onEnabled:xe=>{Vo.getField(xe).each(rn.enable),te.getOpt(xe).each(rn.enable)}}),_c(()=>d.checkUiComponentContext(t.context)),Qn("url-input-events",[Ye(j,ce)])])})},tV=(t,s)=>{const c=A_(t.icon,s.icons);return hf.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:c},components:t.url?[sa.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:c,attributes:{title:s.translate(t.iconTooltip)}},action:i=>kn(i,lg,{name:"alert-banner",value:t.url}),buttonBehaviours:xt([O_()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},KO=(t,s)=>{t.dom.checked=s},nV=t=>t.dom.checked,oV=(t,s,c)=>{const i=w=>(w.element.dom.click(),A.some(!0)),d=Vo.parts.field({factory:{sketch:Mt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:xt([Ei.self(),rn.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:w=>{Fa(w.element).each(k=>Jr(k,"tox-checkbox--disabled"))},onEnabled:w=>{Fa(w.element).each(k=>ic(k,"tox-checkbox--disabled"))}}),lr.config({}),zn.config({}),wT(c,nV,KO),En.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),Qn("checkbox-events",[Ye(jm(),(w,k)=>{kn(w,Kl,{name:t.name})})])])}),g=Vo.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Ar(s.translate(t.label))],behaviours:xt([Tl.config({})])}),h=w=>Gu(w==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+w]},s.icons),C=ws({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[h("checked"),h("unchecked")]});return Vo.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,C.asSpec(),g],fieldBehaviours:xt([rn.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),_c(()=>s.checkUiComponentContext(t.context))])})},ZB=(t,s)=>{const c=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],i=Qn("htmlpanel",[Gs(d=>{t.onInit(d.element.dom)})]);return t.presets==="presentation"?hf.sketch({dom:{tag:"div",classes:c,innerHtml:t.html},containerBehaviours:xt([Wr.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{Cs(d.element,"[data-mce-tooltip]:hover").orThunk(()=>vi(d.element)).each(g=>{Gn(g,"data-mce-tooltip").each(h=>{Wr.setComponents(d,s.tooltips.getComponents({tooltipText:h}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:Cs(d.element,"[data-mce-tooltip]:hover").orThunk(()=>vi(d.element).filter(g=>Gn(g,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:Z([Uc,Qc,Tc,Ra,$c,kc]),onRtl:Z([Uc,Qc,Tc,Ra,$c,kc])},bubble:Fi(0,-2,{})})}),i])}):hf.sketch({dom:{tag:"div",classes:c,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:xt([lr.config({}),zn.config({}),i])})},ra=t=>(s,c,i,d,g)=>Ct(c,"name").fold(()=>t(c,d,A.none(),g),h=>s.field(h,t(c,d,Ct(i,h),g))),sV=t=>(s,c,i,d,g)=>{const h=rr(c,{source:"dynamic"});return ra(t)(s,h,i,d,g)},rV={bar:ra((t,s)=>X6(t,s.shared)),collection:ra((t,s,c)=>o9(t,s.shared.providers,c)),alertbanner:ra((t,s)=>tV(t,s.shared.providers)),input:ra((t,s,c)=>Sz(t,s.shared.providers,c)),textarea:ra((t,s,c)=>xz(t,s.shared.providers,c)),label:ra((t,s,c,i)=>iz(t,s.shared,i)),iframe:sV((t,s,c)=>sz(t,s.shared.providers,c)),button:ra((t,s)=>Kz(t,s.shared.providers)),checkbox:ra((t,s,c)=>oV(t,s.shared.providers,c)),colorinput:ra((t,s,c)=>c9(t,s.shared,s.colorinput,c)),colorpicker:ra((t,s,c)=>G9(t,s.shared.providers,c)),dropzone:ra((t,s,c)=>Y9(t,s.shared.providers,c)),grid:ra((t,s)=>X9(t,s.shared)),listbox:ra((t,s,c)=>fz(t,s,c)),selectbox:ra((t,s,c)=>pz(t,s.shared.providers,c)),sizeinput:ra((t,s)=>Cz(t,s.shared.providers)),slider:ra((t,s,c)=>wz(t,s.shared.providers,c)),urlinput:ra((t,s,c)=>eV(t,s,s.urlinput,c)),customeditor:ra(K9),htmlpanel:ra((t,s)=>ZB(t,s.shared.providers)),imagepreview:ra((t,s,c)=>EO(t,c)),table:ra((t,s)=>wB(t,s.shared.providers)),tree:ra((t,s)=>Bz(t,s)),panel:ra((t,s)=>gz(t,s))},cV={field:(t,s)=>s,record:Z([])},jB=(t,s,c,i,d)=>{const g=rr(i,{shared:{interpreter:h=>zT(t,h,c,g,d)}});return zT(t,s,c,g,d)},zT=(t,s,c,i,d)=>Ct(rV,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),g=>g(t,s,c,i,d)),Xu=(t,s,c,i)=>zT(cV,t,s,c,i),fg="layout-inset",YO=t=>t.x,GB=(t,s)=>t.x+t.width/2-s.width/2,XO=(t,s)=>t.x+t.width-s.width,JO=t=>t.y,QO=(t,s)=>t.y+t.height-s.height,eD=(t,s)=>t.y+t.height/2-s.height/2,sw=(t,s,c)=>ma(XO(t,s),QO(t,s),c.insetSouthwest(),$y(),"southwest",Ua(t,{right:0,bottom:3}),fg),tD=(t,s,c)=>ma(YO(t),QO(t,s),c.insetSoutheast(),By(),"southeast",Ua(t,{left:1,bottom:3}),fg),VT=(t,s,c)=>ma(XO(t,s),JO(t),c.insetNorthwest(),Py(),"northwest",Ua(t,{right:0,top:2}),fg),ba=(t,s,c)=>ma(YO(t),JO(t),c.insetNortheast(),_b(),"northeast",Ua(t,{left:1,top:2}),fg),Ju=(t,s,c)=>ma(GB(t,s),JO(t),c.insetNorth(),AS(),"north",Ua(t,{top:2}),fg),rw=(t,s,c)=>ma(GB(t,s),QO(t,s),c.insetSouth(),OS(),"south",Ua(t,{bottom:3}),fg),cw=(t,s,c)=>ma(XO(t,s),eD(t,s),c.insetEast(),RS(),"east",Ua(t,{right:0}),fg),qB=(t,s,c)=>ma(YO(t),eD(t,s),c.insetWest(),DS(),"west",Ua(t,{left:1}),fg),aV=t=>{switch(t){case"north":return Ju;case"northeast":return ba;case"northwest":return VT;case"south":return rw;case"southeast":return tD;case"southwest":return sw;case"east":return cw;case"west":return qB}},KB=(t,s,c,i,d)=>B1(i).map(aV).getOr(Ju)(t,s,c,i,d),iV=t=>{switch(t){case"north":return rw;case"northeast":return tD;case"northwest":return sw;case"south":return Ju;case"southeast":return ba;case"southwest":return VT;case"east":return qB;case"west":return cw}},lV=(t,s,c,i,d)=>B1(i).map(iV).getOr(Ju)(t,s,c,i,d),aw={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},uV=(t,s,c)=>{const d={maxHeightFunction:Zg()},g=()=>({type:"node",root:Dr(Or(t())),node:A.from(t()),bubble:Fi(12,12,aw),layouts:{onRtl:()=>[ba],onLtr:()=>[VT]},overrides:d}),h=()=>({type:"hotspot",hotspot:s(),bubble:Fi(-12,12,aw),layouts:{onRtl:()=>[Tc,$c,Uc],onLtr:()=>[$c,Tc,Uc]},overrides:d});return()=>c()?g():h()},dV=(t,s,c,i)=>{const g={maxHeightFunction:Zg()},h=()=>({type:"node",root:Dr(Or(s())),node:A.from(s()),bubble:Fi(12,12,aw),layouts:{onRtl:()=>[Ju],onLtr:()=>[Ju]},overrides:g}),C=()=>t?{type:"node",root:Dr(Or(s())),node:A.from(s()),bubble:Fi(0,-il(s()),aw),layouts:{onRtl:()=>[Qc],onLtr:()=>[Qc]},overrides:g}:{type:"hotspot",hotspot:c(),bubble:Fi(0,0,aw),layouts:{onRtl:()=>[Qc],onLtr:()=>[Qc]},overrides:g};return()=>i()?h():C()},YB=(t,s,c)=>{const i=()=>({type:"node",root:Dr(Or(t())),node:A.from(t()),layouts:{onRtl:()=>[Ju],onLtr:()=>[Ju]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Uc],onLtr:()=>[Uc]}});return()=>c()?i():d()},UT=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const c=t.selection.getRng(),i=t.model.table.getSelectedCells();if(i.length>1){const d=i[0],g=i[i.length-1],h={firstCell:ze.fromDom(d),lastCell:ze.fromDom(g)};return A.some(h)}return A.some(Jf.range(ze.fromDom(c.startContainer),c.startOffset,ze.fromDom(c.endContainer),c.endOffset))}}),XB=t=>s=>({type:"node",root:t(),node:s}),nD=(t,s,c,i)=>{const d=Cm(t),g=()=>ze.fromDom(t.getBody()),h=()=>ze.fromDom(t.getContentAreaContainer()),C=()=>d||!i();return{inlineDialog:uV(h,s,C),inlineBottomDialog:dV(t.inline,h,c,C),banner:YB(h,s,C),cursor:UT(t,g),node:XB(g)}},mV=t=>(s,c)=>{E6(t)(s,c)},JB=t=>()=>pa(t),fV=t=>s=>Dd(t,s),gV=t=>s=>YE(t,s),QB=t=>({colorPicker:mV(t),hasCustomColors:JB(t),getColors:fV(t),getColorCols:gV(t)}),oq=t=>()=>TM(t),sq=t=>({isDraggableModal:oq(t)}),e$=t=>{const s=pn(i_(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},t$=t=>dr(t,"items"),n$=t=>dr(t,"format"),oD=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],sD=t=>uo(t,"items"),hV=t=>uo(t,"block"),pV=t=>uo(t,"inline"),o$=t=>uo(t,"selector"),s$=t=>No(t,(s,c)=>{if(sD(c)){const i=s$(c.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:c.title,items:i.formats}])}}else if(pV(c)||hV(c)||o$(c)){const d=`custom-${je(c.name)?c.name:c.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:c}]),formats:s.formats.concat([{title:c.title,format:d,icon:c.icon}])}}else return{...s,formats:s.formats.concat(c)}},{customFormats:[],formats:[]}),bV=(t,s)=>{const c=s$(s),i=d=>{ot(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?i(c.customFormats):t.on("init",()=>{i(c.customFormats)}),c.formats},r$=t=>Jk(t).map(s=>{const c=bV(t,s);return Qk(t)?oD.concat(c):c}).getOr(oD),vV=t=>{const s=os(t);return s.length===1&&fo(s,"title")},iw=(t,s,c)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:c(t.format)}),WT=(t,s,c,i)=>{const d=w=>iw(w,c,i),g=w=>{const k=C(w.items);return{...w,type:"submenu",getStyleItems:Z(k)}},h=w=>{const k=je(w.name)?w.name:Kt(w.title),O=`custom-${k}`,P={...w,type:"formatter",format:O,isSelected:c(O),getStylePreview:i(O)};return t.formatter.register(k,P),P},C=w=>Re(w,k=>t$(k)?g(k):n$(k)?d(k):vV(k)?{...k,type:"separator"}:h(k));return C(s)},yV=t=>{const s=C=>()=>t.formatter.match(C),c=C=>()=>{const w=t.formatter.get(C);return w!==void 0?A.some({tag:w.length>0&&(w[0].inline||w[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(C))}):A.none()},i=pn([]),d=pn([]),g=pn(!1);return t.on("PreInit",C=>{const w=r$(t),k=WT(t,w,s,c);i.set(k)}),t.on("addStyleModifications",C=>{const w=WT(t,C.items,s,c);d.set(w),g.set(C.replace)}),{getData:()=>{const C=g.get()?[]:i.get(),w=d.get();return C.concat(w)}}},CV=t=>{let i=0;const d=()=>i>0,g=C=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[Ar(C.tooltipText)]}];return{getConfig:C=>({delayForShow:()=>d()?60:300,delayForHide:Z(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:g(C),onShow:(w,k)=>{i++,C.onShow&&C.onShow(w,k)},onHide:(w,k)=>{i--,C.onHide&&C.onHide(w,k)},onSetup:C.onSetup}),getComponents:g}},wV=t=>io(t)&&t.nodeType===1,SV=vh.trim,c$=t=>s=>!!(wV(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),xV=c$("true"),rD=c$("false"),a$=(t,s,c,i,d)=>({type:t,title:s,url:c,level:i,attach:d}),ZT=t=>{let s=t;for(;s=s.parentNode;){const c=s.contentEditable;if(c&&c!=="inherit")return xV(s)}return!1},EV=(t,s)=>Re(Li(ze.fromDom(s),t),c=>c.dom),N0=t=>t.innerText||t.textContent,TV=t=>t.id?t.id:Kt("h"),cD=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,Vv=t=>cD(t)&&iD(t),aD=t=>t&&/^(H[1-6])$/.test(t.nodeName),iD=t=>ZT(t)&&!rD(t),lD=t=>aD(t)&&iD(t),i$=t=>aD(t)?parseInt(t.nodeName.substr(1),10):0,uD=t=>{var s;const c=TV(t),i=()=>{t.id=c};return a$("header",(s=N0(t))!==null&&s!==void 0?s:"","#"+c,i$(t),i)},l$=t=>{const s=t.id||t.name,c=N0(t);return a$("anchor",c||"#"+s,"#"+s,0,oe)},u$=t=>Re(to(t,lD),uD),dD=t=>Re(to(t,Vv),l$),P0=t=>EV("h1,h2,h3,h4,h5,h6,a:not([href])",t),kV=t=>SV(t.title).length>0,Uv={find:t=>{const s=P0(t);return to(u$(s).concat(dD(s)),kV)}},lw="tinymce-url-history",uw=5,mD=t=>je(t)&&/^https?/.test(t),fD=t=>Ko(t)&&t.length<=uw&&bo(t,mD),gg=t=>yn(t)&&Yn(t,s=>!fD(s)).isNone(),d$=()=>{const t=fh.getItem(lw);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(c){if(c instanceof SyntaxError)return console.log("Local storage "+lw+" was not valid JSON",c),{};throw c}return gg(s)?s:(console.log("Local storage "+lw+" was not valid format",s),{})},_V=t=>{if(!gg(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));fh.setItem(lw,JSON.stringify(t))},AV=t=>{const s=d$();return Ct(s,t).getOr([])},gD=(t,s)=>{if(!mD(t))return;const c=d$(),i=Ct(c,s).getOr([]),d=to(i,g=>g!==t);c[s]=[t].concat(d).slice(0,uw),_V(c)},m$=t=>!!t,OV=t=>Ke(vh.makeMap(t,/[, ]/),m$),hD=t=>A.from(SM(t)),DV=t=>{const s=A.from(EM(t)).filter(m$).map(OV);return hD(t).fold(eo,c=>s.fold(Bt,i=>os(i).length>0?i:!1))},RV=(t,s)=>{const c=DV(t);return Wo(c)?c?hD(t):A.none():c[s]?hD(t):A.none()},MV=(t,s)=>RV(t,s).map(c=>i=>Si.nu(d=>{const g=(C,w)=>{if(!je(C))throw new Error("Expected value to be string");if(w!==void 0&&!yn(w))throw new Error("Expected meta to be a object");d({value:C,meta:w})},h={filetype:s,fieldname:i.fieldname,...A.from(i.meta).getOr({})};c.call(t,g,i.value,h)})),f$=t=>A.from(t).filter(je).getOrUndefined(),g$=t=>fE(t)?A.some({targets:Uv.find(t.getBody()),anchorTop:f$(o_(t)),anchorBottom:f$(s_(t))}):A.none(),NV=t=>A.from(n_(t)),dw=t=>({getHistory:AV,addToHistory:gD,getLinkInformation:()=>g$(t),getValidationHandler:()=>NV(t),getUrlPicker:s=>MV(t,s)}),PV=(t,s,c,i)=>{const d=pn(!1),g=e$(s),h={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Td.translate,isDisabled:()=>!s.ui.isEnabled(),getOption:s.options.get,tooltips:CV(t.dialog),checkUiComponentContext:ce=>{if(lE(s))return{contextType:"disabled",shouldDisable:!0};const[xe,Ce=""]=ce.split(":"),Pe=s.ui.registry.getAll().contexts,Fe=Ct(Pe,xe).fold(()=>Ct(Pe,"mode").map(Lt=>Lt("design")).getOr(!1),Lt=>Ce.charAt(0)==="!"?!Lt(Ce.slice(1)):Lt(Ce));return{contextType:xe,shouldDisable:!Fe}}},C=dw(s),w=yV(s),k=QB(s),O=sq(s),P=()=>d.get(),H=ce=>d.set(ce),j={shared:{providers:h,anchors:nD(s,c,i,g.isPositionedAtTop),header:g},urlinput:C,styles:w,colorinput:k,dialog:O,isContextMenuOpen:P,setContextMenuState:H},Q=ce=>A.none(),te={...j,shared:{...j.shared,interpreter:ce=>Xu(ce,{},te,Q),getSink:t.popup}},we={...j,shared:{...j.shared,interpreter:ce=>Xu(ce,{},we,Q),getSink:t.dialog}};return{popup:te,dialog:we}},BV=(t,s,c)=>{const i=(He,Zt)=>{ot([s,...c],Pt=>{Pt.broadcastEvent(He,Zt)})},d=(He,Zt)=>{ot([s,...c],Pt=>{Pt.broadcastOn([He],Zt)})},g=He=>d(ng(),{target:He.target}),h=Wd(),C=$i(h,"touchstart",g),w=$i(h,"touchmove",He=>i(W4(),He)),k=$i(h,"touchend",He=>i(Z4(),He)),O=$i(h,"mousedown",g),P=$i(h,"mouseup",He=>{He.raw.button===0&&d(ev(),{target:He.target})}),H=He=>d(ng(),{target:ze.fromDom(He.target)}),j=He=>{He.button===0&&d(ev(),{target:ze.fromDom(He.target)})},Q=()=>{ot(t.editorManager.get(),He=>{t!==He&&He.dispatch("DismissPopups",{relatedTarget:t})})},te=He=>i(iy(),US(He)),we=He=>{d(of(),{}),i(zh(),US(He))},ce=Or(ze.fromDom(t.getElement())),xe=Bb(ce,"scroll",He=>{requestAnimationFrame(()=>{const Zt=t.getContainer();if(Zt!=null){const en=Bp(t,s.element).map(Do=>[Do.element,...Do.others]).getOr([]);Bs(en,Do=>Bo(Do,He.target))&&(t.dispatch("ElementScroll",{target:He.target.dom}),i(qm(),He))}})}),Ce=()=>d(of(),{}),Pe=He=>{He.state&&d(ng(),{target:ze.fromDom(t.getContainer())})},Fe=He=>{d(ng(),{target:ze.fromDom(He.relatedTarget.getContainer())})},Lt=He=>t.dispatch("focusin",He),bt=He=>t.dispatch("focusout",He);t.on("PostRender",()=>{t.on("click",H),t.on("tap",H),t.on("mouseup",j),t.on("mousedown",Q),t.on("ScrollWindow",te),t.on("ResizeWindow",we),t.on("ResizeEditor",Ce),t.on("AfterProgressState",Pe),t.on("DismissPopups",Fe),ot([s,...c],He=>{He.element.dom.addEventListener("focusin",Lt),He.element.dom.addEventListener("focusout",bt)})}),t.on("remove",()=>{t.off("click",H),t.off("tap",H),t.off("mouseup",j),t.off("mousedown",Q),t.off("ScrollWindow",te),t.off("ResizeWindow",we),t.off("ResizeEditor",Ce),t.off("AfterProgressState",Pe),t.off("DismissPopups",Fe),ot([s,...c],He=>{He.element.dom.removeEventListener("focusin",Lt),He.element.dom.removeEventListener("focusout",bt)}),O.unbind(),C.unbind(),w.unbind(),k.unbind(),P.unbind(),xe.unbind()}),t.on("detach",()=>{ot([s,...c],Uu),ot([s,...c],He=>He.destroy())})},ca=n5,vf=n0,jT=Z([Ee("shell",!1),nt("makeItem"),Ee("setupItem",oe),ql.field("listBehaviours",[Kn])]),$V=Xi({name:"items",overrides:()=>({behaviours:xt([Kn.config({})])})}),FV=Z([$V]),IV=Z("CustomList"),LV=(t,s,c,i)=>{const d=(C,w)=>{h(C).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},k=>{const O=Kn.contents(k),P=w.length,H=P-O.length,j=H>0?St(H,()=>t.makeItem()):[],Q=O.slice(P);ot(Q,we=>Kn.remove(k,we)),ot(j,we=>Kn.append(k,we));const te=Kn.contents(k);ot(te,(we,ce)=>{t.setupItem(C,we,w[ce],ce)})})},g=t.shell?{behaviours:[Kn.config({})],components:[]}:{behaviours:[],components:s},h=C=>t.shell?A.some(C):tr(C,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:hc(t.listBehaviours,g.behaviours),apis:{setItems:d}}},GT=si({name:IV(),configFields:jT(),partFields:FV(),factory:LV,apis:{setItems:(t,s,c)=>{t.setItems(s,c)}}}),Wv=Z([nt("dom"),Ee("shell",!0),ga("toolbarBehaviours",[Kn])]),HV=Z([Xi({name:"groups",overrides:()=>({behaviours:xt([Kn.config({})])})})]),zV=(t,s,c,i)=>{const d=(C,w)=>{g(C).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},k=>{Kn.set(k,w)})},g=C=>t.shell?A.some(C):tr(C,t,"groups"),h=t.shell?{behaviours:[Kn.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:h.components,behaviours:hc(t.toolbarBehaviours,h.behaviours),apis:{setGroups:d,refresh:oe},domModification:{attributes:{role:"group"}}}},yf=si({name:"Toolbar",configFields:Wv(),partFields:HV(),factory:zV,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)}}}),VV=oe,iq=eo,h$=Z([]);var p$=Object.freeze({__proto__:null,setup:VV,isDocked:iq,getBehaviours:h$});const qT=Z(Kt("toolbar-height-change")),Nd={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},pD="tox-tinymce--toolbar-sticky-on",b$="tox-tinymce--toolbar-sticky-off",UV=(t,s)=>{const c=er(s),d=ii(s).dom.innerHeight,g=Ea(c),h=ze.fromDom(t.elm),C=ui(h),w=Pr(h),k=C.y,O=k+w,P=wc(s),H=Pr(s),j=P.top,Q=j+H,te=Math.abs(j-g.top)<2,we=Math.abs(Q-(g.top+d))<2;if(te&&k<Q)dd(g.left,k-H,c);else if(we&&O>j){const ce=k-d+w+H;dd(g.left,ce,c)}},KT=(t,s)=>fo(xr.getModes(t),s),bD=t=>{const s=i=>il(i)+(parseInt(at(i,"margin-top"),10)||0)+(parseInt(at(i,"margin-bottom"),10)||0),c=t.element;Fa(c).each(i=>{const d="padding-"+xr.getModes(t)[0];if(xr.isDocked(t)){const g=ee(i);Nt(c,"width",g+"px"),Nt(i,d,s(c)+"px")}else xo(c,"width"),xo(i,d)})},v$=(t,s)=>{s?(ic(t,Nd.fadeOutClass),Lf(t,[Nd.transitionClass,Nd.fadeInClass])):(ic(t,Nd.fadeInClass),Lf(t,[Nd.fadeOutClass,Nd.transitionClass]))},y$=(t,s)=>{const c=ze.fromDom(t.getContainer());s?(Jr(c,pD),ic(c,b$)):(Jr(c,b$),ic(c,pD))},WV=(t,s)=>{const c=er(s);mu(c).filter(i=>!Bo(s,i)).filter(i=>Bo(i,ze.fromDom(c.dom.body))||ai(t,i)).each(()=>bi(s))},C$=(t,s)=>vi(t).orThunk(()=>s().toOptional().bind(c=>vi(c.element))),w$=(t,s,c)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{c().each(xr.reset)}),t.on("ResizeWindow ResizeEditor",()=>{c().each(bD)}),t.on("SkinLoaded",()=>{c().each(i=>{xr.isDocked(i)?xr.reset(i):xr.refresh(i)})}),t.on("FullscreenStateChanged",()=>{c().each(xr.reset)})),t.on("AfterScrollIntoView",i=>{c().each(d=>{xr.refresh(d);const g=d.element;G2(g)&&UV(i,g)})}),t.on("PostRender",()=>{y$(t,!1)})},ZV=t=>t().map(xr.isDocked).getOr(!1),S$=()=>[Ki.config({channels:{[qT()]:{onReceive:bD}}})],x$=(t,s)=>{const c=ys(),i=s.getSink,d=C=>{i().each(w=>C(w.element))},g=C=>{t.inline||bD(C),y$(t,xr.isDocked(C)),C.getSystem().broadcastOn([of()],{}),i().each(w=>w.getSystem().broadcastOn([of()],{}))},h=t.inline?[]:S$();return[zn.config({}),xr.config({contextual:{lazyContext:C=>{const w=il(C.element),k=t.inline?t.getContentAreaContainer():t.getContainer();return A.from(k).map(O=>{const P=cc(ze.fromDom(O));return Bp(t,C.element).fold(()=>{const j=P.height-w,Q=P.y+(KT(C,"top")?0:w);return kr(P.x,Q,P.width,j)},j=>{const Q=Zd(P,$p(j)),te=KT(C,"top")?Q.y:Q.y+w;return kr(Q.x,te,Q.width,Q.height-w)})})},onShow:()=>{d(C=>v$(C,!0))},onShown:C=>{d(w=>lu(w,[Nd.transitionClass,Nd.fadeInClass])),c.get().each(w=>{WV(C.element,w),c.clear()})},onHide:C=>{C$(C.element,i).fold(c.clear,c.set),d(w=>v$(w,!1))},onHidden:()=>{d(C=>lu(C,[Nd.transitionClass]))},...Nd},lazyViewport:C=>Bp(t,C.element).fold(()=>{const k=xc(),O=t_(t),P=k.y+(KT(C,"top")&&!m_(t)?O:0),H=k.height-(KT(C,"bottom")?O:0);return{bounds:kr(k.x,P,k.width,H),optScrollEnv:A.none()}},k=>({bounds:$p(k),optScrollEnv:A.some({currentScrollTop:k.element.dom.scrollTop,scrollElmTop:wc(k.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...h]};var jV=Object.freeze({__proto__:null,setup:w$,isDocked:ZV,getBehaviours:x$});const GV=t=>{const s=t.editor,c=t.sticky?x$:h$;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:xt(c(s,t.sharedBackstage))}},B0=Vn([Fc,ds("items",Yd([Ph([L_,gi("items",Vt)]),Vt]))].concat(p0)),E$=t=>_r("GroupToolbarButton",B0,t),mw=[$r("text"),$r("tooltip"),$r("icon"),Wi("search",!1,Yd([pl,Vn([$r("placeholder")])],t=>Wo(t)?t?A.some({placeholder:A.none()}):A.none():A.some(t))),Xc("fetch"),js("onSetup",()=>oe),ar("context","mode:design")],fw=Vn([Fc,...mw]),vD=t=>_r("menubutton",fw,t),T$=Vn([Fc,CC,_d,dh,V_,aL,g0,zl("presets","normal",["normal","color","listpreview"]),kN(1),f0,lL,ar("context","mode:design")]),k$=t=>_r("SplitButton",T$,t);var yD=Ji({factory:(t,s)=>{const c=(d,g)=>{const h=Re(g,C=>{const w={type:"menubutton",text:C.text,fetch:O=>{O(C.getItems())},context:"any"},k=vD(w).mapError(O=>au(O)).getOrDie();return BT(k,"tox-mbtn",s.backstage,A.some("menuitem"))});Kn.set(d,h)},i={focus:En.focusIn,setMenus:c};return{uid:t.uid,dom:t.dom,components:[],behaviours:xt([Kn.config({}),Qn("menubar-events",[Gs(d=>{t.onSetup(d)}),Ye(Mu(),(d,g)=>{Cs(d.element,".tox-mbtn--active").each(h=>{Lu(g.event.target,".tox-mbtn").each(C=>{Bo(h,C)||d.getSystem().getByDom(h).each(w=>{d.getSystem().getByDom(C).each(k=>{Ku.expand(k),Ku.close(w),zn.focus(k)})})})})}),Ye(m1(),(d,g)=>{g.event.prevFocus.bind(h=>d.getSystem().getByDom(h).toOptional()).each(h=>{g.event.newFocus.bind(C=>d.getSystem().getByDom(C).toOptional()).each(C=>{Ku.isOpen(h)&&(Ku.expand(C),Ku.close(h))})})})]),En.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),A.some(!0))}),lr.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[nt("dom"),nt("uid"),nt("onEscape"),nt("backstage"),Ee("onSetup",oe)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,c)=>{t.setMenus(s,c)}}});const qV="⚡️Upgrade",KV="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",YV=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:KV,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:qV}}]}),_$="container",Zv=[ga("slotBehaviours",[])],jv=t=>"<alloy.field."+t+">",CD=t=>{const s=(()=>{const g=[];return{slot:(C,w)=>(g.push(C),cv(_$,jv(C),w)),record:Z(g)}})(),c=t(s),i=s.record(),d=Re(i,g=>ja({name:g,pname:jv(g)}));return o0(_$,Zv,d,XV,c)},XV=(t,s)=>{const c=te=>M2(t),i=(te,we)=>tr(te,t,we),d=(te,we)=>(ce,xe)=>tr(ce,t,xe).map(Ce=>te(Ce,xe)).getOr(we),g=te=>(we,ce)=>{ot(ce,xe=>te(we,xe))},h=(te,we)=>ho(te.element,"aria-hidden")!=="true",C=(te,we)=>{if(!h(te)){const ce=te.element;xo(ce,"display"),V(ce,"aria-hidden"),kn(te,Vh(),{name:we,visible:!0})}},w=(te,we)=>{if(h(te)){const ce=te.element;Nt(ce,"display","none"),Xe(ce,"aria-hidden","true"),kn(te,Vh(),{name:we,visible:!1})}},k=d(h,!1),O=d(w),P=g(O),H=te=>P(te,c()),j=d(C),Q={getSlotNames:c,getSlot:i,isShowing:k,hideSlot:O,hideAllSlots:H,showSlot:j};return{uid:t.uid,dom:t.dom,components:s,behaviours:tv(t.slotBehaviours),apis:Q}},ri={...Ke({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,c)=>t.getSlot(s,c),isShowing:(t,s,c)=>t.isShowing(s,c),hideSlot:(t,s,c)=>t.hideSlot(s,c),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,c)=>t.showSlot(s,c)},t=>Cd(t)),sketch:CD},JV=Vn([_d,CC,js("onShow",oe),js("onHide",oe),g0]),gw=t=>_r("sidebar",JV,t),A$=t=>{const{sidebars:s}=t.ui.registry.getAll();ot(os(s),c=>{const i=s[c],d=()=>vr(A.from(t.queryCommandValue("ToggleSidebar")),c);t.ui.registry.addToggleButton(c,{icon:i.icon,tooltip:i.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,c),g.setActive(d())},onSetup:g=>{g.setActive(d());const h=()=>g.setActive(d());return t.on("ToggleSidebar",h),()=>{t.off("ToggleSidebar",h)}},context:"any"})})},QV=t=>({element:()=>t.element.dom}),eU=(t,s)=>{const c=Re(os(s),i=>{const d=s[i],g=wt(gw(d));return{name:i,getApi:QV,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return Re(c,i=>{const d=pn(oe);return t.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:_v.unnamedEvents([ff(i,d),mh(i,d),Ye(Vh(),(g,h)=>{const C=h.event;We(c,k=>k.name===C.name).each(k=>{(C.visible?k.onShow:k.onHide)(k.getApi(g))})})])})})},tU=t=>ri.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:eU(s,t),slotBehaviours:_v.unnamedEvents([Gs(c=>ri.hideAllSlots(c))])})),nU=(t,s,c)=>{Qo.getCurrent(t).each(d=>{Kn.set(d,[tU(s)]);const g=c==null?void 0:c.toLowerCase();je(g)&&uo(s,g)&&Qo.getCurrent(d).each(h=>{ri.showSlot(h,g),_l.immediateGrow(d),xo(d.element,"width"),YT(t.element,"region")})})},YT=(t,s)=>{Xe(t,"role",s)},oU=(t,s)=>{Qo.getCurrent(t).each(i=>{Qo.getCurrent(i).each(g=>{_l.hasGrown(i)?ri.isShowing(g,s)?(_l.shrink(i),YT(t.element,"presentation")):(ri.hideAllSlots(g),ri.showSlot(g,s),YT(t.element,"region")):(ri.hideAllSlots(g),ri.showSlot(g,s),_l.grow(i),YT(t.element,"region"))})})},O$=t=>Qo.getCurrent(t).bind(c=>_l.isGrowing(c)||_l.hasGrown(c)?Qo.getCurrent(c).bind(g=>We(ri.getSlotNames(g),h=>ri.isShowing(g,h))):A.none()),XT=Kt("FixSizeEvent"),hw=Kt("AutoSizeEvent"),sU=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:xt([lr.config({}),zn.config({}),_l.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Qo.getCurrent(s).each(ri.hideAllSlots),Io(s,hw)},onGrown:s=>{Io(s,hw)},onStartGrow:s=>{kn(s,XT,{width:Es(s.element,"width").getOr("")})},onStartShrink:s=>{kn(s,XT,{width:ee(s.element)+"px"})}}),Kn.config({}),Qo.config({find:s=>{const c=Kn.contents(s);return As(c)}})])}],behaviours:xt([Ei.childAt(0),Qn("sidebar-sliding-events",[Ye(XT,(s,c)=>{Nt(s.element,"width",c.event.width)}),Ye(hw,(s,c)=>{xo(s.element,"width")})])])});var cU=Object.freeze({__proto__:null,block:(t,s,c,i)=>{Xe(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=xt([En.config({mode:"special",onTab:()=>A.some(!0),onShiftTab:()=>A.some(!0)}),zn.config({})]),h=i(d,g),C=d.getSystem().build(h);Kn.append(d,Cl(C)),C.hasConfigured(En)&&s.focus&&En.focusIn(C),c.isBlocked()||s.onBlock(t),c.blockWith(()=>Kn.remove(d,C))},unblock:(t,s,c)=>{V(t.element,"aria-busy"),c.isBlocked()&&s.onUnblock(t),c.clear()},isBlocked:(t,s,c)=>c.isBlocked()}),aU=[js("getRoot",A.none),Ur("focus",!0),rs("onBlock"),rs("onUnblock")],iU=Object.freeze({__proto__:null,init:()=>{const t=fl(),s=c=>{t.set({destroy:c})};return Vl({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const Pd=gc({fields:aU,name:"blocking",apis:cU,state:iU}),lU=t=>(s,c)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:uf('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),JT=t=>Qo.getCurrent(t).each(s=>bi(s.element,!0)),uU=(t,s)=>{const c="tabindex",i=`data-mce-${c}`;A.from(t.iframeElement).map(ze.fromDom).each(d=>{s?(Gn(d,c).each(g=>Xe(d,i,g)),Xe(d,c,-1)):(V(d,c),Gn(d,i).each(g=>{Xe(d,c,g),V(d,i)}))})},xD=(t,s,c,i)=>{const d=s.element;if(uU(t,c),c)Pd.block(s,lU(i)),xo(d,"display"),V(d,"aria-hidden"),t.hasFocus()&&JT(s);else{const g=Qo.getCurrent(s).exists(h=>ea(h.element));Pd.unblock(s),Nt(d,"display","none"),Xe(d,"aria-hidden","true"),g&&t.focus()}},dU=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:xt([Kn.config({}),Pd.config({focus:!1}),Qo.config({find:s=>As(s.components())})]),components:[]}),mU=t=>t.type==="focusin",fU=t=>mU(t)?(t.composed?As(t.composedPath()):A.from(t.target)).map(ze.fromDom).filter(vo).exists(c=>ni(c,"mce-pastebin")):!1,gU=(t,s,c)=>{const i=pn(!1),d=ys(),g=C=>{i.get()&&!fU(C)&&(C.preventDefault(),JT(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",C=>{C.command.toLowerCase()==="mcefocus"&&C.value!==!0&&g(C)})});const h=C=>{C!==i.get()&&(i.set(C),xD(t,s(),C,c.providers),a6(t,C))};t.on("ProgressState",C=>{if(d.on(clearTimeout),jn(C.time)){const w=cE.setEditorTimeout(t,()=>h(C.state),C.time);d.set(w)}else h(C.state),d.clear()})},hU=(t,s)=>No(t,(d,g)=>s(g,d.len).fold(Z(d),C=>({len:C.finish,list:d.list.concat([C])})),{len:0,list:[]}).list,D$=(t,s,c)=>({within:t,extra:s,withinWidth:c}),pU=(t,s,c)=>{const i=hU(t,(C,w)=>{const k=c(C);return A.some({element:C,start:w,finish:w+k,width:k})}),d=to(i,C=>C.finish<=s),g=wo(d,(C,w)=>C+w.width,0),h=i.slice(d.length);return{within:d,extra:h,withinWidth:g}},pw=t=>Re(t,s=>s.element),bU=(t,s,c)=>{const i=pw(t.concat(s));return D$(i,[],c)},R$=(t,s,c,i)=>{const d=pw(t).concat([c]);return D$(d,pw(s),i)},vU=(t,s,c)=>D$(pw(t),[],c),yU=(t,s,c)=>{const i=pU(s,t,c);return i.extra.length===0?A.some(i):A.none()},CU=(t,s,c,i)=>{const d=yU(t,s,c).getOrThunk(()=>pU(s,t-c(i),c)),g=d.within,h=d.extra,C=d.withinWidth;return h.length===1&&h[0].width<=c(i)?bU(g,h,C):h.length>=1?R$(g,h,i,C):vU(g,h,C)},M$=(t,s)=>{const c=Re(s,i=>Cl(i));yf.setGroups(t,c)},wU=t=>ps(t,s=>vi(s.element).bind(c=>s.getSystem().getByDom(c).toOptional())),ED=(t,s,c)=>{const i=s.builtGroups.get();if(i.length===0)return;const d=xd(t,s,"primary"),g=pc.getCoupled(t,"overflowGroup");Nt(d.element,"visibility","hidden");const h=i.concat([g]),C=wU(h);c([]),M$(d,h);const w=ee(d.element),k=CU(w,s.builtGroups.get(),O=>Math.ceil(O.element.dom.getBoundingClientRect().width),g);k.extra.length===0?(Kn.remove(d,g),c([])):(M$(d,k.within),c(k.extra)),xo(d.element,"visibility"),Gc(d.element),C.each(zn.focus)},N$=Z([ga("splitToolbarBehaviours",[pc]),ls("builtGroups",()=>pn([]))]),SU=Z([yd(["overflowToggledClass"]),gd("getOverflowBounds"),nt("lazySink"),ls("overflowGroups",()=>pn([])),rs("onOpened"),rs("onClosed")].concat(N$())),xU=Z([ja({factory:yf,schema:Wv(),name:"primary"}),gu({schema:Wv(),name:"overflow"}),gu({name:"overflow-button"}),gu({name:"overflow-group"})]),P$=Z((t,s)=>{tt(t,Math.floor(s))}),dq=Z([yd(["toggledClass"]),nt("lazySink"),Xc("fetch"),gd("getBounds"),Aa("fireDismissalEventInstead",[Ee("event",$f())]),Xf(),rs("onToggled")]),B$=Z([gu({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:xt([Ao.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),gu({factory:yf,schema:Wv(),name:"toolbar",overrides:t=>({toolbarBehaviours:xt([En.config({mode:"cyclic",onEscape:s=>(tr(s,t,"button").each(zn.focus),A.none())})])})})]),bw=ys(),EU=(t,s)=>{bw.set(!0),TD(t,s),bw.clear()},TD=(t,s)=>{const c=pc.getCoupled(t,"toolbarSandbox");cs.isOpen(c)?cs.close(c):cs.open(c,s.toolbar())},Xl=(t,s,c,i)=>{const d=c.getBounds.map(h=>h()),g=c.lazySink(t).getOrDie();Wa.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:i,overrides:{maxWidthFunction:P$()}}},d)},$$=(t,s,c,i,d)=>{yf.setGroups(s,d),Xl(t,s,c,i),Ao.on(t)},F$=(t,s,c)=>{const i=Ny(),d=(h,C)=>{const w=bw.get().getOr(!1);c.fetch().get(k=>{$$(t,C,c,s.layouts,k),i.link(t.element),w||En.focusIn(C)})},g=()=>{Ao.off(t),bw.get().getOr(!1)||zn.focus(t),i.unlink(t.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:xt([En.config({mode:"special",onEscape:h=>(cs.close(h),A.some(!0))}),cs.config({onOpen:d,onClose:g,isPartOf:(h,C,w)=>Kf(C,w)||Kf(t,w),getAttachPoint:()=>c.lazySink(t).getOrDie()}),Ki.config({channels:{...wl({isExtraPart:eo,...c.fireDismissalEventInstead.map(h=>({fireEventInstead:{event:h.event}})).getOr({})}),...Qg({doReposition:()=>{cs.getState(pc.getCoupled(t,"toolbarSandbox")).each(h=>{Xl(t,h,c,s.layouts)})}})}})])}},Up=si({name:"FloatingToolbarButton",factory:(t,s,c,i)=>({...sa.sketch({...i.button(),action:d=>{TD(d,i)},buttonBehaviours:ql.augment({dump:i.button().buttonBehaviours},[pc.config({others:{toolbarSandbox:d=>F$(d,c,t)}})])}),apis:{setGroups:(d,g)=>{cs.getState(pc.getCoupled(d,"toolbarSandbox")).each(h=>{$$(d,h,t,c.layouts,g)})},reposition:d=>{cs.getState(pc.getCoupled(d,"toolbarSandbox")).each(g=>{Xl(d,g,t,c.layouts)})},toggle:d=>{TD(d,i)},toggleWithoutFocusing:d=>{EU(d,i)},getToolbar:d=>cs.getState(pc.getCoupled(d,"toolbarSandbox")),isOpen:d=>cs.isOpen(pc.getCoupled(d,"toolbarSandbox"))}}),configFields:dq(),partFields:B$(),apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),vw=Z([nt("items"),yd(["itemSelector"]),ga("tgroupBehaviours",[En])]),kU=Z([rh({name:"items",unit:"item"})]),QT=(t,s,c,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:hc(t.tgroupBehaviours,[En.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),e4=si({name:"ToolbarGroup",configFields:vw(),partFields:kU(),factory:QT}),yw=t=>Re(t,s=>Cl(s)),I$=(t,s,c)=>{ED(t,c,i=>{c.overflowGroups.set(i),s.getOpt(t).each(d=>{Up.setGroups(d,yw(i))})})},_U=(t,s,c,i)=>{const d=ws(Up.sketch({fetch:()=>Si.nu(g=>{g(yw(t.overflowGroups.get()))}),layouts:{onLtr:()=>[$c,Tc],onRtl:()=>[Tc,$c],onBottomLtr:()=>[kc,Ra],onBottomRtl:()=>[Ra,kc]},getBounds:c.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(g,h)=>t[h?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:hc(t.splitToolbarBehaviours,[pc.config({others:{overflowGroup:()=>e4.sketch({...i["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,h)=>{t.builtGroups.set(Re(h,g.getSystem().build)),I$(g,d,t)},refresh:g=>I$(g,d,t),toggle:g=>{d.getOpt(g).each(h=>{Up.toggle(h)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(Up.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(Up.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(h=>{Up.reposition(h)})},getOverflow:g=>d.getOpt(g).bind(Up.getToolbar)},domModification:{attributes:{role:"group"}}}},Qu=si({name:"SplitFloatingToolbar",configFields:SU(),partFields:xU(),factory:_U,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),AU=Z([yd(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),rs("onOpened"),rs("onClosed")].concat(N$())),t4=Z([ja({factory:yf,schema:Wv(),name:"primary"}),ja({factory:yf,schema:Wv(),name:"overflow",overrides:t=>({toolbarBehaviours:xt([_l.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{tr(s,t,"overflow-button").each(c=>{Ao.off(c)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{tr(s,t,"overflow-button").each(Ao.on)}}),En.config({mode:"acyclic",onEscape:s=>(tr(s,t,"overflow-button").each(zn.focus),A.some(!0))})])})}),gu({name:"overflow-button",overrides:t=>({buttonBehaviours:xt([Ao.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),gu({name:"overflow-group"})]),L$=(t,s)=>tr(t,s,"overflow").map(_l.hasGrown).getOr(!1),n4=(t,s,c)=>{tr(t,s,"overflow-button").each(i=>{tr(t,s,"overflow").each(d=>{if(kD(t,s),_l.hasShrunk(d)){const g=s.onOpened;s.onOpened=h=>{c||En.focusIn(d),g(h),s.onOpened=g}}else{const g=s.onClosed;s.onClosed=h=>{c||zn.focus(i),g(h),s.onClosed=g}}_l.toggleGrow(d)})})},kD=(t,s)=>{tr(t,s,"overflow").each(c=>{ED(t,s,i=>{const d=Re(i,g=>Cl(g));yf.setGroups(c,d)}),tr(t,s,"overflow-button").each(i=>{_l.hasGrown(c)&&Ao.on(i)}),_l.refresh(c)})},H$=(t,s,c,i)=>{const d="alloy.toolbar.toggle",g=(h,C)=>{const w=Re(C,h.getSystem().build);t.builtGroups.set(w)};return{uid:t.uid,dom:t.dom,components:s,behaviours:hc(t.splitToolbarBehaviours,[pc.config({others:{overflowGroup:h=>e4.sketch({...i["overflow-group"](),items:[sa.sketch({...i["overflow-button"](),action:C=>{Io(h,d)}})]})}}),Qn("toolbar-toggle-events",[Ye(d,h=>{n4(h,t,!1)})])]),apis:{setGroups:(h,C)=>{g(h,C),kD(h,t)},refresh:h=>kD(h,t),toggle:h=>{n4(h,t,!1)},toggleWithoutFocusing:h=>{n4(h,t,!0)},isOpen:h=>L$(h,t)},domModification:{attributes:{role:"group"}}}},_D=si({name:"SplitSlidingToolbar",configFields:AU(),partFields:t4(),factory:H$,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),z$=t=>{const s=t.label.isNone()?t.title.fold(()=>({}),c=>({attributes:{"aria-label":c}})):t.label.fold(()=>({}),c=>({attributes:{"aria-label":c}}));return{dom:{tag:"div",classes:["tox-toolbar__group"].concat(t.label.isSome()?["tox-toolbar__group_with_label"]:[]),...s},components:[...t.label.map(c=>({dom:{tag:"span",classes:["tox-label","tox-label--context-toolbar"]},components:[Ar(c)]})).toArray(),e4.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-item:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:xt([lr.config({}),zn.config({ignore:!0})])}},o4=t=>e4.sketch(z$(t)),V$=(t,s)=>{const c=Gs(i=>{const d=Re(t.initGroups,o4);yf.setGroups(i,d)});return xt([Od.toolbarButton(()=>t.providers.checkUiComponentContext("any").shouldDisable),_c(()=>t.providers.checkUiComponentContext("any")),En.config({mode:s,onEscape:t.onEscape,visibilitySelector:".tox-toolbar__overflow",selector:".tox-toolbar__group"}),Qn("toolbar-events",[c])])},U$=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":z$({title:A.none(),label:A.none(),items:[]}),"overflow-button":jz({context:"any",icon:A.some("more-drawer"),enabled:!0,tooltip:A.some("Reveal or hide additional toolbar items")},A.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:V$(t,s)}},OU=t=>{const s=U$(t),c=4,i=Qu.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return Qu.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=ui(d),h=$a(d),C=ui(h),w=Math.max(h.dom.scrollHeight,C.height);return kr(g.x+c,C.y,g.width-c*2,w)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},DU=t=>{const s=_D.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),c=_D.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=U$(t);return _D.sketch({...i,components:[s,c],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([qT()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([qT()],{type:"closed"}),t.onToggled(d,!1)}})},Cw=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return yf.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===ju.scrolling?["tox-toolbar--scrolling"]:[])},components:[yf.parts.groups({})],toolbarBehaviours:V$(t,s)})},AD=[dh,_d,$r("tooltip"),zl("buttonType","secondary",["primary","secondary"]),Ur("borderless",!1),Xc("onAction"),ar("context","mode:design")],W$=[...AD,uh,Hl("type",["button"])],RU=[...AD,Ur("active",!1),Hl("type",["togglebutton"])],OD={button:W$,togglebutton:RU},MU=[Hl("type",["group"]),_("buttons",[],Nc("type",OD))],NU=Nc("type",{...OD,group:MU}),Z$=Vn([_("buttons",[],NU),Xc("onShow"),Xc("onHide")]),j$=t=>_r("view",Z$,t),G$=(t,s)=>{var c,i;const d=t.type==="togglebutton",g=t.icon.map(Ce=>Vp(Ce,s.icons)).map(ws),C=Ce=>{const Pe=He=>{g.map(Zt=>Zt.getOpt(Ce).each(Pt=>{Kn.set(Pt,[Vp(He,s.icons)])}))},Fe=He=>{const Zt=Ce.element;He?(Jr(Zt,"tox-button--enabled"),Xe(Zt,"aria-pressed",!0)):(ic(Zt,"tox-button--enabled"),V(Zt,"aria-pressed"))},Lt=()=>ni(Ce.element,"tox-button--enabled"),bt=()=>bi(Ce.element);if(d)return t.onAction({setIcon:Pe,setActive:Fe,isActive:Lt,focus:bt});if(t.type==="button")return t.onAction({setIcon:Pe})},w={...t,name:d?t.text.getOr(t.icon.getOr("")):(c=t.text)!==null&&c!==void 0?c:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:A.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},k=IT((i=t.buttonType)!==null&&i!==void 0?i:"secondary"),O=d?t.text.map(s.translate):A.some(s.translate(t.text)),P=O.map(Ar),H=w.tooltip.or(O).map(Ce=>({"aria-label":s.translate(Ce)})).getOr({}),j=g.map(Ce=>Ce.asSpec()),Q=Ov([j,P]),te=t.icon.isSome()&&P.isSome(),we={tag:"button",classes:k.concat(...t.icon.isSome()&&!te?["tox-button--icon"]:[]).concat(...te?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:H},ce=[],xe=tw(w,A.some(C),ce,we,Q,t.tooltip,s);return sa.sketch(xe)},q$=(t,s)=>G$(t,s),PU=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Re(t.buttons,c=>q$(c,s))}),K$=Mr().deviceType,Y$=K$.isPhone(),BU=K$.isTablet(),$U=t=>{let s=!1;const c=Re(t.buttons,i=>i.type==="group"?(s=!0,PU(i,t.providers)):q$(i,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...Y$||BU?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:xt([zn.config({}),En.config({mode:"flow",selector:"button, .tox-button",focusInside:qa.OnEnterOrSpaceMode})]),components:s?c:[hf.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),hf.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:c})]}},FU=t=>({uid:t.uid,behaviours:xt([zn.config({}),lr.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),IU=(t,s,c,i)=>{const d={getPane:g=>ca.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:xt([zn.config({}),En.config({mode:"cyclic",focusInside:qa.OnEnterOrSpaceMode})]),apis:d}};var Gv=si({name:"silver.View",configFields:[nt("viewConfig")],partFields:[Xi({factory:{sketch:$U},schema:[nt("buttons"),nt("providers")],name:"header"}),Xi({factory:{sketch:FU},schema:[],name:"pane"})],factory:IU,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const LU=(t,s,c)=>ur(s,(i,d)=>{const g=wt(j$(i));return t.slot(d,Gv.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[Gv.parts.header({buttons:g.buttons,providers:c})]:[],Gv.parts.pane({})]}))}),HU=(t,s)=>ri.sketch(c=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:LU(c,t,s),slotBehaviours:_v.unnamedEvents([Gs(i=>ri.hideAllSlots(i))])})),X$=t=>We(ri.getSlotNames(t),s=>ri.isShowing(t,s)),zU=t=>{const s=t.element;Nt(s,"display","none"),Xe(s,"aria-hidden","true")},VU=t=>{const s=t.element;xo(s,"display"),V(s,"aria-hidden")},J$=t=>({getContainer:Z(t)}),Q$=(t,s,c)=>{ri.getSlot(t,s).each(i=>{Gv.getPane(i).each(d=>{c(i)(J$(d.element.dom))})})},UU=(t,s)=>Q$(t,s,Gv.getOnShow),DD=(t,s)=>Q$(t,s,Gv.getOnHide);var $0=Ji({factory:(t,s)=>{const g={setViews:(h,C)=>{Kn.set(h,[HU(C,s.backstage.shared.providers)])},whichView:h=>Qo.getCurrent(h).bind(X$),toggleView:(h,C,w,k)=>Qo.getCurrent(h).exists(O=>{const P=X$(O),H=P.exists(Q=>k===Q),j=ri.getSlot(O,k).isSome();return j&&(ri.hideAllSlots(O),H?(zU(h),C()):(w(),VU(h),ri.showSlot(O,k),UU(O,k)),P.each(Q=>DD(O,Q))),j})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:xt([Kn.config({}),Qo.config({find:h=>{const C=Kn.contents(h);return As(C)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[nt("backstage")],apis:{setViews:(t,s,c)=>t.setViews(s,c),toggleView:(t,s,c,i,d)=>t.toggleView(s,c,i,d),whichView:(t,s)=>t.whichView(s)}});const WU=(t,s,c)=>{let i=!1;const d=h=>{qi(h,".tox-statusbar").each(C=>{at(C,"display")==="none"&&ho(C,"aria-hidden")==="true"?(xo(C,"display"),V(C,"aria-hidden")):(Nt(C,"display","none"),Xe(C,"aria-hidden","true"))})},g={getSocket:h=>ca.getPart(h,t,"socket"),setSidebar:(h,C,w)=>{ca.getPart(h,t,"sidebar").each(k=>nU(k,C,w))},toggleSidebar:(h,C)=>{ca.getPart(h,t,"sidebar").each(w=>oU(w,C))},whichSidebar:h=>ca.getPart(h,t,"sidebar").bind(O$).getOrNull(),getHeader:h=>ca.getPart(h,t,"header"),getToolbar:h=>ca.getPart(h,t,"toolbar"),setToolbar:(h,C)=>{ca.getPart(h,t,"toolbar").each(w=>{const k=Re(C,o4);w.getApis().setGroups(w,k)})},setToolbars:(h,C)=>{ca.getPart(h,t,"multiple-toolbar").each(w=>{const k=Re(C,O=>Re(O,o4));GT.setItems(w,k)})},refreshToolbar:h=>{ca.getPart(h,t,"toolbar").each(w=>w.getApis().refresh(w))},toggleToolbarDrawer:h=>{ca.getPart(h,t,"toolbar").each(C=>{is(C.getApis().toggle,w=>w(C))})},toggleToolbarDrawerWithoutFocusing:h=>{ca.getPart(h,t,"toolbar").each(C=>{is(C.getApis().toggleWithoutFocusing,w=>w(C))})},isToolbarDrawerToggled:h=>ca.getPart(h,t,"toolbar").bind(C=>A.from(C.getApis().isOpen).map(w=>w(C))).getOr(!1),getThrobber:h=>ca.getPart(h,t,"throbber"),focusToolbar:h=>{ca.getPart(h,t,"toolbar").orThunk(()=>ca.getPart(h,t,"multiple-toolbar")).each(w=>{En.focusIn(w)})},setMenubar:(h,C)=>{ca.getPart(h,t,"menubar").each(w=>{yD.setMenus(w,C)})},focusMenubar:h=>{ca.getPart(h,t,"menubar").each(C=>{yD.focus(C)})},setViews:(h,C)=>{ca.getPart(h,t,"viewWrapper").each(w=>{$0.setViews(w,C)})},toggleView:(h,C)=>ca.getPart(h,t,"viewWrapper").exists(w=>$0.toggleView(w,()=>g.showMainView(h),()=>g.hideMainView(h),C)),whichView:h=>ca.getPart(h,t,"viewWrapper").bind($0.whichView).getOrNull(),hideMainView:h=>{i=g.isToolbarDrawerToggled(h),i&&g.toggleToolbarDrawer(h),ca.getPart(h,t,"editorContainer").each(C=>{const w=C.element;d(w),Nt(w,"display","none"),Xe(w,"aria-hidden","true")})},showMainView:h=>{i&&g.toggleToolbarDrawer(h),ca.getPart(h,t,"editorContainer").each(C=>{const w=C.element;d(w),xo(w,"display"),V(w,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:g,behaviours:t.behaviours}},eF=vf.optional({factory:yD,name:"menubar",schema:[nt("backstage")]}),ZU=t=>t.type===ju.sliding?DU:t.type===ju.floating?OU:Cw,jU=vf.optional({factory:{sketch:t=>GT.sketch({uid:t.uid,dom:t.dom,listBehaviours:xt([En.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>Cw({type:t.type,uid:Kt("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),A.some(!0))}),setupItem:(s,c,i,d)=>{yf.setGroups(c,i)},shell:!0})},name:"multiple-toolbar",schema:[nt("dom"),nt("onEscape")]}),fq=vf.optional({factory:{sketch:t=>{const s=ZU(t),c={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),A.some(!0)),onToggled:(i,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(c)}},name:"toolbar",schema:[nt("dom"),nt("onEscape"),nt("getSink")]}),GU=vf.optional({factory:{sketch:GV},name:"header",schema:[nt("dom")]}),qU=vf.optional({factory:{sketch:YV},name:"promotion",schema:[nt("dom")]}),RD=vf.optional({name:"socket",schema:[nt("dom")]}),KU=vf.optional({factory:{sketch:sU},name:"sidebar",schema:[nt("dom")]}),s4=vf.optional({factory:{sketch:dU},name:"throbber",schema:[nt("dom")]}),tF=vf.optional({factory:$0,name:"viewWrapper",schema:[nt("backstage")]}),nF=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),MD=vf.optional({factory:{sketch:nF},name:"editorContainer",schema:[]});var br=si({name:"OuterContainer",factory:WU,configFields:[nt("dom"),nt("behaviours")],partFields:[GU,eF,fq,jU,RD,KU,qU,s4,tF,MD],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,c,i)=>{t.setSidebar(s,c,i)},toggleSidebar:(t,s,c)=>{t.toggleSidebar(s,c)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,c)=>{t.setToolbar(s,c)},setToolbars:(t,s,c)=>{t.setToolbars(s,c)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,c)=>{t.setMenubar(s,c)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,c)=>{t.setViews(s,c)},toggleView:(t,s,c)=>t.toggleView(s,c),whichView:(t,s)=>t.whichView(s)}});const oF="file edit view insert format tools table help",F0={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},sF=(t,s,c)=>{const i=vM(c).split(/[ ,]/);return{text:t.title,getItems:()=>fe(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:Bs(i,h=>h===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},ND=t=>t.split(" "),rF=(t,s)=>{const c={...F0,...s.menus},i=os(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?ND(oF):ND(s.menubar===!1?"":s.menubar),g=to(d,C=>{const w=uo(F0,C);return i?w||Ct(s.menus,C).exists(k=>uo(k,"items")):w}),h=Re(g,C=>{const w=c[C];return sF({title:w.title,items:ND(w.items)},s,t)});return to(h,C=>{const w=k=>je(k)||k.type!=="separator";return C.getItems().length>0&&Bs(C.getItems(),w)})},YU=t=>{const s=()=>{t._skinLoaded=!0,FL(t)};return()=>{t.initialized?s():t.on("init",s)}},PD=(t,s)=>()=>IL(t,{message:s}),XU=t=>{const s=nC(t);return s?A.from(s):A.none()},cF=(t,s,c)=>(t.on("remove",()=>c.unload(s)),c.load(s)),ww=(t,s,c,i)=>(t.on("remove",()=>i.unloadRawCss(s)),i.loadRawCss(s,c)),aF=(t,s)=>"ui/"+t+"/"+s,r4=t=>A.from(tinymce.Resource.get(t)).filter(je),Sw=(t,s,c="")=>{const i=XU(t).map(g=>aF(g,`${s}.css`)),d=i.bind(r4);return Qr(i,d,(g,h)=>({_kind:"load-raw",key:g,css:h})).getOrThunk(()=>{const g=t.editorManager.suffix;return{_kind:"load-stylesheet",url:c+`/${s}${g}.css`}})},JU=(t,s)=>{const c=t.ui.styleSheetLoader,i=Sw(t,"skin",s);switch(i._kind){case"load-raw":const{key:d,css:g}=i;return ww(t,d,g,c),Promise.resolve();case"load-stylesheet":const{url:h}=i;return cF(t,h,c);default:return Promise.resolve()}},QU=(t,s)=>{if(jc(ze.fromDom(t.getElement()))){const i=Q2.DOM.styleSheetLoader,d=Sw(t,"skin.shadowdom",s);switch(d._kind){case"load-raw":const{key:g,css:h}=d;return ww(t,g,h,i),Promise.resolve();case"load-stylesheet":const{url:C}=d;return cF(t,C,i);default:return Promise.resolve()}}else return Promise.resolve()},iF=(t,s,c)=>{const d=Sw(t,s?"content.inline":"content",c);switch(d._kind){case"load-raw":const{key:g,css:h}=d;return s?ww(t,g,h,t.ui.styleSheetLoader):t.on("PostRender",()=>{ww(t,g,h,t.dom.styleSheetLoader)}),Promise.resolve();case"load-stylesheet":const{url:C}=d;return c&&t.contentCSS.push(C),Promise.resolve();default:return Promise.resolve()}},eW=async(t,s)=>{const c=RM(s);if(await iF(s,t,c),!a_(s)&&je(c))return Promise.all([JU(s,c),QU(s,c)]).then()},lF=(t,s)=>eW(t,s).then(YU(s),PD(s,"Skin could not be loaded")),tW=On(lF,!1),uF=On(lF,!0),qv=(t,s,c)=>re(c)?t.translate(s):t.translate([s,t.translate(c)]),nW=(t,s)=>{const c=(h,C,w,k)=>{const O=t.shared.providers.translate(h.title);if(h.type==="separator")return A.some({type:"separator",text:O});if(h.type==="submenu"){const P=fe(h.getStyleItems(),H=>i(H,C,k));return C===0&&P.length<=0?A.none():A.some({type:"nestedmenuitem",text:O,enabled:P.length>0,getSubmenuItems:()=>fe(h.getStyleItems(),H=>i(H,C,k))})}else return A.some({type:"togglemenuitem",text:O,icon:h.icon,active:h.isSelected(k),enabled:!w,onAction:s.onAction(h),...h.getStylePreview().fold(()=>({}),P=>({meta:{style:P}}))})},i=(h,C,w)=>{const k=h.type==="formatter"&&s.isInvalid(h);return C===0?k?[]:c(h,C,!1,w).toArray():c(h,C,k,w).toArray()},d=h=>{const C=s.getCurrentValue(),w=s.shouldHide?0:1;return fe(h,k=>i(k,w,C))};return{validateItems:d,getFetch:(h,C)=>(w,k)=>{const O=C(),P=d(O),H=Hv(P,kd.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!1,search:A.none()});k(H)}}},Wp=(t,s)=>{const c=s.dataset,i=c.type==="basic"?()=>Re(c.data,d=>iw(d,s.isSelectedFor,s.getPreviewFor)):c.getData;return{items:nW(t,s),getStyleItems:i}},xw=(t,s,c,i,d,g)=>{const{items:h,getStyleItems:C}=Wp(s,c),w=pn(c.tooltip),k=P=>({getComponent:Z(P),setTooltip:H=>{const j=s.shared.providers.translate(H);Xe(P.element,"aria-label",j),w.set(H)}}),O=P=>{const H=j=>P.setTooltip(qv(t,i(j.value),j.value));return t.on(d,H),x0(E0(t,"NodeChange",j=>{const Q=j.getComponent();c.updateText(Q),rn.set(j.getComponent(),!t.selection.isEditable())})(P),()=>t.off(d,H))};return kO({context:"mode:design",text:c.icon.isSome()?A.none():c.text,icon:c.icon,ariaLabel:A.some(c.tooltip),tooltip:A.none(),role:A.none(),fetch:h.getFetch(s,C),onSetup:O,getApi:k,columns:1,presets:"normal",classes:c.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[Wr.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(c.tooltip),onShow:P=>{if(c.tooltip!==w.get()){const H=s.shared.providers.translate(w.get());Wr.setComponents(P,s.shared.providers.tooltips.getComponents({tooltipText:H}))}}})})]},"tox-tbtn",s.shared,g)},oW=t=>Re(t,s=>{let c=s,i=s;const d=s.split("=");return d.length>1&&(c=d[0],i=d[1]),{title:c,format:i}}),dF=t=>({type:"basic",data:t});var Kv;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(Kv||(Kv={}));const mF=(t,s)=>s===Kv.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),BD=(t,s,c)=>{const i=t.options.get(s);return{type:"basic",data:oW(mF(i,c))}},fF="Align",gF=Z("Alignment {0}"),hF="left",$D=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],FD=t=>{const s=()=>We($D,C=>t.formatter.match(C.format)),c=C=>()=>t.formatter.match(C),i=C=>A.none,d=C=>{const k=s().fold(Z(hF),O=>O.title.toLowerCase());kn(C,R0,{icon:`align-${k}`}),VL(t,{value:k})},g=dF($D),h=C=>()=>We($D,w=>w.format===C.format).each(w=>t.execCommand(w.command));return{tooltip:qv(t,gF(),hF),text:A.none(),icon:A.some("align-left"),isSelectedFor:c,getCurrentValue:A.none,getPreviewFor:i,onAction:h,updateText:d,dataset:g,shouldHide:!1,isInvalid:C=>!t.formatter.canApply(C.format)}},sW=(t,s)=>xw(t,s,FD(t),gF,"AlignTextUpdate","align"),rW=(t,s)=>{const c=Wp(s,FD(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(fF),onSetup:wi(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},pF=(t,s)=>{const c=s(),i=Re(c,d=>d.format);return A.from(t.formatter.closest(i)).bind(d=>We(c,g=>g.format===d))},ID="Blocks",c4=Z("Block {0}"),LD="Paragraph",bF=t=>{const s=g=>()=>t.formatter.match(g),c=g=>()=>{const h=t.formatter.get(g);return h?A.some({tag:h.length>0&&(h[0].inline||h[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(g))}):A.none()},i=g=>{const C=pF(t,()=>d.data).fold(Z(LD),w=>w.title);kn(g,Yu,{text:C}),ZL(t,{value:C})},d=BD(t,"block_formats",Kv.SemiColon);return{tooltip:qv(t,c4(),LD),text:A.some(LD),icon:A.none(),isSelectedFor:s,getCurrentValue:A.none,getPreviewFor:c,onAction:u6(t),updateText:i,dataset:d,shouldHide:!1,isInvalid:g=>!t.formatter.canApply(g.format)}},cW=(t,s)=>xw(t,s,bF(t),c4,"BlocksTextUpdate","blocks"),aW=(t,s)=>{const c=Wp(s,bF(t));t.ui.registry.addNestedMenuItem("blocks",{text:ID,onSetup:wi(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},iW="Fonts",vF=Z("Font {0}"),HD="System Font",lW=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],yF=t=>{const s=t.split(/\s*,\s*/);return Re(s,c=>c.replace(/^['"]+|['"]+$/g,""))},zD=(t,s)=>s.length>0&&bo(s,c=>t.indexOf(c.toLowerCase())>-1),a4=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const c=yF(t.toLowerCase());return zD(c,lW)||zD(c,s)}else return!1},i4=t=>{const s=()=>{const w=Q=>Q?yF(Q)[0]:"",k=t.queryCommandValue("FontName"),O=C.data,P=k?k.toLowerCase():"",H=DM(t);return{matchOpt:We(O,Q=>{const te=Q.format;return te.toLowerCase()===P||w(te).toLowerCase()===w(P).toLowerCase()}).orThunk(()=>Cn(a4(P,H),{title:HD,format:P})),font:k}},c=w=>k=>k.exists(O=>O.format===w),i=()=>{const{matchOpt:w}=s();return w},d=w=>()=>A.some({tag:"div",styles:w.indexOf("dings")===-1?{"font-family":w}:{}}),g=w=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,w.format)})},h=w=>{const{matchOpt:k,font:O}=s(),P=k.fold(Z(O),H=>H.title);kn(w,Yu,{text:P}),jL(t,{value:P})},C=BD(t,"font_family_formats",Kv.SemiColon);return{tooltip:qv(t,vF(),HD),text:A.some(HD),icon:A.none(),isSelectedFor:c,getCurrentValue:i,getPreviewFor:d,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:eo}},CF=(t,s)=>xw(t,s,i4(t),vF,"FontFamilyTextUpdate","fontfamily"),Zp=(t,s)=>{const c=Wp(s,i4(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(iW),onSetup:wi(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},wF={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},uW=(()=>{const t="[0-9]+",c="[eE]"+("[+-]?"+t),i="\\.",d=C=>`(?:${C})?`,h=`[+-]?(?:${["Infinity",t+i+d(t)+d(c),i+t+d(c),t+d(c)].join("|")})`;return new RegExp(`^(${h})(.*)$`)})(),dW=(t,s)=>Bs(s,c=>Bs(wF[c],i=>t===i)),l4=(t,s)=>A.from(uW.exec(t)).bind(i=>{const d=Number(i[1]),g=i[2];return dW(g,s)?A.some({value:d,unit:g}):A.none()}),mW=(t,s)=>l4(t,s).map(({value:c,unit:i})=>c+i),SF={tab:Z(9),escape:Z(27),enter:Z(13),backspace:Z(8),delete:Z(46),left:Z(37),up:Z(38),right:Z(39),down:Z(40),space:Z(32),home:Z(36),end:Z(35),pageUp:Z(33),pageDown:Z(34)},fW=(t,s,c,i)=>{let d=A.none();const g=Ce=>Ce.map(Pe=>qt.getValue(Pe)).getOr(""),h=E0(t,"NodeChange SwitchMode DisabledStateChange",Ce=>{const Pe=Ce.getComponent();d=A.some(Pe),c.updateInputValue(Pe),rn.set(Pe,!t.selection.isEditable()||lE(t))}),C=Ce=>({getComponent:Z(Ce)}),w=pn(oe),k=Kt("custom-number-input-events"),O=(Ce,Pe,Fe)=>{const Lt=g(d),bt=c.getNewValue(Lt,Ce),He=Lt.length-`${bt}`.length,Zt=d.map(en=>en.element.dom.selectionStart-He),Pt=d.map(en=>en.element.dom.selectionEnd-He);c.onAction(bt,Fe),d.each(en=>{qt.setValue(en,bt),Pe&&(Zt.each(Do=>en.element.dom.selectionStart=Do),Pt.each(Do=>en.element.dom.selectionEnd=Do))})},P=(Ce,Pe)=>O((Fe,Lt)=>Fe-Lt,Ce,Pe),H=(Ce,Pe)=>O((Fe,Lt)=>Fe+Lt,Ce,Pe),j=Ce=>Fa(Ce.element).fold(A.none,Pe=>(bi(Pe),A.some(!0))),Q=Ce=>ea(Ce.element)?(Vi(Ce.element).each(Pe=>bi(Pe)),A.some(!0)):A.none(),te=(Ce,Pe,Fe,Lt)=>{const bt=pn(oe),He=s.shared.providers.translate(Fe),Zt=Kt("altExecuting"),Pt=E0(t,"NodeChange SwitchMode DisabledStateChange",Do=>{rn.set(Do.getComponent(),!t.selection.isEditable()||lE(t))}),en=Do=>{rn.isDisabled(Do)||Ce(!0)};return sa.sketch({dom:{tag:"button",attributes:{"aria-label":He,"data-mce-name":Pe},classes:Lt.concat(Pe)},components:[JC(Pe,s.shared.providers.icons)],buttonBehaviours:xt([rn.config({}),Wr.config(s.shared.providers.tooltips.getConfig({tooltipText:He})),Qn(Zt,[ff({onSetup:Pt,getApi:C},bt),mh({getApi:C},bt),Ye(za(),(Do,or)=>{(or.event.raw.keyCode===SF.space()||or.event.raw.keyCode===SF.enter())&&(rn.isDisabled(Do)||Ce(!1))}),Ye(om(),en),Ye(Ec(),en)])]),eventOrder:{[za()]:[Zt,"keying"],[om()]:[Zt,"alloy.base.behaviour"],[Ec()]:[Zt,"alloy.base.behaviour"],[Bu()]:["alloy.base.behaviour",Zt,"tooltipping"],[$u()]:[Zt,"tooltipping"]}})},we=ws(te(Ce=>P(!1,Ce),"minus","Decrease font size",[])),ce=ws(te(Ce=>H(!1,Ce),"plus","Increase font size",[])),xe=ws({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[ih.sketch({inputBehaviours:xt([rn.config({}),Qn(k,[ff({onSetup:h,getApi:C},w),mh({getApi:C},w)]),Qn("input-update-display-text",[Ye(Yu,(Ce,Pe)=>{qt.setValue(Ce,Pe.event.text)}),Ye(Iw(),Ce=>{c.onAction(qt.getValue(Ce))}),Ye(jm(),Ce=>{c.onAction(qt.getValue(Ce))})]),En.config({mode:"special",onEnter:Ce=>(O(Mt,!0,!0),A.some(!0)),onEscape:j,onUp:Ce=>(H(!0,!1),A.some(!0)),onDown:Ce=>(P(!0,!1),A.some(!0)),onLeft:(Ce,Pe)=>(Pe.cut(),A.none()),onRight:(Ce,Pe)=>(Pe.cut(),A.none())})])})],behaviours:xt([zn.config({}),En.config({mode:"special",onEnter:Q,onSpace:Q,onEscape:j}),Qn("input-wrapper-events",[Ye(Mu(),Ce=>{ot([we,ce],Pe=>{const Fe=ze.fromDom(Pe.get(Ce).element.dom);ea(Fe)&&mm(Fe)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...io(i)?{"data-mce-name":i}:{}}},components:[we.asSpec(),xe.asSpec(),ce.asSpec()],behaviours:xt([zn.config({}),En.config({mode:"flow",focusInside:qa.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:Ce=>ea(Ce.element)?A.none():(bi(Ce.element),A.some(!0))})])}},gW="Font sizes",VD=Z("Font size {0}"),xF="12pt",hW={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},UD={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},pW=(t,s)=>{const c=Math.pow(10,s);return Math.round(t*c)/c},bW=(t,s)=>/[0-9.]+px$/.test(t)?pW(parseInt(t,10)*72/96,s||0)+"pt":Ct(UD,t).getOr(t),vW=t=>Ct(hW,t).getOr(""),EF=t=>{const s=()=>{let w=A.none();const k=C.data,O=t.queryCommandValue("FontSize");if(O)for(let P=3;w.isNone()&&P>=0;P--){const H=bW(O,P),j=vW(H);w=We(k,Q=>Q.format===O||Q.format===H||Q.format===j)}return{matchOpt:w,size:O}},c=w=>k=>k.exists(O=>O.format===w),i=()=>{const{matchOpt:w}=s();return w},d=Z(A.none),g=w=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,w.format)})},h=w=>{const{matchOpt:k,size:O}=s(),P=k.fold(Z(O),H=>H.title);kn(w,Yu,{text:P}),UL(t,{value:P})},C=BD(t,"font_size_formats",Kv.Space);return{tooltip:qv(t,VD(),xF),text:A.some(xF),icon:A.none(),isSelectedFor:c,getPreviewFor:d,getCurrentValue:i,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:eo}},yW=(t,s)=>xw(t,s,EF(t),VD,"FontSizeTextUpdate","fontsize"),CW=t=>{var s;const c={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:c},TF=16,kF=t=>t>=0,_F=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:i=>kn(i,Yu,{text:s()}),onAction:(i,d)=>t.execCommand("FontSize",!1,i,{skip_focus:!d}),getNewValue:(i,d)=>{l4(i,["unsupportedLength","empty"]);const g=s(),h=l4(i,["unsupportedLength","empty"]).or(l4(g,["unsupportedLength","empty"])),C=h.map(H=>H.value).getOr(TF),w=xM(t),k=h.map(H=>H.unit).filter(H=>H!=="").getOr(w),O=d(C,CW(k).step),P=`${kF(O)?O:C}${k}`;return P!==g&&WL(t,{value:P}),P}}},wW=(t,s)=>fW(t,s,_F(t),"fontsizeinput"),AF=(t,s)=>{const c=Wp(s,EF(t));t.ui.registry.addNestedMenuItem("fontsize",{text:gW,onSetup:wi(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},SW="Formats",OF=t=>re(t)?"Formats":"Format {0}",DF=(t,s)=>{const c="Formats",i=h=>()=>t.formatter.match(h),d=h=>()=>{const C=t.formatter.get(h);return C!==void 0?A.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(h))}):A.none()},g=h=>{const C=P=>t$(P)?fe(P.items,C):n$(P)?[{title:P.title,format:P.format}]:[],w=fe(r$(t),C),O=pF(t,Z(w)).fold(Z({title:c,tooltipLabel:""}),P=>({title:P.title,tooltipLabel:P.title}));kn(h,Yu,{text:O.title}),zL(t,{value:O.tooltipLabel})};return{tooltip:qv(t,OF(""),""),text:A.some(c),icon:A.none(),isSelectedFor:i,getCurrentValue:A.none,getPreviewFor:d,onAction:u6(t),updateText:g,shouldHide:pM(t),isInvalid:h=>!t.formatter.canApply(h.format),dataset:s}},RF=(t,s)=>{const c={type:"advanced",...s.styles};return xw(t,s,DF(t,c),OF,"StylesTextUpdate","styles")},xW=(t,s)=>{const c={type:"advanced",...s.styles},i=Wp(s,DF(t,c));t.ui.registry.addNestedMenuItem("styles",{text:SW,onSetup:wi(t),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},MF=Z([nt("toggleClass"),nt("fetch"),Wl("onExecute"),Ee("getHotspot",A.some),Ee("getAnchorOverrides",Z({})),Xf(),Wl("onItemExecute"),ms("lazySink"),nt("dom"),rs("onOpen"),ga("splitDropdownBehaviours",[pc,En,zn]),Ee("matchWidth",!1),Ee("useMinWidth",!1),Ee("eventOrder",{}),ms("role"),ms("listRole")].concat(Pv())),EW=ja({factory:sa,schema:[nt("dom")],name:"arrow",defaults:()=>({buttonBehaviours:xt([zn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(Ni)},buttonBehaviours:xt([Ao.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),TW=ja({factory:sa,schema:[nt("dom")],name:"button",defaults:()=>({buttonBehaviours:xt([zn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(c=>{t.onExecute(c,s)})}})}),kW=Z([EW,TW,Xi({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[nt("text")],name:"aria-descriptor"}),gu({schema:[k1()],name:"menu",defaults:t=>({onExecute:(s,c)=>{s.getSystem().getByUid(t.uid).each(i=>{t.onItemExecute(i,s,c)})}})}),AA()]),_W=(t,s,c,i)=>{const d=O=>{Qo.getCurrent(O).each(P=>{K.highlightFirst(P),En.focusIn(P)})},g=O=>{OA(t,Mt,O,i,d,ha.HighlightMenuAndItem).get(oe)},h=O=>(g(O),A.some(!0)),C=O=>{const P=xd(O,t,"button");return Ni(P),A.some(!0)},w={...ir([Gs((O,P)=>{tr(O,t,"aria-descriptor").each(j=>{const Q=Kt("aria");Xe(j.element,"id",Q),Xe(O.element,"aria-describedby",Q)})})]),...yv(A.some(g))},k={repositionMenus:O=>{Ao.isOn(O)&&I6(O)}};return{uid:t.uid,dom:t.dom,components:s,apis:k,eventOrder:{...t.eventOrder,[ti()]:["disabling","toggling","alloy.base.behaviour"]},events:w,behaviours:hc(t.splitDropdownBehaviours,[pc.config({others:{sandbox:O=>{const P=xd(O,t,"arrow");return Nv(t,O,{onOpen:()=>{Ao.on(P),Ao.on(O)},onClose:()=>{Ao.off(P),Ao.off(O)}})}}}),En.config({mode:"special",onSpace:C,onEnter:C,onDown:h}),zn.config({}),Ao.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},u4=si({name:"SplitDropdown",configFields:MF(),partFields:kW(),factory:_W,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),NF=t=>({isEnabled:()=>!rn.isDisabled(t),setEnabled:s=>rn.set(t,!s),setText:s=>kn(t,Yu,{text:s}),setIcon:s=>kn(t,R0,{icon:s})}),AW=t=>({setActive:s=>{Ao.set(t,s)},isActive:()=>Ao.isOn(t),isEnabled:()=>!rn.isDisabled(t),setEnabled:s=>rn.set(t,!s),setText:s=>kn(t,Yu,{text:s}),setIcon:s=>kn(t,R0,{icon:s})}),WD=(t,s)=>t.map(c=>({"aria-label":s.translate(c)})).getOr({}),PF=Kt("focus-button"),ZD=(t,s,c,i,d,g,h)=>{const C=s.map(k=>ws(kT(k,"tox-tbtn",d))),w=t.map(k=>ws(Vp(k,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...WD(c,d),...io(h)?{"data-mce-name":h}:{}}},components:Ov([w.map(k=>k.asSpec()),C.map(k=>k.asSpec())]),eventOrder:{[Mi()]:["focusing","alloy.base.behaviour",km],[Bu()]:[km,"toolbar-group-button-events"],[$u()]:[km,"toolbar-group-button-events","tooltipping"]},buttonBehaviours:xt([Od.toolbarButton(()=>d.checkUiComponentContext(g).shouldDisable),_c(()=>d.checkUiComponentContext(g)),Qn(km,[Gs((k,O)=>TO(k)),Ye(Yu,(k,O)=>{C.bind(P=>P.getOpt(k)).each(P=>{Kn.set(P,[Ar(d.translate(O.event.text))])})}),Ye(R0,(k,O)=>{w.bind(P=>P.getOpt(k)).each(P=>{Kn.set(P,[Vp(O.event.icon,d.icons)])})}),Ye(Mi(),(k,O)=>{O.event.prevent(),Io(k,PF)})])].concat(i.getOr([])))}},OW=(t,s,c,i,d)=>{const g=s.shared,h=pn(oe),C={toolbarButtonBehaviours:[],getApi:NF,onSetup:t.onSetup},w=[Qn("toolbar-group-button-events",[ff(C,h),mh(C,h)]),...t.tooltip.map(k=>Wr.config(s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(k)}))).toArray()];return Up.sketch({lazySink:g.getSink,fetch:()=>Si.nu(k=>{k(Re(c(t.items),o4))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:ZD(t.icon,t.text,t.tooltip,A.some(w),g.providers,t.context,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},BF=(t,s,c,i)=>{var d;const g=pn(oe),h=ZD(t.icon,t.text,t.tooltip,A.none(),c,t.context,i);return sa.sketch({dom:h.dom,components:h.components,eventOrder:TT,buttonBehaviours:{...xt([Qn("toolbar-button-events",[lz({onAction:t.onAction,getApi:s.getApi}),ff(s,g),mh(s,g)]),...t.tooltip.map(C=>Wr.config(c.tooltips.getConfig({tooltipText:c.translate(C)+t.shortcut.map(w=>` (${tA(w)})`).getOr("")}))).toArray(),Od.toolbarButton(()=>!t.enabled||c.checkUiComponentContext(t.context).shouldDisable),_c(()=>c.checkUiComponentContext(t.context))].concat(s.toolbarButtonBehaviours)),[km]:(d=h.buttonBehaviours)===null||d===void 0?void 0:d[km]}})},DW=(t,s,c)=>$F(t,s,[],c),$F=(t,s,c,i)=>BF(t,{toolbarButtonBehaviours:c.length>0?[Qn("toolbarButtonWith",c)]:[],getApi:NF,onSetup:t.onSetup},s,i),RW=(t,s,c)=>jD(t,s,[],c),jD=(t,s,c,i)=>BF(t,{toolbarButtonBehaviours:[Kn.config({}),Ao.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(c.length>0?[Qn("toolbarToggleButtonWith",c)]:[]),getApi:AW,onSetup:t.onSetup},s,i),MW=(t,s,c)=>i=>Si.nu(d=>s.fetch(d)).map(d=>A.from(DA(rr(EA(Kt("menu-value"),d,g=>{s.onItemAction(t(i),g)},s.columns,s.presets,kd.CLOSE_ON_EXECUTE,s.select.getOr(eo),c),{movement:XE(s.columns,s.presets),menuBehaviours:_v.unnamedEvents(s.columns!=="auto"?[]:[Gs((g,h)=>{X_(g,4,P_(s.presets)).each(({numRows:C,numColumns:w})=>{En.setGridSize(g,C,w)})})])})))),NW=(t,s,c)=>{const i=pn(t.tooltip.getOr("")),d=C=>({isEnabled:()=>!rn.isDisabled(C),setEnabled:w=>rn.set(C,!w),setIconFill:(w,k)=>{Cs(C.element,`svg path[class="${w}"], rect[class="${w}"]`).each(O=>{Xe(O,"fill",k)})},setActive:w=>{Xe(C.element,"aria-pressed",w),Cs(C.element,"span").each(k=>{C.getSystem().getByDom(k).each(O=>Ao.set(O,w))})},isActive:()=>Cs(C.element,"span").exists(w=>C.getSystem().getByDom(w).exists(Ao.isOn)),setText:w=>Cs(C.element,"span").each(k=>C.getSystem().getByDom(k).each(O=>kn(O,Yu,{text:w}))),setIcon:w=>Cs(C.element,"span").each(k=>C.getSystem().getByDom(k).each(O=>kn(O,R0,{icon:w}))),setTooltip:w=>{const k=s.providers.translate(w);Xe(C.element,"aria-label",k),i.set(w)}}),g=pn(oe),h={getApi:d,onSetup:t.onSetup};return u4.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...WD(t.tooltip,s.providers),...io(c)?{"data-mce-name":c}:{}}},onExecute:C=>{const w=d(C);w.isEnabled()&&t.onAction(w)},onItemExecute:(C,w,k)=>{},splitDropdownBehaviours:xt([Qn("split-dropdown-events",[Gs((C,w)=>TO(C)),Ye(PF,zn.focus),ff(h,g),mh(h,g)]),Od.splitButton(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),_c(()=>s.providers.checkUiComponentContext(t.context)),Tl.config({}),...t.tooltip.map(C=>Wr.config({...s.providers.tooltips.getConfig({tooltipText:s.providers.translate(C),onShow:w=>{if(i.get()!==C){const k=s.providers.translate(i.get());Wr.setComponents(w,s.providers.tooltips.getComponents({tooltipText:k}))}}})})).toArray()]),eventOrder:{[Bu()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[$u()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:MW(d,t,s.providers),parts:{menu:BE(!1,t.columns,t.presets)},components:[u4.parts.button(ZD(t.icon,t.text,A.none(),A.some([Ao.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),Od.toolbarButton(eo),_c(Z({contextType:"any",shouldDisable:!1}))]),s.providers,t.context)),u4.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:A_("chevron-down",s.providers.icons)},buttonBehaviours:xt([Od.splitButton(eo),_c(Z({contextType:"any",shouldDisable:!1}))])}),u4.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},FF=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],Ew=(t,s)=>(c,i,d,g)=>{const h=t(c).mapError(C=>au(C)).getOrDie();return s(h,i,d,g)},IF={button:Ew(ON,(t,s,c,i)=>DW(t,s.shared.providers,i)),togglebutton:Ew(DN,(t,s,c,i)=>RW(t,s.shared.providers,i)),menubutton:Ew(vD,(t,s,c,i)=>BT(t,"tox-tbtn",s,A.none(),!1,i)),splitbutton:Ew(k$,(t,s,c,i)=>NW(t,s.shared,i)),grouptoolbarbutton:Ew(E$,(t,s,c,i)=>{const d=c.ui.registry.getAll().buttons,g=C=>d4(c,{buttons:d,toolbar:C,allowToolbarGroups:!1},s,A.none()),h={[Lb]:s.shared.header.isPositionedAtTop()?fm.TopToBottom:fm.BottomToTop};switch(Sv(c)){case ju.floating:return OW(t,s,g,h,i);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},LF=(t,s,c,i)=>Ct(IF,t.type).fold(()=>(console.error("skipping button defined by",t),A.none()),d=>A.some(d(t,s,c,i))),HF={styles:RF,fontsize:yW,fontsizeinput:wW,fontfamily:CF,blocks:cW,align:sW},PW=t=>{const s=Re(FF,c=>{const i=to(c.items,d=>uo(t,d)||uo(HF,d));return{name:c.name,items:i}});return to(s,c=>c.items.length>0)},BW=t=>{const s=t.split("|");return Re(s,c=>({items:c.trim().split(" ")}))},Yv=t=>Ze(t,s=>(uo(s,"name")||uo(s,"label"))&&uo(s,"items")),$W=t=>{const s=t.toolbar,c=t.buttons;return s===!1?[]:s===void 0||s===!0?PW(c):je(s)?BW(s):Yv(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},FW=(t,s,c,i,d,g)=>Ct(s,c.toLowerCase()).orThunk(()=>g.bind(h=>ps(h,C=>Ct(s,C+c.toLowerCase())))).fold(()=>Ct(HF,c.toLowerCase()).map(h=>h(t,d)),h=>h.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${c}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),A.none()):LF(h,d,t,c.toLowerCase())),d4=(t,s,c,i)=>{const d=$W(s),g=Re(d,h=>{const C=fe(h.items,w=>w.trim().length===0?[]:FW(t,s.buttons,w,s.allowToolbarGroups,c,i).toArray());return{title:A.from(t.translate(h.name)),label:Cn(h.label!==void 0,t.translate(h.label)),items:C}});return to(g,h=>h.items.length>0)},zF=(t,s,c,i)=>{const d=s.mainUi.outerContainer,g=c.toolbar,h=c.buttons;if(Ze(g,je)){const C=g.map(w=>{const k={toolbar:w,buttons:h,allowToolbarGroups:c.allowToolbarGroups};return d4(t,k,i,A.none())});br.setToolbars(d,C)}else br.setToolbar(d,d4(t,c,i,A.none()))},VF=Mr(),IW=VF.os.isiOS()&&VF.os.version.major<=12,LW=(t,s)=>{const{uiMotherships:c}=s,i=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,h=pn(Zs(d.innerWidth,d.innerHeight)),C=pn(Zs(g.offsetWidth,g.offsetHeight)),w=()=>{const H=h.get();(H.left!==d.innerWidth||H.top!==d.innerHeight)&&(h.set(Zs(d.innerWidth,d.innerHeight)),dA(t))},k=()=>{const H=t.getDoc().documentElement,j=C.get();(j.left!==H.offsetWidth||j.top!==H.offsetHeight)&&(C.set(Zs(H.offsetWidth,H.offsetHeight)),dA(t))},O=H=>{mA(t,H)};i.bind(d,"resize",w),i.bind(d,"scroll",O);const P=Bb(ze.fromDom(t.getBody()),"load",k);t.on("hide",()=>{ot(c,H=>{Nt(H.element,"display","none")})}),t.on("show",()=>{ot(c,H=>{xo(H.element,"display")})}),t.on("NodeChange",k),t.on("remove",()=>{P.unbind(),i.unbind(d,"resize",w),i.unbind(d,"scroll",O),d=null})},HW=(t,s,c)=>{ah(t)&&Ma(c.mainUi.mothership.element,c.popupUi.mothership),Za(s,c.dialogUi.mothership)};var zW=Object.freeze({__proto__:null,render:(t,s,c,i,d)=>{const{mainUi:g,uiMotherships:h}=s,C=pn(0),w=g.outerContainer;tW(t);const k=ze.fromDom(d.targetNode),O=Dr(Or(k));Ma(k,g.mothership),HW(t,O,s),t.on("PostRender",()=>{br.setSidebar(w,c.sidebar,OM(t))}),t.on("SkinLoaded",()=>{zF(t,s,c,i),C.set(t.getWin().innerWidth),br.setMenubar(w,rF(t,c)),br.setViews(w,c.views),LW(t,s)});const P=br.getSocket(w).getOrDie("Could not find expected socket element");if(IW){es(P.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const te=xT(()=>{t.dispatch("ScrollContent")},20),we=$i(P.element,"scroll",te.throttle);t.on("remove",we.unbind)}eA(t,s),t.addCommand("ToggleSidebar",(te,we)=>{br.toggleSidebar(w,we),GL(t)}),t.addQueryValueHandler("ToggleSidebar",()=>{var te;return(te=br.whichSidebar(w))!==null&&te!==void 0?te:""}),t.addCommand("ToggleView",(te,we)=>{if(br.toggleView(w,we)){const ce=w.element;g.mothership.broadcastOn([ng()],{target:ce}),ot(h,xe=>{xe.broadcastOn([ng()],{target:ce})}),jo(br.whichView(w))&&(t.focus(),t.nodeChanged(),br.refreshToolbar(w)),qL(t)}}),t.addQueryValueHandler("ToggleView",()=>{var te;return(te=br.whichView(w))!==null&&te!==void 0?te:""});const H=Sv(t),j=()=>{br.refreshToolbar(s.mainUi.outerContainer)};(H===ju.sliding||H===ju.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const te=t.getWin().innerWidth;te!==C.get()&&(j(),C.set(te))});const Q={setEnabled:te=>{Av(s,te?"setEnabled":"setDisabled")},isEnabled:()=>!rn.isDisabled(w)};return{iframeContainer:P.element.dom,editorContainer:w.element.dom,api:Q}}});const WF=t=>/^[0-9\.]+(|px)$/i.test(""+t)?A.some(parseInt(""+t,10)):A.none(),m4=t=>jn(t)?t+"px":t,Tw=(t,s,c)=>{const i=s.filter(g=>t<g),d=c.filter(g=>t>g);return i.or(d).getOr(t)},VW=t=>{const s=Kk(t),c=Xk(t),i=wv(t);return WF(s).map(d=>Tw(d,c,i))},UW=t=>VW(t).getOr(Kk(t)),ZF=t=>{const s=Yk(t),c=tC(t),i=Np(t);return WF(s).map(d=>Tw(d,c,i))},WW=t=>ZF(t).getOr(Yk(t)),{ToolbarLocation:GD,ToolbarMode:jF}=O7,GF=40,ZW=(t,s,c,i,d)=>{const{mainUi:g,uiMotherships:h}=c,C=Q2.DOM,w=Cm(t),k=Pp(t),O=Np(t).or(ZF(t)),P=i.shared.header,H=P.isPositionedAtTop,j=150,Q=Sv(t),te=Q===jF.sliding||Q===jF.floating,we=pn(!1),ce=()=>we.get()&&!t.removed,xe=vn=>te?vn.fold(Z(0),vt=>vt.components().length>1?Pr(vt.components()[1].element):0):0,Ce=vn=>{switch(dE(t)){case GD.auto:const vt=br.getToolbar(g.outerContainer),Wt=xe(vt),Zn=Pr(vn.element)-Wt,yo=cc(s);if(yo.y>Zn)return"top";{const co=$a(s),Ys=Math.max(co.dom.scrollHeight,Pr(co));return yo.bottom<Ys-Zn||xc().bottom<yo.bottom-Zn?"bottom":"top"}case GD.bottom:return"bottom";case GD.top:default:return"top"}},Pe=vn=>{d.on(vt=>{xr.setModes(vt,[vn]),P.setDockingMode(vn);const Wt=H()?fm.TopToBottom:fm.BottomToTop;Xe(vt.element,Lb,Wt)})},Fe=()=>{d.on(vn=>{const vt=O.getOrThunk(()=>Pl().width-ua(s).left-10);Nt(vn.element,"max-width",vt+"px")})},Lt=(vn,vt)=>{d.on(Wt=>{const Zn=br.getToolbar(g.outerContainer),yo=xe(Zn),Nn=cc(s),co=bt(t,g.outerContainer.element),Ys=()=>co.fold(()=>Nn.x,Ti=>{const od=cc(Ti);return Bo(Ti,ye())?Nn.x:Nn.x-od.x}),Ws=()=>co.fold(()=>H()?Math.max(Nn.y-Pr(Wt.element)+yo,0):Nn.bottom,Ti=>{var od;const sd=cc(Ti),Rm=(od=Ti.dom.scrollTop)!==null&&od!==void 0?od:0,bg=Bo(Ti,ye())?Math.max(Nn.y-Pr(Wt.element)+yo,0):Nn.y-sd.y+Rm-Pr(Wt.element)+yo;return H()?bg:Nn.bottom}),tu=Ys(),Gr=Cn(vn,Math.ceil(g.outerContainer.element.dom.getBoundingClientRect().width)).filter(Ti=>Ti>j).map(Ti=>{const od=vt.getOr(Ea()),sd=window.innerWidth-(tu-od.left),Rm=Math.max(Math.min(Ti,sd),j);return sd<Ti&&Nt(g.outerContainer.element,"width",Rm+"px"),{width:Rm+"px"}}).getOr({width:"max-content"}),nd={position:"absolute",left:Math.round(tu)+"px",top:Ws()+"px"};es(g.outerContainer.element,{...nd,...Gr})})},bt=(vn,vt)=>ah(vn)?Va(vt):A.none(),He=()=>{ot(h,vn=>{vn.broadcastOn([of()],{})})},Zt=()=>!w&&(wc(g.outerContainer.element).left+ke(g.outerContainer.element)>=window.innerWidth-GF||Es(g.outerContainer.element,"width").isSome())?(Nt(g.outerContainer.element,"position","absolute"),Nt(g.outerContainer.element,"left","0px"),xo(g.outerContainer.element,"width"),!0):!1,Pt=vn=>{if(!ce())return;w||Fe();const vt=Ea(),Wt=w?!1:Zt();if(te&&br.refreshToolbar(g.outerContainer),!w){const Zn=Ea(),yo=Cn(vt.left!==Zn.left,vt);Lt(Wt,yo),yo.each(Nn=>{dd(Nn.left,Zn.top)})}k&&d.on(vn),He()},en=()=>w||!k||!ce()?!1:d.get().exists(vn=>{const vt=P.getDockingMode(),Wt=Ce(vn);return Wt!==vt?(Pe(Wt),!0):!1});return{isVisible:ce,isPositionedAtTop:H,show:()=>{we.set(!0),Nt(g.outerContainer.element,"display","flex"),C.addClass(t.getBody(),"mce-edit-focus"),ot(h,vn=>{xo(vn.element,"display")}),en(),ah(t)?Pt(vn=>xr.isDocked(vn)?xr.reset(vn):xr.refresh(vn)):Pt(xr.refresh)},hide:()=>{we.set(!1),Nt(g.outerContainer.element,"display","none"),C.removeClass(t.getBody(),"mce-edit-focus"),ot(h,vn=>{Nt(vn.element,"display","none")})},update:Pt,updateMode:()=>{en()&&Pt(xr.reset)},repositionPopups:He}},qF=(t,s)=>{const c=cc(t);return{pos:s?c.y:c.bottom,bounds:c}},jW=(t,s,c,i)=>{const d=pn(qF(s,c.isPositionedAtTop())),g=k=>{const{pos:O,bounds:P}=qF(s,c.isPositionedAtTop()),{pos:H,bounds:j}=d.get(),Q=P.height!==j.height||P.width!==j.width;d.set({pos:O,bounds:P}),Q&&dA(t,k),c.isVisible()&&(H!==O?c.update(xr.reset):Q&&(c.updateMode(),c.repositionPopups()))};i||(t.on("activate",c.show),t.on("deactivate",c.hide)),t.on("SkinLoaded ResizeWindow",()=>c.update(xr.reset)),t.on("NodeChange keydown",k=>{requestAnimationFrame(()=>g(k))});let h=0;const C=bO(()=>c.update(xr.refresh),33);t.on("ScrollWindow",()=>{const k=Ea().left;k!==h&&(h=k,C.throttle()),c.updateMode()}),ah(t)&&t.on("ElementScroll",k=>{c.update(xr.refresh)});const w=di();w.set(Bb(ze.fromDom(t.getBody()),"load",k=>g(k.raw))),t.on("remove",()=>{w.clear()})};var KF=Object.freeze({__proto__:null,render:(t,s,c,i,d)=>{const{mainUi:g}=s,h=ys(),C=ze.fromDom(d.targetNode),w=ZW(t,C,s,i,h),k=CM(t);uF(t);const O=()=>{if(h.isSet()){w.show();return}h.set(br.getHeader(g.outerContainer).getOrDie());const H=l_(t);ah(t)?(Ma(C,g.mothership),Ma(C,s.popupUi.mothership)):Za(H,g.mothership),Za(H,s.dialogUi.mothership);const j=()=>{zF(t,s,c,i),br.setMenubar(g.outerContainer,rF(t,c)),w.show(),jW(t,C,w,k),t.nodeChanged()};k?t.once("SkinLoaded",j):j()};t.on("show",O),t.on("hide",w.hide),k||(t.on("focus",O),t.on("blur",w.hide)),t.on("init",()=>{(t.hasFocus()||k)&&O()}),eA(t,s);const P={show:O,hide:w.hide,setEnabled:H=>{Av(s,H?"setEnabled":"setDisabled")},isEnabled:()=>!rn.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:P}}});const GW=()=>{const t=ys(),s=ys(),c=ys();return{dialogUi:t,popupUi:s,mainUi:c,getUiMotherships:()=>{const g=t.get().map(C=>C.mothership),h=s.get().map(C=>C.mothership);return g.fold(()=>h.toArray(),C=>h.fold(()=>[C],w=>Bo(C.element,w.element)?[C]:[C,w]))},lazyGetInOuterOrDie:(g,h)=>()=>c.get().bind(C=>h(C.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},f4="contexttoolbar-show",kw="contexttoolbar-hide",YF=".tox-toolbar-slider__input,.tox-toolbar-textfield",qD=t=>{Ir.getContent(t).each(s=>{Cs(s.element,YF).fold(()=>En.focusIn(s),bi)})},qW=t=>vi(t.element).each(s=>{um(s,'[tabindex="-1"]').each(c=>{bi(c)})}),XF=Kt("forward-slide"),KD=Kt("backward-slide"),YD=Kt("change-slide-event"),Xv="tox-pop--resizing",JF=t=>{const s=pn([]);return Ir.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:c=>{s.set([]),Ir.getContent(c).each(i=>{xo(i.element,"visibility")}),ic(c.element,Xv),xo(c.element,"width")},onHide:()=>{t.onHide()},inlineBehaviours:xt([Qn("context-toolbar-events",[cm(Hh(),(c,i)=>{i.event.raw.propertyName==="width"&&(ic(c.element,Xv),xo(c.element,"width"))}),Ye(YD,(c,i)=>{const d=c.element;xo(d,"width");const g=ee(d);xo(d,"left"),xo(d,"right"),xo(d,"max-width"),Ir.setContent(c,i.event.contents),Jr(d,Xv);const h=ee(d);Nt(d,"transition","none"),Ir.reposition(c),xo(d,"transition"),Nt(d,"width",g+"px"),i.event.focus.fold(()=>qD(c),C=>{bi(C),vi(d).isNone()&&qD(c)}),setTimeout(()=>{Nt(c.element,"width",h+"px")},0)}),Ye(XF,(c,i)=>{Ir.getContent(c).each(d=>{s.set(s.get().concat([{bar:d,focus:mu(Or(c.element))}]))}),kn(c,YD,{contents:i.event.forwardContents,focus:A.none()})}),Ye(KD,(c,i)=>{t.onBack(),Oc(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),kn(c,YD,{contents:Cl(d.bar),focus:d.focus})})})]),En.config({mode:"special",onEscape:c=>Oc(s.get()).fold(()=>t.onEscape(),i=>(Io(c,KD),A.some(!0)))})]),lazySink:()=>ro.value(t.sink)})},I0=(t,s,c)=>({setInputEnabled:i=>{!i&&c&&bi(c),rn.set(t,!i)},isInputEnabled:()=>!rn.isDisabled(t),hide:()=>{Io(t,rm())},back:()=>{Io(t,KD)},getValue:()=>s.get().getOrThunk(()=>qt.getValue(t)),setValue:i=>{t.getSystem().isConnected()?qt.setValue(t,i):s.set(i)}}),XD=(t,s,c)=>Ye(lB,(i,d)=>{const g=t.get(i),h=I0(g,c,i.element);s.onAction(h,d.event.buttonApi)}),QF=(t,s,c,i)=>{const{primary:d,...g}=s.original,h=wt(ON({...g,type:"button",onAction:oe}));return $F(h,c,[XD(t,s,i)])},KW=(t,s,c,i)=>{const{primary:d,...g}=s.original,h=wt(DN({...g,type:"togglebutton",onAction:oe}));return jD(h,c,[XD(t,s,i)])},e8=t=>t.type==="contextformtogglebutton",YW=(t,s,c,i)=>e8(s)?KW(t,s,c,i):QF(t,s,c,i),t8=(t,s,c,i)=>{const d=Re(s,C=>ws(YW(t,C,c,i)));return{asSpecs:()=>Re(d,C=>C.asSpec()),findPrimary:C=>ps(s,(w,k)=>w.primary?A.from(d[k]).bind(O=>O.getOpt(C)).filter(De(rn.isDisabled)):A.none())}},XW=(t,s,c,i)=>{const{width:d,height:g}=t.initValue();let h=DT;const C=Kt("ratio-event"),w=bt=>I0(bt,i),k=bt=>Gu(bt,{tag:"span",classes:["tox-icon","tox-lock-icon__"+bt]},s.icons),O=()=>!1,P=t.label.getOr("Constrain proportions"),H=s.translate(P),j=bc.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":H,"data-mce-name":P}},components:[k("lock"),k("unlock")],buttonBehaviours:xt([rn.config({disabled:O}),lr.config({}),Wr.config(s.tooltips.getConfig({tooltipText:H}))])}),Q=bt=>({dom:{tag:"div",classes:["tox-context-form__group"]},components:bt}),te=bt=>um(bt.element,"div.tox-focusable-wrapper").fold(A.none,Zt=>(bi(Zt),A.some(!0))),we=bt=>Vo.parts.field({factory:ih,inputClasses:["tox-textfield","tox-toolbar-textfield","tox-textfield-size"],data:bt?d:g,inputBehaviours:xt([rn.config({disabled:O}),lr.config({}),Qn("size-input-toolbar-events",[Ye(Nu(),(He,Zt)=>{kn(He,C,{isField1:bt})})]),En.config({mode:"special",onEnter:c,onEscape:te})]),selectOnFocus:!1}),ce=bt=>({dom:{tag:"label",classes:["tox-label"]},components:[Ar(s.translate(bt))]}),xe=bt=>({dom:{tag:"div",classes:["tox-focusable-wrapper","tox-toolbar-nav-item"]},components:[bt],behaviours:xt([lr.config({}),zn.config({}),En.config({mode:"special",onEnter:He=>Cs(He.element,"input").fold(A.none,Pt=>(bi(Pt),A.some(!0)))})])}),Ce=xe(bc.parts.field1(Q([Vo.parts.label(ce("Width:")),we(!0)]))),Pe=xe(bc.parts.field2(Q([Vo.parts.label(ce("Height:")),we(!1)]))),Fe=pn(oe),Lt=[ff({onSetup:t.onSetup,getApi:w},Fe),qu({getApi:w},Fe,i)];return bc.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[Ce,Pe,Q([ce(lp),j])],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(bt,He,Zt)=>{OT(qt.getValue(bt)).each(Pt=>{h(Pt).each(en=>{qt.setValue(He,yB(en))})})},onInput:bt=>Io(bt,eP),coupledFieldBehaviours:xt([zn.config({}),En.config({mode:"flow",focusInside:qa.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-focusable-wrapper"}),rn.config({disabled:O,onDisabled:bt=>{bc.getField1(bt).bind(Vo.getField).each(rn.disable),bc.getField2(bt).bind(Vo.getField).each(rn.disable),bc.getLock(bt).each(rn.disable)},onEnabled:bt=>{bc.getField1(bt).bind(Vo.getField).each(rn.enable),bc.getField2(bt).bind(Vo.getField).each(rn.enable),bc.getLock(bt).each(rn.enable)}}),_c(()=>s.checkUiComponentContext("mode:design")),Qn("size-input-toolbar-events2",[Ye(C,(bt,He)=>{const Zt=He.event.isField1,Pt=Zt?bc.getField1(bt):bc.getField2(bt),en=Zt?bc.getField2(bt):bc.getField1(bt),Do=Pt.map(qt.getValue).getOr(""),or=en.map(qt.getValue).getOr("");h=MO(Do,or)}),Ye(eP,bt=>t.onInput(w(bt))),...Lt])])})},n8=(t,s,c)=>Vo.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[...t.toArray(),s],fieldBehaviours:xt([rn.config({disabled:()=>c.checkUiComponentContext("mode:design").shouldDisable,onDisabled:i=>{qW(i),Vo.getField(i).each(rn.disable)},onEnabled:i=>{Vo.getField(i).each(rn.enable)}})])}),JW=(t,s,c,i)=>{const d=pn(oe),g=w=>I0(w,i),h=t.label.map(w=>Vo.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Ar(s.translate(w))]})),C=Vo.parts.field({factory:ih,type:"range",inputClasses:["tox-toolbar-slider__input","tox-toolbar-nav-item"],inputAttributes:{min:String(t.min()),max:String(t.max())},data:t.initValue().toString(),fromInputValue:w=>Ne(w).getOr(t.min()),toInputValue:w=>String(w),inputBehaviours:xt([rn.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),_c(()=>s.checkUiComponentContext("mode:design")),En.config({mode:"special",onEnter:c,onLeft:(w,k)=>(k.cut(),A.none()),onRight:(w,k)=>(k.cut(),A.none())}),Qn("slider-events",[ff({onSetup:t.onSetup,getApi:g,onBeforeSetup:En.focusIn},d),qu({getApi:g},d,i),Ye(nm(),w=>{t.onInput(g(w))})])])});return n8(h,C,s)},_w=(t,s,c,i)=>{const d=pn(oe),g=O=>I0(O,i),h=t.label.map(O=>Vo.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Ar(s.translate(O))]})),w={...t.placeholder.map(O=>({placeholder:s.translate(O)})).getOr({})},k=Vo.parts.field({factory:ih,inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-item"],inputAttributes:w,data:t.initValue(),selectOnFocus:!0,inputBehaviours:xt([rn.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),_c(()=>s.checkUiComponentContext("mode:design")),En.config({mode:"special",onEnter:c,onLeft:(O,P)=>(P.cut(),A.none()),onRight:(O,P)=>(P.cut(),A.none())}),Qn("input-events",[ff({onSetup:t.onSetup,getApi:O=>um(O.element,".tox-toolbar").bind(H=>Cs(H,"button:enabled")).fold(()=>I0(O,i),H=>I0(O,i,H)),onBeforeSetup:En.focusIn},d),qu({getApi:g},d,i),Ye(nm(),O=>{t.onInput(g(O))})])])});return n8(h,k,s)},JD=(t,s,c)=>{const i=ys(),g=ws(t(c,k=>C.findPrimary(k).orThunk(()=>w.findPrimary(k)).map(O=>(Ni(O),!0)),i)),h=_s(s.commands,k=>k.align==="start"),C=t8(g,h.pass,c,i),w=t8(g,h.fail,c,i);return to([{title:A.none(),label:A.none(),items:C.asSpecs()},{title:A.none(),label:A.none(),items:[g.asSpec()]},{title:A.none(),label:A.none(),items:w.asSpecs()}],k=>k.items.length>0)},o8=(t,s)=>{switch(t.type){case"contextform":return JD(On(_w,t),t,s);case"contextsliderform":return JD(On(JW,t),t,s);case"contextsizeinputform":return JD(On(XW,t),t,s)}},s8={renderContextForm:(t,s,c)=>Cw({type:t,uid:Kt("context-toolbar"),initGroups:o8(s,c),onEscape:A.none,cyclicKeying:!0,providers:c}),buildInitGroups:o8},r8=(t,s,c)=>s.bottom-t.y>=c&&t.bottom-s.y>=c,c8=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const c=Rl(ze.fromDom(t.startContainer),t.startOffset).element;return(So(c)?oc(c):A.some(c)).filter(vo).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},QD=t=>{const s=t.selection.getRng(),c=c8(s);if(t.inline){const i=Ea();return kr(i.left+c.left,i.top+c.top,c.width,c.height)}else{const i=ui(ze.fromDom(t.getBody()));return kr(i.x+c.left,i.y+c.top,c.width,c.height)}},QW=(t,s)=>s.filter(c=>se(c)&&Xn(c)).map(ui).getOrThunk(()=>QD(t)),eZ=(t,s,c)=>{const i=Math.max(t.x+c,s.x),d=Math.min(t.right-c,s.right);return{x:i,width:d-i}},tZ=(t,s,c,i,d,g)=>{const h=ze.fromDom(t.getContainer()),C=Cs(h,".tox-editor-header").getOr(h),w=cc(C),k=w.y>=s.bottom,O=i&&!k;if(t.inline&&O)return{y:Math.max(w.bottom+g,c.y),bottom:c.bottom};if(t.inline&&!O)return{y:c.y,bottom:Math.min(w.y-g,c.bottom)};const P=d==="line"?cc(h):s;return O?{y:Math.max(w.bottom+g,c.y),bottom:Math.min(P.bottom-g,c.bottom)}:{y:Math.max(P.y+g,c.y),bottom:Math.min(w.y-g,c.bottom)}},a8=(t,s,c,i=0)=>{const d=Pl(window),g=cc(ze.fromDom(t.getContentAreaContainer())),h=pE(t)||bE(t)||oC(t),{x:C,width:w}=eZ(g,d,i);if(t.inline&&!h)return kr(C,d.y,w,d.height);{const k=s.header.isPositionedAtTop(),{y:O,bottom:P}=tZ(t,g,d,k,c,i);return kr(C,O,w,P-O)}},jp=12,eR={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},i8={maxHeightFunction:Zg(),maxWidthFunction:P$()},nZ=(t,s)=>{const c=t.selection.getRng(),i=Rl(ze.fromDom(c.startContainer),c.startOffset);return c.startContainer===c.endContainer&&c.startOffset===c.endOffset-1&&Bo(i.element,s)},l8=(t,s,c)=>{const i=Es(t,"position");Nt(t,"position",s);const d=c(t);return i.each(g=>Nt(t,"position",g)),d},g4=t=>t==="node",u8=(t,s,c,i,d)=>{const g=QD(t),h=i.lastElement().exists(C=>Bo(c,C));if(nZ(t,c))return h?KB:Ju;if(h)return l8(s,i.getMode(),()=>r8(g,cc(s),-20)&&!i.isReposition()?lV:KB);{const C=i.getMode()==="fixed"?d.y+Ea().top:d.y,w=Pr(s)+jp;return C+w<=g.y?Ju:rw}},d8=(t,s,c,i)=>{const d=w=>(k,O,P,H,j)=>{const Q=u8(t,H,w,c,j),te={...k,y:j.y,height:j.height};return{...Q(te,O,P,H,j),alwaysFit:!0}},g=w=>g4(i)?[d(w)]:[];return s?{onLtr:w=>[Uc,Tc,$c,Ra,kc,Qc].concat(g(w)),onRtl:w=>[Uc,$c,Tc,kc,Ra,Qc].concat(g(w))}:{onLtr:w=>[Qc,Uc,Ra,Tc,kc,$c].concat(g(w)),onRtl:w=>[Qc,Uc,kc,$c,Ra,Tc].concat(g(w))}},oZ=(t,s,c,i)=>s==="line"?{bubble:Fi(jp,0,eR),layouts:{onLtr:()=>[zy],onRtl:()=>[N1]},overrides:i8}:{bubble:Fi(0,jp,eR,1/jp),layouts:d8(t,c,i,s),overrides:i8},Gp=(t,s)=>{const c=to(s,g=>g.predicate(t.dom)),{pass:i,fail:d}=_s(c,g=>g.type==="contexttoolbar");return{contextToolbars:i,contextForms:d}},h4=t=>{if(t.length<=1)return t;{const s=g=>Bs(t,h=>h.position===g),c=g=>to(t,h=>h.position===g),i=s("selection"),d=s("node");if(i||d)if(d&&i){const g=c("node"),h=Re(c("selection"),C=>({...C,position:"node"}));return g.concat(h)}else return c(i?"selection":"node");else return c("line")}},p4=t=>{if(t.length<=1)return t;{const s=i=>We(t,d=>d.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>to(t,d=>d.position===i))}},tR=(t,s,c)=>{const i=Gp(t,s);if(i.contextForms.length>0)return A.some({elem:t,toolbars:[i.contextForms[0]]});{const d=Gp(t,c);if(d.contextForms.length>0)return A.some({elem:t,toolbars:[d.contextForms[0]]});if(i.contextToolbars.length>0||d.contextToolbars.length>0){const g=h4(i.contextToolbars.concat(d.contextToolbars));return A.some({elem:t,toolbars:g})}else return A.none()}},nR=(t,s,c)=>t(s)?A.none():Ri(s,i=>{if(vo(i)){const{contextToolbars:d,contextForms:g}=Gp(i,c.inNodeScope),h=g.length>0?g:p4(d);return h.length>0?A.some({elem:i,toolbars:h}):A.none()}else return A.none()},t),m8=(t,s)=>{const c=ze.fromDom(s.getBody()),i=h=>Bo(h,c),d=h=>!i(h)&&!ai(c,h),g=ze.fromDom(s.selection.getNode());return d(g)?A.none():tR(g,t.inNodeScope,t.inEditorScope).orThunk(()=>nR(i,g,t))},b4=(t,s)=>{const c={},i=[],d=[],g={},h={},C=(O,P)=>{const H=wt(pr(P));c[O]=H,H.launch.map(j=>{g["form:"+O]={...P.launch,type:j.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(H)}}}),H.scope==="editor"?d.push(H):i.push(H),h[O]=H},w=(O,P)=>{MN(P).each(H=>{P.scope==="editor"?d.push(H):i.push(H),h[O]=H})},k=os(t);return ot(k,O=>{const P=t[O];P.type==="contextform"||P.type==="contextsliderform"||P.type==="contextsizeinputform"?C(O,P):P.type==="contexttoolbar"&&w(O,P)}),{forms:c,inNodeScope:i,inEditorScope:d,lookupTable:h,formNavigators:g}},v4="tox-pop--transition",f8=(t,s,c,i)=>{const d=i.backstage,g=d.shared,h=Mr().deviceType.isTouch,C=ys(),w=ys(),k=ys(),O=oi(JF({sink:c,onEscape:()=>(t.focus(),l6(t),A.some(!0)),onHide:()=>{l6(t)},onBack:()=>{KL(t)}})),P=()=>{const Pt=k.get().getOr("node"),en=g4(Pt)?1:0;return a8(t,g,Pt,en)},H=()=>!t.removed&&!(h()&&d.isContextMenuOpen()),j=Pt=>vr(Qr(Pt,C.get(),Bo),!0),Q=()=>{if(H()){const Pt=P(),en=vr(k.get(),"node")?QW(t,C.get()):QD(t);return Pt.height<=0||!r8(en,Pt,.01)}else return!0},te=()=>{C.clear(),w.clear(),k.clear(),Ir.hide(O)},we=()=>{if(Ir.isOpen(O)){const Pt=O.element;xo(Pt,"display"),Q()?Nt(Pt,"display","none"):(w.set(0),Ir.reposition(O))}},ce=Pt=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Pt],behaviours:xt([En.config({mode:"acyclic"}),Qn("pop-dialog-wrap-events",[Gs(en=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>En.focusIn(en))}),pd(en=>{t.shortcuts.remove("ctrl+F9")})])])}),xe=wn(()=>b4(s,Pt=>{const en=Fe([Pt]);kn(O,XF,{forwardContents:ce(en)})})),Ce=(Pt,en)=>d4(t,{buttons:Pt,toolbar:en.items,allowToolbarGroups:!1},i.backstage,A.some(["form:"])),Pe=(Pt,en)=>s8.buildInitGroups(Pt,en),Fe=Pt=>{const{buttons:en}=t.ui.registry.getAll(),Do=xe(),or={...en,...Do.formNavigators},gs=Sv(t)===ju.scrolling?ju.scrolling:ju.default,vn=et(Re(Pt,vt=>vt.type==="contexttoolbar"?Ce(or,EC(vt)):Pe(vt,g.providers)));return Cw({type:gs,uid:Kt("context-toolbar"),initGroups:vn,onEscape:A.none,cyclicKeying:!0,providers:g.providers})},Lt=(Pt,en)=>{const Do=Pt==="node"?g.anchors.node(en):g.anchors.cursor(),or=oZ(t,Pt,h(),{lastElement:C.get,isReposition:()=>vr(w.get(),0),getMode:()=>Wa.getMode(c)});return rr(Do,or)},bt=(Pt,en)=>{if(Zt.cancel(),!H())return;const Do=Fe(Pt),or=Pt[0].position,gs=Lt(or,en);k.set(or),w.set(1);const vn=O.element;xo(vn,"display"),j(en)||(ic(vn,v4),Wa.reset(c,O)),Ir.showWithinBounds(O,ce(Do),{anchor:gs,transition:{classes:[v4],mode:"placement"}},()=>A.some(P())),en.fold(C.clear,C.set),Q()&&Nt(vn,"display","none")};let He=!1;const Zt=bO(()=>{if(!(!t.hasFocus()||t.removed||He))if(ni(O.element,v4))Zt.throttle();else{const Pt=xe();m8(Pt,t).fold(te,en=>{bt(en.toolbars,A.some(en.elem))})}},17);t.on("init",()=>{t.on("remove",te),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",we),t.on("click keyup focus SetContent",Zt.throttle),t.on(kw,te),t.on(f4,Pt=>{const en=xe();Ct(en.lookupTable,Pt.toolbarKey).each(Do=>{bt([Do],Cn(Pt.target!==t,Pt.target)),qD(O)})}),t.on("focusout",Pt=>{cE.setEditorTimeout(t,()=>{vi(c.element).isNone()&&vi(O.element).isNone()&&te()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&te()}),t.on("DisabledStateChange",Pt=>{Pt.state&&te()}),t.on("ExecCommand",({command:Pt})=>{Pt.toLowerCase()==="toggleview"&&te()}),t.on("AfterProgressState",Pt=>{Pt.state?te():t.hasFocus()&&Zt.throttle()}),t.on("dragstart",()=>{He=!0}),t.on("dragend drop",()=>{He=!1}),t.on("NodeChange",Pt=>{vi(O.element).fold(Zt.throttle,oe)})})},oR=t=>{ot([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],c=>{t.ui.registry.addToggleButton(c.name,{tooltip:c.text,icon:c.icon,onAction:El(t,c.cmd),onSetup:DC(t,c.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:wi(t),onAction:El(t,"JustifyNone")})},g8=(t,s)=>{const c=()=>{const i=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=ys();return Re(i,h=>({type:"togglemenuitem",text:s.display(h),onSetup:C=>{const w=O=>{O&&(g.on(P=>P.setActive(!1)),g.set(C)),C.setActive(O)};w(vr(d,s.hash(h)));const k=s.watcher(t,h,w);return()=>{g.clear(),k()}},onAction:()=>s.setCurrent(t,h)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(c()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:c,onSetup:s.onMenuSetup})},h8=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:MM,hash:s=>mW(s,["fixed","relative","empty"]).getOr(s),display:Mt,watcher:(s,c,i)=>s.formatter.formatChanged("lineheight",i,!1,{value:c}).unbind,getCurrent:s=>A.from(s.queryCommandValue("LineHeight")),setCurrent:(s,c)=>s.execCommand("LineHeight",!1,c),onToolbarSetup:wi(t),onMenuSetup:wi(t)}),sZ=t=>A.from(bM(t)).map(c=>({name:"language",text:"Language",icon:"language",getOptions:Z(c),hash:i=>Yo(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,d,g)=>{var h;return i.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(h=d.customCode)!==null&&h!==void 0?h:null}).unbind},getCurrent:i=>{const d=ze.fromDom(i.selection.getNode());return Qd(d,g=>A.some(g).filter(vo).bind(h=>Gn(h,"lang").map(w=>{const k=Gn(h,"data-mce-lang").getOrUndefined();return{code:w,customCode:k,title:""}})))},setCurrent:(i,d)=>i.execCommand("Lang",!1,d),onToolbarSetup:i=>{const d=di();return i.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",i.setActive,!0)),x0(d.clear,wi(t)(i))},onMenuSetup:wi(t)})),rZ=t=>{g8(t,h8(t)),sZ(t).each(s=>g8(t,s))},y4=(t,s)=>{rW(t,s),Zp(t,s),xW(t,s),aW(t,s),AF(t,s)},p8=t=>{t.ui.registry.addContext("editable",()=>t.selection.isEditable()),t.ui.registry.addContext("mode",s=>t.mode.get()===s),t.ui.registry.addContext("any",Bt),t.ui.registry.addContext("formatting",s=>t.formatter.canApply(s)),t.ui.registry.addContext("insert",s=>t.schema.isValidChild(t.selection.getNode().tagName,s))},cZ=t=>E0(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),aZ=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:cZ(t),onAction:El(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:wi(t),onAction:El(t,"indent")})},iZ=t=>{aZ(t)},b8=(t,s)=>c=>{c.setActive(s.get());const i=d=>{s.set(d.state),c.setActive(d.state)};return t.on("PastePlainTextToggle",i),x0(()=>t.off("PastePlainTextToggle",i),wi(t)(c))},lZ=t=>{const s=pn(AM(t)),c=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:c,onSetup:b8(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:c,onSetup:b8(t,s)})},C4=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},v8=t=>{vh.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,c)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:DC(t,s.name),onAction:C4(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const c="h"+s,i=`Access+${s}`;t.ui.registry.addToggleButton(c,{text:c.toUpperCase(),tooltip:"Heading "+s,onSetup:DC(t,c),onAction:C4(t,c),shortcut:i})}},y8=t=>{vh.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:El(t,s.action),shortcut:s.shortcut,context:s.context})}),vh.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:wi(t),onAction:El(t,s.action)})})},C8=t=>{vh.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:El(t,s.action),onSetup:DC(t,s.name)})})},uZ=t=>{v8(t),y8(t),C8(t)},w8=t=>{vh.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:El(t,s.action),context:s.context})}),vh.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:wi(t),onAction:El(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:wi(t),onAction:C4(t,"code")})},S8=t=>{uZ(t),w8(t)},w4=(t,s)=>E0(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",c=>{c.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),pq=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:w4(t,"hasUndo"),onAction:El(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:w4(t,"hasRedo"),onAction:El(t,"redo")})},dZ=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:w4(t,"hasUndo"),onAction:El(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:w4(t,"hasRedo"),onAction:El(t,"redo"),shortcut:"Meta+Y"})},mZ=t=>{pq(t),dZ(t)},fZ=t=>E0(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),gZ=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:fZ(t),onAction:El(t,"mceToggleVisualAid"),context:"any"})},hZ=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:El(t,"mceToggleVisualAid"),context:"any"})},pZ=t=>{hZ(t),gZ(t)},bZ=(t,s)=>{oR(t),S8(t),y4(t,s),mZ(t),uH(t),pZ(t),iZ(t),rZ(t),lZ(t),p8(t)},vZ=t=>je(t)?t.split(/[ ,]/):t,x8=t=>s=>s.options.get(t),yZ=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:c=>c===!1?{value:[],valid:!0}:je(c)||Ze(c,je)?{value:vZ(c),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},E8=x8("contextmenu_never_use_native"),CZ=x8("contextmenu_avoid_overlap"),wZ=t=>sR(t).length===0,sR=t=>{const s=t.ui.registry.getAll().contextMenus,c=t.options.get("contextmenu");return t.options.isSet("contextmenu")?c:to(c,i=>uo(s,i))},Aw=(t,s)=>({type:"makeshift",x:t,y:s}),SZ=(t,s,c)=>Aw(t.x+s,t.y+c),T8=t=>t.type==="longpress"||t.type.indexOf("touch")===0,xZ=t=>{if(T8(t)){const s=t.touches[0];return Aw(s.pageX,s.pageY)}else return Aw(t.pageX,t.pageY)},EZ=t=>{if(T8(t)){const s=t.touches[0];return Aw(s.clientX,s.clientY)}else return Aw(t.clientX,t.clientY)},TZ=(t,s)=>{const c=Q2.DOM.getPos(t);return SZ(s,c.x,c.y)},kZ=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?xZ(s):TZ(t.getContentAreaContainer(),EZ(s)):k8(t),k8=t=>({type:"selection",root:ze.fromDom(t.selection.getNode())}),_Z=t=>({type:"node",node:A.some(ze.fromDom(t.selection.getNode())),root:ze.fromDom(t.getBody())}),S4=(t,s,c)=>{switch(c){case"node":return _Z(t);case"point":return kZ(t,s);case"selection":return k8(t)}},AZ=(t,s,c,i,d,g)=>{const h=c(),C=S4(t,s,g);Hv(h,kd.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:A.none()}).map(w=>{s.preventDefault(),Ir.showMenuAt(d,{anchor:C},{menu:{markers:m0("normal")},data:w})})},OZ={onLtr:()=>[Uc,Tc,$c,Ra,kc,Qc,Ju,rw,ba,tD,VT,sw],onRtl:()=>[Uc,$c,Tc,kc,Ra,Qc,Ju,rw,VT,sw,ba,tD]},rR=12,_8={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},A8=(t,s)=>{const c=t.selection;if(c.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],d=c.getRng();return Qf(t.getWin(),Jf.domRange(d)).exists(h=>h.left<=i.clientX&&h.right>=i.clientX&&h.top<=i.clientY&&h.bottom>=i.clientY)}},DZ=t=>{const s=t.selection.getRng(),c=()=>{cE.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",c);const i=h=>{h.preventDefault(),h.stopImmediatePropagation()};t.on("mousedown",i,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",c),t.off("longpresscancel",d),t.off("mousedown",i)}},RZ=(t,s,c)=>{const i=S4(t,s,c);return{bubble:Fi(0,c==="point"?rR:0,_8),layouts:OZ,overrides:{maxWidthFunction:P$(),maxHeightFunction:Zg()},...i}},MZ=(t,s,c,i,d,g,h)=>{const C=RZ(t,s,g);Hv(c,kd.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:A.none()}).map(w=>{s.preventDefault();const k=h?ha.HighlightMenuAndItem:ha.HighlightNone;Ir.showMenuWithinBounds(d,{anchor:C},{menu:{markers:m0("normal"),highlightOnOpen:k},data:w,type:"horizontal"},()=>A.some(a8(t,i.shared,g==="node"?"node":"selection"))),t.dispatch(kw)})},NZ=(t,s,c,i,d,g)=>{const h=Mr(),C=h.os.isiOS(),w=h.os.isMacOS(),k=h.os.isAndroid(),O=h.deviceType.isTouch(),P=()=>!(k||C||w&&O),H=()=>{const j=c();MZ(t,s,j,i,d,g,P())};if((w||C)&&g!=="node"){const j=()=>{DZ(t),H()};A8(t,s)?j():(t.once("selectionchange",j),t.once("touchend",()=>t.off("selectionchange",j)))}else H()},O8=t=>je(t)?t==="|":t.type==="separator",Ow={type:"separator"},D8=t=>{const s=c=>({text:c.text,icon:c.icon,enabled:c.enabled,shortcut:c.shortcut});if(je(t))return t;switch(t.type){case"separator":return Ow;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const i=t.getSubmenuItems();return je(i)?i:Re(i,D8)}};default:const c=t;return{type:"menuitem",...s(c),onAction:it(c.onAction)}}},cR=(t,s)=>{if(s.length===0)return t;const i=Oc(t).filter(d=>!O8(d)).fold(()=>[],d=>[Ow]);return t.concat(i).concat(s).concat([Ow])},PZ=(t,s,c)=>{const i=No(s,(d,g)=>Ct(t,g.toLowerCase()).map(h=>{const C=h.update(c);if(je(C)&&le(Qs(C)))return cR(d,C.split(" "));if(Ko(C)&&C.length>0){const w=Re(C,D8);return cR(d,w)}else return d}).getOrThunk(()=>d.concat([g])),[]);return i.length>0&&O8(i[i.length-1])&&i.pop(),i},BZ=(t,s)=>s.ctrlKey&&!E8(t),aR=t=>t.type==="longpress"||uo(t,"touches"),R8=(t,s)=>!aR(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),iR=(t,s)=>R8(t,s)?t.selection.getStart(!0):s.target,$Z=(t,s)=>{const c=CZ(t),i=R8(t,s)?"selection":"point";if(le(c)){const d=iR(t,s);return gf(ze.fromDom(d),c)?"node":i}else return i},FZ=(t,s,c)=>{const d=Mr().deviceType.isTouch,g=oi(Ir.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>c.setContextMenuState(!0),onHide:()=>c.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:xt([Qn("dismissContextMenu",[Ye($f(),(w,k)=>{cs.close(w),t.focus()})])])})),h=()=>Ir.hide(g),C=w=>{if(E8(t)&&w.preventDefault(),BZ(t,w)||wZ(t))return;const k=$Z(t,w),O=()=>{const H=iR(t,w),j=t.ui.registry.getAll(),Q=sR(t);return PZ(j.contextMenus,Q,H)};(d()?NZ:AZ)(t,w,O,c,g,k)};t.on("init",()=>{const w="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(w,h),t.on("longpress contextmenu",C)})},Dw=ve.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),x4=t=>s=>s.translate(-t.left,-t.top),E4=t=>s=>s.translate(t.left,t.top),Ch=t=>(s,c)=>No(t,(i,d)=>d(i),Zs(s,c)),T4=(t,s,c)=>t.fold(Ch([E4(c),x4(s)]),Ch([x4(s)]),Ch([])),Jv=(t,s,c)=>t.fold(Ch([E4(c)]),Ch([]),Ch([E4(s)])),lR=(t,s,c)=>t.fold(Ch([]),Ch([x4(c)]),Ch([E4(s),x4(c)])),IZ=(t,s,c,i,d,g)=>{const h=Jv(t,d,g),C=Jv(s,d,g);return Math.abs(h.left-C.left)<=c&&Math.abs(h.top-C.top)<=i},LZ=(t,s,c,i,d,g)=>{const h=Jv(t,d,g),C=Jv(s,d,g),w=Math.abs(h.left-C.left),k=Math.abs(h.top-C.top);return Zs(w,k)},M8=(t,s,c)=>{const i=t.fold((d,g)=>({position:A.some("absolute"),left:A.some(d+"px"),top:A.some(g+"px")}),(d,g)=>({position:A.some("absolute"),left:A.some(d-c.left+"px"),top:A.some(g-c.top+"px")}),(d,g)=>({position:A.some("fixed"),left:A.some(d+"px"),top:A.some(g+"px")}));return{right:A.none(),bottom:A.none(),...i}},HZ=(t,s,c)=>t.fold((i,d)=>k4(i+s,d+c),(i,d)=>qp(i+s,d+c),(i,d)=>L0(i+s,d+c)),uR=(t,s,c,i)=>{const d=(g,h)=>(C,w)=>{const k=g(s,c,i);return h(C.getOr(k.left),w.getOr(k.top))};return t.fold(d(lR,k4),d(Jv,qp),d(T4,L0))},k4=Dw.offset,qp=Dw.absolute,L0=Dw.fixed,dR=(t,s)=>{const c=ho(t,s);return Yo(c)?NaN:parseInt(c,10)},zZ=(t,s)=>{const c=t.element,i=dR(c,s.leftAttr),d=dR(c,s.topAttr);return isNaN(i)||isNaN(d)?A.none():A.some(Zs(i,d))},N8=(t,s,c)=>{const i=t.element;Xe(i,s.leftAttr,c.left+"px"),Xe(i,s.topAttr,c.top+"px")},VZ=(t,s)=>{const c=t.element;V(c,s.leftAttr),V(c,s.topAttr)},UZ=(t,s,c,i)=>zZ(t,s).fold(()=>c,d=>L0(d.left+i.left,d.top+i.top)),WZ=(t,s,c,i,d,g)=>{const h=UZ(t,s,c,i),C=s.mustSnap?ZZ(t,s,h,d,g):jZ(t,s,h,d,g),w=T4(h,d,g);return N8(t,s,w),C.fold(()=>({coord:L0(w.left,w.top),extra:A.none()}),k=>({coord:k.output,extra:k.extra}))},H0=(t,s)=>{VZ(t,s)},mR=(t,s,c,i)=>ps(t,d=>{const g=d.sensor;return IZ(s,g,d.range.left,d.range.top,c,i)?A.some({output:uR(d.output,s,c,i),extra:d.extra}):A.none()}),ZZ=(t,s,c,i,d)=>{const g=s.getSnapPoints(t);return mR(g,c,i,d).orThunk(()=>No(g,(w,k)=>{const O=k.sensor,P=LZ(c,O,k.range.left,k.range.top,i,d);return w.deltas.fold(()=>({deltas:A.some(P),snap:A.some(k)}),H=>{const j=(P.left+P.top)/2,Q=(H.left+H.top)/2;return j<=Q?{deltas:A.some(P),snap:A.some(k)}:w})},{deltas:A.none(),snap:A.none()}).snap.map(w=>({output:uR(w.output,c,i,d),extra:w.extra})))},jZ=(t,s,c,i,d)=>{const g=s.getSnapPoints(t);return mR(g,c,i,d)},GZ=(t,s,c)=>({coord:uR(t.output,t.output,s,c),extra:t.extra});var P8=Object.freeze({__proto__:null,snapTo:(t,s,c,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=er(t.element),h=Ea(g),C=jh(d),w=GZ(i,h,C),k=M8(w.coord,h,C);Hr(d,k)}}});const fR="data-initial-z-index",qZ=t=>{oc(t.element).filter(vo).each(s=>{Gn(s,fR).fold(()=>xo(s,"z-index"),c=>Nt(s,"z-index",c)),V(s,fR)})},KZ=t=>{oc(t.element).filter(vo).each(s=>{Es(s,"z-index").each(c=>{Xe(s,fR,c)}),Nt(s,"z-index",at(t.element,"z-index"))})},B8=(t,s)=>{t.getSystem().addToGui(s),KZ(s)},YZ=t=>{qZ(t),t.getSystem().removeFromGui(t)},$8=(t,s,c)=>t.getSystem().build(hf.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:c}));var XZ=Aa("snaps",[nt("getSnapPoints"),rs("onSensor"),nt("leftAttr"),nt("topAttr"),Ee("lazyViewport",xc),Ee("mustSnap",!1)]);const gR=[Ee("useFixed",eo),nt("blockerClass"),Ee("getTarget",Mt),Ee("onDrag",oe),Ee("repositionTarget",!0),Ee("onDrop",oe),js("getBounds",xc),XZ],JZ=t=>mc(Es(t,"left"),Es(t,"top"),Es(t,"position"),(s,c,i)=>(i==="fixed"?L0:k4)(parseInt(s,10),parseInt(c,10))).getOrThunk(()=>{const s=wc(t);return qp(s.left,s.top)}),QZ=(t,s,c,i,d)=>{const g=d.bounds,h=Jv(s,c,i),C=du(h.left,g.x,g.x+g.width-d.width),w=du(h.top,g.y,g.y+g.height-d.height),k=qp(C,w);return s.fold(()=>{const O=lR(k,c,i);return k4(O.left,O.top)},Z(k),()=>{const O=T4(k,c,i);return L0(O.left,O.top)})},F8=(t,s,c,i,d,g,h)=>{const C=s.fold(()=>{const w=HZ(c,g.left,g.top),k=T4(w,i,d);return L0(k.left,k.top)},w=>{const k=WZ(t,w,c,g,i,d);return k.extra.each(O=>{w.onSensor(t,O)}),k.coord});return QZ(t,C,i,d,h)},I8=(t,s,c,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=er(t.element),h=Ea(g),C=jh(d),w=JZ(d),k=F8(t,s.snaps,w,h,C,i,c),O=M8(k,h,C);Hr(d,O)}s.onDrag(t,d,i)},L8=(t,s)=>({bounds:t.getBounds(),height:il(s.element),width:ke(s.element)}),z0=(t,s,c,i,d)=>{const g=c.update(i,d),h=c.getStartData().getOrThunk(()=>L8(s,t));g.each(C=>{I8(t,s,h,C)})},H8=(t,s,c,i)=>{s.each(YZ),c.snaps.each(g=>{H0(t,g)});const d=c.getTarget(t.element);i.reset(),c.onDrop(t,d)},hR=t=>(s,c)=>{const i=d=>{c.setStartData(L8(s,d))};return ir([Ye(iy(),d=>{c.getStartData().each(()=>i(d))}),...t(s,c,i)])},pR=t=>ir([Ye(Mi(),t.forceDrop),Ye(tm(),t.drop),Ye(Lh(),(s,c)=>{t.move(c.event)}),Ye(em(),t.delayDrop)]);var ej=Object.freeze({__proto__:null,getData:t=>A.from(Zs(t.x,t.y)),getDelta:(t,s)=>Zs(s.left-t.left,s.top-t.top)});const z8=(t,s,c)=>[Ye(Mi(),(i,d)=>{if(d.event.raw.button!==0)return;d.stop();const h=()=>H8(i,A.some(k),t,s),C=U6(h,200),w={drop:h,delayDrop:C.schedule,forceDrop:h,move:P=>{C.cancel(),z0(i,t,s,ej,P)}},k=$8(i,t.blockerClass,pR(w));(()=>{c(i),B8(i,k)})()})],tj=[...gR,gr("dragger",{handlers:hR(z8)})],nj=t=>ir([Ye(zo(),t.forceDrop),Ye(Ec(),t.drop),Ye(vl(),t.drop),Ye(fr(),(s,c)=>{t.move(c.event)})]),oj=t=>{const s=t[0];return A.some(Zs(s.clientX,s.clientY))};var V8=Object.freeze({__proto__:null,getData:t=>{const c=t.raw.touches;return c.length===1?oj(c):A.none()},getDelta:(t,s)=>Zs(s.left-t.left,s.top-t.top)});const U8=(t,s,c)=>{const i=ys(),d=g=>{H8(g,i.get(),t,s),i.clear()};return[Ye(zo(),(g,h)=>{h.stop();const C=()=>d(g),w={drop:C,delayDrop:oe,forceDrop:C,move:P=>{z0(g,t,s,V8,P)}},k=$8(g,t.blockerClass,nj(w));i.set(k),(()=>{c(g),B8(g,k)})()}),Ye(fr(),(g,h)=>{h.stop(),z0(g,t,s,V8,h.event)}),Ye(Ec(),(g,h)=>{h.stop(),d(g)}),Ye(vl(),d)]},sj=[...gR,gr("dragger",{handlers:hR(U8)})],rj=(t,s,c)=>[...z8(t,s,c),...U8(t,s,c)],cj=[...gR,gr("dragger",{handlers:hR(rj)})];var _4=Object.freeze({__proto__:null,mouse:tj,touch:sj,mouseOrTouch:cj}),aj=Object.freeze({__proto__:null,init:()=>{let t=A.none(),s=A.none();const c=()=>{t=A.none(),s=A.none()},i=(w,k)=>{const O=t.map(P=>w.getDelta(P,k));return t=A.some(k),O},d=(w,k)=>w.getData(k).bind(O=>i(w,O)),g=w=>{s=A.some(w)},h=()=>s,C=Z({});return Vl({readState:C,reset:c,update:d,getStartData:h,setStartData:g})}});const V0=Ww({branchKey:"mode",branches:_4,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:A.from(t.extra)})},state:aj,apis:P8}),bR=40,A4=bR/2,W8=(t,s,c,i,d,g)=>t.fold(()=>V0.snap({sensor:qp(c-A4,i-A4),range:Zs(d,g),output:qp(A.some(c),A.some(i)),extra:{td:s}}),h=>{const C=c-A4,w=i-A4,k=bR,O=bR,P=h.element.dom.getBoundingClientRect();return V0.snap({sensor:qp(C,w),range:Zs(k,O),output:qp(A.some(c-P.width/2),A.some(i-P.height/2)),extra:{td:s}})}),vR=(t,s,c)=>{const i=(d,g)=>d.exists(h=>Bo(h,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const h=g.td;i(s.get(),h)||(s.set(h),c(h))},mustSnap:!0}},Z8=t=>ws(sa.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:xt([V0.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),Tl.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),ij=(t,s)=>{const c=pn([]),i=pn([]),d=pn(!1),g=ys(),h=ys(),C=bt=>{const He=ui(bt);return W8(j.getOpt(s),bt,He.x,He.y,He.width,He.height)},w=()=>Re(c.get(),bt=>C(bt)),k=bt=>{const He=ui(bt);return W8(Q.getOpt(s),bt,He.right,He.bottom,He.width,He.height)},O=()=>Re(i.get(),bt=>k(bt)),P=vR(w,g,bt=>{h.get().each(He=>{t.dispatch("TableSelectorChange",{start:bt,finish:He})})}),H=vR(O,h,bt=>{g.get().each(He=>{t.dispatch("TableSelectorChange",{start:He,finish:bt})})}),j=Z8(P),Q=Z8(H),te=oi(j.asSpec()),we=oi(Q.asSpec()),ce=(bt,He,Zt,Pt)=>{const en=He.dom.getBoundingClientRect();xo(bt.element,"display");const Do=ii(ze.fromDom(t.getBody())).dom.innerHeight,or=Zt(en),gs=Pt(en,Do);(or||gs)&&Nt(bt.element,"display","none")},xe=(bt,He,Zt,Pt)=>{const en=Zt(He);V0.snapTo(bt,en),ce(bt,He,gs=>gs[Pt]<0,(gs,vn)=>gs[Pt]>vn)},Ce=bt=>xe(te,bt,C,"top"),Pe=()=>g.get().each(Ce),Fe=bt=>xe(we,bt,k,"bottom"),Lt=()=>h.get().each(Fe);if(Mr().deviceType.isTouch()){const bt=He=>Re(He,ze.fromDom);t.on("TableSelectionChange",He=>{d.get()||(Xg(s,te),Xg(s,we),d.set(!0));const Zt=ze.fromDom(He.start),Pt=ze.fromDom(He.finish);g.set(Zt),h.set(Pt),A.from(He.otherCells).each(en=>{c.set(bt(en.upOrLeftCells)),i.set(bt(en.downOrRightCells)),Ce(Zt),Fe(Pt)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{Pe(),Lt()}),t.on("TableSelectionClear",()=>{d.get()&&(Sd(te),Sd(we),d.set(!1)),g.clear(),h.clear()})}};var lj=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const uj=(t,s)=>{const c=A.from(ho(t,"id")).getOrThunk(()=>{const i=Kt("aria");return Xe(s,"id",i),i});Xe(t,"aria-describedby",c)},dj=t=>{V(t,"aria-describedby")},yR=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",j8=(t,s,c)=>{var i;const d=(i=s.delimiter)!==null&&i!==void 0?i:"›",g=(k,O,P)=>sa.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":P}},components:[Ar(k)],action:H=>{t.focus(),t.selection.select(O),t.nodeChanged()},buttonBehaviours:xt([Wr.config({...c.tooltips.getConfig({tooltipText:c.translate(["Select the {0} element",O.nodeName.toLowerCase()]),onShow:(H,j)=>{uj(H.element,j.element)},onHide:H=>{dj(H.element)}})}),Od.button(c.isDisabled),_c(()=>c.checkUiComponentContext("any"))])}),h=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Ar(` ${d} `)]}),C=k=>No(k,(O,P,H)=>{const j=g(P.name,P.element,H);return H===0?O.concat([j]):O.concat([h(),j])},[]),w=k=>{const O=[];let P=k.length;for(;P-- >0;){const H=k[P];if(H.nodeType===1&&!yR(H)){const j=HL(t,H);if(j.isDefaultPrevented()||O.push({name:j.name,element:H}),j.isPropagationStopped())break}}return O};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:xt([En.config({mode:"flow",selector:"div[role=button]"}),rn.config({disabled:c.isDisabled}),_c(()=>c.checkUiComponentContext("any")),lr.config({}),Kn.config({}),Qn("elementPathEvents",[Gs((k,O)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>En.focusIn(k)),t.on("NodeChange",P=>{const H=w(P.parents),j=H.length>0?C(H):[];Kn.set(k,j)})})])]),components:[]}};var Kp;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(Kp||(Kp={}));const mj=(t,s,c,i,d)=>{const g={height:Tw(i+s.top,Xk(t),wv(t))};return c===Kp.Both&&(g.width=Tw(d+s.left,tC(t),Np(t))),g},G8=(t,s,c)=>{const i=ze.fromDom(t.getContainer()),d=mj(t,s,c,Pr(i),ee(i));xs(d,(g,h)=>{jn(g)&&Nt(i,h,m4(g))}),LL(t)},fj=t=>{const s=_M(t);return s===!1?Kp.None:s==="both"?Kp.Both:Kp.Vertical},O4=(t,s,c,i)=>{const g=Zs(c*20,i*20);return G8(t,g,s),A.some(!0)},gj=(t,s)=>{const c=fj(t);if(c===Kp.None)return A.none();const i=c===Kp.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return A.some(Gu("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":s.translate(i),"data-mce-name":"resize-handle"},behaviours:[V0.config({mode:"mouse",repositionTarget:!1,onDrag:(d,g,h)=>G8(t,h,c),blockerClass:"tox-blocker"}),En.config({mode:"special",onLeft:()=>O4(t,c,-1,0),onRight:()=>O4(t,c,1,0),onUp:()=>O4(t,c,0,-1),onDown:()=>O4(t,c,0,1)}),lr.config({}),zn.config({}),Wr.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")}))]},s.icons))},hj=(t,s)=>{const c=(i,d,g)=>Kn.set(i,[Ar(s.translate(["{0} "+g,d[g]]))]);return sa.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:xt([Od.button(s.isDisabled),_c(()=>s.checkUiComponentContext("any")),lr.config({}),Kn.config({}),qt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Qn("wordcount-events",[Ym(i=>{const d=qt.getValue(i),g=d.mode==="words"?"characters":"words";qt.setValue(i,{mode:g,count:d.count}),c(i,d.count,g)}),Gs(i=>{t.on("wordCountUpdate",d=>{const{mode:g}=qt.getValue(i);qt.setValue(i,{mode:g,count:d.wordCount}),c(i,d.wordCount,g)})})])]),eventOrder:{[ti()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},pj=(t,s)=>{const c=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",lj.trim()])},behaviours:xt([zn.config({})])}]}),i=()=>{const C=tA("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Ar(Td.translate(["Press {0} for help",C]))]}},d=()=>{const C=[];return t.hasPlugin("wordcount")&&C.push(hj(t,s)),r_(t)&&C.push(c()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:C}},g=()=>{const C=[],w=hE(t),k=kM(t),O=r_(t)||t.hasPlugin("wordcount"),P=()=>{const H="tox-statusbar__text-container--flex-start",j="tox-statusbar__text-container--flex-end",Q="tox-statusbar__text-container--space-around";if(w){const te="tox-statusbar__text-container-3-cols";return!O&&!k?[te,Q]:O&&!k?[te,j]:[te,H]}return[O&&!k?j:H]};return k&&C.push(j8(t,{},s)),w&&C.push(i()),O&&C.push(d()),C.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...P()]},components:C}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const C=g(),w=gj(t,s);return C.concat(w.toArray())})()}},q8=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),bj=(t,s)=>{const c=t.inline,i=c?KF:zW,d=Pp(t)?jV:p$,g=GW(),h=ys(),C=ys(),w=ys(),H=Mr().deviceType.isTouch()?["tox-platform-touch"]:[],j=i_(t),Q=Sv(t),te=ws({dom:{tag:"div",classes:["tox-anchorbar"]}}),we=ws({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),ce=()=>g.mainUi.get().map(Nn=>Nn.outerContainer).bind(br.getHeader),xe=()=>ro.fromOption(g.dialogUi.get().map(Nn=>Nn.sink),"UI has not been rendered"),Ce=()=>ro.fromOption(g.popupUi.get().map(Nn=>Nn.sink),"(popup) UI has not been rendered"),Pe=g.lazyGetInOuterOrDie("anchor bar",te.getOpt),Fe=g.lazyGetInOuterOrDie("bottom anchor bar",we.getOpt),Lt=g.lazyGetInOuterOrDie("toolbar",br.getToolbar),bt=g.lazyGetInOuterOrDie("throbber",br.getThrobber),He=PV({popup:Ce,dialog:xe},t,Pe,Fe),Zt=()=>{const Nn={attributes:{[Lb]:j?fm.BottomToTop:fm.TopToBottom}},co=br.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:He.popup,onEscape:()=>{t.focus()}}),Ys=br.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:He.popup.shared.getSink,providers:He.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:bg=>{i6(t,bg)},type:Q,lazyToolbar:Lt,lazyHeader:()=>ce().getOrDie("Could not find header element"),...Nn}),Ws=br.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:He.popup.shared.providers,onEscape:()=>{t.focus()},type:Q}),tu=oC(t),Gr=bE(t),nd=pE(t),Ti=c_(t),od=Pt(),sd=tu||Gr||nd,Rm=()=>tu?[Ws]:Gr?[Ys]:[],Bw=Ti?[od,co]:[co];return br.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(sd?[]:["tox-editor-header--empty"]),...Nn},components:et([nd?Bw:[],Rm(),Cm(t)?[]:[te.asSpec()]]),sticky:Pp(t),editor:t,sharedBackstage:He.popup.shared})},Pt=()=>br.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),en=()=>{const Nn=br.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),co=br.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Nn,co]}},Do=()=>{const Nn=l_(t),co=Bo(ye(),Nn)&&at(Nn,"display")==="grid",Ys={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(H),attributes:{...Td.isRtl()?{dir:"rtl"}:{}}},behaviours:xt([Wa.config({useFixed:()=>d.isDocked(ce)})])},Ws={dom:{styles:{width:document.body.clientWidth+"px"}},events:ir([Ye(zh(),nd=>{Nt(nd.element,"width",document.body.clientWidth+"px")})])},tu=oi(rr(Ys,co?Ws:{})),Gr=NA(tu);return C.set(Gr),{sink:tu,mothership:Gr}},or=()=>{const Nn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(H),attributes:{...Td.isRtl()?{dir:"rtl"}:{}}},behaviours:xt([Wa.config({useFixed:()=>d.isDocked(ce),getBounds:()=>s.getPopupSinkBounds()})])},co=oi(Nn),Ys=NA(co);return w.set(Ys),{sink:co,mothership:Ys}},gs=()=>{const Nn=Zt(),co=en(),Ys=br.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:He.popup}),Ws=br.parts.viewWrapper({backstage:He.popup}),tu=gE(t)&&!c?A.some(pj(t,He.popup.shared.providers)):A.none(),Gr=et([j?[]:[Nn],c?[]:[co],j?[Nn]:[]]),nd=br.parts.editorContainer({components:et([Gr,c?[]:[we.asSpec()]])}),Ti=u_(t),od={role:"application",...Td.isRtl()?{dir:"rtl"}:{},...Ti?{"aria-hidden":"true"}:{}},sd=oi(br.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(c?["tox-tinymce-inline"]:[]).concat(j?["tox-tinymce--toolbar-bottom"]:[]).concat(H),styles:{visibility:"hidden",...Ti?{opacity:"0",border:"0"}:{}},attributes:od},components:[nd,...c?[]:[Ws,...tu.toArray()],Ys],behaviours:xt([_c(()=>He.popup.shared.providers.checkUiComponentContext("any")),rn.config({disableClass:"tox-tinymce--disabled"}),En.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Rm=NA(sd);return h.set(Rm),{mothership:Rm,outerContainer:sd}},vn=Nn=>{const co=m4(UW(t)),Ys=m4(WW(t));return t.inline||(yr("div","width",Ys)&&Nt(Nn.element,"width",Ys),yr("div","height",co)?Nt(Nn.element,"height",co):Nt(Nn.element,"height","400px")),co},vt=Nn=>{t.addShortcut("alt+F9","focus menubar",()=>{br.focusMenubar(Nn)}),t.addShortcut("alt+F10","focus toolbar",()=>{br.focusToolbar(Nn)}),t.addCommand("ToggleToolbarDrawer",(co,Ys)=>{Ys!=null&&Ys.skipFocus?br.toggleToolbarDrawerWithoutFocusing(Nn):br.toggleToolbarDrawer(Nn)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>br.isToolbarDrawerToggled(Nn))},Wt=Nn=>{const{mainUi:co,popupUi:Ys,uiMotherships:Ws}=Nn;Ke(uE(t),(G0,BR)=>{t.ui.registry.addGroupToolbarButton(BR,G0)});const{buttons:tu,menuItems:Gr,contextToolbars:nd,sidebars:Ti,views:od}=t.ui.registry.getAll(),sd=vE(t),Rm={menuItems:Gr,menus:NM(t),menubar:wM(t),toolbar:sd.getOrThunk(()=>mE(t)),allowToolbarGroups:Q===ju.floating,buttons:tu,sidebar:Ti,views:od};vt(co.outerContainer),BV(t,co.mothership,Ws),d.setup(t,He.popup.shared,ce),bZ(t,He.popup),FZ(t,He.popup.shared.getSink,He.popup),A$(t),gU(t,bt,He.popup.shared),f8(t,nd,Ys.sink,{backstage:He.popup}),ij(t,Ys.sink);const Bw=t.getElement(),bg=vn(co.outerContainer),PR={targetNode:Bw,height:bg};return i.render(t,Nn,Rm,He.popup,PR)},Zn=Nn=>(w.set(Nn.mothership),Nn),yo=()=>{const Nn=gs(),co=Do(),Ys=ah(t)?or():Zn(co);g.dialogUi.set(co),g.popupUi.set(Ys),g.mainUi.set(Nn);const Ws={popupUi:Ys,dialogUi:co,mainUi:Nn,uiMotherships:g.getUiMotherships()};return Wt(Ws)};return{popups:{backstage:He.popup,getMothership:()=>q8("popups",w)},dialogs:{backstage:He.dialog,getMothership:()=>q8("dialogs",C)},renderUI:yo}},vj=t=>t.dom.textContent,yj=(t,s)=>{const c=Gn(t,"id").fold(()=>{const i=Kt("dialog-label");return Xe(s,"id",i),i},Mt);Xe(t,"aria-labelledby",c)},Cj=Z([nt("lazySink"),ms("dragBlockClass"),js("getBounds",xc),Ee("useTabstopAt",Bt),Ee("firstTabstop",0),Ee("eventOrder",{}),ga("modalBehaviours",[En]),pi("onExecute"),Sy("onEscape")]),CR={sketch:Mt},K8=Z([Xi({name:"draghandle",overrides:(t,s)=>({behaviours:xt([V0.config({mode:"mouse",getTarget:c=>um(c,'[role="dialog"]').getOr(c),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),ja({schema:[nt("dom")],name:"title"}),ja({factory:CR,schema:[nt("dom")],name:"close"}),ja({factory:CR,schema:[nt("dom")],name:"body"}),Xi({factory:CR,schema:[nt("dom")],name:"footer"}),gu({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[Ee("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Ee("components",[])],name:"blocker"})]),wj=(t,s,c,i)=>{const d=ys(),g=Q=>{d.set(Q);const te=t.lazySink(Q).getOrDie(),we=i.blocker(),ce=te.getSystem().build({...we,components:we.components.concat([Cl(Q)]),behaviours:xt([zn.config({}),Qn("dialog-blocker-events",[cm(Nu(),()=>{Pd.isBlocked(Q)?oe():En.focusIn(Q)})])])});Xg(te,ce),En.focusIn(Q)},h=Q=>{d.clear(),oc(Q.element).each(te=>{Q.getSystem().getByDom(te).each(we=>{Sd(we)})})},C=Q=>xd(Q,t,"body"),w=Q=>tr(Q,t,"footer"),k=(Q,te)=>{Pd.block(Q,te)},O=Q=>{Pd.unblock(Q)},P=Kt("modal-events"),H={...t.eventOrder,[Bu()]:[P].concat(t.eventOrder["alloy.system.attached"]||[])},j=Mr();return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:h,getBody:C,getFooter:w,setIdle:O,setBusy:k},eventOrder:H,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:hc(t.modalBehaviours,[Kn.config({}),En.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),Pd.config({getRoot:d.get}),Qn(P,[Gs(Q=>{const te=xd(Q,t,"title").element,we=vj(te);j.os.isMacOS()&&io(we)?Xe(Q.element,"aria-label",we):yj(Q.element,te)})])])}},va=si({name:"ModalDialog",configFields:Cj(),partFields:K8(),factory:wj,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,c)=>{t.setBusy(s,c)},setIdle:(t,s)=>{t.setIdle(s)}}}),Sj=Vn([Fc,L_].concat(y0)),xj=pl,wR=[W_("button"),_d,zl("align","end",["start","end"]),zE,Sm,$h("buttonType",["primary","secondary"]),ar("context","mode:design")],Y8=[...wR,uh],SR=[Hl("type",["submit","cancel","custom"]),...Y8],Ej=[Hl("type",["menu"]),dh,CC,_d,gi("items",Sj),...wR],X8=[...wR,Hl("type",["togglebutton"]),CC,_d,dh,Ur("active",!1)],J8=Nc("type",{submit:SR,cancel:SR,custom:SR,menu:Ej,togglebutton:X8}),Tj=[Fc,uh,Hl("level",["info","warn","error","success"]),IE,Ee("url","")],xR=Vn(Tj),Rw=t=>[Fc,t],ER=[Fc,uh,Sm,W_("button"),_d,uL,$h("buttonType",["primary","secondary","toolbar"]),zE,ar("context","mode:design")],D4=Vn(ER),Am=[Fc,L_],ed=Am.concat([z_]),kj=Am.concat([H_,Sm,ar("context","mode:design")]),Q8=Vn(kj),eI=pl,tI=ed.concat([kN("auto"),ar("context","mode:design")]),_j=Vn(tI),Aj=Ph([kv,uh,IE]),Oj=ed.concat([ar("storageKey","default"),ar("context","mode:design")]),nI=Vn(Oj),oI=Vt,Dj=Vn(ed),Rj=Vt,Mj=Am.concat([ar("tag","textarea"),Xr("scriptId"),Xr("scriptUrl"),gd("onFocus"),S("settings",void 0)]),Nj=Am.concat([ar("tag","textarea"),Xc("init")]),Mw=kg(t=>_r("customeditor.old",_a(Nj),t).orThunk(()=>_r("customeditor.new",_a(Mj),t))),Pj=Vt,Bj=ed.concat([ar("context","mode:design")]),rI=Vn(Bj),$j=Vm(),Fj=t=>[Fc,i1("columns"),t],Ij=[Fc,Xr("html"),zl("presets","presentation",["presentation","document"]),js("onInit",oe),Ur("stretched",!1)],TR=Vn(Ij),kR=ed.concat([Ur("border",!1),Ur("sandboxed",!0),Ur("streamContent",!1),Ur("transparent",!0)]),Lj=Vn(kR),cI=Vt,Hj=Vn(Am.concat([$r("height")])),zj=Vn([Xr("url"),_g("zoom"),_g("cachedWidth"),_g("cachedHeight")]),aI=ed.concat([$r("inputMode"),$r("placeholder"),Ur("maximized",!1),Sm,ar("context","mode:design")]),Vj=Vn(aI),Uj=Vt,U0=t=>[Fc,H_,t,zl("align","start",["start","center","end"]),$r("for")],iI=[uh,kv],Wj=[uh,gi("items",Pf("items",()=>Nw))],Nw=Yd([Vn(iI),Vn(Wj)]),Qv=ed.concat([gi("items",Nw),Sm,ar("context","mode:design")]),R4=Vn(Qv),lI=Vt,M4=ed.concat([J0("items",[uh,kv]),Bc("size",1),Sm,ar("context","mode:design")]),Jl=Vn(M4),N4=Vt,uI=ed.concat([Ur("constrain",!0),Sm,ar("context","mode:design")]),dI=Vn(uI),mI=Vn([Xr("width"),Xr("height")]),Zj=Am.concat([H_,Bc("min",0),Bc("max",0)]),Yp=Vn(Zj),kq=Xd,jj=[Fc,gi("header",Vt),gi("cells",hl(Vt))],fI=Vn(jj),ey=ed.concat([$r("placeholder"),Ur("maximized",!1),Sm,ar("context","mode:design")]),P4=Vn(ey),gI=Vt,hI=[Hl("type",["directory","leaf"]),xN,Xr("id"),Ru("menu",fw),$r("customStateIcon"),$r("customStateIconTooltip")],pI=Vn(hI),Gj=hI.concat([gi("children",Pf("children",()=>Jd("type",{directory:W0,leaf:pI})))]),W0=Vn(Gj),Aq=Jd("type",{directory:W0,leaf:pI}),qj=[Fc,gi("items",Aq),gd("onLeafAction"),gd("onToggleExpand"),_("defaultExpandedIds",[],Vt),$r("defaultSelectedId")],Kj=Vn(qj),Oq=ed.concat([zl("filetype","file",["image","media","file"]),Sm,$r("picker_text"),ar("context","mode:design")]),Yj=Vn(Oq),Xj=Vn([kv,U_]),Z0=t=>Pc("items","items",gl(),hl(kg(s=>_r(`Checking item of ${t}`,_R,s).fold(c=>ro.error(au(c)),c=>ro.value(c))))),_R=fc(()=>Jd("type",{alertbanner:xR,bar:Vn(Rw(Z0("bar"))),button:D4,checkbox:Q8,colorinput:nI,colorpicker:Dj,dropzone:rI,grid:Vn(Fj(Z0("grid"))),iframe:Lj,input:Vj,listbox:R4,selectbox:Jl,sizeinput:dI,slider:Yp,textarea:P4,urlinput:Yj,customeditor:Mw,htmlpanel:TR,imagepreview:Hj,collection:_j,label:Vn(U0(Z0("label"))),table:fI,tree:Kj,panel:AR})),Jj=[Fc,Ee("classes",[]),gi("items",_R)],AR=Vn(Jj),Qj=[W_("tab"),xN,gi("items",_R)],Dq=[Fc,J0("tabs",Qj)],e=Vn(Dq),n=Y8,o=J8,r=Vn([Xr("title"),ds("body",Jd("type",{panel:AR,tabpanel:e})),ar("size","normal"),_("buttons",[],o),Ee("initialData",{}),js("onAction",oe),js("onChange",oe),js("onSubmit",oe),js("onClose",oe),js("onCancel",oe),js("onTabChange",oe)]),a=t=>_r("dialog",r,t),u=Vn([Hl("type",["cancel","custom"]),...n]),f=Vn([Xr("title"),Xr("url"),_g("height"),_g("width"),l1("buttons",u),js("onAction",oe),js("onCancel",oe),js("onClose",oe),js("onMessage",oe)]),b=t=>_r("dialog",f,t),y=t=>yn(t)?[t].concat(fe(Er(t),y)):Ko(t)?fe(t,y):[],x=t=>je(t.type)&&je(t.name),R={checkbox:eI,colorinput:oI,colorpicker:Rj,dropzone:$j,input:Uj,iframe:cI,imagepreview:zj,selectbox:N4,sizeinput:mI,slider:kq,listbox:lI,size:mI,textarea:gI,urlinput:Xj,customeditor:Pj,collection:Aj,togglemenuitem:xj},N=t=>A.from(R[t.type]),B=t=>to(y(t),x),W=t=>{const s=B(t),c=fe(s,i=>N(i).fold(()=>[],d=>[ds(i.name,d)]));return Vn(c)},X=t=>{var s;const c=wt(a(t)),i=W(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:c,dataValidator:i,initialData:d}},q={open:(t,s)=>{const c=X(s);return t(c.internalDialog,c.initialData,c.dataValidator)},openUrl:(t,s)=>{const c=wt(b(s));return t(c)},redial:t=>X(t)};var ge=Object.freeze({__proto__:null,events:(t,s)=>{const c=(i,d)=>{t.updateState.each(g=>{const h=g(i,d);s.set(h)}),t.renderComponents.each(g=>{const h=g(d,s.get());(t.reuseDom?X5:Nk)(i,h)})};return ir([Ye(Pu(),(i,d)=>{const g=d;if(!g.universal){const h=t.channel;fo(g.channels,h)&&c(i,g.data)}}),Gs((i,d)=>{t.initialData.each(g=>{c(i,g)})})])}}),Te=Object.freeze({__proto__:null,getState:(t,s,c)=>c}),Me=[nt("channel"),ms("renderComponents"),ms("updateState"),ms("initialData"),Ur("reuseDom",!0)],At=Object.freeze({__proto__:null,init:()=>{const t=pn(A.none()),s=()=>t.set(A.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const $t=gc({fields:Me,name:"reflecting",active:ge,apis:Te,state:At}),qe=t=>{const s=[],c={};return xs(t,(i,d)=>{i.fold(()=>{s.push(d)},g=>{c[d]=g})}),s.length>0?ro.error(s):ro.value(c)},Le=(t,s,c,i)=>{const d=ws(O0.sketch(g=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Re(t.items,h=>jB(g,h,s,c,i))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:xt([En.config({mode:"acyclic",useTabstopAt:De(qC)}),Ei.memento(d),KP(d,{postprocess:g=>qe(g).fold(h=>(console.error(h),{}),Mt)}),Qn("dialog-body-panel",[Ye(Nu(),(g,h)=>{g.getSystem().broadcastOn([YC],{newFocus:A.some(h.event.target)})})])])}},dt=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:yv(t.action),behaviours:hc(t.tabButtonBehaviours,[zn.config({}),En.config({mode:"execution",useSpace:!0,useEnter:!0}),qt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),Qt=Ji({name:"TabButton",configFields:[Ee("uid",void 0),nt("value"),Pc("dom","dom",E(()=>({attributes:{role:"tab",id:Kt("aria"),"aria-selected":"false"}})),Il()),ms("action"),Ee("domModification",{}),ga("tabButtonBehaviours",[zn,En,qt]),nt("view")],factory:dt}),_n=Z([nt("tabs"),nt("dom"),Ee("clickToDismiss",!1),ga("tabbarBehaviours",[K,En]),yd(["tabClass","selectedClass"])]),Oo=rh({factory:Qt,name:"tabs",unit:"tab",overrides:t=>{const s=(i,d)=>{K.dehighlight(i,d),kn(i,f1(),{tabbar:i,button:d})},c=(i,d)=>{K.highlight(i,d),kn(i,Ff(),{tabbar:i,button:d})};return{action:i=>{const d=i.getSystem().getByUid(t.uid).getOrDie(),g=K.isHighlighted(d,i);(g&&t.clickToDismiss?s:g?oe:c)(d,i)},domModification:{classes:[t.markers.tabClass]}}}}),Lo=Z([Oo]),ks=(t,s,c,i)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:hc(t.tabbarBehaviours,[K.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{Xe(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{Xe(g.element,"aria-selected","false")}}),En.config({mode:"flow",getInitial:d=>K.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),Us=si({name:"Tabbar",configFields:_n(),partFields:Lo(),factory:ks}),Ac=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:hc(t.tabviewBehaviours,[Kn.config({})]),domModification:{attributes:{role:"tabpanel"}}}),Na=Ji({name:"Tabview",configFields:[ga("tabviewBehaviours",[Kn])],factory:Ac}),Pa=Z([Ee("selectFirst",!0),rs("onChangeTab"),rs("onDismissTab"),Ee("tabs",[]),ga("tabSectionBehaviours",[])]),It=ja({factory:Us,schema:[nt("dom"),Du("markers",[nt("tabClass"),nt("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),An=ja({factory:Na,name:"tabview"}),Ss=Z([It,An]),tn=(t,s,c,i)=>{const d=h=>{const C=qt.getValue(h);tr(h,t,"tabview").each(w=>{We(t.tabs,O=>O.value===C).each(O=>{const P=O.view();Gn(h.element,"id").each(H=>{Xe(w.element,"aria-labelledby",H)}),Kn.set(w,P),t.onChangeTab(w,h,P)})})},g=(h,C)=>{tr(h,t,"tabbar").each(w=>{C(w).each(Ni)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:tv(t.tabSectionBehaviours),events:ir(et([t.selectFirst?[Gs((h,C)=>{g(h,K.getFirst)})]:[],[Ye(Ff(),(h,C)=>{const w=C.event.button;d(w)}),Ye(f1(),(h,C)=>{const w=C.event.button;t.onDismissTab(h,w)})]])),apis:{getViewItems:h=>tr(h,t,"tabview").map(C=>Kn.contents(C)).getOr([]),showTab:(h,C)=>{g(h,k=>{const O=K.getCandidates(k);return We(O,H=>qt.getValue(H)===C).filter(H=>!K.isHighlighted(k,H))})}}}},ut=si({name:"TabSection",configFields:Pa(),partFields:Ss(),factory:tn,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,c)=>{t.showTab(s,c)}}}),Yt=(t,s,c)=>Re(t,(i,d)=>{Kn.set(c,t[d].view());const g=s.dom.getBoundingClientRect();return Kn.set(c,[]),g.height}),qn=t=>As(Xs(t,(s,c)=>s>c?-1:s<c?1:0)),Ks=(t,s,c)=>{const i=$a(t).dom,d=um(t,".tox-dialog-wrap").getOr(t),g=at(d,"position")==="fixed";let h;g?h=Math.max(i.clientHeight,window.innerHeight):h=Math.max(i.offsetHeight,i.scrollHeight);const C=Pr(s),k=s.dom.offsetLeft>=c.dom.offsetLeft+ee(c)?Math.max(Pr(c),C):C,O=parseInt(at(t,"margin-top"),10)||0,P=parseInt(at(t,"margin-bottom"),10)||0,j=Pr(t)+O+P-k;return h-j},Xo=(t,s)=>{As(t).each(c=>ut.showTab(s,c.value))},Ka=(t,s)=>{Nt(t,"height",s+"px"),Nt(t,"flex-basis",s+"px")},Ql=(t,s,c)=>{um(t,'[role="dialog"]').each(i=>{Cs(i,'[role="tablist"]').each(d=>{c.get().map(g=>(Nt(s,"height","0"),Nt(s,"flex-basis","0"),Math.min(g,Ks(i,s,d)))).each(g=>{Ka(s,g)})})})},Om=t=>Cs(t,'[role="tabpanel"]'),Al=t=>{const s=ys();return{extraEvents:[Gs(d=>{const g=d.element;Om(g).each(h=>{Nt(h,"visibility","hidden"),d.getSystem().getByDom(h).toOptional().each(C=>{const w=Yt(t,h,C);qn(w).fold(s.clear,s.set)}),Ql(g,h,s),xo(h,"visibility"),Xo(t,d),requestAnimationFrame(()=>{Ql(g,h,s)})})}),Ye(zh(),d=>{const g=d.element;Om(g).each(h=>{Ql(g,h,s)})}),Ye(nP,(d,g)=>{const h=d.element;Om(h).each(C=>{const w=mu(Or(C));Nt(C,"visibility","hidden");const k=Es(C,"height").map(H=>parseInt(H,10));xo(C,"height"),xo(C,"flex-basis");const O=C.dom.getBoundingClientRect().height;k.forall(H=>O>H)?(s.set(O),Ql(h,C,s)):k.each(H=>{Ka(C,H)}),xo(C,"visibility"),w.each(bi)})})],selectFirst:!1}},Bd="send-data-to-section",Cu="send-data-to-view",el=(t,s,c,i)=>{const d=pn({}),g=O=>{const P=qt.getValue(O),H=qe(P).getOr({}),j=d.get(),Q=rr(j,H);d.set(Q)},h=O=>{const P=d.get();qt.setValue(O,P)},C=pn(null),w=Re(t.tabs,O=>({value:O.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Ar(c.shared.providers.translate(O.title))],view:()=>[O0.sketch(P=>({dom:{tag:"div",classes:["tox-form"]},components:Re(O.items,H=>jB(P,H,s,c,i)),formBehaviours:xt([En.config({mode:"acyclic",useTabstopAt:De(qC)}),Qn("TabView.form.events",[Gs(h),pd(g)]),Ki.config({channels:Rs([{key:Bd,value:{onReceive:g}},{key:Cu,value:{onReceive:h}}])})])}))]})),k=Al(w);return ut.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(O,P,H)=>{const j=qt.getValue(P);kn(O,tP,{name:j,oldName:C.get()}),C.set(j)},tabs:w,components:[ut.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[Us.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:xt([lr.config({})])}),ut.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:k.selectFirst,tabSectionBehaviours:xt([Qn("tabpanel",k.extraEvents),En.config({mode:"acyclic"}),Qo.config({find:O=>As(ut.getViewItems(O))}),zp(A.none(),O=>(O.getSystem().broadcastOn([Bd],{}),d.get()),(O,P)=>{d.set(P),O.getSystem().broadcastOn([Cu],{})})])})},tl=(t,s,c,i,d,g)=>{const h=k=>{const O=k.body;switch(O.type){case"tabpanel":return[el(O,k.initialData,i,g)];default:return[Le(O,k.initialData,i,g)]}},C=(k,O)=>A.some({isTabPanel:()=>O.body.type==="tabpanel"}),w={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...c.map(k=>({id:k})).getOr({}),...d?w:{}}},components:[],behaviours:xt([Ei.childAt(0),$t.config({channel:`${sB}-${s}`,updateState:C,renderComponents:h,initialData:t})])}},$d=(t,s,c,i,d,g)=>tl(t,s,A.some(c),i,d,g),Xp=(t,s,c,i)=>{const d=tl(t,s,A.none(),c,!1,i);return va.parts.body(d)},Mn=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[tB(A.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:xt([lr.config({}),zn.config({})])})]}],behaviours:xt([En.config({mode:"acyclic",useTabstopAt:De(qC)})])};return va.parts.body(s)},as=Mp.deviceType.isTouch(),lc=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),aa=(t,s)=>va.parts.close(sa.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:xt([lr.config({})])})),ya=()=>va.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),Zc=(t,s)=>va.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:uf(`<p>${YM(s.translate(t))}</p>`)}]}]}),Zr=t=>va.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),jr=(t,s)=>[hf.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),hf.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],Hi=t=>{const s="tox-dialog",c=s+"-wrap",i=c+"__backdrop",d=s+"__disable-scroll";return va.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),A.some(!0)),useTabstopAt:g=>!qC(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:uf(`<div class="${c}"></div>`),components:[{dom:{tag:"div",classes:as?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:c,modalBehaviours:xt([zn.config({}),Qn("dialog-events",t.dialogEvents.concat([cm(Nu(),(g,h)=>{Pd.isBlocked(g)?oe():En.focusIn(g)}),Ye(m1(),(g,h)=>{g.getSystem().broadcastOn([YC],{newFocus:h.event.newFocus})})])),Qn("scroll-lock",[Gs(()=>{Jr(ye(),d)}),pd(()=>{ic(ye(),d)})]),...t.extraBehaviours]),eventOrder:{[ti()]:["dialog-events"],[Bu()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[$u()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},Fd=t=>sa.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:xt([lr.config({}),Wr.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[Gu("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{Io(s,hh)}}),Cf=(t,s,c,i)=>{const d=g=>[Ar(i.translate(g.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...c.map(g=>({id:g})).getOr({})}},components:[],behaviours:xt([$t.config({channel:`${oB}-${s}`,initialData:t,renderComponents:d})])}},Dm=()=>({dom:uf('<div class="tox-dialog__draghandle"></div>')}),ty=(t,s,c,i)=>hf.sketch({dom:uf('<div class="tox-dialog__header"></div>'),components:[Cf(t,s,A.some(c),i),Dm(),Fd(i)],containerBehaviours:xt([V0.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>Lu(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),ny=(t,s,c)=>{const i=va.parts.title(Cf(t,s,A.none(),c)),d=va.parts.draghandle(Dm()),g=va.parts.close(Fd(c)),h=[i].concat(t.draggable?[d]:[]).concat([g]);return hf.sketch({dom:uf('<div class="tox-dialog__header"></div>'),components:h})},Jp=(t,s,c)=>ny({title:c.shared.providers.translate(t),draggable:c.dialog.isDraggableModal()},s,c.shared.providers),Id=(t,s,c,i)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":c.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${i.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:uf('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),wh=(t,s,c)=>({onClose:()=>c.closeWindow(),onBlock:i=>{const d=Cs(t().element,".tox-dialog__header").map(g=>Pr(g));va.setBusy(t(),(g,h)=>Id(i.message,h,s,d))},onUnblock:()=>{va.setIdle(t())}}),oy="tox-dialog--fullscreen",Qp="tox-dialog--width-lg",B4="tox-dialog--width-md",e1=t=>{switch(t){case"large":return A.some(Qp);case"medium":return A.some(B4);default:return A.none()}},sy=(t,s)=>{const c=ze.fromDom(s.element.dom);ni(c,oy)||(lu(c,[Qp,B4]),e1(t).each(i=>Jr(c,i)))},OR=(t,s)=>{const c=ze.fromDom(t.element.dom),i=Y4(c),d=We(i,g=>g===Qp||g===B4).or(e1(s));Jm(c,[oy,...d.toArray()])},j0=(t,s,c)=>oi(Hi({...t,firstTabstop:1,lazySink:c.shared.getSink,extraBehaviours:[D0({}),...t.extraBehaviours],onEscape:i=>{Io(i,hh)},dialogEvents:s,eventOrder:{[Pu()]:[$t.name(),Ki.name()],[Bu()]:["scroll-lock",$t.name(),"messages","dialog-events","alloy.base.behaviour"],[$u()]:["alloy.base.behaviour","dialog-events","messages",$t.name(),"scroll-lock"]}})),hg=(t,s={})=>{const c=i=>{const d=Re(i.items,g=>{const h=Ct(s,g.name).getOr(pn(!1));return{...g,storage:h}});return{...i,items:d}};return Re(t,i=>i.type==="menu"?c(i):i)},Pw=t=>No(t,(s,c)=>c.type==="menu"?No(c.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),Oe=(t,s)=>[g1(Nu(),CO),t(LC,(c,i,d,g)=>{ea(g.element)&&mu(Or(g.element)).each(mm),s.onClose(),i.onClose()}),t(hh,(c,i,d,g)=>{i.onCancel(c),Io(g,LC)}),Ye(tT,(c,i)=>s.onUnblock()),Ye(PA,(c,i)=>s.onBlock(i.event))],Be=(t,s)=>{const c=(d,g)=>Ye(d,(h,C)=>{i(h,(w,k)=>{g(t(),w,C.event,h)})}),i=(d,g)=>{$t.getState(d).get().each(h=>{g(h,d)})};return[...Oe(c,s),c(lg,(d,g,h)=>{g.onAction(d,{name:h.name})})]},Ft=(t,s,c)=>{const i=(g,h)=>Ye(g,(C,w)=>{d(C,(k,O)=>{h(t(),k,w.event,C)})}),d=(g,h)=>{$t.getState(g).get().each(C=>{h(C.internalDialog,g)})};return[...Oe(i,s),i(HC,(g,h)=>h.onSubmit(g)),i(Kl,(g,h,C)=>{h.onChange(g,{name:C.name})}),i(lg,(g,h,C,w)=>{const k=()=>w.getSystem().isConnected()?En.focusIn(w):void 0,O=j=>$(j,"disabled")||Gn(j,"aria-disabled").exists(Q=>Q==="true"),P=Or(w.element),H=mu(P);h.onAction(g,{name:C.name,value:C.value}),mu(P).fold(k,j=>{O(j)||H.exists(Q=>ai(j,Q)&&O(Q))?k():c().toOptional().filter(Q=>!ai(Q.element,j)).each(k)})}),i(tP,(g,h,C)=>{h.onTabChange(g,{newTabName:C.name,oldTabName:C.oldName})}),pd(g=>{const h=t();qt.setValue(g,h.getData())})]},Dt=(t,s)=>nw(t,t.type,s),Hn=(t,s,c)=>We(s,i=>i.name===c).bind(i=>i.memento.getOpt(t)),fs=(t,s)=>{const c=s.map(C=>C.footerButtons).getOr([]),i=_s(c,C=>C.align==="start"),d=(C,w)=>hf.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${C}`]},components:Re(w,k=>k.memento.asSpec())}),g=d("start",i.pass),h=d("end",i.fail);return[g,h]},uc=(t,s,c)=>{const i=(d,g)=>{const h=Re(g.buttons,w=>{const k=ws(Dt(w,c));return{name:w.name,align:w.align,memento:k}}),C=w=>Hn(d,h,w);return A.some({lookupByName:C,footerButtons:h})};return{dom:uf('<div class="tox-dialog__footer"></div>'),components:[],behaviours:xt([$t.config({channel:`${rB}-${s}`,initialData:t,updateState:i,renderComponents:fs})])}},wf=(t,s,c)=>uc(t,s,c),Ld=(t,s,c)=>va.parts.footer(uc(t,s,c)),t1=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const i=Qo.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return O0.getField(i,s).orThunk(()=>t.getFooter().bind(h=>$t.getState(h).get()).bind(h=>h.lookupByName(s)))}else return A.none()},bI=(t,s)=>{const c=t.getRoot();return $t.getState(c).get().map(i=>wt(_r("data",i.dataValidator,s))).getOr(s)},DR=(t,s,c)=>{const i=Q=>{const te=t.getRoot();te.getSystem().isConnected()&&Q(te)},j={getData:()=>{const Q=t.getRoot(),te=Q.getSystem().isConnected()?t.getFormWrapper():Q,we=qt.getValue(te),ce=Ke(c,xe=>xe.get());return{...we,...ce}},setData:Q=>{i(te=>{const we=j.getData(),ce=rr(we,Q),xe=bI(t,ce),Ce=t.getFormWrapper();qt.setValue(Ce,xe),xs(c,(Pe,Fe)=>{uo(ce,Fe)&&Pe.set(ce[Fe])})})},setEnabled:(Q,te)=>{t1(t,Q).each(te?rn.enable:rn.disable)},focus:Q=>{t1(t,Q).each(zn.focus)},block:Q=>{if(!je(Q))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(te=>{kn(te,PA,{message:Q})})},unblock:()=>{i(Q=>{Io(Q,tT)})},showTab:Q=>{i(te=>{const we=t.getBody();$t.getState(we).get().exists(xe=>xe.isTabPanel())&&Qo.getCurrent(we).each(xe=>{ut.showTab(xe,Q)})})},redial:Q=>{i(te=>{const we=t.getId(),ce=s(Q),xe=hg(ce.internalDialog.buttons,c);te.getSystem().broadcastOn([`${KC}-${we}`],ce),te.getSystem().broadcastOn([`${oB}-${we}`],ce.internalDialog),te.getSystem().broadcastOn([`${sB}-${we}`],ce.internalDialog),te.getSystem().broadcastOn([`${rB}-${we}`],{...ce.internalDialog,buttons:xe}),j.setData(ce.initialData)})},close:()=>{i(Q=>{Io(Q,LC)})},toggleFullscreen:t.toggleFullscreen};return j},RR=(t,s,c)=>{const i=Kt("dialog"),d=t.internalDialog,g=Jp(d.title,i,c),h=pn(d.size),C=Ce=>t1(ce,Ce),w=e1(h.get()).toArray(),k=(Ce,Pe)=>(h.set(Pe.internalDialog.size),sy(Pe.internalDialog.size,Ce),A.some(Pe)),O=Xp({body:d.body,initialData:d.initialData},i,c,C),P=hg(d.buttons),H=Pw(P),j=Cn(P.length!==0,Ld({buttons:P},i,c)),Q=Ft(()=>xe,wh(()=>we,c.shared.providers,s),c.shared.getSink),te={id:i,header:g,body:O,footer:j,extraClasses:w,extraBehaviours:[$t.config({channel:`${KC}-${i}`,updateState:k,initialData:t})],extraStyles:{}},we=j0(te,Q,c),ce=(()=>{const Ce=()=>{const Fe=va.getBody(we);return Qo.getCurrent(Fe).getOr(Fe)},Pe=()=>{OR(we,h.get())};return{getId:Z(i),getRoot:Z(we),getBody:()=>va.getBody(we),getFooter:()=>va.getFooter(we),getFormWrapper:Ce,toggleFullscreen:Pe}})(),xe=DR(ce,s.redial,H);return{dialog:we,instanceApi:xe}},MR=(t,s,c,i=!1,d)=>{const g=Kt("dialog"),h=Kt("dialog-label"),C=Kt("dialog-content"),w=t.internalDialog,k=Zt=>t1(bt,Zt),O=pn(w.size),P=e1(O.get()).toArray(),H=(Zt,Pt)=>(O.set(Pt.internalDialog.size),sy(Pt.internalDialog.size,Zt),d(),A.some(Pt)),j=ws(ty({title:w.title,draggable:!0},g,h,c.shared.providers)),Q=ws($d({body:w.body,initialData:w.initialData},g,C,c,i,k)),te=hg(w.buttons),we=Pw(te),ce=Cn(te.length!==0,ws(wf({buttons:te},g,c))),xe=Ft(()=>He,{onBlock:Zt=>{Pd.block(Fe,(Pt,en)=>{const Do=j.getOpt(Fe).map(or=>Pr(or.element));return Id(Zt.message,en,c.shared.providers,Do)})},onUnblock:()=>{Pd.unblock(Fe)},onClose:()=>s.closeWindow()},c.shared.getSink),Ce="tox-dialog-inline",Pe=Mr().os,Fe=oi({dom:{tag:"div",classes:["tox-dialog",Ce,...P],attributes:{role:"dialog",...Pe.isMacOS()?{"aria-label":w.title}:{"aria-labelledby":h}}},eventOrder:{[Pu()]:[$t.name(),Ki.name()],[ti()]:["execute-on-form"],[Bu()]:["reflecting","execute-on-form"]},behaviours:xt([En.config({mode:"cyclic",onEscape:Zt=>(Io(Zt,LC),A.some(!0)),useTabstopAt:Zt=>!qC(Zt)&&(ss(Zt)!=="button"||ho(Zt,"disabled")!=="disabled"),firstTabstop:1}),$t.config({channel:`${KC}-${g}`,updateState:H,initialData:t}),zn.config({}),Qn("execute-on-form",xe.concat([cm(Nu(),(Zt,Pt)=>{En.focusIn(Zt)}),Ye(m1(),(Zt,Pt)=>{Zt.getSystem().broadcastOn([YC],{newFocus:Pt.event.newFocus})})])),Pd.config({getRoot:()=>A.some(Fe)}),Kn.config({}),D0({})]),components:[j.asSpec(),Q.asSpec(),...ce.map(Zt=>Zt.asSpec()).toArray()]}),Lt=()=>{OR(Fe,O.get())},bt={getId:Z(g),getRoot:Z(Fe),getFooter:()=>ce.map(Zt=>Zt.get(Fe)),getBody:()=>Q.get(Fe),getFormWrapper:()=>{const Zt=Q.get(Fe);return Qo.getCurrent(Zt).getOr(Zt)},toggleFullscreen:Lt},He=DR(bt,s.redial,we);return{dialog:Fe,instanceApi:He}};var Sf=tinymce.util.Tools.resolve("tinymce.util.URI");const vI=t=>{const s=h=>{t.getSystem().isConnected()&&h(t)};return{block:h=>{if(!je(h))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(C=>{kn(C,PA,{message:h})})},unblock:()=>{s(h=>{Io(h,tT)})},close:()=>{s(h=>{Io(h,LC)})},sendMessage:h=>{s(C=>{C.getSystem().broadcastOn([wO],h)})}}},yI=["insertContent","setContent","execCommand","close","block","unblock"],NR=t=>yn(t)&&yI.indexOf(t.mceAction)!==-1,CI=t=>!NR(t)&&yn(t)&&uo(t,"mceAction"),eG=(t,s,c)=>{switch(c.mceAction){case"insertContent":t.insertContent(c.content);break;case"setContent":t.setContent(c.content);break;case"execCommand":const i=Wo(c.ui)?c.ui:!1;t.execCommand(c.cmd,i,c.value);break;case"close":s.close();break;case"block":s.block(c.message);break;case"unblock":s.unblock();break}},Jo=(t,s,c,i)=>{const d=Kt("dialog"),g=Jp(t.title,d,i),h=Mn(t),C=t.buttons.bind(Ce=>Ce.length===0?A.none():A.some(Ld({buttons:Ce},d,i))),w=Be(()=>xe,wh(()=>ce,i.shared.providers,s)),k={...t.height.fold(()=>({}),Ce=>({height:Ce+"px","max-height":Ce+"px"})),...t.width.fold(()=>({}),Ce=>({width:Ce+"px","max-width":Ce+"px"}))},O=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],P=new Sf(t.url,{base_uri:new Sf(window.location.href)}),H=`${P.protocol}://${P.host}${P.port?":"+P.port:""}`,j=di(),Q=(Ce,Pe)=>A.some(Pe),te=[$t.config({channel:`${KC}-${d}`,updateState:Q,initialData:t}),Qn("messages",[Gs(()=>{const Ce=$i(ze.fromDom(window),"message",Pe=>{if(P.isSameOrigin(new Sf(Pe.raw.origin))){const Fe=Pe.raw.data;NR(Fe)?eG(c,xe,Fe):CI(Fe)&&t.onMessage(xe,Fe)}});j.set(Ce)}),pd(j.clear)]),Ki.config({channels:{[wO]:{onReceive:(Ce,Pe)=>{Cs(Ce.element,"iframe").each(Fe=>{const Lt=Fe.dom.contentWindow;io(Lt)&&Lt.postMessage(Pe,H)})}}}})],ce=j0({id:d,header:g,body:h,footer:C,extraClasses:O,extraBehaviours:te,extraStyles:k},w,i),xe=vI(ce);return{dialog:ce,instanceApi:xe}},$e=t=>{const s=t.shared;return{open:(i,d)=>{const g=()=>{va.hide(k),d()},h=ws(nw({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"cancel",t)),C=ya(),w=aa(g,s.providers),k=oi(Hi({lazySink:()=>s.getSink(),header:lc(C,w),body:Zc(i,s.providers),footer:A.some(Zr(jr([],[h.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ye(hh,g)],eventOrder:{}}));va.show(k);const O=h.get(k);zn.focus(O)}}},Dn=t=>{const s=t.shared;return{open:(i,d)=>{const g=H=>{va.hide(O),d(H)},h=ws(nw({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"submit",t)),C=nw({context:"any",name:"no",text:"No",primary:!1,buttonType:A.some("secondary"),align:"end",enabled:!0,icon:A.none()},"cancel",t),w=ya(),k=aa(()=>g(!1),s.providers),O=oi(Hi({lazySink:()=>s.getSink(),header:lc(w,k),body:Zc(i,s.providers),footer:A.some(Zr(jr([],[C,h.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ye(hh,()=>g(!1)),Ye(HC,()=>g(!0))],eventOrder:{}}));va.show(O);const P=h.get(O);zn.focus(P)}}},_o=(t,s)=>wt(_r("data",s,t)),ia=t=>gf(t,".tox-alert-dialog")||gf(t,".tox-confirm-dialog"),eu=(t,s,c)=>s&&c?[]:[xr.config({contextual:{lazyContext:()=>A.some(cc(ze.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:i=>Bp(t,i.element).map(g=>({bounds:$p(g),optScrollEnv:A.some({currentScrollTop:g.element.dom.scrollTop,scrollElmTop:wc(g.element).top})})).getOrThunk(()=>({bounds:xc(),optScrollEnv:A.none()}))})],nl=t=>{const s=t.editor,c=Pp(s),i=$e(t.backstages.dialog),d=Dn(t.backstages.dialog),g=(Q,te,we)=>{if(!Yo(te)){if(te.inline==="toolbar")return k(Q,t.backstages.popup.shared.anchors.inlineDialog(),we,te);if(te.inline==="bottom")return O(Q,t.backstages.popup.shared.anchors.inlineBottomDialog(),we,te);if(te.inline==="cursor")return k(Q,t.backstages.popup.shared.anchors.cursor(),we,te)}return w(Q,we)},h=(Q,te)=>C(Q,te),C=(Q,te)=>{const we=ce=>{const xe=Jo(ce,{closeWindow:()=>{va.hide(xe.dialog),te(xe.instanceApi)}},s,t.backstages.dialog);return va.show(xe.dialog),xe.instanceApi};return q.openUrl(we,Q)},w=(Q,te)=>{const we=(ce,xe,Ce)=>{const Pe=xe,Lt=RR({dataValidator:Ce,initialData:Pe,internalDialog:ce},{redial:q.redial,closeWindow:()=>{va.hide(Lt.dialog),te(Lt.instanceApi)}},t.backstages.dialog);return va.show(Lt.dialog),Lt.instanceApi.setData(Pe),Lt.instanceApi};return q.open(we,Q)},k=(Q,te,we,ce)=>{const xe=(Ce,Pe,Fe)=>{const Lt=_o(Pe,Fe),bt=ys(),He=t.backstages.popup.shared.header.isPositionedAtTop(),Zt={dataValidator:Fe,initialData:Lt,internalDialog:Ce},Pt=()=>bt.on(gs=>{Ir.reposition(gs),(!c||!He)&&xr.refresh(gs)}),en=MR(Zt,{redial:q.redial,closeWindow:()=>{bt.on(Ir.hide),s.off("ResizeEditor",Pt),bt.clear(),we(en.instanceApi)}},t.backstages.popup,ce.ariaAttrs,Pt),Do=oi(Ir.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:ce.persistent?{event:"doNotDismissYet"}:{},...He?{}:{fireRepositionEventInstead:{}},inlineBehaviours:xt([Qn("window-manager-inline-events",[Ye($f(),(gs,vn)=>{Io(en.dialog,hh)})]),...eu(s,c,He)]),isExtraPart:(gs,vn)=>ia(vn)}));bt.set(Do);const or=()=>{const gs=s.inline?ye():ze.fromDom(s.getContainer()),vn=cc(gs);return A.some(vn)};return Ir.showWithinBounds(Do,Cl(en.dialog),{anchor:te},or),(!c||!He)&&(xr.refresh(Do),s.on("ResizeEditor",Pt)),en.instanceApi.setData(Lt),En.focusIn(en.dialog),en.instanceApi};return q.open(xe,Q)},O=(Q,te,we,ce)=>{const xe=(Ce,Pe,Fe)=>{const Lt=_o(Pe,Fe),bt=ys(),He=t.backstages.popup.shared.header.isPositionedAtTop(),Zt={dataValidator:Fe,initialData:Lt,internalDialog:Ce},Pt=()=>bt.on(gs=>{Ir.reposition(gs),xr.refresh(gs)}),en=MR(Zt,{redial:q.redial,closeWindow:()=>{bt.on(Ir.hide),s.off("ResizeEditor ScrollWindow ElementScroll",Pt),bt.clear(),we(en.instanceApi)}},t.backstages.popup,ce.ariaAttrs,Pt),Do=oi(Ir.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:ce.persistent?{event:"doNotDismissYet"}:{},...He?{}:{fireRepositionEventInstead:{}},inlineBehaviours:xt([Qn("window-manager-inline-events",[Ye($f(),(gs,vn)=>{Io(en.dialog,hh)})]),xr.config({contextual:{lazyContext:()=>A.some(cc(ze.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:gs=>Bp(s,gs.element).map(vt=>({bounds:$p(vt),optScrollEnv:A.some({currentScrollTop:vt.element.dom.scrollTop,scrollElmTop:wc(vt.element).top})})).getOrThunk(()=>({bounds:xc(),optScrollEnv:A.none()}))})]),isExtraPart:(gs,vn)=>ia(vn)}));bt.set(Do);const or=()=>t.backstages.popup.shared.getSink().toOptional().bind(gs=>{const vn=Bp(s,gs.element),vt=15,Wt=vn.map(Nn=>$p(Nn)).getOr(xc()),Zn=cc(ze.fromDom(s.getContentAreaContainer())),yo=Zd(Zn,Wt);return A.some(kr(yo.x,yo.y,yo.width,yo.height-vt))});return Ir.showWithinBounds(Do,Cl(en.dialog),{anchor:te},or),xr.refresh(Do),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",Pt),en.instanceApi.setData(Lt),En.focusIn(en.dialog),en.instanceApi};return q.open(xe,Q)};return{open:g,openUrl:h,alert:(Q,te)=>{i.open(Q,te)},close:Q=>{Q.close()},confirm:(Q,te)=>{d.open(Q,te)}}},td=t=>{iE(t),tH(t),yZ(t)};var pg=()=>{md.add("silver",t=>{td(t);let s=()=>xc();const{dialogs:c,popups:i,renderUI:d}=bj(t,{getPopupSinkBounds:()=>s()}),g=()=>{const k=d();return Bp(t,i.getMothership().element).each(P=>{s=()=>$p(P)}),k};$v.register(t,i.backstage.shared);const h=nl({editor:t,backstages:{popup:i.backstage,dialog:c.backstage}}),C=ys(),w=()=>X7(t,{backstage:i.backstage},i.getMothership(),C);return{renderUI:g,getWindowManagerImpl:Z(h),getNotificationManagerImpl:w}})};pg()}()),nK}JY();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',"add-file":'<svg height="24" width="24"><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/></svg>',adjustments:'<svg width="24" height="24"><path d="M16 11a3 3 0 1 1 2.8-4H21v2h-2.2a3 3 0 0 1-2.8 2Zm0-2a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM3 9h8V7H3v2Zm5 10a3 3 0 1 0-2.8-4H3v2h2.2A3 3 0 0 0 8 19Zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13 0h-8v-2h8v2Z"/></svg>',"alt-text":'<svg width="24" height="24"><path d="M3 20a2 2 0 0 1-1.4-.6A2 2 0 0 1 1 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 3 4h18c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H3Zm0-2h18V6H3v12Zm1.5-3H6v-1.5h1.5V15H9v-5a1 1 0 0 0-.3-.7A1 1 0 0 0 8 9H5.5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v5ZM6 12v-1.5h1.5V12H6Z"/><path d="M11 15V9h1.3v4.5h2V15H11Zm5.8-4.5V15h1.4v-4.5h1.3V9h-4v1.5h1.3Z"/></svg>',blur:'<svg width="24" height="24"><path d="M19.3 9.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 20 9a1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 10a1 1 0 0 0-.3-.7A1 1 0 0 0 4 9a1 1 0 0 0-.7.3Zm16 6a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 16a1 1 0 0 0-.3-.7A1 1 0 0 0 4 15a1 1 0 0 0-.7.3Zm5-11A1 1 0 0 0 8 5a1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 10 5a1 1 0 0 0-.3-.7A1 1 0 0 0 9 4a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7 1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 16 5a1 1 0 0 0-.3-.7A1 1 0 0 0 15 4a1 1 0 0 0-.7.3Zm-6 16a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 9 20a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3ZM7.6 8.6A2 2 0 0 0 7 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 7 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 14a2 2 0 0 0-1.4.6Zm6-6A2 2 0 0 0 13 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 13 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 14a2 2 0 0 0-1.4.6Z"/></svg>',box:'<svg width="24" height="24"><path d="M3.8 7a1 1 0 0 0-.7.6l-.1 3V13.8a3.5 3.5 0 0 0 4 2.7c.8-.2 1.4-.5 2-1l.3-.3.3.2c.7.7 1.4 1 2.4 1.1 1.2 0 2.4-.6 3-1.6.9-1.2.8-2.8 0-4a3.7 3.7 0 0 0-2-1.2c-.4-.1-1.2-.1-1.6 0a3.4 3.4 0 0 0-1.7 1l-.3.2-.2-.1c-.4-.5-1.2-1-2-1.1-.6-.2-1.5 0-2 .2H5V9c0-1.3 0-1.3-.3-1.6a1 1 0 0 0-1-.3Zm12 2.6c-.3.2-.5.4-.6.8v.6l.9 1 .7 1v.1l-.8 1-.7 1a1 1 0 0 0 0 .7 1 1 0 0 0 1.3.6c.2 0 .3-.2 1-1l.5-.7.6.8.7.8c.4.3 1 .3 1.3 0l.2-.3a1 1 0 0 0 0-.8l-.8-1.2-.7-1a26 26 0 0 0 1.5-2 .8.8 0 0 0 .1-.4c0-.4-.1-.7-.5-.9H20c-.4 0-.5 0-1.2.8l-.7.8-.6-.7-.7-.9a1 1 0 0 0-1 0Zm-9 2 .4.1c.3.1.6.5.7.8l.1.6v.6c-.6 1-2 1.2-2.7.3-.3-.3-.3-.5-.3-1v-.5c.3-.5.7-.8 1.1-1a1.5 1.5 0 0 1 .7 0Zm5.7 0c.4 0 .8.4 1 .8l.2.6-.1.7c-.5.9-1.6 1.1-2.4.6a1.4 1.4 0 0 1-.6-1.1 1.4 1.4 0 0 1 .5-1.2 1.5 1.5 0 0 1 1.4-.4Z"/></svg>',camera:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M10 5.4a1 1 0 0 1 .8-.4h4.4a1 1 0 0 1 .8.4l1.2 1.8h2.3A2.5 2.5 0 0 1 22 9.6v8a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 4 17.6v-8a2.5 2.5 0 0 1 2.5-2.4h2.3zM11.4 7l-1.2 1.7a1 1 0 0 1-.8.5h-3a.5.5 0 0 0-.4.4v8a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.4h-2.9a1 1 0 0 1-.8-.5L14.6 7z"/><path d="M13 11.4a2 2 0 1 0 0 3.8 2 2 0 0 0 0-3.8zm-4 1.9a4 4 0 1 1 8 0 4 4 0 0 1-8 0z"/></g></svg>',caption:'<svg height="24" width="24"><path d="M6 16h8v-2H6zm10 0h2v-2h-2zM4 20a2 2 0 0 1-1.5-.6A2 2 0 0 1 2 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 4 4h16c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm0-2h16V6H4z"/></svg>',dropbox:'<svg height="24" width="24"><path clip-rule="evenodd" d="m6.4 9.3-3-2a1 1 0 0 1 0-1.6l4-2.5a1 1 0 0 1 1 0L12 5.5l3.6-2.3a1 1 0 0 1 1 0l4 2.5a1 1 0 0 1 0 1.7l-3 1.9 3 1.9a1 1 0 0 1 0 1.6l-2.9 1.9V16c0 .3-.1.6-.4.8l-4.5 3a1 1 0 0 1-1.2 0l-4.4-3a1 1 0 0 1-.5-.9v-1l-3.2-2.2a1 1 0 0 1 0-1.6zm3 0L12 7.5l2.6 1.8L12 11zM8.9 15v.4l3.3 2.3 3.4-2.3v-.2L12 13l-3.1 2zm-1-10-2 1.4 2 1.3 2-1.3zm8.2 0-2 1.4 2 1.3 2-1.3zm-2 6.9 2-1.3 2 1.3-2 1.3-2-1.3zm-8.3 0 2-1.3L10 12l-2 1.3-2-1.3z" fill-rule="evenodd"/></svg>',evernote:'<svg width="24" height="24"><path fill-rule="evenodd" d="m9.5 3-.3.1-2.6 2.6C3.8 8.5 4 8.2 4 8.7c0 1.3.3 3 .6 4.3.5 2 1.1 3.2 2 3.7l1.2.3c1 .2 1.5.2 2.2.2 1.3 0 1.7 0 2.2-.4.3-.2.3-.4.4-1a38.4 38.4 0 0 1 .3-.4l.3.1 1.8.1h1.6v-1.8H14l-.1-.2a6.8 6.8 0 0 1-.5-1c-.2-.4-.3-.6-.5-.7a.8.8 0 0 0-.5-.1.9.9 0 0 0-.8.5l-.4 1.6-.3 1.5H9.4l-2-.3a1 1 0 0 1-.1-.2A10.1 10.1 0 0 1 6 9.7v-.2h4l.5-.5V5H12c.4.2.7.7.8 1.1a1 1 0 0 0 .2.6c.2.2.3.2 1 .3 1.2 0 2 .2 2.5.6.4.2.8.7 1 1.2.3 1.2.5 4 .3 6.4 0 1.8-.4 3.4-.8 4h-.7a8 8 0 0 1-.8 0c-.2 0-.3-.3-.2-.5a.5.5 0 0 1 .4-.3h.9v-1.8H16c-.7 0-.9 0-1.2.2-.9.4-1.4 1.2-1.4 2.1l.1.4.1.2a1 1 0 0 1 .1.2c.3.7.8 1.2 1.4 1.3l1.2.1h1.2a2 2 0 0 0 1-.8 9 9 0 0 0 1.1-4.3c.2-3 0-6.3-.4-7.7A4.3 4.3 0 0 0 16 5.3a7 7 0 0 0-1.3-.2 7.2 7.2 0 0 1-.4 0 5.5 5.5 0 0 1 0-.3c-.2-.5-.6-1-1.2-1.4a3 3 0 0 0-.5-.2c-.4-.2-.5-.2-1.8-.2a26.5 26.5 0 0 0-1.3 0Zm-.8 4v.7H7.2l.7-.8.8-.7v.7Zm7 3.5c-.4 0-.7.5-.9 1v.7h.3c.7 0 1.1.2 1.5.6l.3.2.3-.6V11a1 1 0 0 0-.6-.4 2 2 0 0 0-.8 0Z" clip-rule="evenodd"/></svg>',exposure:'<svg width="24" height="24"><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H5Zm0-2h14V5L5 19Zm9.5-1v-2h-2v-1.5h2v-2H16v2h2V16h-2v2h-1.5ZM6 8.5h5V7H6v1.5Z"/></svg>',fb:'<svg width="24" height="24"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11 6.7V14H8.1v-2.5h2v-1C10 8.2 11.5 7 12.8 7H16v2.5h-2.4c-.8 0-1 .7-1 1.3v.7h3.2l-1 2.5h-2v5a7 7 0 1 0-2.8-.2Z" clip-rule="evenodd"/></svg>',flickr:'<svg width="24" height="24"><path d="M8.2 15.3c1.7 0 3.1-1.4 3.1-3.1A3.2 3.2 0 0 0 8.1 9 3.2 3.2 0 0 0 5 12.2c0 1.7 1.4 3 3.2 3Zm7.6 0c1.7 0 3.2-1.4 3.2-3.1a3.2 3.2 0 0 0-6.3 0c0 1.7 1.4 3 3.1 3Z"/></svg>',folder:'<svg width="24" height="24"><path fill-rule="evenodd" d="M5.6 6a.6.6 0 0 0-.6.6v11.2a.6.6 0 0 0 .6.6h12.8a.6.6 0 0 0 .6-.6V9a.6.6 0 0 0-.6-.6h-7.2a1 1 0 0 1-.8-.4L9 6H5.6ZM3.8 4.8A2.6 2.6 0 0 1 5.6 4h4a1 1 0 0 1 .8.4l1.3 2h6.7A2.6 2.6 0 0 1 21 9v8.8a2.6 2.6 0 0 1-2.6 2.6H5.6A2.6 2.6 0 0 1 3 17.8V6.6c0-.7.3-1.4.8-1.8Z" clip-rule="evenodd"/></svg>',"google-drive":'<svg height="24" width="24"><path clip-rule="evenodd" d="M8.7 4.5a1 1 0 0 1 .9-.5h4.8a1 1 0 0 1 .9.5l5.6 9.7a1 1 0 0 1 0 1l-2.4 4.2a1 1 0 0 1-.9.5H6.4a1 1 0 0 1-.9-.5l-2.4-4.2a1 1 0 0 1 0-1zM10.2 6l-4.5 7.7h2.5L12.7 6h-2.5zm4.2 1 4.4 7.7-1.2 2.2-4.4-7.7zM12 11.2l-1.5 2.5h3zm2.6 4.5H5.7L7 17.9h8.9l-1.3-2.2z" fill-rule="evenodd"/></svg>',"google-photos":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12.4 3c-.8 0-1.4.7-1.4 1.4v3.2a5 5 0 0 0-8 4c0 .8.6 1.4 1.4 1.4h3.2a5 5 0 0 0-1 3 5 5 0 0 0 5 5c.8 0 1.4-.6 1.4-1.4v-3.2a5 5 0 0 0 8-4c0-.8-.7-1.4-1.4-1.4h-3.2a5 5 0 0 0-4-8Zm.6 8V5a3 3 0 0 1 2.4 3 3 3 0 0 1-2.4 3Zm-2 0H5a3 3 0 0 1 3-2.4 3 3 0 0 1 3 2.4Zm2 2a3 3 0 0 0 3 2.4 3 3 0 0 0 3-2.4h-6Zm-4.4 3a3 3 0 0 1 2.4-3v6a3 3 0 0 1-2.4-3Z" clip-rule="evenodd"/></svg>',grayscale:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M12 15v2a5 5 0 0 0 0-10v2a3 3 0 1 0 0 6zm0 0a3 3 0 1 0 0-6z"/><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm7-2h7V5h-7v2a5 5 0 0 0 0 10z"/></g></svg>',huddle:'<svg height="24" width="24"><path d="M10.3 5.6V8h.8v-2l3.5 2 4.3-2.5L14.6 3l-4.3 2.6zM14.6 8v5.2l4.3-2.6V5.6L14.6 8zM6 13.3v2.5h.9v-2l3.4 2 4.3-2.5-4.3-2.6zm4.3 2.6V21l4.3-2.6v-5.1l-4.3 2.6z"/></svg>',"image-decorative":'<svg width="24" height="24"><path d="M12 10c.3 0 .5-.1.7-.3A1 1 0 0 0 13 9a1 1 0 0 0-.3-.7A1 1 0 0 0 12 8a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 1 1Zm0 6a3 3 0 0 1-1.8-.5A3 3 0 0 1 9.1 14a2 2 0 0 0-.2 0 3 3 0 0 1-2.5-1 3 3 0 0 1-.9-2.2A3 3 0 0 1 6.2 9a3.4 3.4 0 0 1-.5-1 3 3 0 0 1-.2-1 3 3 0 0 1 1-2.2A3 3 0 0 1 8.8 4H9a3 3 0 0 1 1.1-1.4A3 3 0 0 1 12 2a3 3 0 0 1 1.8.5c.5.4.9.9 1.1 1.5h.2a3 3 0 0 1 2.5.8 3 3 0 0 1 .9 2.3c0 .3 0 .7-.2 1a2.8 2.8 0 0 1-.5.9l.5 1 .2 1a3 3 0 0 1-1 2.2 3 3 0 0 1-2.4.9 1.8 1.8 0 0 0-.2 0 3 3 0 0 1-1.1 1.4 3 3 0 0 1-1.8.5Zm0 7a8.7 8.7 0 0 1 .7-3.5 9.2 9.2 0 0 1 2-2.8 9.2 9.2 0 0 1 2.8-2A8.6 8.6 0 0 1 21 14a8.6 8.6 0 0 1-.7 3.5 9.2 9.2 0 0 1-2 2.8 9.2 9.2 0 0 1-2.8 2 8.6 8.6 0 0 1-3.5.7Zm2.5-2.5a6.8 6.8 0 0 0 2.4-1.5 6.8 6.8 0 0 0 1.7-2.6c-1 .4-1.8 1-2.6 1.7a6.8 6.8 0 0 0-1.5 2.4ZM12 23a8.6 8.6 0 0 0-.7-3.5 9.2 9.2 0 0 0-2-2.9 9.2 9.2 0 0 0-2.8-1.9A8.6 8.6 0 0 0 3 14a8.7 8.7 0 0 0 .7 3.5 9.2 9.2 0 0 0 2 2.9 9.2 9.2 0 0 0 2.8 1.9 8.6 8.6 0 0 0 3.5.7Zm-2.5-2.5A6.8 6.8 0 0 1 7.2 19a6.8 6.8 0 0 1-1.6-2.6c.9.4 1.7 1 2.5 1.7a6.8 6.8 0 0 1 1.6 2.4Zm5.9-8.4c.3 0 .5-.1.8-.4.2-.2.3-.5.3-.8 0-.2 0-.4-.2-.6a1.3 1.3 0 0 0-.5-.4l-.8-.4a3 3 0 0 1-.2.5 3.8 3.8 0 0 1-.2.5 2.5 2.5 0 0 1-.3.4 4 4 0 0 1-.4.4l.8.6a.8.8 0 0 0 .3.1h.4ZM15 8.5l.8-.4.5-.4.2-.6a1.1 1.1 0 0 0-.3-.8 1 1 0 0 0-.8-.4 1.1 1.1 0 0 0-.7.2l-.8.6.4.4.3.4a3.9 3.9 0 0 1 .4 1Zm-4-2.3a2.7 2.7 0 0 1 1-.2 2.7 2.7 0 0 1 1 .2l.2-1.1c0-.3-.1-.6-.4-.8A1.2 1.2 0 0 0 12 4c-.3 0-.6.1-.8.3-.3.2-.4.5-.3.8v1.1Zm1 7.8c.3 0 .6-.1.8-.3.3-.2.4-.5.3-.8v-1.1a2.7 2.7 0 0 1-1.1.2 2.7 2.7 0 0 1-1-.2l-.2 1.1c0 .3.1.6.4.8.2.2.5.3.8.3ZM9 8.5a3 3 0 0 1 .4-1l.3-.4.4-.4-.8-.6A.9.9 0 0 0 9 6a1.2 1.2 0 0 0-.3 0c-.4 0-.6 0-.9.3a1.1 1.1 0 0 0-.3.8c0 .2 0 .4.2.6l.5.4.9.4Zm-.3 3.6H9l.3-.2.8-.6a5.5 5.5 0 0 1-.4-.4 2.1 2.1 0 0 1-.3-.4 3.8 3.8 0 0 1-.2-.5 3 3 0 0 1-.1-.5l-1 .4-.4.4a1.1 1.1 0 0 0-.2.6c0 .3.2.6.4.8.2.2.4.4.7.4Z"/></svg>',"image-enhancements":'<svg height="24" width="24"><path d="M5.3 21a2 2 0 0 1-1.5-.6 2 2 0 0 1-.6-1.4V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5.2 3H13v2H5.2v14h14v-8h2v8c0 .6-.1 1-.5 1.4a2 2 0 0 1-1.4.6z"/><path d="M11 9a4 4 0 0 0 4 4 4 4 0 0 0-4 4 4 4 0 0 0-4-4 4 4 0 0 0 4-4zm5.5-6c.2 2.1 2.2 4.1 4.5 4.5-2.3.4-4.3 2.4-4.5 4.5A5.2 5.2 0 0 0 12 7.5 5.2 5.2 0 0 0 16.5 3z"/></svg>',instagram:'<svg height="24" width="24"><path clip-rule="evenodd" d="M10.1 9a4 4 0 1 1 4.4 6.6A4 4 0 0 1 10.1 9zm2.2 1.3a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" fill-rule="evenodd"/><path d="M16 9.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6z"/><path clip-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3zm3-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z" fill-rule="evenodd"/></svg>',onedrive:'<svg height="24" width="24"><path d="M4 13.7h1zm16 .7h-1zm-11.7-4A4.4 4.4 0 0 1 12.1 8V6a6.4 6.4 0 0 0-5.6 3.4l1.8 1zM12.1 8c2 0 3.6 1.4 4 2.8l2-.5A6.3 6.3 0 0 0 12 6v2zm8.1 6.8-9.8-5.5-1 1.8 9.8 5.5 1-1.8zm-9.8-5.5A5 5 0 0 0 3 13.7h2A3 3 0 0 1 9.5 11l1-1.8zM3 13.7a5 5 0 0 0 1 2.8l1.5-1.1a3 3 0 0 1-.5-1.7zm15.8 1.6a2.3 2.3 0 0 1-2 1.4v2a4.3 4.3 0 0 0 3.9-2.6zm-2 1.4H8v2h8.7zm-8.8 0a3 3 0 0 1-2.5-1.3L4 16.5a5 5 0 0 0 4 2.2v-2zm12.7-.6c.2-.6.3-1.1.3-1.7h-2c0 .3 0 .6-.2.9zm.3-1.7c0-3-3.1-5.1-6-4l.8 1.9a2.3 2.3 0 0 1 3.2 2h2zm-6-4L4.4 15l.8 1.9 10.7-4.6-.7-1.8z"/></svg>',"revert-changes":'<svg height="24" width="24"><path d="m8.9 18.8.4 3.2H13v-2h-2v-2.6a4.6 4.6 0 0 1-1.6-.6 5.9 5.9 0 0 1-1.3-1l-2.5 1-1-1.7 2.2-1.6a4 4 0 0 1-.2-.7 5.9 5.9 0 0 1 0-.8v-.8l.2-.8-2.2-1.6 1-1.7 2.5 1a6 6 0 0 1 1.2-.9l1.4-.6.4-2.6h2l.3 2.6A5.6 5.6 0 0 1 16 8.2l2.5-1 1 1.6-2.2 1.7.2.7v.8a5 5 0 0 1 0 1h2a2.6 2.6 0 0 0 0-.5V11.3l2.6-2-2.8-4.7-3 1.3a8.2 8.2 0 0 0-.5-.4 3.8 3.8 0 0 0-.6-.3L14.8 2H9.3l-.4 3.2a5 5 0 0 0-1.2.7l-3-1.3L2 9.4l2.6 2V12.6l-2.6 2 2.7 4.7 3-1.3a8 8 0 0 0 1.2.7z"/><path d="m14.5 20.3 2.1-2-2.1-2.2 1.4-1.4 2.1 2.1 2.1-2 1.4 1.3-2 2.1 2 2.1-1.4 1.4-2.1-2-2.1 2zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>',saturation:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 20.5a6 6 0 1 1-5.9-10.2 6 6 0 1 1 11.8 0A6 6 0 1 1 12 20.5Zm-1.1-7.7a6 6 0 0 0-.2.3 4.3 4.3 0 0 1-2-1.3c.9.1 1.6.5 2.2 1Zm2.4.3a6 6 0 0 0-.2-.3 4.3 4.3 0 0 1 2.2-1 4.3 4.3 0 0 1-2 1.3ZM12.2 15a6.3 6.3 0 0 1-.4 0 4.3 4.3 0 0 0 .2 2.5 4.3 4.3 0 0 0 .2-2.5Zm.9 4.2a6 6 0 0 0 .8-4.5 6 6 0 0 0 3.4-2.8 4.3 4.3 0 0 1-1.3 8.4 4.3 4.3 0 0 1-2.9-1.1Zm-2.2 0a4.3 4.3 0 1 1-4.2-7.3 6 6 0 0 0 3.4 2.8 6 6 0 0 0 .8 4.5Zm-3-9.2a4.3 4.3 0 1 1 8.3 0 6 6 0 0 0-4.2 1.5A6 6 0 0 0 7.8 10Z" clip-rule="evenodd"/></svg>',"transform-image":'<svg height="24" width="24"><path d="M3 21v-6h2V9H3V3h6v2h6V3h6v6h-2v6h2v6h-6v-2H9v2zm6-4h6v-2h2V9h-2V7H9v2H7v6h2zM5 7h2V5H5zm12 0h2V5h-2zm0 12h2v-2h-2zM5 19h2v-2H5z"/></svg>',vibrance:'<svg height="24" width="24"><path clip-rule="evenodd" d="M12 20 22 4H2zm2.6-8 1.3-2H8l1.3 2h5.2zm-1.2 2h-2.8l1.4 2.2zm5-8L17 8H7L5.6 6h12.8z" fill-rule="evenodd"/></svg>',vk:'<svg width="24" height="24"><path fill-rule="evenodd" d="M14.8 17.4a2 2 0 0 1-1.3.7 8 8 0 0 1-7.7-3.6c-1.4-2-2.2-4.4-2.6-5.7L3 8.6A2 2 0 0 1 5 6h2.5c.4 0 .8.1 1.2.4A2 2 0 0 1 9.8 6h3.5a2 2 0 0 1 1.4.6 2 2 0 0 1 1.5-.6h2.4a2 2 0 0 1 2 2.5c-.5 1.5-1.2 2.6-1.8 3.6a12.5 12.5 0 0 1 2 3.2A2 2 0 0 1 19 18h-2.6a2 2 0 0 1-1.3-.5 6.9 6.9 0 0 1-.3-.2Zm.5-2.5-1.2-1a3 3 0 0 0-.8-.2v2.4h-1.7a5.6 5.6 0 0 1-.3 0c-3-.7-4.7-3.7-5.6-6.1A38.1 38.1 0 0 1 5 8.1V8h2.5a80.5 80.5 0 0 1 1.2 2.5c.6 1.2 1.2 2 2 2.1V9l-.9-1h3.5v4.1a5 5 0 0 0 .4-.3c.7-.7 1.2-1.4 1.6-2.2l.2-.3.7-1.3h2.4a8.5 8.5 0 0 1-.8 2l-1.3 2-.3.3a10.5 10.5 0 0 1 2.8 3.8h-2.6l-.8-.9a20.6 20.6 0 0 0-.3-.3Z" clip-rule="evenodd"/></svg>',warmth:'<svg height="24" width="24"><path d="M12 21.1c-1.4 0-2.6-.5-3.6-1.5s-1.5-2.1-1.5-3.5c0-.8.2-1.6.6-2.2A5 5 0 0 1 8.9 12v-6c0-.8.3-1.5 1-2.1a2.9 2.9 0 0 1 2-.9c.9 0 1.6.3 2.2.9.5.6.8 1.3.8 2.1v6a5 5 0 0 1 1.5 1.8A4.9 4.9 0 0 1 17 16c0 1.4-.5 2.6-1.4 3.5s-2.2 1.5-3.6 1.5zm-3-5h6c0-.5-.2-1-.4-1.4a3 3 0 0 0-.9-1l-.8-.6v-7a1 1 0 0 0-.3-.7A1 1 0 0 0 12 5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v7l-.8.6a2.9 2.9 0 0 0-.9 1 3 3 0 0 0-.3 1.4z"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});var sK={},rK={},cK;function QY(){return cK||(cK=1,function(){var an=tinymce.util.Tools.resolve("tinymce.ModelManager");const Co=(l,m,p)=>{var v;return p(l,m.prototype)?!0:((v=l.constructor)===null||v===void 0?void 0:v.name)===m.name},Un=l=>{const m=typeof l;return l===null?"null":m==="object"&&Array.isArray(l)?"array":m==="object"&&Co(l,String,(p,v)=>v.isPrototypeOf(p))?"string":m},mo=l=>m=>Un(m)===l,oo=l=>m=>typeof m===l,In=l=>m=>l===m,fn=mo("string"),je=mo("object"),yn=mo("array"),Ro=In(null),Ko=oo("boolean"),jo=In(void 0),Wo=l=>l==null,Yo=l=>!Wo(l),Ps=oo("function"),io=oo("number"),Rt=()=>{},jn=(l,m)=>(...p)=>l(m.apply(null,p)),Ze=(l,m)=>p=>l(m(p)),oe=l=>()=>l,it=l=>l,Zo=(l,m)=>l===m;function mt(l,...m){return(...p)=>{const v=m.concat(p);return l.apply(null,v)}}const Z=l=>m=>!l(m),Mt=l=>()=>{throw new Error(l)},ln=l=>l(),On=oe(!1),De=oe(!0);class ie{constructor(m,p){this.tag=m,this.value=p}static some(m){return new ie(!0,m)}static none(){return ie.singletonNone}fold(m,p){return this.tag?p(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?ie.some(m(this.value)):ie.none()}bind(m){return this.tag?m(this.value):ie.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:ie.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return Yo(m)?ie.some(m):ie.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ie.singletonNone=new ie(!1);const Go=Array.prototype.slice,eo=Array.prototype.indexOf,Bt=Array.prototype.push,A=(l,m)=>eo.call(l,m),To=(l,m)=>A(l,m)>-1,yt=(l,m)=>{for(let p=0,v=l.length;p<v;p++){const T=l[p];if(m(T,p))return!0}return!1},Mo=(l,m)=>{const p=[];for(let v=0;v<l;v++)p.push(m(v));return p},dn=(l,m)=>{const p=l.length,v=new Array(p);for(let T=0;T<p;T++){const D=l[T];v[T]=m(D,T)}return v},Qe=(l,m)=>{for(let p=0,v=l.length;p<v;p++){const T=l[p];m(T,p)}},fo=(l,m)=>{for(let p=l.length-1;p>=0;p--){const v=l[p];m(v,p)}},Bs=(l,m)=>{const p=[],v=[];for(let T=0,D=l.length;T<D;T++){const I=l[T];(m(I,T)?p:v).push(I)}return{pass:p,fail:v}},St=(l,m)=>{const p=[];for(let v=0,T=l.length;v<T;v++){const D=l[v];m(D,v)&&p.push(D)}return p},Tn=(l,m,p)=>(fo(l,(v,T)=>{p=m(p,v,T)}),p),Re=(l,m,p)=>(Qe(l,(v,T)=>{p=m(p,v,T)}),p),ot=(l,m,p)=>{for(let v=0,T=l.length;v<T;v++){const D=l[v];if(m(D,v))return ie.some(D);if(p(D,v))break}return ie.none()},F=(l,m)=>ot(l,m,On),_s=(l,m)=>{for(let p=0,v=l.length;p<v;p++){const T=l[p];if(m(T,p))return ie.some(p)}return ie.none()},to=l=>{const m=[];for(let p=0,v=l.length;p<v;++p){if(!yn(l[p]))throw new Error("Arr.flatten item "+p+" was not an array, input: "+l);Bt.apply(m,l[p])}return m},wo=(l,m)=>to(dn(l,m)),No=(l,m)=>{for(let p=0,v=l.length;p<v;++p){const T=l[p];if(m(T,p)!==!0)return!1}return!0},Ic=l=>{const m=Go.call(l,0);return m.reverse(),m},We=(l,m)=>{const p={};for(let v=0,T=l.length;v<T;v++){const D=l[v];p[String(D)]=m(D,v)}return p},Tt=(l,m)=>{const p=Go.call(l,0);return p.sort(m),p},et=(l,m)=>m>=0&&m<l.length?ie.some(l[m]):ie.none(),fe=l=>et(l,0),bo=l=>et(l,l.length-1),ko=(l,m)=>{for(let p=0;p<l.length;p++){const v=m(l[p],p);if(v.isSome())return v}return ie.none()},jt=Object.keys,hs=Object.hasOwnProperty,Wn=(l,m)=>{const p=jt(l);for(let v=0,T=p.length;v<T;v++){const D=p[v],I=l[D];m(I,D)}},Xs=(l,m)=>Ho(l,(p,v)=>({k:v,v:m(p,v)})),Ho=(l,m)=>{const p={};return Wn(l,(v,T)=>{const D=m(v,T);p[D.k]=D.v}),p},As=l=>(m,p)=>{l[p]=m},Oc=(l,m,p,v)=>{Wn(l,(T,D)=>{(m(T,D)?p:v)(T,D)})},Js=(l,m)=>{const p={};return Oc(l,m,As(p),Rt),p},ps=(l,m)=>{const p=[];return Wn(l,(v,T)=>{p.push(m(v,T))}),p},os=l=>ps(l,it),Nr=(l,m)=>xs(l,m)?ie.from(l[m]):ie.none(),xs=(l,m)=>hs.call(l,m),Ke=(l,m)=>xs(l,m)&&l[m]!==void 0&&l[m]!==null,Gt=l=>{for(const m in l)if(hs.call(l,m))return!1;return!0},Ht=typeof window<"u"?window:Function("return this;")(),Jt=(l,m)=>{let p=m??Ht;for(let v=0;v<l.length&&p!==void 0&&p!==null;++v)p=p[l[v]];return p},lo=(l,m)=>{const p=l.split(".");return Jt(p,m)},bs=(l,m)=>lo(l,m),ur=(l,m)=>{const p=bs(l,m);if(p==null)throw new Error(l+" not available on this browser");return p},Yn=Object.getPrototypeOf,Er=l=>ur("HTMLElement",l),Ct=l=>{const m=lo("ownerDocument.defaultView",l);return je(l)&&(Er(m).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(Yn(l).constructor.name))},uo=8,dr=9,vr=11,dc=1,Dc=3,us=l=>l.dom.nodeName.toLowerCase(),Qr=l=>l.dom.nodeType,mc=l=>m=>Qr(m)===l,is=l=>Qr(l)===uo||us(l)==="#comment",Cn=l=>Ls(l)&&Ct(l.dom),Ls=mc(dc),qr=mc(Dc),Ca=mc(dr),ci=mc(vr),mr=l=>m=>Ls(m)&&us(m)===l,vs=(l,m,p)=>{if(fn(p)||Ko(p)||io(p))l.setAttribute(m,p+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",p,":: Element ",l),new Error("Attribute value was not simple")},$s=(l,m,p)=>{vs(l.dom,m,p)},ec=(l,m)=>{const p=l.dom;Wn(m,(v,T)=>{vs(p,T,v)})},Rc=(l,m)=>{Wn(m,(p,v)=>{p.fold(()=>{re(l,v)},T=>{vs(l.dom,v,T)})})},Qs=(l,m)=>{const p=l.dom.getAttribute(m);return p===null?void 0:p},le=(l,m)=>ie.from(Qs(l,m)),re=(l,m)=>{l.dom.removeAttribute(m)},Ne=l=>Re(l.dom.attributes,(m,p)=>(m[p.name]=p.value,m),{}),Ve=(l,m)=>{const v=(m||document).createElement("div");if(v.innerHTML=l,!v.hasChildNodes()||v.childNodes.length>1){const T="HTML does not have a single root node";throw console.error(T,l),new Error(T)}return so(v.childNodes[0])},xn=(l,m)=>{const v=(m||document).createElement(l);return so(v)},Fn=(l,m)=>{const v=(m||document).createTextNode(l);return so(v)},so=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},st={fromHtml:Ve,fromTag:xn,fromText:Fn,fromDom:so,fromPoint:(l,m,p)=>ie.from(l.dom.elementFromPoint(m,p)).map(so)},ze=(l,m)=>{const p=l.dom;if(p.nodeType!==dc)return!1;{const v=p;if(v.matches!==void 0)return v.matches(m);if(v.msMatchesSelector!==void 0)return v.msMatchesSelector(m);if(v.webkitMatchesSelector!==void 0)return v.webkitMatchesSelector(m);if(v.mozMatchesSelector!==void 0)return v.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},de=l=>l.nodeType!==dc&&l.nodeType!==dr&&l.nodeType!==vr||l.childElementCount===0,he=(l,m)=>{const p=m===void 0?document:m.dom;return de(p)?[]:dn(p.querySelectorAll(l),st.fromDom)},ct=(l,m)=>{const p=m===void 0?document:m.dom;return de(p)?ie.none():ie.from(p.querySelector(l)).map(st.fromDom)},pt=(l,m)=>l.dom===m.dom,zt=(l,m)=>{const p=l.dom,v=m.dom;return p===v?!1:p.contains(v)},gn=ze,hn=l=>st.fromDom(l.dom.ownerDocument),on=l=>Ca(l)?l:hn(l),Rn=l=>st.fromDom(on(l).dom.documentElement),Ln=l=>st.fromDom(on(l).dom.defaultView),Po=l=>ie.from(l.dom.parentNode).map(st.fromDom),Hs=l=>ie.from(l.dom.parentElement).map(st.fromDom),ss=(l,m)=>{const p=Ps(m)?m:On;let v=l.dom;const T=[];for(;v.parentNode!==null&&v.parentNode!==void 0;){const D=v.parentNode,I=st.fromDom(D);if(T.push(I),p(I)===!0)break;v=D}return T},la=l=>ie.from(l.dom.previousSibling).map(st.fromDom),vc=l=>ie.from(l.dom.nextSibling).map(st.fromDom),Xn=l=>dn(l.dom.childNodes,st.fromDom),vo=(l,m)=>{const p=l.dom.childNodes;return ie.from(p[m]).map(st.fromDom)},So=l=>vo(l,0),tc=(l,m)=>{Po(l).each(v=>{v.dom.insertBefore(m.dom,l.dom)})},nc=(l,m)=>{vc(l).fold(()=>{Po(l).each(T=>{Fs(T,m)})},v=>{tc(v,m)})},yc=(l,m)=>{So(l).fold(()=>{Fs(l,m)},v=>{l.dom.insertBefore(m.dom,v.dom)})},Fs=(l,m)=>{l.dom.appendChild(m.dom)},Su=(l,m,p)=>{vo(l,p).fold(()=>{Fs(l,m)},v=>{tc(v,m)})},Ba=(l,m)=>{tc(l,m),Fs(m,l)},Ol=(l,m)=>{Qe(m,(p,v)=>{const T=v===0?l:m[v-1];nc(T,p)})},Bo=(l,m)=>{Qe(m,p=>{Fs(l,p)})},ai=l=>{l.dom.textContent="",Qe(Xn(l),m=>{er(m)})},er=l=>{const m=l.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},Dl=l=>{const m=Xn(l);m.length>0&&Ol(l,m),er(l)},$a=(l,m)=>st.fromDom(l.dom.cloneNode(m)),ii=l=>$a(l,!1),oc=l=>$a(l,!0),ol=(l,m)=>{const p=st.fromTag(m),v=Ne(l);return ec(p,v),p},Fa=(l,m)=>{const p=ol(l,m),v=Xn(oc(l));return Bo(p,v),p},sl=(l,m)=>{const p=ol(l,m);nc(l,p);const v=Xn(l);return Bo(p,v),er(l),p},zi=["tfoot","thead","tbody","colgroup"],xu=l=>To(zi,l),Lr=(l,m)=>({rows:l,columns:m}),li=(l,m)=>({row:l,column:m}),Vi=(l,m,p)=>({element:l,rowspan:m,colspan:p}),rl=(l,m,p,v)=>({element:l,rowspan:m,colspan:p,isNew:v}),Rl=(l,m,p,v,T,D)=>({element:l,rowspan:m,colspan:p,row:v,column:T,isLocked:D}),Ia=(l,m,p)=>({element:l,cells:m,section:p}),Or=(l,m,p,v)=>({element:l,cells:m,section:p,isNew:v}),Dr=(l,m,p)=>({element:l,isNew:m,isLocked:p}),jc=(l,m,p,v)=>({element:l,cells:m,section:p,isNew:v}),cl=(l,m,p,v)=>({startRow:l,startCol:m,finishRow:p,finishCol:v}),al=(l,m,p)=>({element:l,colspan:m,column:p}),Cc=(l,m)=>({element:l,columns:m}),U=l=>ci(l)&&Yo(l.dom.host),se=l=>st.fromDom(l.dom.getRootNode()),ye=l=>U(l)?l:st.fromDom(on(l).dom.body),Ge=l=>{const m=se(l);return U(m)?ie.some(m):ie.none()},Et=l=>st.fromDom(l.dom.host),Xe=l=>{if(Yo(l.target)){const m=st.fromDom(l.target);if(Ls(m)&&cn(m)&&l.composed&&l.composedPath){const p=l.composedPath();if(p)return fe(p)}}return ie.from(l.target)},cn=l=>Yo(l.dom.shadowRoot),ho=l=>{const m=qr(l)?l.dom.parentNode:l.dom;if(m==null||m.ownerDocument===null)return!1;const p=m.ownerDocument;return Ge(st.fromDom(m)).fold(()=>p.body.contains(m),Ze(ho,Et))},Gn=()=>$(st.fromDom(document)),$=l=>{const m=l.dom.body;if(m==null)throw new Error("Body is not available yet");return st.fromDom(m)},V=(l,m,p)=>St(ss(l,p),m),ue=(l,m)=>St(Xn(l),m),Ae=(l,m)=>{let p=[];return Qe(Xn(l),v=>{m(v)&&(p=p.concat([v])),p=p.concat(Ae(v,m))}),p},nn=(l,m,p)=>V(l,v=>ze(v,m),p),Nt=(l,m)=>ue(l,p=>ze(p,m)),es=(l,m)=>he(m,l);var Hr=(l,m,p,v,T)=>l(p,v)?ie.some(p):Ps(T)&&T(p)?ie.none():m(p,v,T);const at=(l,m,p)=>{let v=l.dom;const T=Ps(p)?p:On;for(;v.parentNode;){v=v.parentNode;const D=st.fromDom(v);if(m(D))return ie.some(D);if(T(D))break}return ie.none()},Lc=(l,m,p)=>Hr((T,D)=>D(T),at,l,m,p),Es=(l,m)=>{const p=T=>m(st.fromDom(T));return F(l.dom.childNodes,p).map(st.fromDom)},ki=(l,m)=>{const p=v=>{for(let T=0;T<v.childNodes.length;T++){const D=st.fromDom(v.childNodes[T]);if(m(D))return ie.some(D);const I=p(v.childNodes[T]);if(I.isSome())return I}return ie.none()};return p(l.dom)},yr=(l,m,p)=>at(l,v=>ze(v,m),p),xo=(l,m)=>Es(l,p=>ze(p,m)),Gc=(l,m)=>ct(m,l),sc=(l,m,p)=>Hr((T,D)=>ze(T,D),yr,l,m,p),qc=(l,m,p=Zo)=>l.exists(v=>p(v,m)),Pr=l=>{const m=[],p=v=>{m.push(v)};for(let v=0;v<l.length;v++)l[v].each(p);return m},il=(l,m)=>l!=null?m(l):ie.none(),Nm=(l,m)=>l?ie.some(m):ie.none(),xf=(l,m)=>l.substring(m),Zs=(l,m,p)=>m===""||l.length>=m.length&&l.substr(p,p+m.length)===m,ll=(l,m)=>wc(l,m)?xf(l,m.length):l,rc=(l,m,p=0,v)=>{const T=l.indexOf(m,p);return T!==-1?jo(v)?!0:T+m.length<=v:!1},wc=(l,m)=>Zs(l,m,0),ua=(l,m)=>Zs(l,m,l.length-m.length),Y=(l=>m=>m.replace(l,""))(/^\s+|\s+$/g),ee=l=>l.length>0,ke=l=>{const m=parseFloat(l);return isNaN(m)?ie.none():ie.some(m)},tt=l=>l.style!==void 0&&Ps(l.style.getPropertyValue),wn=(l,m,p)=>{if(!fn(p))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",p,":: Element ",l),new Error("CSS value must be a string: "+p);tt(l)&&l.style.setProperty(m,p)},$o=(l,m)=>{tt(l)&&l.style.removeProperty(m)},po=(l,m,p)=>{const v=l.dom;wn(v,m,p)},Is=(l,m)=>{const p=l.dom;Wn(m,(v,T)=>{wn(p,T,v)})},zr=(l,m)=>{const p=l.dom,T=window.getComputedStyle(p).getPropertyValue(m);return T===""&&!ho(l)?wa(p,m):T},wa=(l,m)=>tt(l)?l.style.getPropertyValue(m):"",Kc=(l,m)=>{const p=l.dom,v=wa(p,m);return ie.from(v).filter(T=>T.length>0)},sr=(l,m)=>{const p=l.dom;$o(p,m),qc(le(l,"style").map(Y),"")&&re(l,"style")},Rr=(l,m)=>{const p=l.dom,v=m.dom;tt(p)&&tt(v)&&(v.style.cssText=p.style.cssText)},Kr=(l,m,p=0)=>le(l,m).map(v=>parseInt(v,10)).getOr(p),Hc=(l,m)=>Kr(l,m,1),Tr=l=>mr("col")(l)?Kr(l,"span",1)>1:Hc(l,"colspan")>1,Sc=l=>Hc(l,"rowspan")>1,Ts=(l,m)=>parseInt(zr(l,m),10),ul=oe(10),Pm=oe(10),su=(l,m)=>Hd(l,m,De),Hd=(l,m,p)=>wo(Xn(l),v=>ze(v,m)?p(v)?[v]:[]:Hd(v,m,p)),zd=(l,m,p=On)=>{if(p(m))return ie.none();if(To(l,us(m)))return ie.some(m);const v=T=>ze(T,"table")||p(T);return yr(m,l.join(","),v)},cd=(l,m)=>zd(["td","th"],l,m),ad=l=>su(l,"th,td"),_i=l=>ze(l,"colgroup")?Nt(l,"col"):wo(Nl(l),m=>Nt(m,"col")),Sa=(l,m)=>sc(l,"table",m),Sh=l=>su(l,"tr"),Nl=l=>Sa(l).fold(oe([]),m=>Nt(m,"colgroup")),Ef=(l,m)=>dn(l,p=>{if(us(p)==="colgroup"){const v=dn(_i(p),T=>{const D=Kr(T,"span",1);return Vi(T,1,D)});return Ia(p,v,"colgroup")}else{const v=dn(ad(p),T=>{const D=Kr(T,"rowspan",1),I=Kr(T,"colspan",1);return Vi(T,D,I)});return Ia(p,v,m(p))}}),Vd=l=>Po(l).map(m=>{const p=us(m);return xu(p)?p:"tbody"}).getOr("tbody"),vg=l=>{const m=Sh(l),v=[...Nl(l),...m];return Ef(v,Vd)},Tf=(l,m)=>Ef(l,()=>m),Ud=l=>{let m=!1,p;return(...v)=>(m||(m=!0,p=l.apply(null,v)),p)},kf=(l,m,p,v)=>{const T=l.isiOS()&&/ipad/i.test(p)===!0,D=l.isiOS()&&!T,I=l.isiOS()||l.isAndroid(),G=I||v("(pointer:coarse)"),K=T||!D&&I&&v("(min-device-width:768px)"),pe=D||I&&!K,_e=m.isSafari()&&l.isiOS()&&/safari/i.test(p)===!1,ft=!pe&&!K&&!_e;return{isiPad:oe(T),isiPhone:oe(D),isTablet:oe(K),isPhone:oe(pe),isTouch:oe(G),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:oe(_e),isDesktop:oe(ft)}},yg=(l,m)=>{for(let p=0;p<l.length;p++){const v=l[p];if(v.test(m))return v}},id=(l,m)=>{const p=yg(l,m);if(!p)return{major:0,minor:0};const v=T=>Number(m.replace(p,"$"+T));return ld(v(1),v(2))},Cg=(l,m)=>{const p=String(m).toLowerCase();return l.length===0?me():id(l,p)},me=()=>ld(0,0),ld=(l,m)=>({major:l,minor:m}),La={nu:ld,detect:Cg,unknown:me},r1=(l,m)=>ko(m.brands,p=>{const v=p.brand.toLowerCase();return F(l,T=>{var D;return v===((D=T.brand)===null||D===void 0?void 0:D.toLowerCase())}).map(T=>({current:T.name,version:La.nu(parseInt(p.version,10),0)}))}),xh=(l,m)=>{const p=String(m).toLowerCase();return F(l,v=>v.search(p))},Eu=(l,m)=>xh(l,m).map(p=>{const v=La.detect(p.versionRegexes,m);return{current:p.name,version:v}}),ns=(l,m)=>xh(l,m).map(p=>{const v=La.detect(p.versionRegexes,m);return{current:p.name,version:v}}),Mr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Yc=l=>m=>rc(m,l),ru=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>rc(l,"edge/")&&rc(l,"chrome")&&rc(l,"safari")&&rc(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Mr],search:l=>rc(l,"chrome")&&!rc(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>rc(l,"msie")||rc(l,"trident")},{name:"Opera",versionRegexes:[Mr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Yc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Yc("firefox")},{name:"Safari",versionRegexes:[Mr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(rc(l,"safari")||rc(l,"mobile/"))&&rc(l,"applewebkit")}],wg=[{name:"Windows",search:Yc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>rc(l,"iphone")||rc(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Yc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Yc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Yc("linux"),versionRegexes:[]},{name:"Solaris",search:Yc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Yc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Yc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ud={browsers:oe(ru),oses:oe(wg)},xa="Edge",_f="Chromium",Af="IE",Tu="Opera",ku="Firefox",Bm="Safari",Ai=()=>$m({current:void 0,version:La.unknown()}),$m=l=>{const m=l.current,p=l.version,v=T=>()=>m===T;return{current:m,version:p,isEdge:v(xa),isChromium:v(_f),isIE:v(Af),isOpera:v(Tu),isFirefox:v(ku),isSafari:v(Bm)}},zc={unknown:Ai,nu:$m},_u="Windows",dl="iOS",Ea="Android",dd="Linux",c1="macOS",Of="Solaris",Pl="FreeBSD",Wd="ChromeOS",Eh=()=>Df({current:void 0,version:La.unknown()}),Df=l=>{const m=l.current,p=l.version,v=T=>()=>m===T;return{current:m,version:p,isWindows:v(_u),isiOS:v(dl),isAndroid:v(Ea),isMacOS:v(c1),isLinux:v(dd),isSolaris:v(Of),isFreeBSD:v(Pl),isChromeOS:v(Wd)}},Th={unknown:Eh,nu:Df},_h={detect:(l,m,p)=>{const v=ud.browsers(),T=ud.oses(),D=m.bind(K=>r1(v,K)).orThunk(()=>Eu(v,l)).fold(zc.unknown,zc.nu),I=ns(T,l).fold(Th.unknown,Th.nu),G=kf(I,D,l,p);return{browser:D,os:I,deviceType:G}}},Bl=l=>window.matchMedia(l).matches;let Sg=Ud(()=>_h.detect(window.navigator.userAgent,ie.from(window.navigator.userAgentData),Bl));const ml=()=>Sg(),kr=(l,m)=>{const p=(G,K)=>{if(!io(K)&&!K.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+K);const pe=G.dom;tt(pe)&&(pe.style[l]=K+"px")},v=G=>{const K=m(G);if(K<=0||K===null){const pe=zr(G,l);return parseFloat(pe)||0}return K},T=v,D=(G,K)=>Re(K,(pe,_e)=>{const ft=zr(G,_e),Ut=ft===void 0?0:parseInt(ft,10);return isNaN(Ut)?pe:pe+Ut},0);return{set:p,get:v,getOuter:T,aggregate:D,max:(G,K,pe)=>{const _e=D(G,pe);return K>_e?K-_e:0}}},cc=(l,m)=>ke(l).getOr(m),ui=(l,m,p)=>cc(zr(l,m),p),Zd=(l,m,p,v)=>{const T=ui(l,`padding-${p}`,0),D=ui(l,`padding-${v}`,0),I=ui(l,`border-${p}-width`,0),G=ui(l,`border-${v}-width`,0);return m-T-D-I-G},jd=(l,m)=>{const p=l.dom,v=p.getBoundingClientRect().width||p.offsetWidth;return Zd(l,v,"left","right")},xc=l=>ui(l,"height",l.dom.offsetHeight),pn=l=>ui(l,"width",l.dom.offsetWidth),xg=l=>jd(l),fl=kr("width",l=>l.dom.offsetWidth),di=l=>fl.get(l),ys=l=>fl.getOuter(l),md=xg,Fm=pn,Im=(l,m,p)=>{const v=l.cells,T=v.slice(0,m),D=v.slice(m),I=T.concat(p).concat(D);return Vr(l,I)},Ah=(l,m,p)=>Im(l,m,[p]),ro=(l,m,p)=>{const v=l.cells;v[m]=p},Vr=(l,m)=>jc(l.element,m,l.section,l.isNew),Gd=(l,m)=>{const p=l.cells,v=dn(p,m);return jc(l.element,v,l.section,l.isNew)},Xa=(l,m)=>l.cells[m],Ta=(l,m)=>Xa(l,m).element,mi=l=>l.cells.length,Mc=l=>{const m=Bs(l,p=>p.section==="colgroup");return{rows:m.fail,cols:m.pass}},Ha=(l,m,p)=>{const v=dn(l.cells,p);return jc(m(l.element),v,l.section,!0)},Oi="data-snooker-locked-cols",qd=l=>le(l,Oi).bind(m=>ie.from(m.match(/\d+/g))).map(m=>We(m,De)),Cr=l=>{const m=Re(Mc(l).rows,(v,T)=>(Qe(T.cells,(D,I)=>{D.isLocked&&(v[I]=!0)}),v),{}),p=ps(m,(v,T)=>parseInt(T,10));return Tt(p)},Rf=(l,m)=>l+","+m,Yr=(l,m,p)=>ie.from(l.access[Rf(m,p)]),$l=(l,m,p)=>{const v=Fl(l,T=>p(m,T.element));return v.length>0?ie.some(v[0]):ie.none()},Fl=(l,m)=>{const p=wo(l.all,v=>v.cells);return St(p,m)},zs=l=>{const m={};let p=0;return Qe(l.cells,v=>{const T=v.colspan;Mo(T,D=>{const I=p+D;m[I]=al(v.element,T,I)}),p+=T}),m},Ja=l=>{const m={},p=[],T=fe(l).map(kt=>kt.element).bind(Sa).bind(qd).getOr({});let D=0,I=0,G=0;const{pass:K,fail:pe}=Bs(l,kt=>kt.section==="colgroup");Qe(pe,kt=>{const _t=[];Qe(kt.cells,mn=>{let ht=0;for(;m[Rf(G,ht)]!==void 0;)ht++;const $n=Ke(T,ht.toString()),rt=Rl(mn.element,mn.rowspan,mn.colspan,G,ht,$n);for(let Xt=0;Xt<mn.colspan;Xt++)for(let Ms=0;Ms<mn.rowspan;Ms++){const Ns=G+Ms,Sn=ht+Xt,nr=Rf(Ns,Sn);m[nr]=rt,I=Math.max(I,Sn+1)}_t.push(rt)}),D++,p.push(Ia(kt.element,_t,kt.section)),G++});const{columns:_e,colgroups:ft}=bo(K).map(kt=>{const _t=zs(kt);return{colgroups:[Cc(kt.element,os(_t))],columns:_t}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Lr(D,I),access:m,all:p,columns:_e,colgroups:ft}},Fo={fromTable:l=>{const m=vg(l);return Ja(m)},generate:Ja,getAt:Yr,findItem:$l,filterItems:Fl,justCells:l=>wo(l.all,m=>m.cells),justColumns:l=>os(l.columns),hasColumns:l=>jt(l.columns).length>0,getColumnAt:(l,m)=>ie.from(l.columns[m])},Kd=(l,m=De)=>{const p=l.grid,v=Mo(p.columns,it),T=Mo(p.rows,it);return dn(v,D=>Mf(()=>wo(T,pe=>Fo.getAt(l,pe,D).filter(_e=>_e.column===D).toArray()),pe=>pe.colspan===1&&m(pe.element),()=>Fo.getAt(l,0,D)))},Mf=(l,m,p)=>{const v=l();return F(v,m).orThunk(()=>ie.from(v[0]).orThunk(p)).map(I=>I.element)},E=l=>{const m=l.grid,p=Mo(m.rows,it),v=Mo(m.columns,it);return dn(p,T=>Mf(()=>wo(v,K=>Fo.getAt(l,T,K).filter(pe=>pe.row===T).fold(oe([]),pe=>[pe])),K=>K.rowspan===1,()=>Fo.getAt(l,T,0)))},M=(l,m)=>{if(m<0||m>=l.length-1)return ie.none();const p=l[m].fold(()=>{const T=Ic(l.slice(0,m));return ko(T,(D,I)=>D.map(G=>({value:G,delta:I+1})))},T=>ie.some({value:T,delta:0})),v=l[m+1].fold(()=>{const T=l.slice(m+1);return ko(T,(D,I)=>D.map(G=>({value:G,delta:I+1})))},T=>ie.some({value:T,delta:1}));return p.bind(T=>v.map(D=>{const I=D.delta+T.delta;return Math.abs(D.value-T.value)/I}))},z=(l,m)=>p=>ae(p)==="rtl"?m:l,ae=l=>zr(l,"direction")==="rtl"?"rtl":"ltr",be=kr("height",l=>{const m=l.dom;return ho(l)?m.getBoundingClientRect().height:m.offsetHeight}),gt=l=>be.get(l),Bn=l=>be.getOuter(l),go=xc,ao=(l,m)=>({left:l,top:m,translate:(v,T)=>ao(l+v,m+T)}),bn=ao,cr=l=>{const m=l.getBoundingClientRect();return bn(m.left,m.top)},Br=(l,m)=>l!==void 0?l:m!==void 0?m:0,Di=l=>{const m=l.dom.ownerDocument,p=m.body,v=m.defaultView,T=m.documentElement;if(p===l.dom)return bn(p.offsetLeft,p.offsetTop);const D=Br(v==null?void 0:v.pageYOffset,T.scrollTop),I=Br(v==null?void 0:v.pageXOffset,T.scrollLeft),G=Br(T.clientTop,p.clientTop),K=Br(T.clientLeft,p.clientLeft);return fi(l).translate(I-K,D-G)},fi=l=>{const m=l.dom,v=m.ownerDocument.body;return v===m?bn(v.offsetLeft,v.offsetTop):ho(l)?cr(m):bn(0,0)},Oh=(l,m)=>({row:l,y:m}),Hm=(l,m)=>({col:l,x:m}),Eg=l=>Di(l).left+ys(l),ka=l=>Di(l).left,Dh=(l,m)=>Hm(l,ka(m)),cy=(l,m)=>Hm(l,Eg(m)),Rh=l=>Di(l).top,da=(l,m)=>Oh(l,Rh(m)),Mh=(l,m)=>Oh(l,Rh(m)+Bn(m)),fc=(l,m,p)=>{if(p.length===0)return[];const v=dn(p.slice(1),(D,I)=>D.map(G=>l(I,G))),T=p[p.length-1].map(D=>m(p.length-1,D));return v.concat([T])},Nf=l=>-l,_a={delta:it,positions:l=>fc(da,Mh,l),edge:Rh},Yd=z({delta:it,edge:ka,positions:l=>fc(Dh,cy,l)},{delta:Nf,edge:Eg,positions:l=>fc(cy,Dh,l)}),Nh={delta:(l,m)=>Yd(m).delta(l,m),positions:(l,m)=>Yd(m).positions(l,m),edge:l=>Yd(l).edge(l)},Y0={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Ph=(()=>{const l="[0-9]+",p="[eE]"+("[+-]?"+l),v="\\.",T=G=>`(?:${G})?`,I=`[+-]?(?:${["Infinity",l+v+T(l)+T(p),v+l+T(p),l+T(p)].join("|")})`;return new RegExp(`^(${I})(.*)$`)})(),Il=(l,m)=>yt(m,p=>yt(Y0[p],v=>l===v)),Ou=(l,m)=>ie.from(Ph.exec(l)).bind(v=>{const T=Number(v[1]),D=v[2];return Il(D,m)?ie.some({value:T,unit:D}):ie.none()}),Xd=/(\d+(\.\d+)?)%/,Vt=/(\d+(\.\d+)?)px|em/,pl=mr("col"),a1=mr("tr"),zm=(l,m,p)=>{const v=Hs(l).getOrThunk(()=>$(hn(l)));return m(l)/p(v)*100},Ll=(l,m)=>{po(l,"width",m+"px")},Tg=(l,m)=>{po(l,"width",m+"%")},Jd=(l,m)=>{po(l,"height",m+"px")},Vm=l=>{sr(l,"height")},kg=l=>go(l)+"px",cu=(l,m,p,v)=>{const T=Sa(l).map(D=>{const I=p(D);return Math.floor(m/100*I)}).getOr(m);return v(l,T),T},X0=(l,m,p,v)=>{const T=parseFloat(l);return ua(l,"%")&&us(m)!=="table"?cu(m,T,p,v):T},_r=l=>{const m=kg(l);return m?X0(m,l,gt,Jd):gt(l)},wt=(l,m,p)=>{const v=p(l),T=Hc(l,m);return v/T},Qa=(l,m)=>Kc(l,m).orThunk(()=>le(l,m).map(p=>p+"px")),au=l=>Qa(l,"width"),Nc=l=>Qa(l,"height"),Pf=l=>zm(l,di,md),Pc=l=>pl(l)?di(l):Fm(l),ls=l=>a1(l)?gt(l):wt(l,"rowspan",_r),Bh=l=>au(l).bind(p=>Ou(p,["fixed","relative","empty"])),nt=(l,m,p)=>{po(l,"width",m+p)},ds=l=>di(l)+"px",i1=l=>gt(l)+"px",Xr=l=>zm(l,di,md)+"%",Hl=l=>au(l).exists(m=>Xd.test(m)),Xc=l=>au(l).exists(m=>Vt.test(m)),ay=l=>au(l).isNone(),Du=oe(Xd),J0=mr("col"),gi=l=>au(l).getOrThunk(()=>Pc(l)+"px"),ms=l=>Nc(l).getOrThunk(()=>ls(l)+"px"),Ru=l=>dn(Fo.justColumns(l),m=>ie.from(m.element)),_g=l=>{const m=ml().browser,p=m.isChromium()||m.isFirefox();return J0(l)?p:!0},$r=(l,m,p,v,T,D)=>l.filter(v).fold(()=>D(M(p,m)),I=>T(I)),$h=(l,m,p,v)=>{const T=Kd(l),D=Fo.hasColumns(l)?Ru(l):T,I=[ie.some(Nh.edge(m))].concat(dn(Nh.positions(T,m),K=>K.map(pe=>pe.x))),G=Z(Tr);return dn(D,(K,pe)=>$r(K,pe,I,G,_e=>{if(_g(_e))return p(_e);{const ft=il(T[pe],it);return $r(ft,pe,I,G,Ut=>v(ie.some(di(Ut))),v)}},v))},gd=l=>l.map(m=>m+"px").getOr(""),l1=(l,m)=>$h(l,m,gi,gd),Aa=(l,m,p)=>$h(l,m,Pf,v=>v.fold(()=>p.minCellWidth(),T=>T/p.pixelWidth()*100)),Ui=(l,m,p)=>$h(l,m,Pc,v=>v.getOrThunk(p.minCellWidth)),Ee=(l,m,p,v)=>{const T=E(l),D=dn(l.all,G=>ie.some(G.element)),I=[ie.some(_a.edge(m))].concat(dn(_a.positions(T,m),G=>G.map(K=>K.y)));return dn(D,(G,K)=>$r(G,K,I,De,p,v))},Wi=(l,m)=>Ee(l,m,ls,p=>p.getOrThunk(Pm)),Bc=(l,m)=>Ee(l,m,ms,gd),ar=(l,m)=>()=>ho(l)?m(l):parseFloat(Kc(l,"width").getOr("0")),zl=l=>{const m=ar(l,di),p=oe(0);return{width:m,pixelWidth:m,getWidths:(T,D)=>Ui(T,l,D),getCellDelta:p,singleColumnWidth:oe([0]),minCellWidth:p,setElementWidth:Rt,adjustTableWidth:Rt,isRelative:!0,label:"none"}},Ur=l=>{const m=ar(l,K=>parseFloat(Xr(K))),p=ar(l,di);return{width:m,pixelWidth:p,getWidths:(K,pe)=>Aa(K,l,pe),getCellDelta:K=>K/p()*100,singleColumnWidth:(K,pe)=>[100-K],minCellWidth:()=>ul()/p()*100,setElementWidth:Tg,adjustTableWidth:K=>{const pe=m(),_e=K/100*pe,ft=pe+_e;Tg(l,ft)},isRelative:!0,label:"percent"}},js=l=>{const m=ar(l,di);return{width:m,pixelWidth:m,getWidths:(I,G)=>Ui(I,l,G),getCellDelta:it,singleColumnWidth:(I,G)=>[Math.max(ul(),I+G)-I],minCellWidth:ul,setElementWidth:Ll,adjustTableWidth:I=>{const G=m()+I;Ll(l,G)},isRelative:!1,label:"pixel"}},S=(l,m)=>Du().exec(m)!==null?Ur(l):js(l),L={getTableSize:l=>au(l).fold(()=>zl(l),p=>S(l,p)),pixelSize:js,percentageSize:Ur,noneSize:zl},J=(l,m,p,v,T,D)=>({minRow:l,minCol:m,maxRow:p,maxCol:v,allCells:T,selectedCells:D}),ve=(l,m)=>{const p=l.grid.columns;let T=l.grid.rows,D=p,I=0,G=0;const K=[],pe=[];return Wn(l.access,_e=>{if(K.push(_e),m(_e)){pe.push(_e);const ft=_e.row,Ut=ft+_e.rowspan-1,kt=_e.column,_t=kt+_e.colspan-1;ft<T?T=ft:Ut>I&&(I=Ut),kt<D?D=kt:_t>G&&(G=_t)}}),J(T,D,I,G,K,pe)},Je=(l,m,p)=>{const v=l[p].element,T=st.fromTag("td");Fs(T,st.fromTag("br")),(m?Fs:yc)(v,T)},Ot=(l,m,p,v)=>{const T=St(l,G=>G.section!=="colgroup"),D=m.grid.columns,I=m.grid.rows;for(let G=0;G<I;G++){let K=!1;for(let pe=0;pe<D;pe++)G<p.minRow||G>p.maxRow||pe<p.minCol||pe>p.maxCol||(Fo.getAt(m,G,pe).filter(v).isNone()?Je(T,K,G):K=!0)}},un=(l,m,p,v)=>{Wn(p.columns,I=>{(I.column<m.minCol||I.column>m.maxCol)&&er(I.element)});const T=St(su(l,"tr"),I=>I.dom.childElementCount===0);Qe(T,er),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&Qe(su(l,"th,td"),I=>{re(I,"rowspan"),re(I,"colspan")}),re(l,Oi),re(l,"data-snooker-col-series"),L.getTableSize(l).adjustTableWidth(v)},Jn=(l,m,p,v)=>{if(v.minCol===0&&m.grid.columns===v.maxCol+1)return 0;const T=Ui(m,l,p),D=Re(T,(pe,_e)=>pe+_e,0),K=Re(T.slice(v.minCol,v.maxCol+1),(pe,_e)=>pe+_e,0)/D*p.pixelWidth()-p.pixelWidth();return p.getCellDelta(K)},Eo=(l,m)=>{const p=Ut=>ze(Ut.element,m),v=oc(l),T=vg(v),D=L.getTableSize(l),I=Fo.generate(T),G=ve(I,p),K="th:not("+m+"),td:not("+m+")",pe=Hd(v,"th,td",Ut=>ze(Ut,K));Qe(pe,er),Ot(T,I,G,p);const _e=Fo.fromTable(l),ft=Jn(l,_e,D,G);return un(v,G,I,ft),v},Ds=" ",wr=((l,m)=>{const p=D=>{if(!l(D))throw new Error("Can only get "+m+" value of a "+m+" node");return v(D).getOr("")},v=D=>l(D)?ie.from(D.dom.nodeValue):ie.none();return{get:p,getOption:v,set:(D,I)=>{if(!l(D))throw new Error("Can only set raw "+m+" value of a "+m+" node");D.dom.nodeValue=I}}})(qr,"text"),hi=l=>wr.get(l),bl=l=>wr.getOption(l),hd=(l,m)=>wr.set(l,m),Ri=l=>us(l)==="img"?1:bl(l).fold(()=>Xn(l).length,m=>m.length),Qd=l=>bl(l).filter(m=>m.trim().length!==0||m.indexOf(Ds)>-1).isSome(),Um=l=>Cn(l)&&Qs(l,"contenteditable")==="false",Wm=["img","br"],ei=l=>Qd(l)||To(Wm,us(l))||Um(l),Fh=l=>ki(l,ei),Zm=l=>Ih(l,ei),Ih=(l,m)=>{const p=v=>{const T=Xn(v);for(let D=T.length-1;D>=0;D--){const I=T[D];if(m(I))return ie.some(I);const G=p(I);if(G.isSome())return G}return ie.none()};return p(l)},Q0={scope:["row","col"]},Vc=l=>()=>{const m=st.fromTag("td",l.dom);return Fs(m,st.fromTag("br",l.dom)),m},zo=l=>()=>st.fromTag("col",l.dom),fr=l=>()=>st.fromTag("colgroup",l.dom),Ec=l=>()=>st.fromTag("tr",l.dom),vl=(l,m,p)=>{const v=Fa(l,m);return Wn(p,(T,D)=>{T===null?re(v,D):$s(v,D,T)}),v},Mi=l=>l,Lh=(l,m,p)=>Fh(l).map(T=>{const D=p.join(","),I=nn(T,D,G=>pt(G,l));return Tn(I,(G,K)=>{const pe=ii(K);return Fs(G,pe),pe},m)}).getOr(m),em=(l,m)=>{Wn(Q0,(p,v)=>le(l,v).filter(T=>To(p,T)).each(T=>$s(m,v,T)))},tm=(l,m,p)=>{const v=(I,G)=>{Rr(I.element,G),sr(G,"height"),I.colspan!==1&&sr(G,"width")},T=I=>{const G=st.fromTag(us(I.element),m.dom),K=p.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),pe=K.length>0?Lh(I.element,G,K):G;return Fs(pe,st.fromTag("br")),v(I,G),em(I.element,G),l(I.element,G),G};return{col:I=>{const G=st.fromTag(us(I.element),m.dom);return v(I,G),l(I.element,G),G},colgroup:fr(m),row:Ec(m),cell:T,replace:vl,colGap:zo(m),gap:Vc(m)}},Mu=l=>({col:zo(l),colgroup:fr(l),row:Ec(l),cell:Vc(l),replace:Mi,colGap:zo(l),gap:Vc(l)}),Nu=(l,m)=>{const v=document.createElement("div");return v.innerHTML=l,Xn(st.fromDom(v))},Iw=l=>dn(l,st.fromDom),za=l=>m=>m.options.get(l),eb="100%",nm=l=>{var m;const p=l.dom,v=(m=p.getParent(l.selection.getStart(),p.isBlock))!==null&&m!==void 0?m:l.getBody();return md(st.fromDom(v))+"px"},jm=(l,m)=>ti(l)||!u1(l)?m:Pu(l)?{...m,width:nm(l)}:{...m,width:eb},om=(l,m)=>ti(l)||u1(l)?m:Pu(l)?{...m,width:nm(l)}:{...m,width:eb},V4=l=>{const m=l.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:p=>{const v=To(["section","cells","sectionCells","auto"],p);return v?{value:p,valid:v}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:p=>{const v=To(["preservetable","resizetable"],p);return v?{value:p,valid:v}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},Hh=l=>ie.from(l.options.get("table_clone_elements")),U4=l=>{const m=l.options.get("object_resizing");return To(m.split(","),"table")},Bf=za("table_header_type"),ac=za("table_column_resizing"),Lw=l=>ac(l)==="preservetable",sm=l=>ac(l)==="resizetable",Gm=za("table_sizing_mode"),Ag=l=>Gm(l)==="relative",Pu=l=>Gm(l)==="fixed",ti=l=>Gm(l)==="responsive",Og=za("table_resize_bars"),u1=za("table_style_by_css"),HR=za("table_merge_content_on_paste"),rm=l=>{const m=l.options,p=m.get("table_default_attributes");return m.isSet("table_default_attributes")?p:om(l,p)},Oa=l=>{const m=l.options,p=m.get("table_default_styles");return m.isSet("table_default_styles")?p:jm(l,p)},d1=za("table_use_colgroups"),W4=za("fixed_toolbar_container"),Z4=za("fixed_toolbar_container_target"),iy=l=>{var m;if(!l.inline)return ie.none();const p=(m=W4(l))!==null&&m!==void 0?m:"";if(p.length>0)return Gc(Gn(),p);const v=Z4(l);return Yo(v)?ie.some(st.fromDom(v)):ie.none()},zh=l=>l.inline&&iy(l).isSome(),Bu=za("ui_mode"),$u=l=>!zh(l)&&Bu(l)==="split",$f=l=>sc(l,"[contenteditable]"),Dg=(l,m=!1)=>ho(l)?l.dom.isContentEditable:$f(l).fold(oe(m),p=>m1(p)==="true"),m1=l=>l.dom.contentEditable,Vh=l=>st.fromDom(l.getBody()),qm=l=>m=>pt(m,Vh(l)),Ff=l=>{re(l,"data-mce-style");const m=p=>re(p,"data-mce-style");Qe(ad(l),m),Qe(_i(l),m),Qe(Sh(l),m)},f1=l=>st.fromDom(l.selection.getStart()),tb=l=>l.getBoundingClientRect().width,nb=l=>l.getBoundingClientRect().height,Io=l=>(m,p)=>{const v=m.dom.getStyle(p,l)||m.dom.getAttrib(p,l);return ie.from(v).filter(ee)},kn=Io("width"),Ni=Io("height"),ob=l=>/^(\d+(\.\d+)?)%$/.test(l),sb=l=>/^(\d+(\.\d+)?)px$/.test(l),rb=l=>Lc(l,mr("table")).exists(Dg),ly=(l,m)=>{const p=m.column,v=m.column+m.colspan-1,T=m.row,D=m.row+m.rowspan-1;return p<=l.finishCol&&v>=l.startCol&&T<=l.finishRow&&D>=l.startRow},ir=(l,m)=>m.column>=l.startCol&&m.column+m.colspan-1<=l.finishCol&&m.row>=l.startRow&&m.row+m.rowspan-1<=l.finishRow,Km=(l,m)=>{let p=!0;const v=mt(ir,m);for(let T=m.startRow;T<=m.finishRow;T++)for(let D=m.startCol;D<=m.finishCol;D++)p=p&&Fo.getAt(l,T,D).exists(v);return p?ie.some(m):ie.none()},j4=(l,m)=>cl(Math.min(l.row,m.row),Math.min(l.column,m.column),Math.max(l.row+l.rowspan-1,m.row+m.rowspan-1),Math.max(l.column+l.colspan-1,m.column+m.colspan-1)),Hw=(l,m,p)=>{const v=Fo.findItem(l,m,pt),T=Fo.findItem(l,p,pt);return v.bind(D=>T.map(I=>j4(D,I)))},Ye=(l,m,p)=>Hw(l,m,p).bind(v=>Km(l,v)),uy=(l,m,p,v)=>Fo.findItem(l,m,pt).bind(T=>{const D=p>0?T.row+T.rowspan-1:T.row,I=v>0?T.column+T.colspan-1:T.column;return Fo.getAt(l,D+p,I+v).map(K=>K.element)}),dy=(l,m,p)=>Hw(l,m,p).map(v=>{const T=Fo.filterItems(l,mt(ly,v));return dn(T,D=>D.element)}),Uh=(l,m)=>{const p=(v,T)=>zt(T,v);return Fo.findItem(l,m,p).map(v=>v.element)},G4=(l,m,p)=>Sa(l).bind(v=>{const T=cb(v);return uy(T,l,m,p)}),Rg=(l,m,p)=>{const v=cb(l);return dy(v,m,p)},g1=(l,m,p,v,T)=>{const D=cb(l),I=pt(l,p)?ie.some(m):Uh(D,m),G=pt(l,T)?ie.some(v):Uh(D,v);return I.bind(K=>G.bind(pe=>dy(D,K,pe)))},If=(l,m,p)=>{const v=cb(l);return Ye(v,m,p)},cb=Fo.fromTable;var cm=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Gs=()=>{const l=pe=>st.fromDom(pe.dom.cloneNode(!1)),m=pe=>on(pe).dom,p=pe=>Ls(pe)?us(pe)==="body"?!0:To(cm,us(pe)):!1,v=pe=>Ls(pe)?To(["br","img","hr","input"],us(pe)):!1,T=pe=>Ls(pe)&&Qs(pe,"contenteditable")==="false",D=(pe,_e)=>pe.dom.compareDocumentPosition(_e.dom),I=(pe,_e)=>{const ft=Ne(pe);ec(_e,ft)},G=pe=>{const _e=us(pe);return To(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],_e)},K=pe=>Ls(pe)?le(pe,"lang"):ie.none();return{up:oe({selector:yr,closest:sc,predicate:at,all:ss}),down:oe({selector:es,predicate:Ae}),styles:oe({get:zr,getRaw:Kc,set:po,remove:sr}),attrs:oe({get:Qs,set:$s,remove:re,copyTo:I}),insert:oe({before:tc,after:nc,afterAll:Ol,append:Fs,appendAll:Bo,prepend:yc,wrap:Ba}),remove:oe({unwrap:Dl,remove:er}),create:oe({nu:st.fromTag,clone:l,text:st.fromText}),query:oe({comparePosition:D,prevSibling:la,nextSibling:vc}),property:oe({children:Xn,name:us,parent:Po,document:m,isText:qr,isComment:is,isElement:Ls,isSpecial:G,getLanguage:K,getText:hi,setText:hd,isBoundary:p,isEmptyTag:v,isNonEditable:T}),eq:pt,is:gn}};const pd=(l,m,p,v)=>{const T=p[0],D=p.slice(1);return v(l,m,T,D)},zw=(l,m,p)=>p.length>0?pd(l,m,p,Ym):ie.none(),Ym=(l,m,p,v)=>{const T=m(l,p);return Tn(v,(D,I)=>{const G=m(l,I);return q4(l,D,G)},T)},q4=(l,m,p)=>m.bind(v=>p.filter(mt(l.eq,v))),ab=(l,m)=>mt(l.eq,m),h1=(l,m,p,v=On)=>{const T=[m].concat(l.up().all(m)),D=[p].concat(l.up().all(p)),I=_e=>_s(_e,v).fold(()=>_e,Ut=>_e.slice(0,Ut+1)),G=I(T),K=I(D),pe=F(G,_e=>yt(K,ab(l,_e)));return{firstpath:G,secondpath:K,shared:pe}},K4=zw,Fu=h1,ib=Gs(),Wh=(l,m)=>K4(ib,(p,v)=>l(v),m),my=(l,m,p)=>Fu(ib,l,m,p),Mg=l=>yr(l,"table"),lb=(l,m,p)=>{const v=T=>D=>p!==void 0&&p(D)||pt(D,T);return pt(l,m)?ie.some({boxes:ie.some([l]),start:l,finish:m}):Mg(l).bind(T=>Mg(m).bind(D=>{if(pt(T,D))return ie.some({boxes:Rg(T,l,m),start:l,finish:m});if(zt(T,D)){const I=nn(m,"td,th",v(T)),G=I.length>0?I[I.length-1]:m;return ie.some({boxes:g1(T,l,T,m,D),start:l,finish:G})}else if(zt(D,T)){const I=nn(l,"td,th",v(D)),G=I.length>0?I[I.length-1]:l;return ie.some({boxes:g1(D,l,T,m,D),start:l,finish:G})}else return my(l,m).shared.bind(I=>sc(I,"table",p).bind(G=>{const K=nn(m,"td,th",v(G)),pe=K.length>0?K[K.length-1]:m,_e=nn(l,"td,th",v(G)),ft=_e.length>0?_e[_e.length-1]:l;return ie.some({boxes:g1(G,l,T,m,D),start:ft,finish:pe})}))}))},Xm=(l,m)=>{const p=es(l,m);return p.length>0?ie.some(p):ie.none()},fy=(l,m)=>F(l,p=>ze(p,m)),gy=(l,m,p)=>Gc(l,m).bind(v=>Gc(l,p).bind(T=>Wh(Mg,[v,T]).map(D=>({first:v,last:T,table:D})))),iu=(l,m)=>yr(l,"table").bind(p=>Gc(p,m).bind(v=>lb(v,l).bind(T=>T.boxes.map(D=>({boxes:D,start:T.start,finish:T.finish}))))),Vl=(l,m,p,v,T)=>fy(l,T).bind(D=>G4(D,m,p).bind(I=>iu(I,v))),xt=(l,m)=>Xm(l,m),Vw=(l,m,p)=>gy(l,m,p).bind(v=>{const T=K=>pt(l,K),D="thead,tfoot,tbody,table",I=yr(v.first,D,T),G=yr(v.last,D,T);return I.bind(K=>G.bind(pe=>pt(K,pe)?If(v.table,v.first,v.last):ie.none()))}),gc=it,Uw=l=>{const m=(v,T)=>le(v,T).exists(D=>parseInt(D,10)>1),p=v=>m(v,"rowspan")||m(v,"colspan");return l.length>0&&No(l,p)?ie.some(l):ie.none()},Ww=(l,m,p)=>m.length<=1?ie.none():Vw(l,p.firstSelectedSelector,p.lastSelectedSelector).map(v=>({bounds:v,cells:m})),p1="data-mce-selected",hy="td["+p1+"],th["+p1+"]",Sr="["+p1+"]",py="data-mce-first-selected",Zh="td["+py+"],th["+py+"]",b1="data-mce-last-selected",v1="td["+b1+"],th["+b1+"]",by=Sr,yl={selected:p1,selectedSelector:hy,firstSelected:py,firstSelectedSelector:Zh,lastSelected:b1,lastSelectedSelector:v1},Jr=(l,m,p)=>({element:p,mergable:Ww(m,l,yl),unmergable:Uw(l),selection:gc(l)}),Zw=(l,m,p)=>({element:l,clipboard:m,generators:p}),ic=(l,m,p,v)=>({selection:gc(l),clipboard:p,generators:v}),y1=l=>Sa(l).bind(m=>xt(m,yl.firstSelectedSelector)).fold(oe(l),m=>m[0]),ni=l=>(m,p)=>{const v=us(m),T=v==="col"||v==="colgroup"?y1(m):m;return sc(T,l,p)},Lf=ni("th,td,caption"),lu=ni("th,td"),Jm=l=>Iw(l.model.table.getSelectedCells()),zR=l=>St(Jm(l),m=>ze(m,yl.selectedSelector)),VR=l=>Sa(l[0]).map(m=>{const p=Eo(m,by);return Ff(p),[p]}),Y4=(l,m)=>dn(m,p=>l.selection.serializer.serialize(p.dom,{})).join(""),bd=(l,m)=>{const p=l.getDoc(),v=se(st.fromDom(l.getBody())),T=st.fromTag("div",p);$s(T,"data-mce-bogus","all"),Is(T,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});const D=ye(v);Bo(T,m),Fs(D,T);const I=T.dom.innerText;return er(T),I},UR=(l,m)=>{l.on("BeforeGetContent",p=>{const v=T=>{p.preventDefault(),VR(T).each(D=>{const I=p.format==="text"?bd(l,D):Y4(l,D);p.content=I})};if(p.selection===!0){const T=zR(l);T.length>=1&&v(T)}}),l.on("BeforeSetContent",p=>{if(p.selection===!0&&p.paste===!0){const v=Jm(l);fe(v).each(T=>{Sa(T).each(D=>{const I=St(Nu(p.content),K=>us(K)!=="meta"),G=mr("table");if(HR(l)&&I.length===1&&G(I[0])){p.preventDefault();const K=st.fromDom(l.getDoc()),pe=Mu(K),_e=Zw(T,I[0],pe);m.pasteCells(D,_e).each(()=>{l.focus()})}})})}})},Zi=(l,m)=>({element:l,offset:m}),Va=(l,m,p)=>l.property().isText(m)&&l.property().getText(m).trim().length===0||l.property().isComment(m)?p(m).bind(v=>Va(l,v,p).orThunk(()=>ie.some(v))):ie.none(),jh=(l,m)=>l.property().isText(m)?l.property().getText(m).length:l.property().children(m).length,ub=(l,m)=>{const p=Va(l,m,l.query().prevSibling).getOr(m);if(l.property().isText(p))return Zi(p,jh(l,p));const v=l.property().children(p);return v.length>0?ub(l,v[v.length-1]):Zi(p,jh(l,p))},X4=ub,C1=Gs(),Hf=l=>X4(C1,l),Ng=(l,m)=>{Tr(l)||Bh(l).each(v=>{const T=v.value/2;nt(l,T,v.unit),nt(m,T,v.unit)})},am=l=>dn(l,oe(0)),zf=(l,m,p,v,T)=>T(l.slice(0,m)).concat(v).concat(T(l.slice(p))),Vf=l=>(m,p,v,T)=>{if(l(v)){const D=Math.max(T,m[p]-Math.abs(v)),I=Math.abs(D-m[p]);return v>=0?I:-I}else return v},w1=Vf(l=>l<0),jw=Vf(De),Gw=()=>{const l=(G,K,pe,_e,ft)=>{const Ut=w1(G,K,_e,ft);return zf(G,K,pe+1,[Ut,0],am)},m=(G,K,pe,_e)=>{const ft=(100+pe)/100,Ut=Math.max(_e,(G[K]+pe)/ft);return dn(G,(kt,_t)=>(_t===K?Ut:kt/ft)-kt)},p=(G,K,pe,_e,ft,Ut)=>Ut?m(G,K,_e,ft):l(G,K,pe,_e,ft);return{resizeTable:(G,K)=>G(K),clampTableDelta:w1,calcLeftEdgeDeltas:p,calcMiddleDeltas:(G,K,pe,_e,ft,Ut,kt)=>p(G,pe,_e,ft,Ut,kt),calcRightEdgeDeltas:(G,K,pe,_e,ft,Ut)=>{if(Ut)return m(G,pe,_e,ft);{const kt=w1(G,pe,_e,ft);return am(G.slice(0,pe)).concat([kt])}},calcRedestributedWidths:(G,K,pe,_e)=>{if(_e){const Ut=(K+pe)/K,kt=dn(G,_t=>_t/Ut);return{delta:Ut*100-100,newSizes:kt}}else return{delta:pe,newSizes:G}}}},db=()=>{const l=(I,G,K,pe,_e)=>{const ft=pe>=0?K:G,Ut=jw(I,ft,pe,_e);return zf(I,G,K+1,[Ut,-Ut],am)};return{resizeTable:(I,G,K)=>{K&&I(G)},clampTableDelta:(I,G,K,pe,_e)=>{if(_e){if(K>=0)return K;{const ft=Re(I,(Ut,kt)=>Ut+kt-pe,0);return Math.max(-ft,K)}}else return w1(I,G,K,pe)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(I,G,K,pe,_e,ft)=>l(I,K,pe,_e,ft),calcRightEdgeDeltas:(I,G,K,pe,_e,ft)=>{if(ft)return am(I);{const Ut=pe/I.length;return dn(I,oe(Ut))}},calcRedestributedWidths:(I,G,K,pe)=>({delta:0,newSizes:I})}},Pg=l=>Fo.fromTable(l).grid,Gh=mr("th"),mb=l=>No(l,m=>Gh(m.element)),qw=(l,m)=>l&&m?"sectionCells":l?"section":"cells",Kw=l=>{const m=l.section==="thead",p=qc(S1(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:m||p?{type:"header",subType:qw(m,p)}:{type:"body"}},S1=l=>{const m=St(l,p=>Gh(p.element));return m.length===0?ie.some("td"):m.length===l.length?ie.some("th"):ie.none()},Yw=l=>{const m=dn(l,T=>Kw(T).type),p=To(m,"header"),v=To(m,"footer");if(!p&&!v)return ie.some("body");{const T=To(m,"body");return p&&!T&&!v?ie.some("header"):!p&&!T&&v?ie.some("footer"):ie.none()}},Xw=l=>ko(l.all,m=>{const p=Kw(m);return p.type==="header"?ie.from(p.subType):ie.none()}),Bg=(l,m,p)=>Dr(p(l.element,m),!0,l.isLocked),vy=(l,m)=>l.section!==m?jc(l.element,l.cells,m,l.isNew):l,Jw=()=>({transformRow:vy,transformCell:(l,m,p)=>{const v=p(l.element,m),T=us(v)!=="td"?sl(v,"td"):v;return Dr(T,l.isNew,l.isLocked)}}),fb=()=>({transformRow:vy,transformCell:Bg}),im=()=>({transformRow:(l,m)=>vy(l,m==="thead"?"tbody":m),transformCell:Bg}),x1={getTableSectionType:(l,m)=>{const p=Fo.fromTable(l);switch(Xw(p).getOr(m)){case"section":return Jw();case"sectionCells":return fb();case"cells":return im()}},section:Jw,sectionCells:fb,cells:im,fallback:()=>({transformRow:it,transformCell:Bg})},qh=(l,m,p,v)=>{p===v?re(l,m):$s(l,m,p)},Uf=(l,m,p)=>{bo(Nt(l,m)).fold(()=>yc(l,p),v=>nc(v,p))},yy=(l,m)=>{const p=xo(l,m).getOrThunk(()=>{const v=st.fromTag(m,hn(l).dom);return m==="thead"?Uf(l,"caption,colgroup",v):m==="colgroup"?Uf(l,"caption",v):Fs(l,v),v});return ai(p),p},gb=(l,m)=>{const p=[],v=[],T=kt=>dn(kt,_t=>{_t.isNew&&p.push(_t.element);const mn=_t.element;return ai(mn),Qe(_t.cells,ht=>{ht.isNew&&v.push(ht.element),qh(ht.element,"colspan",ht.colspan,1),qh(ht.element,"rowspan",ht.rowspan,1),Fs(mn,ht.element)}),mn}),D=kt=>wo(kt,_t=>dn(_t.cells,mn=>(qh(mn.element,"span",mn.colspan,1),mn.element))),I=(kt,_t)=>{const mn=yy(l,_t),$n=(_t==="colgroup"?D:T)(kt);Bo(mn,$n)},G=kt=>{xo(l,kt).each(er)},K=(kt,_t)=>{kt.length>0?I(kt,_t):G(_t)},pe=[],_e=[],ft=[],Ut=[];return Qe(m,kt=>{switch(kt.section){case"thead":pe.push(kt);break;case"tbody":_e.push(kt);break;case"tfoot":ft.push(kt);break;case"colgroup":Ut.push(kt);break}}),K(Ut,"colgroup"),K(pe,"thead"),K(_e,"tbody"),K(ft,"tfoot"),{newRows:p,newCells:v}},Kh=l=>dn(l,m=>{const p=ii(m.element);return Qe(m.cells,v=>{const T=oc(v.element);qh(T,"colspan",v.colspan,1),qh(T,"rowspan",v.rowspan,1),Fs(p,T)}),p}),Q4=(l,m)=>dn(l,p=>Xa(p,m)),eS=(l,m)=>l[m],e3=(l,m)=>{if(l.length===0)return 0;const p=l[0];return _s(l,T=>!m(p.element,T.element)).getOr(l.length)},WR=(l,m,p,v)=>{const T=eS(l,m),D=T.section==="colgroup",I=e3(T.cells.slice(p),v),G=D?1:e3(Q4(l.slice(m),p),v);return{colspan:I,rowspan:G}},ZR=(l,m)=>{const p=dn(l,T=>dn(T.cells,On)),v=(T,D,I,G)=>{for(let K=T;K<T+I;K++)for(let pe=D;pe<D+G;pe++)p[K][pe]=!0};return dn(l,(T,D)=>{const I=wo(T.cells,(G,K)=>{if(p[D][K]===!1){const pe=WR(l,D,K,m);return v(D,K,pe.rowspan,pe.colspan),[rl(G.element,pe.rowspan,pe.colspan,G.isNew)]}else return[]});return Or(T.element,I,T.section,T.isNew)})},E1=(l,m,p)=>{const v=[];Qe(l.colgroups,T=>{const D=[];for(let I=0;I<l.grid.columns;I++){const G=Fo.getColumnAt(l,I).map(K=>Dr(K.element,p,!1)).getOrThunk(()=>Dr(m.colGap(),!0,!1));D.push(G)}v.push(jc(T.element,D,"colgroup",p))});for(let T=0;T<l.grid.rows;T++){const D=[];for(let K=0;K<l.grid.columns;K++){const pe=Fo.getAt(l,T,K).map(_e=>Dr(_e.element,p,_e.isLocked)).getOrThunk(()=>Dr(m.gap(),!0,!1));D.push(pe)}const I=l.all[T],G=jc(I.element,D,I.section,p);v.push(G)}return v},jR=(l,m)=>E1(l,m,!1),hb=l=>ZR(l,pt),Wf=(l,m)=>ko(l.all,p=>F(p.cells,v=>pt(m,v.element))),T1=(l,m,p)=>{const v=dn(m.selection,D=>cd(D).bind(I=>Wf(l,I)).filter(p)),T=Pr(v);return Nm(T.length>0,T)},Fr=(l,m,p,v,T)=>(D,I,G,K)=>{const pe=Fo.fromTable(D),_e=ie.from(K==null?void 0:K.section).getOrThunk(x1.fallback);return m(pe,I).map(Ut=>{const kt=jR(pe,G),_t=l(kt,Ut,pt,T(G),_e),mn=Cr(_t.grid),ht=hb(_t.grid);return{info:Ut,grid:ht,cursor:_t.cursor,lockedColumns:mn}}).bind(Ut=>{const kt=gb(D,Ut.grid),_t=ie.from(K==null?void 0:K.sizing).getOrThunk(()=>L.getTableSize(D)),mn=ie.from(K==null?void 0:K.resize).getOrThunk(db);return p(D,Ut.grid,Ut.info,{sizing:_t,resize:mn,section:_e}),v(D),re(D,Oi),Ut.lockedColumns.length>0&&$s(D,Oi,Ut.lockedColumns.join(",")),ie.some({cursor:Ut.cursor,newRows:kt.newRows,newCells:kt.newCells})})},tS=(l,m)=>cd(m.element).bind(p=>Wf(l,p).map(v=>({...v,generators:m.generators,clipboard:m.clipboard}))),Yh=(l,m)=>T1(l,m,De).map(p=>({cells:p,generators:m.generators,clipboard:m.clipboard})),Xh=(l,m)=>m.mergable,t3=(l,m)=>m.unmergable,ji=(l,m)=>T1(l,m,De),Gi=(l,m)=>T1(l,m,p=>!p.isLocked),nS=(l,m)=>Wf(l,m).exists(p=>!p.isLocked),$g=(l,m)=>No(m,p=>nS(l,p)),Zf=(l,m)=>Xh(l,m).filter(p=>$g(l,p.cells)),jf=(l,m)=>t3(l,m).filter(p=>$g(l,p)),n3=(l,m,p,v)=>{const T=Mc(l).rows;if(T.length===0)return l;for(let D=m.startRow;D<=m.finishRow;D++)for(let I=m.startCol;I<=m.finishCol;I++){const G=T[D],K=Xa(G,I).isLocked;ro(G,I,Dr(v(),!1,K))}return l},Jc=(l,m,p,v)=>{const T=Mc(l).rows;let D=!0;for(let I=0;I<T.length;I++)for(let G=0;G<mi(T[0]);G++){const K=T[I],pe=Xa(K,G),_e=pe.element,ft=p(_e,m);ft&&!D?ro(K,G,Dr(v(),!0,pe.isLocked)):ft&&(D=!1)}return l},pb=(l,m)=>Re(l,(p,v)=>yt(p,T=>m(T.element,v.element))?p:p.concat([v]),[]),Ul=(l,m,p,v)=>(m>0&&m<l[0].cells.length&&Qe(l,T=>{const D=T.cells[m-1];let I=0;const G=v();for(;T.cells.length>m+I&&p(D.element,T.cells[m+I].element);)ro(T,m+I,Dr(G,!0,T.cells[m+I].isLocked)),I++}),l),Cy=(l,m,p,v)=>{const T=Mc(l).rows;if(m>0&&m<T.length){const D=T[m-1].cells,I=pb(D,p);Qe(I,G=>{let K=ie.none();for(let pe=m;pe<T.length;pe++)for(let _e=0;_e<mi(T[0]);_e++){const ft=T[pe],Ut=Xa(ft,_e);p(Ut.element,G.element)&&(K.isNone()&&(K=ie.some(v())),K.each(_t=>{ro(ft,_e,Dr(_t,!0,Ut.isLocked))}))}})}return l},oS=l=>{const m=D=>D(l),p=oe(l),v=()=>T,T={tag:!0,inner:l,fold:(D,I)=>I(l),isValue:De,isError:On,map:D=>vd.value(D(l)),mapError:v,bind:m,exists:m,forall:m,getOr:p,or:v,getOrThunk:p,orThunk:v,getOrDie:p,each:D=>{D(l)},toOptional:()=>ie.some(l)};return T},Gf=l=>{const m=()=>p,p={tag:!1,inner:l,fold:(v,T)=>v(l),isValue:On,isError:De,map:m,mapError:v=>vd.error(v(l)),bind:m,exists:On,forall:De,getOr:it,or:it,getOrThunk:ln,orThunk:ln,getOrDie:Mt(String(l)),each:Rt,toOptional:ie.none};return p},vd={value:oS,error:Gf,fromOption:(l,m)=>l.fold(()=>Gf(m),oS)},uu=(l,m,p)=>{if(l.row>=m.length||l.column>mi(m[0]))return vd.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const v=m.slice(l.row),T=v[0].cells.slice(l.column),D=mi(p[0]),I=p.length;return vd.value({rowDelta:v.length-I,colDelta:T.length-D})},wy=(l,m)=>{const p=mi(l[0]),v=mi(m[0]);return{rowDelta:0,colDelta:p-v}},k1=(l,m)=>{const p=l.length,v=m.length;return{rowDelta:p-v,colDelta:0}},yd=(l,m,p,v)=>{const T=m.section==="colgroup"?p.col:p.cell;return Mo(l,D=>Dr(T(),!0,v(D)))},Jh=(l,m,p,v)=>{const T=l[l.length-1];return l.concat(Mo(m,()=>{const D=T.section==="colgroup"?p.colgroup:p.row,I=Ha(T,D,it),G=yd(I.cells.length,I,p,K=>xs(v,K.toString()));return Vr(I,G)}))},rs=(l,m,p,v)=>dn(l,T=>{const D=yd(m,T,p,On);return Im(T,v,D)}),pi=(l,m,p)=>dn(l,v=>Re(p,(T,D)=>{const I=yd(1,v,m,De)[0];return Ah(T,D,I)},v)),Wl=(l,m,p)=>{const v=m.colDelta<0?rs:it,T=m.rowDelta<0?Jh:it,D=Cr(l),I=mi(l[0]),G=yt(D,_e=>_e===I-1),K=v(l,Math.abs(m.colDelta),p,G?I-1:I),pe=Cr(K);return T(K,Math.abs(m.rowDelta),p,We(pe,De))},Sy=(l,m,p,v)=>{const T=Xa(l[m],p),D=mt(v,T.element),I=l[m];return l.length>1&&mi(I)>1&&(p>0&&D(Ta(I,p-1))||p<I.cells.length-1&&D(Ta(I,p+1))||m>0&&D(Ta(l[m-1],p))||m<l.length-1&&D(Ta(l[m+1],p)))},gr=(l,m,p,v,T,D)=>{const I=l.row,G=l.column,K=p.length,pe=mi(p[0]),_e=I+K,ft=G+pe+D.length,Ut=We(D,De);for(let kt=I;kt<_e;kt++){let _t=0;for(let mn=G;mn<ft;mn++){if(Ut[mn]){_t++;continue}Sy(m,kt,mn,T)&&Jc(m,Ta(m[kt],mn),T,v.cell);const ht=mn-G-_t,$n=Xa(p[kt-I],ht),rt=$n.element,Xt=v.replace(rt);ro(m[kt],mn,Dr(Xt,!0,$n.isLocked))}}return m},xy=(l,m,p)=>{const v=mi(m[0]),T=Mc(m).cols.length+l.row,D=Mo(v-l.column,G=>G+l.column),I=F(D,G=>No(p,K=>K!==G)).getOr(v-1);return{row:T,column:I}},qf=(l,m,p)=>St(p,v=>v>=l.column&&v<=mi(m[0])+l.column),Ig=(l,m,p,v,T)=>{const D=Cr(m),I=xy(l,m,D),G=Mc(p).rows,K=qf(I,G,D);return uu(I,m,G).map(_e=>{const ft={..._e,colDelta:_e.colDelta-K.length},Ut=Wl(m,ft,v),kt=Cr(Ut),_t=qf(I,G,kt);return gr(I,Ut,G,v,T,_t)})},sS=(l,m,p,v,T)=>{Ul(m,l,T,v.cell);const D=k1(p,m),I=Wl(p,D,v),G=k1(m,I),K=Wl(m,G,v);return dn(K,(pe,_e)=>Im(pe,l,I[_e].cells))},rS=(l,m,p,v,T)=>{Cy(m,l,T,v.cell);const D=Cr(m),I=wy(m,p),G={...I,colDelta:I.colDelta-D.length},K=Wl(m,G,v),{cols:pe,rows:_e}=Mc(K),ft=Cr(K),Ut=wy(p,m),kt={...Ut,colDelta:Ut.colDelta+ft.length},_t=pi(p,v,ft),mn=Wl(_t,kt,v);return[...pe,..._e.slice(0,l),...mn,..._e.slice(l,_e.length)]},xr=(l,m,p,v)=>Ha(l,T=>v(T,p),m),Qh=(l,m,p,v,T)=>{const{rows:D,cols:I}=Mc(l),G=D.slice(0,m),K=D.slice(m),pe=xr(D[p],(_e,ft)=>m>0&&m<D.length&&v(Ta(D[m-1],ft),Ta(D[m],ft))?Xa(D[m],ft):Dr(T(_e.element,v),!0,_e.isLocked),v,T);return[...I,...G,pe,...K]},_1=(l,m,p,v,T,D,I)=>{if(p==="colgroup"||!v){const G=Xa(l,T);return Dr(I(G.element,D),!0,!1)}else return Xa(l,m)},cS=(l,m,p,v,T)=>dn(l,D=>{const I=m>0&&m<mi(D)&&v(Ta(D,m-1),Ta(D,m)),G=_1(D,m,D.section,I,p,v,T);return Ah(D,m,G)}),ep=(l,m)=>wo(l,p=>{const v=p.cells,T=Tn(m,(D,I)=>I>=0&&I<D.length?D.slice(0,I).concat(D.slice(I+1)):D,v);return T.length>0?[jc(p.element,T,p.section,p.isNew)]:[]}),du=(l,m,p)=>{const{rows:v,cols:T}=Mc(l);return[...T,...v.slice(0,m),...v.slice(p+1)]},o3=(l,m,p,v)=>Ta(l[m],p)!==void 0&&m>0&&v(Ta(l[m-1],p),Ta(l[m],p)),A1=(l,m,p)=>m>0&&p(Ta(l,m-1),Ta(l,m)),Kt=(l,m,p,v)=>o3(l,m,p,v)||A1(l[m],p,v),s3=(l,m)=>No(m,it)&&mb(l.cells)?De:(v,T,D)=>!(us(v.element)==="th"&&m[D]),r3=(l,m)=>No(m,it)&&mb(l)?De:(v,T,D)=>!(us(v.element)==="th"&&m[T]),Ey=(l,m,p,v)=>{const T=I=>I==="row"?Sc(m):Tr(m),D=I=>T(I)?`${I}group`:I;return l?Gh(m)?D(p):null:v&&Gh(m)?D(p==="row"?"col":"row"):null},aS=(l,m)=>(p,v,T)=>ie.some(Ey(l,p.element,"col",m[T])),c3=(l,m)=>(p,v)=>ie.some(Ey(l,p.element,"row",m[v])),O1=(l,m,p)=>Dr(p(l.element,m),!0,l.isLocked),Lg=(l,m,p,v,T,D,I)=>{const G=K=>yt(m,pe=>p(K.element,pe.element));return dn(l,(K,pe)=>Gd(K,(_e,ft)=>{if(G(_e)){const Ut=I(_e,pe,ft)?T(_e,p,v):_e;return D(Ut,pe,ft).each(kt=>{Rc(Ut.element,{scope:ie.from(kt)})}),Ut}else return _e}))},Hg=(l,m,p)=>wo(l,(v,T)=>Kt(l,T,m,p)?[]:[Xa(v,m)]),a3=(l,m,p)=>{const v=l[m];return wo(v.cells,(T,D)=>Kt(l,m,D,p)?[]:[T])},D1=(l,m,p,v,T)=>{const D=Mc(l).rows,I=wo(m,_e=>Hg(D,_e,v)),G=dn(D,_e=>mb(_e.cells)),K=r3(I,G),pe=c3(p,G);return Lg(l,I,v,T,O1,pe,K)},iS=(l,m,p,v,T,D,I)=>{const{cols:G,rows:K}=Mc(l),pe=K[m[0]],_e=wo(m,ht=>a3(K,ht,T)),ft=dn(pe.cells,(ht,$n)=>mb(Hg(K,$n,T))),Ut=[...K];Qe(m,ht=>{Ut[ht]=I.transformRow(K[ht],p)});const kt=[...G,...Ut],_t=s3(pe,ft),mn=aS(v,ft);return Lg(kt,_e,T,D,I.transformCell,mn,_t)},R1=(l,m,p,v)=>{const T=Mc(l).rows,D=dn(m,I=>Xa(T[I.row],I.column));return Lg(l,D,p,v,O1,ie.none,De)},Pi={generate:l=>{if(!yn(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const m=[],p={};return Qe(l,(v,T)=>{const D=jt(v);if(D.length!==1)throw new Error("one and only one name per case");const I=D[0],G=v[I];if(p[I]!==void 0)throw new Error("duplicate key detected:"+I);if(I==="cata")throw new Error("cannot have a case named cata (sorry)");if(!yn(G))throw new Error("case arguments must be an array");m.push(I),p[I]=(...K)=>{const pe=K.length;if(pe!==G.length)throw new Error("Wrong number of arguments to case "+I+". Expected "+G.length+" ("+G+"), got "+pe);return{fold:(...ft)=>{if(ft.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+ft.length);return ft[T].apply(null,K)},match:ft=>{const Ut=jt(ft);if(m.length!==Ut.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+Ut.join(","));if(!No(m,_t=>To(Ut,_t)))throw new Error("Not all branches were specified when using match. Specified: "+Ut.join(", ")+`
Required: `+m.join(", "));return ft[I].apply(null,K)},log:ft=>{console.log(ft,{constructors:m,constructor:I,params:K})}}}}),p}},Cd={...Pi.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},u3=(l,m)=>l.length===0?Cd.none():l.length===1?Cd.only(0):m===0?Cd.left(0,1):m===l.length-1?Cd.right(m-1,m):m>0&&m<l.length-1?Cd.middle(m-1,m,m+1):Cd.none(),d3=(l,m,p,v,T)=>{const D=l.slice(0),I=u3(l,m),G=oe(dn(D,oe(0))),K=Ut=>v.singleColumnWidth(D[Ut],p),pe=(Ut,kt)=>T.calcLeftEdgeDeltas(D,Ut,kt,p,v.minCellWidth(),v.isRelative),_e=(Ut,kt,_t)=>T.calcMiddleDeltas(D,Ut,kt,_t,p,v.minCellWidth(),v.isRelative),ft=(Ut,kt)=>T.calcRightEdgeDeltas(D,Ut,kt,p,v.minCellWidth(),v.isRelative);return I.fold(G,K,pe,_e,ft)},m3=(l,m,p)=>{let v=0;for(let T=l;T<m;T++)v+=p[T]!==void 0?p[T]:0;return v},Ty=(l,m)=>{const p=Fo.justCells(l);return dn(p,v=>{const T=m3(v.column,v.column+v.colspan,m);return{element:v.element,width:T,colspan:v.colspan}})},lS=(l,m)=>{const p=Fo.justColumns(l);return dn(p,(v,T)=>({element:v.element,width:m[T],colspan:v.colspan}))},f3=(l,m)=>dn(l.all,(p,v)=>({element:p.element,height:m[v]})),uS=l=>Tn(l,(m,p)=>m+p,0),g3=(l,m)=>Fo.hasColumns(l)?lS(l,m):Ty(l,m),zg=(l,m,p)=>{const v=g3(l,m);Qe(v,T=>{p.setElementWidth(T.element,T.width)})},bb=(l,m,p,v,T)=>{const D=Fo.fromTable(l),I=T.getCellDelta(m),G=T.getWidths(D,T),K=p===D.grid.columns-1,pe=v.clampTableDelta(G,p,I,T.minCellWidth(),K),_e=d3(G,p,pe,T,v),ft=dn(_e,(Ut,kt)=>Ut+G[kt]);zg(D,ft,T),v.resizeTable(T.adjustTableWidth,pe,K)},tp=(l,m,p)=>{const v=Fo.fromTable(l),T=Wi(v,l),D=dn(T,(K,pe)=>p===pe?Math.max(m+K,Pm()):K),I=f3(v,D);Qe(I,K=>{Jd(K.element,K.height)}),Qe(Fo.justCells(v),K=>{Vm(K.element)});const G=uS(D);Jd(l,G)},ky=(l,m,p,v,T)=>{const D=Fo.generate(m),I=v.getWidths(D,v),G=v.pixelWidth(),{newSizes:K,delta:pe}=T.calcRedestributedWidths(I,G,p.pixelDelta,v.isRelative);zg(D,K,v),v.adjustTableWidth(pe)},dS=(l,m,p,v)=>{const T=Fo.generate(m),D=v.getWidths(T,v);zg(T,D,v)},Qm=l=>Re(l,(p,v)=>yt(p,D=>D.column===v.column)?p:p.concat([v]),[]).sort((p,v)=>p.column-v.column),vb=mr("col"),yb=mr("colgroup"),_y=l=>us(l)==="tr"||yb(l),Ay=l=>{const m=Kr(l,"colspan",1),p=Kr(l,"rowspan",1);return{element:l,colspan:m,rowspan:p}},Vg=(l,m=Ay)=>{const p=G=>vb(G.element)?l.col(G):l.cell(G),v=G=>yb(G.element)?l.colgroup(G):l.row(G),T=G=>{if(_y(G))return v({element:G});{const K=G,pe=p(m(K));return D=ie.some({item:K,replacement:pe}),pe}};let D=ie.none();return{getOrInit:(G,K)=>D.fold(()=>T(G),pe=>K(G,pe.item)?pe.replacement:T(G))}},h3=l=>m=>{const p=[],v=(I,G)=>F(p,K=>G(K.item,I)),T=I=>{const G=l==="td"?{scope:null}:{},K=m.replace(I,l,G);return p.push({item:I,sub:K}),K};return{replaceOrInit:(I,G)=>{if(_y(I)||vb(I))return I;{const K=I;return v(K,G).fold(()=>T(K),pe=>G(I,pe.item)?pe.sub:T(K))}}}},Oy=l=>le(l,"scope").map(m=>m.substr(0,3)),Da={modification:Vg,transform:h3,merging:l=>({unmerge:v=>{const T=Oy(v);return T.each(D=>$s(v,"scope",D)),()=>{const D=l.cell({element:v,colspan:1,rowspan:1});return sr(D,"width"),sr(v,"width"),T.each(I=>$s(D,"scope",I)),D}},merge:v=>{const T=()=>{const D=Pr(dn(v,Oy));if(D.length===0)return ie.none();{const I=D[0],G=["row","col"];return yt(D,pe=>pe!==I&&To(G,pe))?ie.none():ie.from(I)}};return sr(v[0],"width"),T().fold(()=>re(v[0],"scope"),D=>$s(v[0],"scope",D+"group")),oe(v[0])}})},p3=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Ue=(l,m)=>{const p=l.property().name(m);return To(["ol","ul"],p)},lm=(l,m)=>{const p=l.property().name(m);return To(p3,p)},b3=(l,m)=>To(["br","img","hr","input"],l.property().name(m)),Cb=Gs(),np=l=>lm(Cb,l),Iu=l=>Ue(Cb,l),mS=l=>b3(Cb,l),fS=l=>{const m=mr("br"),p=K=>No(K,pe=>m(pe)||qr(pe)&&hi(pe).trim().length===0),v=K=>us(K)==="li"||at(K,Iu).isSome(),T=K=>vc(K).map(pe=>np(pe)?!0:mS(pe)?us(pe)!=="img":!1).getOr(!1),D=K=>Zm(K).bind(pe=>{const _e=T(pe);return Po(pe).map(ft=>_e===!0||v(ft)||m(pe)||np(ft)&&!pt(K,ft)?[]:[st.fromTag("br")])}).getOr([]),G=(()=>{const K=wo(l,pe=>{const _e=Xn(pe);return p(_e)?[]:_e.concat(D(pe))});return K.length===0?[st.fromTag("br")]:K})();ai(l[0]),Bo(l[0],G)},wb=l=>Dg(l,!0),Sb=l=>{ad(l).length===0&&er(l)},xb=(l,m)=>({grid:l,cursor:m}),gS=l=>ko(l,m=>ko(m.cells,p=>{const v=p.element;return Nm(wb(v),v)})),v3=(l,m,p)=>{var v,T;const D=Mc(l).rows;return ie.from((T=(v=D[m])===null||v===void 0?void 0:v.cells[p])===null||T===void 0?void 0:T.element).filter(wb).orThunk(()=>gS(D))},Bi=(l,m,p)=>{const v=v3(l,m,p);return xb(l,v)},Eb=l=>Re(l,(p,v)=>yt(p,D=>D.row===v.row)?p:p.concat([v]),[]).sort((p,v)=>p.row-v.row),hS=(l,m,p,v)=>{const T=m[0].row,D=Eb(m),I=Tn(D,(G,K)=>({grid:Qh(G.grid,T,K.row+G.delta,p,v.getOrInit),delta:G.delta+1}),{grid:l,delta:0}).grid;return Bi(I,T,m[0].column)},y3=(l,m,p,v)=>{const T=Eb(m),D=T[T.length-1],I=D.row+D.rowspan,G=Tn(T,(K,pe)=>Qh(K,I,pe.row,p,v.getOrInit),l);return Bi(G,I,m[0].column)},C3=(l,m,p,v)=>{const T=m.details,D=Qm(T),I=D[0].column,G=Tn(D,(K,pe)=>({grid:cS(K.grid,I,pe.column+K.delta,p,v.getOrInit),delta:K.delta+1}),{grid:l,delta:0}).grid;return Bi(G,T[0].row,I)},pS=(l,m,p,v)=>{const T=m.details,D=T[T.length-1],I=D.column+D.colspan,G=Qm(T),K=Tn(G,(pe,_e)=>cS(pe,I,_e.column,p,v.getOrInit),l);return Bi(K,T[0].row,I)},Tb=(l,m,p,v)=>{const T=Qm(m),D=dn(T,G=>G.column),I=D1(l,D,!0,p,v.replaceOrInit);return Bi(I,m[0].row,m[0].column)},w3=(l,m,p,v)=>{const T=R1(l,m,p,v.replaceOrInit);return Bi(T,m[0].row,m[0].column)},bS=(l,m,p,v)=>{const T=Qm(m),D=dn(T,G=>G.column),I=D1(l,D,!1,p,v.replaceOrInit);return Bi(I,m[0].row,m[0].column)},Ar=(l,m,p,v)=>{const T=R1(l,m,p,v.replaceOrInit);return Bi(T,m[0].row,m[0].column)},op=(l,m)=>(p,v,T,D,I)=>{const G=Eb(v),K=dn(G,_e=>_e.row),pe=iS(p,K,l,m,T,D.replaceOrInit,I);return Bi(pe,v[0].row,v[0].column)},vS=op("thead",!0),yS=op("tbody",!1),kb=op("tfoot",!1),oi=(l,m,p,v)=>{const T=Qm(m.details),D=ep(l,dn(T,G=>G.column)),I=D.length>0?D[0].cells.length-1:0;return Bi(D,T[0].row,Math.min(T[0].column,I))},Cl=(l,m,p,v)=>{const T=Eb(m),D=du(l,T[0].row,T[T.length-1].row),I=Math.max(Mc(D).rows.length-1,0);return Bi(D,Math.min(m[0].row,I),m[0].column)},CS=(l,m,p,v)=>{const T=m.cells;fS(T);const D=n3(l,m.bounds,p,v.merge(T));return xb(D,ie.from(T[0]))},wS=(l,m,p,v)=>{const D=Tn(m,(I,G)=>Jc(I,G,p,v.unmerge(G)),l);return xb(D,ie.from(m[0]))},Dy=(l,m,p,v)=>{const D=((K,pe)=>{const _e=Fo.fromTable(K);return E1(_e,pe,!0)})(m.clipboard,m.generators),I=li(m.row,m.column);return Ig(I,l,D,m.generators,p).fold(()=>xb(l,ie.some(m.element)),K=>Bi(K,m.row,m.column))},M1=(l,m,p)=>{const v=Tf(l,p.section),T=Fo.generate(v);return E1(T,m,!0)},SS=(l,m,p,v)=>{const T=Mc(l).rows,D=m.cells[0].column,I=T[m.cells[0].row],G=M1(m.clipboard,m.generators,I),K=sS(D,l,G,m.generators,p);return Bi(K,m.cells[0].row,m.cells[0].column)},Ry=(l,m,p,v)=>{const T=Mc(l).rows,D=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,I=T[m.cells[0].row],G=M1(m.clipboard,m.generators,I),K=sS(D,l,G,m.generators,p);return Bi(K,m.cells[0].row,D)},My=(l,m,p,v)=>{const T=Mc(l).rows,D=m.cells[0].row,I=T[D],G=M1(m.clipboard,m.generators,I),K=rS(D,l,G,m.generators,p);return Bi(K,m.cells[0].row,m.cells[0].column)},xS=(l,m,p,v)=>{const T=Mc(l).rows,D=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,I=T[m.cells[0].row],G=M1(m.clipboard,m.generators,I),K=rS(D,l,G,m.generators,p);return Bi(K,D,m.cells[0].column)},um=(l,m)=>{const p=Fo.fromTable(l);return ji(p,m).bind(T=>{const D=T[T.length-1],I=T[0].column,G=D.column+D.colspan,K=to(dn(p.all,pe=>St(pe.cells,_e=>_e.column>=I&&_e.column<G)));return S1(K)}).getOr("")},qi=(l,m)=>{const p=Fo.fromTable(l);return ji(p,m).bind(S1).getOr("")},ES=(l,m)=>{const p=Fo.fromTable(l);return ji(p,m).bind(T=>{const D=T[T.length-1],I=T[0].row,G=D.row+D.rowspan,K=p.all.slice(I,G);return Yw(K)}).getOr("")},Cs=(l,m,p,v)=>dS(l,m,p,v.sizing),Lu=(l,m,p,v)=>ky(l,m,p,v.sizing,v.resize),sp=(l,m)=>yt(m,p=>p.column===0&&p.isLocked),TS=(l,m)=>yt(m,p=>p.column+p.colspan>=l.grid.columns&&p.isLocked),Ny=(l,m)=>{const p=Kd(l),v=Qm(m);return Re(v,(T,D)=>{const G=p[D.column].map(ys).getOr(0);return T+G},0)},kS=l=>(m,p)=>ji(m,p).filter(v=>!(l?sp:TS)(m,v)).map(v=>({details:v,pixelDelta:Ny(m,v)})),Kf=(l,m)=>Gi(l,m).map(p=>({details:p,pixelDelta:-Ny(l,p)})),ma=l=>(m,p)=>Yh(m,p).filter(v=>!(l?sp:TS)(m,v.cells)),dm=Da.transform("th"),rp=Da.transform("td"),_S=Fr(hS,ji,Rt,Rt,Da.modification),S3=Fr(y3,ji,Rt,Rt,Da.modification),_b=Fr(C3,kS(!0),Lu,Rt,Da.modification),Py=Fr(pS,kS(!1),Lu,Rt,Da.modification),By=Fr(oi,Kf,Lu,Sb,Da.modification),$y=Fr(Cl,ji,Rt,Sb,Da.modification),AS=Fr(Tb,Gi,Rt,Rt,dm),OS=Fr(bS,Gi,Rt,Rt,rp),DS=Fr(vS,ji,Rt,Rt,dm),RS=Fr(yS,ji,Rt,Rt,rp),x3=Fr(kb,ji,Rt,Rt,rp),Ua=Fr(w3,Gi,Rt,Rt,dm),E3=Fr(Ar,Gi,Rt,Rt,rp),ef=Fr(CS,Zf,Cs,Rt,Da.merging),Fy=Fr(wS,jf,Cs,Rt,Da.merging),Iy=Fr(Dy,tS,Cs,Rt,Da.modification),MS=Fr(SS,ma(!0),Rt,Rt,Da.modification),Ab=Fr(Ry,ma(!1),Rt,Rt,Da.modification),Ly=Fr(My,Yh,Rt,Rt,Da.modification),Hy=Fr(xS,Yh,Rt,Rt,Da.modification),T3=um,k3=qi,Tc=ES,$c=(l,m)=>l.dispatch("NewRow",{node:m}),Ra=(l,m)=>l.dispatch("NewCell",{node:m}),kc=(l,m,p)=>{l.dispatch("TableModified",{...p,table:m})},Qc=(l,m,p,v,T)=>{l.dispatch("TableSelectionChange",{cells:m,start:p,finish:v,otherCells:T})},Uc=l=>{l.dispatch("TableSelectionClear")},zy=(l,m,p,v,T)=>{l.dispatch("ObjectResizeStart",{target:m,width:p,height:v,origin:T})},N1=(l,m,p,v,T)=>{l.dispatch("ObjectResized",{target:m,width:p,height:v,origin:T})},P1={structure:!1,style:!0},fa={structure:!0,style:!1},NS={structure:!0,style:!0},Ob=(l,m)=>Ag(l)?L.percentageSize(m):Pu(l)?L.pixelSize(m):L.getTableSize(m),sn=(l,m,p)=>{const v=Ci=>us(Vh(Ci))==="table",T=Ci=>!v(l)||Pg(Ci).rows>1,D=Ci=>!v(l)||Pg(Ci).columns>1,I=Hh(l),G=sm(l)?Rt:Ng,K=Ci=>{switch(Bf(l)){case"section":return x1.section();case"sectionCells":return x1.sectionCells();case"cells":return x1.cells();default:return x1.getTableSectionType(Ci,"section")}},pe=(Ci,U2)=>U2.cursor.fold(()=>{const c0=ad(Ci);return fe(c0).filter(ho).map(ym=>{p.clearSelectedCells(Ci.dom);const oa=l.dom.createRng();return oa.selectNode(ym.dom),l.selection.setRng(oa),$s(ym,"data-mce-selected","1"),oa})},c0=>{const ym=Hf(c0),oa=l.dom.createRng();return oa.setStart(ym.element.dom,ym.offset),oa.setEnd(ym.element.dom,ym.offset),l.selection.setRng(oa),p.clearSelectedCells(Ci.dom),ie.some(oa)}),_e=(Ci,U2,c0,ym)=>(oa,lf,Sk=!1)=>{Ff(oa);const W2=st.fromDom(l.getDoc()),xk=tm(c0,W2,I),Z2={sizing:Ob(l,oa),resize:sm(l)?Gw():db(),section:K(oa)};return U2(oa)?Ci(oa,lf,xk,Z2).bind(j2=>{m.refresh(oa.dom),Qe(j2.newRows,a0=>{$c(l,a0.dom)}),Qe(j2.newCells,a0=>{Ra(l,a0.dom)});const jx=pe(oa,j2);return ho(oa)&&(Ff(oa),Sk||kc(l,oa.dom,ym)),jx.map(a0=>({rng:a0,effect:ym}))}):ie.none()},ft=_e($y,T,Rt,fa),Ut=_e(By,D,Rt,fa),kt=_e(_S,De,Rt,fa),_t=_e(S3,De,Rt,fa),mn=_e(_b,De,G,fa),ht=_e(Py,De,G,fa),$n=_e(ef,De,Rt,fa),rt=_e(Fy,De,Rt,fa),Xt=_e(MS,De,Rt,fa),Ms=_e(Ab,De,Rt,fa),Ns=_e(Ly,De,Rt,fa),Sn=_e(Hy,De,Rt,fa),nr=_e(Iy,De,Rt,NS),yi=_e(Ua,De,Rt,fa),cg=_e(E3,De,Rt,fa),Wu=_e(AS,De,Rt,fa),qo=_e(OS,De,Rt,fa),Vs=_e(DS,De,Rt,fa),Ga=_e(RS,De,Rt,fa),na=_e(x3,De,Rt,fa);return{deleteRow:ft,deleteColumn:Ut,insertRowsBefore:kt,insertRowsAfter:_t,insertColumnsBefore:mn,insertColumnsAfter:ht,mergeCells:$n,unmergeCells:rt,pasteColsBefore:Xt,pasteColsAfter:Ms,pasteRowsBefore:Ns,pasteRowsAfter:Sn,pasteCells:nr,makeCellsHeader:yi,unmakeCellsHeader:cg,makeColumnsHeader:Wu,unmakeColumnsHeader:qo,makeRowsHeader:Vs,makeRowsBody:Ga,makeRowsFooter:na,getTableRowType:Tc,getTableCellType:k3,getTableColType:T3}},Wg=(l,m,p)=>{const v=Kr(l,m,1);p===1||v<=1?re(l,m):$s(l,m,Math.min(p,v))},Vy=(l,m)=>p=>{const v=p.column+p.colspan-1,T=p.column;return v>=l&&T<m},GR=(l,m,p)=>{if(Fo.hasColumns(l)){const v=St(Fo.justColumns(l),Vy(m,p)),T=dn(v,I=>{const G=oc(I.element);return Wg(G,"span",p-m),G}),D=st.fromTag("colgroup");return Bo(D,T),[D]}else return[]},_3=(l,m,p)=>dn(l.all,v=>{const T=St(v.cells,Vy(m,p)),D=dn(T,G=>{const K=oc(G.element);return Wg(K,"colspan",p-m),K}),I=st.fromTag("tr");return Bo(I,D),I}),A3=(l,m)=>{const p=Fo.fromTable(l);return Gi(p,m).map(T=>{const D=T[T.length-1],I=T[0].column,G=D.column+D.colspan,K=GR(p,I,G),pe=_3(p,I,G);return[...K,...pe]})},Ki=(l,m,p)=>{const v=Fo.fromTable(l);return ji(v,m).bind(D=>{const I=E1(v,p,!1),K=Mc(I).rows.slice(D[0].row,D[D.length-1].row+D[D.length-1].rowspan),pe=wo(K,ft=>{const Ut=St(ft.cells,kt=>!kt.isLocked);return Ut.length>0?[{...ft,cells:Ut}]:[]}),_e=hb(pe);return Nm(_e.length>0,_e)}).map(D=>Kh(D))},Db=Pi.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),PS=(l,m,p)=>{const v=p.substring(0,p.length-l.length),T=parseFloat(v);return v===T.toString()?m(T):Db.invalid(p)},mm={...Db,from:l=>ua(l,"%")?PS("%",Db.percent,l):ua(l,"px")?PS("px",Db.pixels,l):Db.invalid(l)},ea=(l,m)=>dn(l,p=>mm.from(p).fold(()=>p,T=>T/m*100+"%",T=>T+"%")),mu=(l,m,p)=>{const v=p/m;return dn(l,T=>mm.from(T).fold(()=>T,I=>I*v+"px",I=>I/100*p+"px"))},vi=(l,m)=>{const p=l.fold(()=>oe(""),v=>{const T=v/m;return oe(T+"px")},()=>{const v=100/m;return oe(v+"%")});return Mo(m,p)},Uy=(l,m,p)=>l.fold(()=>m,v=>mu(m,p,v),v=>ea(m,p)),Rb=(l,m,p)=>{const v=mm.from(p),T=No(l,D=>D==="0px")?vi(v,l.length):Uy(v,l,m);return $S(T)},Wy=(l,m)=>l.length===0?m:Tn(l,(p,v)=>mm.from(v).fold(oe(0),it,it)+p,0),BS=(l,m)=>{const p=Math.floor(l);return{value:p+m,remainder:l-p}},Mb=(l,m)=>mm.from(l).fold(oe(l),p=>p+m+"px",p=>p+m+"%"),$S=l=>{if(l.length===0)return l;const m=Tn(l,(v,T)=>{const D=mm.from(T).fold(()=>({value:T,remainder:0}),I=>BS(I,"px"),I=>({value:I+"%",remainder:0}));return{output:[D.value].concat(v.output),remainder:v.remainder+D.remainder}},{output:[],remainder:0}),p=m.output;return p.slice(0,p.length-1).concat([Mb(p[p.length-1],Math.round(m.remainder))])},FS=mm.from,IS=(l,m,p)=>{Qe(m,v=>{const T=l.slice(v.column,v.colspan+v.column),D=Wy(T,ul());po(v.element,"width",D+p)})},O3=(l,m,p)=>{Qe(m,(v,T)=>{const D=Wy([l[T]],ul());po(v.element,"width",D+p)})},D3=(l,m,p)=>{Qe(p,v=>{sr(v.element,"height")}),Qe(m,(v,T)=>{po(v.element,"height",l[T])})},R3=l=>FS(l).fold(oe("px"),oe("px"),oe("%")),Zy=(l,m,p)=>{const v=Fo.fromTable(l),T=v.all,D=Fo.justCells(v),I=Fo.justColumns(v);m.each(G=>{const K=R3(G),pe=di(l),_e=l1(v,l),ft=Rb(_e,pe,G);Fo.hasColumns(v)?O3(ft,I,K):IS(ft,D,K),po(l,"width",G)}),p.each(G=>{const K=gt(l),pe=Bc(v,l),_e=Rb(pe,K,G);D3(_e,T,D),po(l,"height",G)})},Nb=Hl,LS=Xc,B1=ay,cp=l=>{re(l,"width"),re(l,"height")},Yf=l=>{const m=Xr(l);Zy(l,ie.some(m),ie.none()),cp(l)},Pb=l=>{const m=ds(l);Zy(l,ie.some(m),ie.none()),cp(l)},M3=l=>{const m=i1(l);Zy(l,ie.none(),ie.some(m)),cp(l)},HS=l=>{sr(l,"width");const m=_i(l),p=m.length>0?m:ad(l);Qe(p,v=>{sr(v,"width"),cp(v)}),cp(l)},N3={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},zS=()=>st.fromTag("th"),VS=()=>st.fromTag("td"),$i=()=>st.fromTag("col"),Bb=(l,m,p,v)=>{const T=st.fromTag("tr");for(let D=0;D<l;D++){const I=v<m||D<p?zS():VS();D<p&&$s(I,"scope","row"),v<m&&$s(I,"scope","col"),Fs(I,st.fromTag("br")),Fs(T,I)}return T},US=l=>{const m=st.fromTag("colgroup");return Mo(l,()=>Fs(m,$i())),m},jy=(l,m,p,v)=>Mo(l,T=>Bb(m,p,v,T)),$1=(l,m,p,v,T,D=N3)=>{const I=st.fromTag("table"),G=T!=="cells";Is(I,D.styles),ec(I,D.attributes),D.colGroups&&Fs(I,US(m));const K=Math.min(l,p);if(G&&p>0){const kt=st.fromTag("thead");Fs(I,kt);const mn=jy(p,m,T==="sectionCells"?K:0,v);Bo(kt,mn)}const pe=st.fromTag("tbody");Fs(I,pe);const _e=G?l-K:l,Ut=jy(_e,m,G?0:p,v);return Bo(pe,Ut),I},P3=l=>l.dom.innerHTML,ap=l=>{const m=st.fromTag("div"),p=st.fromDom(l.dom.cloneNode(!0));return Fs(m,p),P3(m)},B3=(l,m)=>{l.selection.select(m.dom,!0),l.selection.collapse(!0)},Gy=(l,m)=>{Gc(m,"td,th").each(mt(B3,l))},$3=(l,m)=>{Qe(es(m,"tr"),p=>{$c(l,p.dom),Qe(es(p,"th,td"),v=>{Ra(l,v.dom)})})},F1=l=>fn(l)&&l.indexOf("%")!==-1,F3=(l,m,p,v,T)=>{const D=Oa(l),I={styles:D,attributes:rm(l),colGroups:d1(l)};return l.undoManager.ignore(()=>{const G=$1(p,m,T,v,Bf(l),I);$s(G,"data-mce-id","__mce");const K=ap(G);l.insertContent(K),l.addVisual()}),Gc(Vh(l),'table[data-mce-id="__mce"]').map(G=>(Pu(l)?Pb(G):ti(l)?HS(G):(Ag(l)||F1(D.width))&&Yf(G),Ff(G),re(G,"data-mce-id"),$3(l,G),Gy(l,G),G.dom)).getOrNull()},I3=(l,m,p,v={})=>{const T=D=>io(D)&&D>0;if(T(m)&&T(p)){const D=v.headerRows||0,I=v.headerColumns||0;return F3(l,p,m,I,D)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var $b=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const WS="x-tinymce/dom-table-",qy=WS+"rows",I1=WS+"columns",ZS=l=>{const m=$b.FakeClipboardItem(l);$b.write([m])},Ky=l=>{var m;const p=(m=$b.read())!==null&&m!==void 0?m:[];return ko(p,v=>ie.from(v.getType(l)))},Yy=l=>{Ky(l).isSome()&&$b.clear()},Xy=l=>{l.fold(jS,m=>ZS({[qy]:m}))},Zg=()=>Ky(qy),jS=()=>Yy(qy),Jy=l=>{l.fold(qS,m=>ZS({[I1]:m}))},GS=()=>Ky(I1),qS=()=>Yy(I1),Fi=l=>Lf(f1(l),qm(l)).filter(rb),Fb=l=>lu(f1(l),qm(l)).filter(rb),Ib=(l,m)=>{const p=qm(l),v=()=>Fi(l).each(ht=>{Sa(ht,p).filter(Z(p)).each($n=>{const rt=st.fromText("");if(nc($n,rt),er($n),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const Xt=l.dom.createRng();Xt.setStart(rt.dom,0),Xt.setEnd(rt.dom,0),l.selection.setRng(Xt),l.nodeChanged()}})}),T=ht=>Fi(l).each($n=>{ti(l)||Pu(l)||Ag(l)||Sa($n,p).each(Xt=>{ht==="relative"&&!Nb(Xt)?Yf(Xt):ht==="fixed"&&!LS(Xt)?Pb(Xt):ht==="responsive"&&!B1(Xt)&&HS(Xt),Ff(Xt),kc(l,Xt.dom,fa)})}),D=ht=>Sa(ht,p),I=ht=>Fb(l).bind($n=>D($n).map(rt=>ht(rt,$n))),G=(ht,$n)=>{I(rt=>{l.formatter.toggle("tableclass",{value:$n},rt.dom),kc(l,rt.dom,P1)})},K=(ht,$n)=>{I(rt=>{const Xt=Jm(l),Ns=No(Xt,Sn=>l.formatter.match("tablecellclass",{value:$n},Sn.dom))?l.formatter.remove:l.formatter.apply;Qe(Xt,Sn=>Ns("tablecellclass",{value:$n},Sn.dom)),kc(l,rt.dom,P1)})},pe=()=>{Fi(l).each(ht=>{Sa(ht,p).each($n=>{xo($n,"caption").fold(()=>{const rt=st.fromTag("caption");Fs(rt,st.fromText("Caption")),Su($n,rt,0),l.selection.setCursorLocation(rt.dom,0)},rt=>{mr("caption")(ht)&&ct("td",$n).each(Xt=>l.selection.setCursorLocation(Xt.dom,0)),er(rt)}),kc(l,$n.dom,fa)})})},_e=ht=>{l.focus()},ft=(ht,$n=!1)=>I((rt,Xt)=>{const Ms=Jr(Jm(l),rt,Xt);ht(rt,Ms,$n).each(_e)}),Ut=()=>I((ht,$n)=>{const rt=Jr(Jm(l),ht,$n),Xt=tm(Rt,st.fromDom(l.getDoc()),ie.none());return Ki(ht,rt,Xt)}),kt=()=>I((ht,$n)=>{const rt=Jr(Jm(l),ht,$n);return A3(ht,rt)}),_t=(ht,$n)=>$n().each(rt=>{const Xt=dn(rt,Ms=>oc(Ms));I((Ms,Ns)=>{const Sn=Mu(st.fromDom(l.getDoc())),nr=ic(Jm(l),Ns,Xt,Sn);ht(Ms,nr).each(_e)})}),mn=ht=>($n,rt)=>Nr(rt,"type").each(Xt=>{ft(ht(Xt),rt.no_events)});Wn({mceTableSplitCells:()=>ft(m.unmergeCells),mceTableMergeCells:()=>ft(m.mergeCells),mceTableInsertRowBefore:()=>ft(m.insertRowsBefore),mceTableInsertRowAfter:()=>ft(m.insertRowsAfter),mceTableInsertColBefore:()=>ft(m.insertColumnsBefore),mceTableInsertColAfter:()=>ft(m.insertColumnsAfter),mceTableDeleteCol:()=>ft(m.deleteColumn),mceTableDeleteRow:()=>ft(m.deleteRow),mceTableCutCol:()=>kt().each(ht=>{Jy(ht),ft(m.deleteColumn)}),mceTableCutRow:()=>Ut().each(ht=>{Xy(ht),ft(m.deleteRow)}),mceTableCopyCol:()=>kt().each(ht=>Jy(ht)),mceTableCopyRow:()=>Ut().each(ht=>Xy(ht)),mceTablePasteColBefore:()=>_t(m.pasteColsBefore,GS),mceTablePasteColAfter:()=>_t(m.pasteColsAfter,GS),mceTablePasteRowBefore:()=>_t(m.pasteRowsBefore,Zg),mceTablePasteRowAfter:()=>_t(m.pasteRowsAfter,Zg),mceTableDelete:v,mceTableCellToggleClass:K,mceTableToggleClass:G,mceTableToggleCaption:pe,mceTableSizingMode:(ht,$n)=>T($n),mceTableCellType:mn(ht=>ht==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:mn(ht=>ht==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:mn(ht=>{switch(ht){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(ht,$n)=>l.addCommand($n,ht)),l.addCommand("mceInsertTable",(ht,$n)=>{I3(l,$n.rows,$n.columns,$n.options)}),l.addCommand("mceTableApplyCellStyle",(ht,$n)=>{const rt=Ns=>"tablecell"+Ns.toLowerCase().replace("-","");if(!je($n))return;const Xt=St(Jm(l),rb);if(Xt.length===0)return;const Ms=Js($n,(Ns,Sn)=>l.formatter.has(rt(Sn))&&fn(Ns));Gt(Ms)||(Wn(Ms,(Ns,Sn)=>{const nr=rt(Sn);Qe(Xt,yi=>{Ns===""?l.formatter.remove(nr,{value:null},yi.dom,!0):l.formatter.apply(nr,{value:Ns},yi.dom)})}),D(Xt[0]).each(Ns=>kc(l,Ns.dom,P1)))})},Qy=(l,m)=>{const p=qm(l),v=T=>lu(f1(l)).bind(D=>Sa(D,p).map(I=>{const G=Jr(Jm(l),I,D);return T(I,G)})).getOr("");Wn({mceTableRowType:()=>v(m.getTableRowType),mceTableCellType:()=>v(m.getTableCellType),mceTableColType:()=>v(m.getTableColType)},(T,D)=>l.addQueryValueHandler(D,T))},e2=Pi.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),fm=(l,m,p,v)=>l.fold(m,p,v),Lb=l=>l.fold(it,it,it),L3=e2.before,Xf=e2.on,Hb=e2.after,Ii={before:L3,on:Xf,after:Hb,cata:fm,getStart:Lb},ip={create:(l,m)=>({selection:l,kill:m})},H3=(l,m)=>{const p=l.document.createRange();return p.selectNode(m.dom),p},L1=(l,m)=>{const p=l.document.createRange();return z3(p,m),p},z3=(l,m)=>l.selectNodeContents(m.dom),V3=(l,m)=>{m.fold(p=>{l.setStartBefore(p.dom)},(p,v)=>{l.setStart(p.dom,v)},p=>{l.setStartAfter(p.dom)})},KS=(l,m)=>{m.fold(p=>{l.setEndBefore(p.dom)},(p,v)=>{l.setEnd(p.dom,v)},p=>{l.setEndAfter(p.dom)})},YS=(l,m,p)=>{const v=l.document.createRange();return V3(v,m),KS(v,p),v},zb=(l,m,p,v,T)=>{const D=l.document.createRange();return D.setStart(m.dom,p),D.setEnd(v.dom,T),D},U3=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),W3=l=>{const m=l.getClientRects(),p=m.length>0?m[0]:l.getBoundingClientRect();return p.width>0||p.height>0?ie.some(p).map(U3):ie.none()},H1=Pi.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),t2=(l,m,p)=>m(st.fromDom(p.startContainer),p.startOffset,st.fromDom(p.endContainer),p.endOffset),n2=(l,m)=>m.match({domRange:p=>({ltr:oe(p),rtl:ie.none}),relative:(p,v)=>({ltr:Ud(()=>YS(l,p,v)),rtl:Ud(()=>ie.some(YS(l,v,p)))}),exact:(p,v,T,D)=>({ltr:Ud(()=>zb(l,p,v,T,D)),rtl:Ud(()=>ie.some(zb(l,T,D,p,v)))})}),XS=(l,m)=>{const p=m.ltr();return p.collapsed?m.rtl().filter(T=>T.collapsed===!1).map(T=>H1.rtl(st.fromDom(T.endContainer),T.endOffset,st.fromDom(T.startContainer),T.startOffset)).getOrThunk(()=>t2(l,H1.ltr,p)):t2(l,H1.ltr,p)},JS=(l,m)=>{const p=n2(l,m);return XS(l,p)},Vb=(l,m)=>JS(l,m).match({ltr:(v,T,D,I)=>{const G=l.document.createRange();return G.setStart(v.dom,T),G.setEnd(D.dom,I),G},rtl:(v,T,D,I)=>{const G=l.document.createRange();return G.setStart(D.dom,I),G.setEnd(v.dom,T),G}});H1.ltr,H1.rtl;const lp={create:(l,m,p,v)=>({start:l,soffset:m,finish:p,foffset:v})},z1={create:(l,m,p,v)=>({start:Ii.on(l,m),finish:Ii.on(p,v)})},V1=(l,m)=>{const p=Vb(l,m);return lp.create(st.fromDom(p.startContainer),p.startOffset,st.fromDom(p.endContainer),p.endOffset)},Ub=z1.create,Z3=(l,m,p,v,T,D,I)=>pt(p,T)&&v===D?ie.none():sc(p,"td,th",m).bind(G=>sc(T,"td,th",m).bind(K=>QS(l,m,G,K,I))),QS=(l,m,p,v,T)=>pt(p,v)?ie.none():lb(p,v,m).bind(D=>{const I=D.boxes.getOr([]);return I.length>1?(T(l,I,D.start,D.finish),ie.some(ip.create(ie.some(Ub(p,0,p,Ri(p))),!0))):ie.none()}),j3=(l,m,p,v,T)=>{const D=I=>(T.clearBeforeUpdate(p),T.selectRange(p,I.boxes,I.start,I.finish),I.boxes);return Vl(v,l,m,T.firstSelectedSelector,T.lastSelectedSelector).map(D)},o2=(l,m)=>({item:l,mode:m}),s2=(l,m,p,v=tf)=>l.property().parent(m).map(T=>o2(T,v)),tf=(l,m,p,v=U1)=>p.sibling(l,m).map(T=>o2(T,v)),U1=(l,m,p,v=U1)=>{const T=l.property().children(m);return p.first(T).map(I=>o2(I,v))},G3=[{current:s2,next:tf,fallback:ie.none()},{current:tf,next:U1,fallback:ie.some(s2)},{current:U1,next:U1,fallback:ie.some(tf)}],r2=(l,m,p,v,T=G3)=>F(T,I=>I.current===p).bind(I=>I.current(l,m,v,I.next).orThunk(()=>I.fallback.bind(G=>r2(l,m,G,v)))),tx={left:()=>({sibling:(p,v)=>p.query().prevSibling(v),first:p=>p.length>0?ie.some(p[p.length-1]):ie.none()}),right:()=>({sibling:(p,v)=>p.query().nextSibling(v),first:p=>p.length>0?ie.some(p[0]):ie.none()})},c2=(l,m,p,v,T,D)=>r2(l,m,v,T).bind(G=>D(G.item)?ie.none():p(G.item)?ie.some(G.item):c2(l,G.item,p,G.mode,T,D)),Jf=(l,m,p,v)=>c2(l,m,p,tf,tx.left(),v),q3=(l,m,p,v)=>c2(l,m,p,tf,tx.right(),v),a2=l=>m=>l.property().children(m).length===0,i2=(l,m,p)=>Wb(l,m,a2(l),p),l2=(l,m,p)=>u2(l,m,a2(l),p),Wb=Jf,u2=q3,Zb=Gs(),up=(l,m)=>i2(Zb,l,m),d2=(l,m)=>l2(Zb,l,m),K3=(l,m,p)=>Wb(Zb,l,m,p),Y3=(l,m,p)=>u2(Zb,l,m,p),jg=(l,m,p)=>at(l,m,p).isSome(),W1=Pi.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),nx=(l,m,p)=>{const v=l.getRect(m),T=l.getRect(p);return T.right>v.left&&T.left<v.right},Li=l=>sc(l,"tr"),dp={...W1,verify:(l,m,p,v,T,D,I)=>sc(v,"td,th",I).bind(G=>sc(m,"td,th",I).map(K=>pt(G,K)?pt(v,G)&&Ri(G)===T?D(K):W1.none("in same cell"):Wh(Li,[G,K]).fold(()=>nx(l,K,G)?W1.success():D(K),pe=>D(K)))).getOr(W1.none("default")),cata:(l,m,p,v,T)=>l.fold(m,p,v,T)},ox=(l,m,p,v)=>({parent:l,children:m,element:p,index:v}),sx=l=>Po(l).bind(m=>{const p=Xn(m);return Z1(p,l).map(v=>ox(m,p,l,v))}),Z1=(l,m)=>_s(l,mt(pt,m)),Qf=mr("br"),m2=(l,m,p)=>m(l,p).bind(v=>qr(v)&&hi(v).trim().length===0?m2(v,m,p):ie.some(v)),rx=(l,m,p)=>p.traverse(m).orThunk(()=>m2(m,p.gather,l)).map(p.relative),J3=(l,m)=>vo(l,m).filter(Qf).orThunk(()=>vo(l,m-1).filter(Qf)),cx=(l,m,p,v)=>J3(m,p).bind(T=>v.traverse(T).fold(()=>m2(T,v.gather,l).map(v.relative),D=>sx(D).map(I=>Ii.on(I.parent,I.index)))),j1=(l,m,p,v)=>(Qf(m)?rx(l,m,v):cx(l,m,p,v)).map(D=>({start:D,finish:D})),ax=l=>dp.cata(l,m=>ie.none(),()=>ie.none(),m=>ie.some(Zi(m,0)),m=>ie.some(Zi(m,Ri(m)))),G1=(l,m)=>({left:l.left,top:l.top+m,right:l.right,bottom:l.bottom+m}),mp=(l,m)=>({left:l.left,top:l.top-m,right:l.right,bottom:l.bottom-m}),f2=(l,m,p)=>({left:l.left+m,top:l.top+p,right:l.right+m,bottom:l.bottom+p}),fp=l=>l.top,Gg=l=>l.bottom,qg=(l,m,p)=>p>=0&&p<Ri(m)?l.getRangedRect(m,p,m,p+1):p>0?l.getRangedRect(m,p-1,m,p):ie.none(),nf=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),g2=(l,m)=>ie.some(l.getRect(m)),gm=(l,m,p)=>Ls(m)?g2(l,m).map(nf):qr(m)?qg(l,m,p).map(nf):ie.none(),Hu=(l,m)=>Ls(m)?g2(l,m).map(nf):qr(m)?l.getRangedRect(m,0,m,Ri(m)).map(nf):ie.none(),hm=5,h2=100,wd=Pi.generate([{none:[]},{retry:["caret"]}]),p2=(l,m)=>l.left<m.left||Math.abs(m.right-l.left)<1||l.left>m.right,Kg=(l,m,p)=>Lc(m,np).fold(On,v=>Hu(l,v).exists(T=>p2(p,T))),gp=(l,m,p,v,T)=>{const D=G1(T,hm);return Math.abs(p.bottom-v.bottom)<1||p.top>T.bottom?wd.retry(D):p.top===T.bottom?wd.retry(G1(T,1)):Kg(l,m,T)?wd.retry(f2(D,hm,0)):wd.none()},lx={point:fp,adjuster:(l,m,p,v,T)=>{const D=mp(T,hm);return Math.abs(p.top-v.top)<1||p.bottom<T.top?wd.retry(D):p.bottom===T.top?wd.retry(mp(T,1)):Kg(l,m,T)?wd.retry(f2(D,hm,0)):wd.none()},move:mp,gather:up},q1={point:Gg,adjuster:gp,move:G1,gather:d2},jb=(l,m,p)=>l.elementFromPoint(m,p).filter(v=>us(v)==="table").isSome(),Q3=(l,m,p,v,T)=>K1(l,m,p,m.move(v,hm),T),K1=(l,m,p,v,T)=>T===0?ie.some(v):jb(l,v.left,m.point(v))?Q3(l,m,p,v,T-1):l.situsFromPoint(v.left,m.point(v)).bind(D=>D.start.fold(ie.none,I=>Hu(l,I).bind(G=>m.adjuster(l,I,G,p,v).fold(ie.none,K=>K1(l,m,p,K,T-1))).orThunk(()=>ie.some(v)),ie.none)),Gb=(l,m,p)=>l.point(m)>p.getInnerHeight()?ie.some(l.point(m)-p.getInnerHeight()):l.point(m)<0?ie.some(-l.point(m)):ie.none(),ux=(l,m,p)=>{const v=l.move(p,hm),T=K1(m,l,p,v,h2).getOr(v);return Gb(l,T,m).fold(()=>m.situsFromPoint(T.left,l.point(T)),D=>(m.scrollBy(0,D),m.situsFromPoint(T.left,l.point(T)-D)))},zu={tryUp:mt(ux,lx),tryDown:mt(ux,q1),getJumpSize:oe(hm)},dx=20,qb=(l,m,p)=>l.getSelection().bind(v=>j1(m,v.finish,v.foffset,p).fold(()=>ie.some(Zi(v.finish,v.foffset)),T=>{const D=l.fromSitus(T),I=dp.verify(l,v.finish,v.foffset,D.finish,D.foffset,p.failure,m);return ax(I)})),Yg=(l,m,p,v,T,D)=>D===0?ie.none():JR(l,m,p,v,T).bind(I=>{const G=l.fromSitus(I),K=dp.verify(l,p,v,G.finish,G.foffset,T.failure,m);return dp.cata(K,()=>ie.none(),()=>ie.some(I),pe=>pt(p,pe)&&v===0?mx(l,p,v,mp,T):Yg(l,m,pe,0,T,D-1),pe=>pt(p,pe)&&v===Ri(pe)?mx(l,p,v,G1,T):Yg(l,m,pe,Ri(pe),T,D-1))}),mx=(l,m,p,v,T)=>gm(l,m,p).bind(D=>Y1(l,T,v(D,zu.getJumpSize()))),Y1=(l,m,p)=>{const v=ml().browser;return v.isChromium()||v.isSafari()||v.isFirefox()?m.retry(l,p):ie.none()},JR=(l,m,p,v,T)=>gm(l,p,v).bind(D=>Y1(l,T,D)),fx=(l,m,p)=>qb(l,m,p).bind(v=>Yg(l,m,v.element,v.offset,p,dx).map(l.fromSitus)),Wa=(l,m)=>jg(l,p=>Po(p).exists(v=>pt(v,m))),Kb=(l,m,p,v,T)=>sc(v,"td,th",m).bind(D=>sc(D,"table",m).bind(I=>Wa(T,I)?fx(l,m,p).bind(G=>sc(G.finish,"td,th",m).map(K=>({start:D,finish:K,range:G}))):ie.none())),eg=(l,m,p,v,T,D)=>D(v,m).orThunk(()=>Kb(l,m,p,v,T).map(I=>{const G=I.range;return ip.create(ie.some(Ub(G.start,G.soffset,G.finish,G.foffset)),!0)})),Zl=(l,m)=>sc(l,"tr",m).bind(p=>sc(p,"table",m).bind(v=>{const T=es(v,"tr");return pt(p,T[0])?K3(v,D=>Zm(D).isSome(),m).map(D=>{const I=Ri(D);return ip.create(ie.some(Ub(D,I,D,I)),!0)}):ie.none()})),gx=(l,m)=>sc(l,"tr",m).bind(p=>sc(p,"table",m).bind(v=>{const T=es(v,"tr");return pt(p,T[T.length-1])?Y3(v,D=>Fh(D).isSome(),m).map(D=>ip.create(ie.some(Ub(D,0,D,0)),!0)):ie.none()})),Yb=(l,m,p,v,T,D,I)=>Kb(l,p,v,T,D).bind(G=>QS(m,p,G.start,G.finish,I)),X1=l=>{let m=l;return{get:()=>m,set:T=>{m=T}}},hx=l=>{const m=X1(ie.none()),p=()=>m.get().each(l);return{clear:()=>{p(),m.set(ie.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:G=>{p(),m.set(ie.some(G))}}},J1=()=>{const l=hx(Rt);return{...l,on:p=>l.get().each(p)}},px=(l,m)=>sc(l,"td,th",m),Xg=l=>Hs(l).exists(Dg),jl=(l,m,p,v)=>{const T=J1(),D=T.clear,I=_e=>{T.on(ft=>{v.clearBeforeUpdate(m),px(_e.target,p).each(Ut=>{lb(ft,Ut,p).each(kt=>{const _t=kt.boxes.getOr([]);if(_t.length===1){const mn=_t[0],ht=m1(mn)==="false",$n=qc($f(_e.target),mn,pt);ht&&$n&&v.selectRange(m,_t,mn,mn)}else _t.length>1&&(v.selectRange(m,_t,kt.start,kt.finish),l.selectContents(Ut))})})})};return{clearstate:D,mousedown:_e=>{v.clear(m),px(_e.target,p).filter(Xg).each(T.set)},mouseover:_e=>{I(_e)},mouseup:_e=>{I(_e),D()}}},tg={traverse:vc,gather:d2,relative:Ii.before,retry:zu.tryDown,failure:dp.failedDown},Sd={traverse:la,gather:up,relative:Ii.before,retry:zu.tryUp,failure:dp.failedUp},Vu=l=>m=>m===l,Za=Vu(38),Ma=Vu(40),Wc=l=>l>=37&&l<=40,Uu={isBackward:Vu(37),isForward:Vu(39)},Xb={isBackward:Vu(39),isForward:Vu(37)},Gl=l=>{const m=l!==void 0?l.dom:document,p=m.body.scrollLeft||m.documentElement.scrollLeft,v=m.body.scrollTop||m.documentElement.scrollTop;return bn(p,v)},Jg=(l,m,p)=>{const T=(p!==void 0?p.dom:document).defaultView;T&&T.scrollBy(l,m)},Jb=Pi.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),bx=l=>Jb.exact(l.start,l.soffset,l.finish,l.foffset),vx=l=>l.match({domRange:m=>st.fromDom(m.startContainer),relative:(m,p)=>Ii.getStart(m),exact:(m,p,v,T)=>m}),yx=Jb.domRange,Cx=Jb.relative,Qb=Jb.exact,wx=l=>{const m=vx(l);return Ln(m)},Sx=lp.create,hp={domRange:yx,relative:Cx,exact:Qb,exactFromRange:bx,getWin:wx,range:Sx},xx=(l,m,p)=>{var v;return ie.from((v=l.caretPositionFromPoint)===null||v===void 0?void 0:v.call(l,m,p)).bind(T=>{if(T.offsetNode===null)return ie.none();const D=l.createRange();return D.setStart(T.offsetNode,T.offset),D.collapse(),ie.some(D)})},ek=(l,m,p)=>{var v;return ie.from((v=l.caretRangeFromPoint)===null||v===void 0?void 0:v.call(l,m,p))},tk=(l,m,p)=>l.caretPositionFromPoint?xx(l,m,p):l.caretRangeFromPoint?ek(l,m,p):ie.none(),Ex=(l,m,p)=>{const v=l.document;return tk(v,m,p).map(T=>lp.create(st.fromDom(T.startContainer),T.startOffset,st.fromDom(T.endContainer),T.endOffset))},pp=(l,m)=>{const p=us(l);return p==="input"?Ii.after(l):To(["br","img"],p)?m===0?Ii.before(l):Ii.after(l):Ii.on(l,m)},nk=(l,m)=>{const p=l.fold(Ii.before,pp,Ii.after),v=m.fold(Ii.before,pp,Ii.after);return hp.relative(p,v)},ok=(l,m,p,v)=>{const T=pp(l,m),D=pp(p,v);return hp.relative(T,D)},cs=(l,m,p,v)=>{const D=hn(l).dom.createRange();return D.setStart(l.dom,m),D.setEnd(p.dom,v),D},ng=(l,m,p,v)=>{const T=cs(l,m,p,v),D=pt(l,p)&&m===v;return T.collapsed&&!D},of=l=>ie.from(l.getSelection()),ev=(l,m)=>{of(l).each(p=>{p.removeAllRanges(),p.addRange(m)})},b2=(l,m,p,v,T)=>{const D=zb(l,m,p,v,T);ev(l,D)},wl=(l,m,p,v,T,D)=>{m.collapse(p.dom,v),m.extend(T.dom,D)},sk=(l,m)=>JS(l,m).match({ltr:(p,v,T,D)=>{b2(l,p,v,T,D)},rtl:(p,v,T,D)=>{of(l).each(I=>{if(I.setBaseAndExtent)I.setBaseAndExtent(p.dom,v,T.dom,D);else if(I.extend)try{wl(l,I,p,v,T,D)}catch{b2(l,T,D,p,v)}else b2(l,T,D,p,v)})}}),Qg=(l,m,p,v,T)=>{const D=ok(m,p,v,T);sk(l,D)},pm=(l,m,p)=>{const v=nk(m,p);sk(l,v)},Q1=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),p=l.getRangeAt(l.rangeCount-1);return ie.some(lp.create(st.fromDom(m.startContainer),m.startOffset,st.fromDom(p.endContainer),p.endOffset))}else return ie.none()},Tx=l=>{if(l.anchorNode===null||l.focusNode===null)return Q1(l);{const m=st.fromDom(l.anchorNode),p=st.fromDom(l.focusNode);return ng(m,l.anchorOffset,p,l.focusOffset)?ie.some(lp.create(m,l.anchorOffset,p,l.focusOffset)):Q1(l)}},rk=(l,m,p=!0)=>{const T=(p?L1:H3)(l,m);ev(l,T)},QR=l=>of(l).filter(m=>m.rangeCount>0).bind(Tx),kx=l=>QR(l).map(m=>hp.exact(m.start,m.soffset,m.finish,m.foffset)),e5=(l,m)=>{const p=Vb(l,m);return W3(p)},_x=(l,m,p)=>Ex(l,m,p),eh=l=>{of(l).each(m=>m.removeAllRanges())},th=l=>({elementFromPoint:(ht,$n)=>st.fromPoint(st.fromDom(l.document),ht,$n),getRect:ht=>ht.dom.getBoundingClientRect(),getRangedRect:(ht,$n,rt,Xt)=>{const Ms=hp.exact(ht,$n,rt,Xt);return e5(l,Ms)},getSelection:()=>kx(l).map(ht=>V1(l,ht)),fromSitus:ht=>{const $n=hp.relative(ht.start,ht.finish);return V1(l,$n)},situsFromPoint:(ht,$n)=>_x(l,ht,$n).map(rt=>z1.create(rt.start,rt.soffset,rt.finish,rt.foffset)),clearSelection:()=>{eh(l)},collapseSelection:(ht=!1)=>{kx(l).each($n=>$n.fold(rt=>rt.collapse(ht),(rt,Xt)=>{const Ms=ht?rt:Xt;pm(l,Ms,Ms)},(rt,Xt,Ms,Ns)=>{const Sn=ht?rt:Ms,nr=ht?Xt:Ns;Qg(l,Sn,nr,Sn,nr)}))},setSelection:ht=>{Qg(l,ht.start,ht.soffset,ht.finish,ht.foffset)},setRelativeSelection:(ht,$n)=>{pm(l,ht,$n)},selectNode:ht=>{rk(l,ht,!1)},selectContents:ht=>{rk(l,ht)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>Gl(st.fromDom(l.document)).top,scrollBy:(ht,$n)=>{Jg(ht,$n,st.fromDom(l.document))}}),nh=(l,m)=>({rows:l,cols:m}),t5=(l,m,p,v)=>{const T=th(l),D=jl(T,m,p,v);return{clearstate:D.clearstate,mousedown:D.mousedown,mouseover:D.mouseover,mouseup:D.mouseup}},v2=l=>Lc(l,Cn).exists(Dg),bp=(l,m)=>v2(l)||v2(m),y2=(l,m,p,v)=>{const T=th(l),D=()=>(v.clear(m),ie.none());return{keydown:(K,pe,_e,ft,Ut,kt)=>{const _t=K.raw,mn=_t.which,ht=_t.shiftKey===!0;return Xm(m,v.selectedSelector).fold(()=>(Wc(mn)&&!ht&&v.clearBeforeUpdate(m),Wc(mn)&&ht&&!bp(pe,ft)?ie.none:Ma(mn)&&ht?mt(Yb,T,m,p,tg,ft,pe,v.selectRange):Za(mn)&&ht?mt(Yb,T,m,p,Sd,ft,pe,v.selectRange):Ma(mn)?mt(eg,T,p,tg,ft,pe,gx):Za(mn)?mt(eg,T,p,Sd,ft,pe,Zl):ie.none),rt=>{const Xt=Ms=>()=>ko(Ms,Sn=>j3(Sn.rows,Sn.cols,m,rt,v)).fold(()=>gy(m,v.firstSelectedSelector,v.lastSelectedSelector).map(Sn=>{const nr=Ma(mn)||kt.isForward(mn)?Ii.after:Ii.before;return T.setRelativeSelection(Ii.on(Sn.first,0),nr(Sn.table)),v.clear(m),ip.create(ie.none(),!0)}),Sn=>ie.some(ip.create(ie.none(),!0)));return Wc(mn)&&ht&&!bp(pe,ft)?ie.none:Ma(mn)&&ht?Xt([nh(1,0)]):Za(mn)&&ht?Xt([nh(-1,0)]):kt.isBackward(mn)&&ht?Xt([nh(0,-1),nh(-1,0)]):kt.isForward(mn)&&ht?Xt([nh(0,1),nh(1,0)]):Wc(mn)&&!ht?D:ie.none})()},keyup:(K,pe,_e,ft,Ut)=>Xm(m,v.selectedSelector).fold(()=>{const kt=K.raw,_t=kt.which;return kt.shiftKey===!0&&Wc(_t)&&bp(pe,ft)?Z3(m,p,pe,_e,ft,Ut,v.selectRange):ie.none()},ie.none)}},C2=(l,m,p,v)=>{const T=th(l);return(D,I)=>{v.clearBeforeUpdate(m),lb(D,I,p).each(G=>{const K=G.boxes.getOr([]);v.selectRange(m,K,G.start,G.finish),T.selectContents(I),T.collapseSelection()})}},vp=(l,m)=>{const p=Qs(l,m);return p===void 0||p===""?[]:p.split(" ")},w2=(l,m,p)=>{const T=vp(l,m).concat([p]);return $s(l,m,T.join(" ")),!0},Ax=(l,m,p)=>{const v=St(vp(l,m),T=>T!==p);return v.length>0?$s(l,m,v.join(" ")):re(l,m),!1},og=l=>l.dom.classList!==void 0,S2=l=>vp(l,"class"),ck=(l,m)=>w2(l,"class",m),Ox=(l,m)=>Ax(l,"class",m),sf=(l,m)=>{og(l)?l.dom.classList.add(m):ck(l,m)},Dx=l=>{(og(l)?l.dom.classList:S2(l)).length===0&&re(l,"class")},x2=(l,m)=>{og(l)?l.dom.classList.remove(m):Ox(l,m),Dx(l)},sg=(l,m)=>og(l)&&l.dom.classList.contains(m),E2=(l,m)=>{Qe(m,p=>{x2(l,p)})},qt=l=>m=>{sf(m,l)},ga=l=>m=>{E2(m,l)},ql={byClass:l=>{const m=qt(l.selected),p=ga([l.selected,l.lastSelected,l.firstSelected]),v=D=>{const I=es(D,l.selectedSelector);Qe(I,p)};return{clearBeforeUpdate:v,clear:v,selectRange:(D,I,G,K)=>{v(D),Qe(I,m),sf(G,l.firstSelected),sf(K,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,m,p)=>{const v=K=>{re(K,l.selected),re(K,l.firstSelected),re(K,l.lastSelected)},T=K=>{$s(K,l.selected,"1")},D=K=>{I(K),p()},I=K=>{const pe=es(K,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);Qe(pe,v)};return{clearBeforeUpdate:I,clear:D,selectRange:(K,pe,_e,ft)=>{D(K),Qe(pe,T),$s(_e,l.firstSelected,"1"),$s(ft,l.lastSelected,"1"),m(pe,_e,ft)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},nv=(l,m,p,v)=>{switch(l.tag){case"none":return m();case"single":return v(l.element);case"multiple":return p(l.elements)}},oh=()=>({tag:"none"}),ov=l=>({tag:"multiple",elements:l}),sv=l=>({tag:"single",element:l}),T2=(l,m,p)=>({get:()=>xt(l(),p).fold(()=>m().fold(oh,sv),ov)}),Rx=(l,m)=>{const p=l.slice(0,m[m.length-1].row+1),v=hb(p);return wo(v,T=>{const D=T.cells.slice(0,m[m.length-1].column+1);return dn(D,I=>I.element)})},ak=(l,m)=>{const p=l.slice(m[0].row+m[0].rowspan-1,l.length),v=hb(p);return wo(v,T=>{const D=T.cells.slice(m[0].column+m[0].colspan-1,T.cells.length);return dn(D,I=>I.element)})},bm=(l,m,p)=>{const v=Fo.fromTable(l);return ji(v,m).map(D=>{const I=E1(v,p,!1),{rows:G}=Mc(I),K=Rx(G,D),pe=ak(G,D);return{upOrLeftCells:K,downOrRightCells:pe}})},ik=(l,m,p,v,T,D,I)=>({target:l,x:m,y:p,stop:v,prevent:T,kill:D,raw:I}),k2=l=>{const m=st.fromDom(Xe(l).getOr(l.target)),p=()=>l.stopPropagation(),v=()=>l.preventDefault(),T=jn(v,p);return ik(m,l.clientX,l.clientY,p,v,T,l)},fu=(l,m)=>p=>{l(p)&&m(k2(p))},ta=(l,m,p,v,T)=>{const D=fu(p,v);return l.dom.addEventListener(m,D,T),{unbind:mt(yp,l,m,D,T)}},rv=(l,m,p,v)=>ta(l,m,p,v,!1),yp=(l,m,p,v)=>{l.dom.removeEventListener(m,p,v)},_2=De,vm=(l,m,p)=>rv(l,m,_2,p),rf=k2,rg=l=>!sg(st.fromDom(l.target),"ephox-snooker-resizer-bar"),e0=(l,m)=>{const p=T2(()=>st.fromDom(l.getBody()),()=>lu(f1(l),qm(l)),yl.selectedSelector),v=(K,pe,_e)=>{Sa(pe).each(Ut=>{const kt=dn(K,rt=>rt.dom),_t=Hh(l),mn=tm(Rt,st.fromDom(l.getDoc()),_t),ht=Jm(l),$n=bm(Ut,{selection:ht},mn).map(rt=>Xs(rt,Xt=>dn(Xt,Ms=>Ms.dom))).getOrUndefined();Qc(l,kt,pe.dom,_e.dom,$n)})},T=()=>Uc(l),D=ql.byAttr(yl,v,T);return l.on("init",K=>{const pe=l.getWin(),_e=Vh(l),ft=qm(l),Ut=()=>{const Vs=l.selection,Ga=st.fromDom(Vs.getStart()),na=st.fromDom(Vs.getEnd());Wh(Sa,[Ga,na]).fold(()=>D.clear(_e),Rt)},kt=t5(pe,_e,ft,D),_t=y2(pe,_e,ft,D),mn=C2(pe,_e,ft,D),ht=Vs=>Vs.raw.shiftKey===!0;l.on("TableSelectorChange",Vs=>mn(Vs.start,Vs.finish));const $n=(Vs,Ga)=>{ht(Vs)&&(Ga.kill&&Vs.kill(),Ga.selection.each(na=>{const hu=hp.relative(na.start,na.finish),qa=Vb(pe,hu);l.selection.setRng(qa)}))},rt=Vs=>{const Ga=rf(Vs);if(Ga.raw.shiftKey&&Wc(Ga.raw.which)){const na=l.selection.getRng(),hu=st.fromDom(na.startContainer),qa=st.fromDom(na.endContainer);_t.keyup(Ga,hu,na.startOffset,qa,na.endOffset).each(Zu=>{$n(Ga,Zu)})}},Xt=Vs=>{const Ga=rf(Vs);m.hide();const na=l.selection.getRng(),hu=st.fromDom(na.startContainer),qa=st.fromDom(na.endContainer),Zu=z(Uu,Xb)(st.fromDom(l.selection.getStart()));_t.keydown(Ga,hu,na.startOffset,qa,na.endOffset,Zu).each(Ci=>{$n(Ga,Ci)}),m.show()},Ms=Vs=>Vs.button===0,Ns=Vs=>Vs.buttons===void 0?!0:(Vs.buttons&1)!==0,Sn=Vs=>{kt.clearstate()},nr=Vs=>{Ms(Vs)&&rg(Vs)&&kt.mousedown(rf(Vs))},yi=Vs=>{Ns(Vs)&&rg(Vs)&&kt.mouseover(rf(Vs))},cg=Vs=>{Ms(Vs)&&rg(Vs)&&kt.mouseup(rf(Vs))},qo=(()=>{const Vs=X1(st.fromDom(_e)),Ga=X1(0);return{touchEnd:hu=>{const qa=st.fromDom(hu.target);if(mr("td")(qa)||mr("th")(qa)){const Zu=Vs.get(),Ci=Ga.get();pt(Zu,qa)&&hu.timeStamp-Ci<300&&(hu.preventDefault(),mn(qa,qa))}Vs.set(qa),Ga.set(hu.timeStamp)}}})();l.on("dragstart",Sn),l.on("mousedown",nr),l.on("mouseover",yi),l.on("mouseup",cg),l.on("touchend",qo.touchEnd),l.on("keyup",rt),l.on("keydown",Xt),l.on("NodeChange",Ut)}),l.on("PreInit",()=>{l.serializer.addTempAttr(yl.firstSelected),l.serializer.addTempAttr(yl.lastSelected)}),{getSelectedCells:()=>nv(p.get(),oe([]),K=>dn(K,pe=>pe.dom),K=>[K.dom]),clearSelectedCells:K=>D.clear(st.fromDom(K))}},Yi=l=>{let m=[];return{bind:D=>{if(D===void 0)throw new Error("Event bind error: undefined handler");m.push(D)},unbind:D=>{m=St(m,I=>I!==D)},trigger:(...D)=>{const I={};Qe(l,(G,K)=>{I[G]=D[K]}),Qe(m,G=>{G(I)})}}},sh=l=>{const m=Xs(l,v=>({bind:v.bind,unbind:v.unbind})),p=Xs(l,v=>v.trigger);return{registry:m,trigger:p}},lk=(l,m)=>{let p=null;const v=()=>{Ro(p)||(clearTimeout(p),p=null)};return{cancel:v,throttle:(...D)=>{v(),p=setTimeout(()=>{p=null,l.apply(null,D)},m)}}},Cp=l=>l.slice(0).sort(),Mx=(l,m)=>{throw new Error("All required keys ("+Cp(l).join(", ")+") were not specified. Specified keys were: "+Cp(m).join(", ")+".")},Nx=l=>{throw new Error("Unsupported keys for object: "+Cp(l).join(", "))},Px=(l,m)=>{if(!yn(m))throw new Error("The "+l+" fields must be an array. Was: "+m+".");Qe(m,p=>{if(!fn(p))throw new Error("The value "+p+" in the "+l+" fields was not a string.")})},Bx=(l,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+Cp(l).join(", ")+") were not.")},t0=l=>{const m=Cp(l);F(m,(v,T)=>T<m.length-1&&v===m[T+1]).each(v=>{throw new Error("The field: "+v+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},ja=(l,m)=>gu(l,m,{validate:Ps,label:"function"}),gu=(l,m,p)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return Px("required",m),t0(m),v=>{const T=jt(v);No(m,G=>To(T,G))||Mx(m,T),l(m,T);const I=St(m,G=>!p.validate(v[G],G));return I.length>0&&Bx(I,p.label),v}},Xi=(l,m)=>{const p=St(m,v=>!To(l,v));p.length>0&&Nx(p)},rh=l=>ja(Xi,l),cf=rh(["compare","extract","mutate","sink"]),n0=rh(["element","start","stop","destroy"]),A2=rh(["forceDrop","drop","move","delayDrop"]),uk=()=>{let l=ie.none();const m=()=>{l=ie.none()},p=(D,I)=>{const G=l.map(K=>D.compare(K,I));return l=ie.some(I),G},v=(D,I)=>{I.extract(D).each(K=>{p(I,K).each(_e=>{T.trigger.move(_e)})})},T=sh({move:Yi(["info"])});return{onEvent:v,reset:m,events:T.registry}},O2=()=>{const l=sh({move:Yi(["info"])});return{onEvent:Rt,reset:Rt,events:l.registry}},dk=()=>{const l=O2(),m=uk();let p=l;return{on:()=>{p.reset(),p=m},off:()=>{p.reset(),p=l},isOn:()=>p===m,onEvent:(G,K)=>{p.onEvent(G,K)},events:m.events}},cv=(l,m,p)=>{let v=!1;const T=sh({start:Yi([]),stop:Yi([])}),D=dk(),I=()=>{_t.stop(),D.isOn()&&(D.off(),T.trigger.stop())},G=lk(I,200),K=ht=>{_t.start(ht),D.on(),T.trigger.start()},pe=ht=>{G.cancel(),D.onEvent(ht,m)};D.events.move.bind(ht=>{m.mutate(l,ht.info)});const _e=()=>{v=!0},ft=()=>{v=!1},Ut=()=>v,kt=ht=>(...$n)=>{v&&ht.apply(null,$n)},_t=m.sink(A2({forceDrop:I,drop:kt(I),move:kt(pe),delayDrop:kt(G.throttle)}),p),mn=()=>{_t.destroy()};return{element:_t.element,go:K,on:_e,off:ft,isActive:Ut,destroy:mn,events:T.registry}},D2=l=>{const m=l.replace(/\./g,"-");return{resolve:v=>m+"-"+v}},av=D2("ephox-dragster").resolve,R2=l=>{const m={layerClass:av("blocker"),...l},p=st.fromTag("div");return $s(p,"role","presentation"),Is(p,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),sf(p,av("blocker")),sf(p,m.layerClass),{element:oe(p),destroy:()=>{er(p)}}};var M2=cf({compare:(l,m)=>bn(m.left-l.left,m.top-l.top),extract:l=>ie.some(bn(l.x,l.y)),sink:(l,m)=>{const p=R2(m),v=vm(p.element(),"mousedown",l.forceDrop),T=vm(p.element(),"mouseup",l.drop),D=vm(p.element(),"mousemove",l.move),I=vm(p.element(),"mouseout",l.delayDrop),G=()=>{p.destroy(),T.unbind(),D.unbind(),I.unbind(),v.unbind()},K=_e=>{Fs(_e,p.element())},pe=()=>{er(p.element())};return n0({element:p.element,start:K,stop:pe,destroy:G})},mutate:(l,m)=>{l.mutate(m.left,m.top)}});const iv=(l,m={})=>{var p;const v=(p=m.mode)!==null&&p!==void 0?p:M2;return cv(l,v,m)},wp=D2("ephox-snooker").resolve,n5=()=>{const l=sh({drag:Yi(["xDelta","yDelta"])});return{mutate:(p,v)=>{l.trigger.drag(p,v)},events:l.registry}},Lx=()=>{const l=sh({drag:Yi(["xDelta","yDelta","target"])});let m=ie.none();const p=n5();return p.events.drag.bind(D=>{m.each(I=>{l.trigger.drag(D.xDelta,D.yDelta,I)})}),{assign:D=>{m=ie.some(D)},get:()=>m,mutate:p.mutate,events:l.registry}},lv=(l,m,p,v,T)=>{const D=st.fromTag("div");return Is(D,{position:"absolute",left:m-v/2+"px",top:p+"px",height:T+"px",width:v+"px"}),ec(D,{"data-column":l,role:"presentation"}),D},mk=(l,m,p,v,T)=>{const D=st.fromTag("div");return Is(D,{position:"absolute",left:m+"px",top:p-T/2+"px",height:T+"px",width:v+"px"}),ec(D,{"data-row":l,role:"presentation"}),D},o0=wp("resizer-bar"),Hx=wp("resizer-rows"),P2=wp("resizer-cols"),zx=7,af=(l,m)=>wo(l.all,(p,v)=>m(p.element)?[v]:[]),uv=(l,m)=>{const p=[];return Mo(l.grid.columns,v=>{Fo.getColumnAt(l,v).map(D=>D.element).forall(m)&&p.push(v)}),St(p,v=>{const T=Fo.filterItems(l,D=>D.column===v);return No(T,D=>m(D.element))})},Ji=l=>{const m=es(l.parent(),"."+o0);Qe(m,er)},si=(l,m,p)=>{const v=l.origin();Qe(m,T=>{T.each(D=>{const I=p(v,D);sf(I,o0),Fs(l.parent(),I)})})},Sp=(l,m,p,v)=>{si(l,m,(T,D)=>{const I=lv(D.col,D.x-T.left,p.top-T.top,zx,v);return sf(I,P2),I})},o5=(l,m,p,v)=>{si(l,m,(T,D)=>{const I=mk(D.row,p.left-T.left,D.y-T.top,v,zx);return sf(I,Hx),I})},fk=(l,m,p,v,T)=>{const D=Di(p),I=m.isResizable,G=v.length>0?_a.positions(v,p):[],K=G.length>0?af(l,I):[],pe=St(G,(kt,_t)=>yt(K,mn=>_t===mn));o5(m,pe,D,ys(p));const _e=T.length>0?Nh.positions(T,p):[],ft=_e.length>0?uv(l,I):[],Ut=St(_e,(kt,_t)=>yt(ft,mn=>_t===mn));Sp(m,Ut,D,Bn(p))},B2=(l,m)=>{if(Ji(l),l.isResizable(m)){const p=Fo.fromTable(m),v=E(p),T=Kd(p);fk(p,l,m,v,T)}},Qo=(l,m)=>{const p=es(l.parent(),"."+o0);Qe(p,m)},xp=l=>{Qo(l,m=>{po(m,"display","none")})},$2=l=>{Qo(l,m=>{po(m,"display","block")})},F2=l=>sg(l,Hx),Vx=l=>sg(l,P2),Ux=wp("resizer-bar-dragging"),gk=l=>{const m=Lx(),p=iv(m,{});let v=ie.none();const T=(_t,mn)=>ie.from(Qs(_t,mn));m.events.drag.bind(_t=>{T(_t.target,"data-row").each(mn=>{const ht=Ts(_t.target,"top");po(_t.target,"top",ht+_t.yDelta+"px")}),T(_t.target,"data-column").each(mn=>{const ht=Ts(_t.target,"left");po(_t.target,"left",ht+_t.xDelta+"px")})});const D=(_t,mn)=>{const ht=Ts(_t,mn),$n=Kr(_t,"data-initial-"+mn,0);return ht-$n};p.events.stop.bind(()=>{m.get().each(_t=>{v.each(mn=>{T(_t,"data-row").each(ht=>{const $n=D(_t,"top");re(_t,"data-initial-top"),kt.trigger.adjustHeight(mn,$n,parseInt(ht,10))}),T(_t,"data-column").each(ht=>{const $n=D(_t,"left");re(_t,"data-initial-left"),kt.trigger.adjustWidth(mn,$n,parseInt(ht,10))}),B2(l,mn)})})});const I=(_t,mn)=>{kt.trigger.startAdjust(),m.assign(_t),$s(_t,"data-initial-"+mn,Ts(_t,mn)),sf(_t,Ux),po(_t,"opacity","0.2"),p.go(l.dragContainer())},G=vm(l.parent(),"mousedown",_t=>{F2(_t.target)&&I(_t.target,"top"),Vx(_t.target)&&I(_t.target,"left")}),K=_t=>pt(_t,l.view()),pe=_t=>sc(_t,"table",K).filter(Dg),_e=vm(l.view(),"mouseover",_t=>{pe(_t.target).fold(()=>{ho(_t.target)&&Ji(l)},mn=>{p.isActive()&&(v=ie.some(mn),B2(l,mn))})}),ft=()=>{G.unbind(),_e.unbind(),p.destroy(),Ji(l)},Ut=_t=>{B2(l,_t)},kt=sh({adjustHeight:Yi(["table","delta","row"]),adjustWidth:Yi(["table","delta","column"]),startAdjust:Yi([])});return{destroy:ft,refresh:Ut,on:p.on,off:p.off,hideBars:mt(xp,l),showBars:mt($2,l),events:kt.registry}},hk={create:(l,m,p)=>{const v=_a,T=Nh,D=gk(l),I=sh({beforeResize:Yi(["table","type"]),afterResize:Yi(["table","type"]),startDrag:Yi([])});return D.events.adjustHeight.bind(G=>{const K=G.table;I.trigger.beforeResize(K,"row");const pe=v.delta(G.delta,K);tp(K,pe,G.row),I.trigger.afterResize(K,"row")}),D.events.startAdjust.bind(G=>{I.trigger.startDrag()}),D.events.adjustWidth.bind(G=>{const K=G.table;I.trigger.beforeResize(K,"col");const pe=T.delta(G.delta,K),_e=p(K);bb(K,pe,G.column,m,_e),I.trigger.afterResize(K,"col")}),{on:D.on,off:D.off,refreshBars:D.refresh,hideBars:D.hideBars,showBars:D.showBars,destroy:D.destroy,events:I.registry}}},pk=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let dv=0;const I2=l=>{const p=new Date().getTime(),v=Math.floor(pk()*1e9);return dv++,l+"_"+v+dv+String(p)},L2={only:(l,m)=>{const p=Ca(l)?Rn(l):l;return{parent:oe(p),view:oe(l),dragContainer:oe(p),origin:oe(bn(0,0)),isResizable:m}},detached:(l,m,p)=>{const v=()=>Di(m);return{parent:oe(m),view:oe(l),dragContainer:oe(m),origin:v,isResizable:p}},body:(l,m,p)=>({parent:oe(m),view:oe(l),dragContainer:oe(m),origin:oe(bn(0,0)),isResizable:p}),scrollable:(l,m,p,v)=>({parent:oe(m),view:oe(l),dragContainer:oe(p),origin:()=>Di(m),isResizable:v})},vk=l=>{const m=I2("resizer-container"),p=st.fromTag("div");return $s(p,"id",m),Is(p,{position:l,height:"0",width:"0",padding:"0",margin:"0",border:"0"}),p},yk=(l,m)=>{const p=$u(l),v=st.fromDom(l.getBody()),T=vk(p?"relative":"static"),D=Gn();return p?(nc(v,T),L2.scrollable(v,T,D,m)):(Fs(D,T),L2.body(v,T,m))},rn=(l,m)=>l.inline?yk(l,m):L2.only(st.fromDom(l.getDoc()),m),Wx=(l,m)=>{l.inline&&er(m.parent())},Zx=l=>Yo(l)&&l.nodeName==="TABLE",H2="bar-",s0=l=>Qs(l,"data-mce-resize")!=="false",Ck=l=>{const m=Fo.fromTable(l);Fo.hasColumns(m)||Qe(ad(l),p=>{const v=zr(p,"width");po(p,"width",v),re(p,"width")})},Ep=l=>wc(l,"corner-"),z2=l=>ll(l,"corner-"),wk=l=>{const m=J1(),p=J1(),v=J1();let T,D,I,G;const K=Xt=>Ob(l,Xt),pe=()=>Lw(l)?db():Gw(),_e=Xt=>Pg(Xt).columns,ft=Xt=>Pg(Xt).rows,Ut=(Xt,Ms,Ns,Sn)=>{const nr=z2(Ms),yi=ua(nr,"e"),cg=wc(nr,"n");if(D===""&&Yf(Xt),G===""&&M3(Xt),Ns!==T&&D!==""){po(Xt,"width",D);const Wu=pe(),qo=K(Xt),Vs=Lw(l)||yi?_e(Xt)-1:0;bb(Xt,Ns-T,Vs,Wu,qo)}else if(ob(D)){const Wu=parseFloat(D.replace("%","")),qo=Ns*Wu/T;po(Xt,"width",qo+"%")}if(sb(D)&&Ck(Xt),Sn!==I&&G!==""){po(Xt,"height",G);const Wu=cg?0:ft(Xt)-1;tp(Xt,Sn-I,Wu)}},kt=()=>{p.on(Xt=>{Xt.destroy()}),v.on(Xt=>{Wx(l,Xt)})};l.on("init",()=>{const Xt=rn(l,s0);if(v.set(Xt),U4(l)&&Og(l)){const Ms=pe(),Ns=hk.create(Xt,Ms,K);l.mode.isReadOnly()||Ns.on(),Ns.events.startDrag.bind(Sn=>{m.set(l.selection.getRng())}),Ns.events.beforeResize.bind(Sn=>{const nr=Sn.table.dom;zy(l,nr,tb(nr),nb(nr),H2+Sn.type)}),Ns.events.afterResize.bind(Sn=>{const nr=Sn.table,yi=nr.dom;Ff(nr),m.on(cg=>{l.selection.setRng(cg),l.focus()}),N1(l,yi,tb(yi),nb(yi),H2+Sn.type),l.undoManager.add()}),p.set(Ns)}}),l.on("ObjectResizeStart",Xt=>{const Ms=Xt.target;if(Zx(Ms)&&!l.mode.isReadOnly()){const Ns=st.fromDom(Ms);Qe(l.dom.select(".mce-clonedresizable"),Sn=>{l.dom.addClass(Sn,"mce-"+ac(l)+"-columns")}),!LS(Ns)&&Pu(l)?Pb(Ns):!Nb(Ns)&&Ag(l)&&Yf(Ns),B1(Ns)&&wc(Xt.origin,H2)&&Yf(Ns),T=Xt.width,D=ti(l)?"":kn(l,Ms).getOr(""),I=Xt.height,G=Ni(l,Ms).getOr("")}}),l.on("ObjectResized",Xt=>{const Ms=Xt.target;if(Zx(Ms)){const Ns=st.fromDom(Ms),Sn=Xt.origin;Ep(Sn)&&Ut(Ns,Sn,Xt.width,Xt.height),Ff(Ns),kc(l,Ns.dom,P1)}});const _t=()=>{p.on(Xt=>{Xt.on(),Xt.showBars()})},mn=()=>{p.on(Xt=>{Xt.off(),Xt.hideBars()})};return l.on("DisabledStateChange",Xt=>{Xt.state?mn():_t()}),l.on("SwitchMode",()=>{l.mode.isReadOnly()?mn():_t()}),l.on("dragstart dragend",Xt=>{Xt.type==="dragstart"?mn():_t()}),l.on("remove",()=>{kt()}),{refresh:Xt=>{p.on(Ms=>Ms.refreshBars(st.fromDom(Xt)))},hide:()=>{p.on(Xt=>Xt.hideBars())},show:()=>{p.on(Xt=>Xt.showBars())}}},r0=l=>{V4(l);const m=wk(l),p=e0(l,m),v=sn(l,m,p);return Ib(l,v),Qy(l,v),UR(l,v),{getSelectedCells:p.getSelectedCells,clearSelectedCells:p.clearSelectedCells}},fv=l=>({table:r0(l)});var V2=()=>{an.add("dom",fv)};V2()}()),rK}var aK;function eX(){return aK||(aK=1,QY()),sK}eX();var iK={},lK={},uK;function tX(){return uK||(uK=1,function(){var an=tinymce.util.Tools.resolve("tinymce.PluginManager");const Co=()=>/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g,Un=St=>Tn=>Tn.options.get(St),mo=St=>{const Tn=St.options.register;Tn("autolink_pattern",{processor:"regexp",default:new RegExp("^"+Co().source+"$","i")}),Tn("link_default_target",{processor:"string"}),Tn("link_default_protocol",{processor:"string",default:"https"})},oo=Un("autolink_pattern"),In=Un("link_default_target"),fn=Un("link_default_protocol"),je=Un("allow_unsafe_link_target"),yn=(St,Tn,Re)=>{var ot;return Re(St,Tn.prototype)?!0:((ot=St.constructor)===null||ot===void 0?void 0:ot.name)===Tn.name},Ro=St=>{const Tn=typeof St;return St===null?"null":Tn==="object"&&Array.isArray(St)?"array":Tn==="object"&&yn(St,String,(Re,ot)=>ot.isPrototypeOf(Re))?"string":Tn},Ko=St=>Tn=>Ro(Tn)===St,jo=St=>Tn=>St===Tn,Wo=Ko("string"),Yo=jo(void 0),Ps=St=>St==null,io=St=>!Ps(St),Rt=St=>Tn=>!St(Tn),jn=Object.hasOwnProperty,Ze=(St,Tn)=>jn.call(St,Tn),oe=(St,Tn,Re)=>St.length>=Tn.length&&St.substr(Re,Re+Tn.length)===Tn,it=(St,Tn,Re=0,ot)=>{const F=St.indexOf(Tn,Re);return F!==-1?Yo(ot)?!0:F+Tn.length<=ot:!1},Zo=(St,Tn)=>oe(St,Tn,0),mt="\uFEFF",Z=St=>St===mt,Mt=St=>St.replace(/\uFEFF/g,"");var ln=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const On=St=>St.nodeType===3,De=St=>St.nodeType===1,ie=St=>/^[(\[{ \u00a0]$/.test(St),Go=St=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(St),eo=St=>/[?!,.;:]/.test(St),Bt=(St,Tn,Re)=>{for(let ot=Tn-1;ot>=0;ot--){const F=St.charAt(ot);if(!Z(F)&&Re(F))return ot}return-1},A=(St,Tn)=>{let Re=St,ot=Tn;for(;De(Re)&&Re.childNodes[ot];)Re=Re.childNodes[ot],ot=On(Re)?Re.data.length:Re.childNodes.length;return{container:Re,offset:ot}},To=(St,Tn)=>{var Re;const ot=St.schema.getVoidElements(),F=oo(St),{dom:_s,selection:to}=St;if(_s.getParent(to.getNode(),"a[href]")!==null||St.mode.isReadOnly())return null;const wo=to.getRng(),No=ln(_s,Wn=>_s.isBlock(Wn)||Ze(ot,Wn.nodeName.toLowerCase())||_s.getContentEditable(Wn)==="false"),{container:Ic,offset:We}=A(wo.endContainer,wo.endOffset),Tt=(Re=_s.getParent(Ic,_s.isBlock))!==null&&Re!==void 0?Re:_s.getRoot(),et=No.backwards(Ic,We+Tn,(Wn,Xs)=>{const Ho=Wn.data,As=Bt(Ho,Xs,Rt(ie));return As===-1||eo(Ho[As])?As:As+1},Tt);if(!et)return null;let fe=et.container;const bo=No.backwards(et.container,et.offset,(Wn,Xs)=>{fe=Wn;const Ho=Bt(Wn.data,Xs,ie);return Ho===-1?Ho:Ho+1},Tt),ko=_s.createRng();bo?ko.setStart(bo.container,bo.offset):ko.setStart(fe,0),ko.setEnd(et.container,et.offset);const hs=Mt(ko.toString()).match(F);if(hs){let Wn=hs[0];return Zo(Wn,"www.")?Wn=fn(St)+"://"+Wn:it(Wn,"@")&&!Go(Wn)&&(Wn="mailto:"+Wn),{rng:ko,url:Wn}}else return null},yt=(St,Tn)=>{const{dom:Re,selection:ot}=St,{rng:F,url:_s}=Tn,to=ot.getBookmark();ot.setRng(F);const wo="createlink",No={command:wo,ui:!1,value:_s};if(!St.dispatch("BeforeExecCommand",No).isDefaultPrevented()){St.getDoc().execCommand(wo,!1,_s),St.dispatch("ExecCommand",No);const We=In(St);if(Wo(We)){const Tt=ot.getNode();Re.setAttrib(Tt,"target",We),We==="_blank"&&!je(St)&&Re.setAttrib(Tt,"rel","noopener")}}ot.moveToBookmark(to),St.nodeChanged()},Mo=St=>{const Tn=To(St,-1);io(Tn)&&yt(St,Tn)},dn=Mo,Qe=St=>{const Tn=To(St,0);io(Tn)&&yt(St,Tn)},fo=St=>{St.on("keydown",Tn=>{Tn.keyCode===13&&!Tn.isDefaultPrevented()&&Qe(St)}),St.on("keyup",Tn=>{Tn.keyCode===32?Mo(St):(Tn.keyCode===48&&Tn.shiftKey||Tn.keyCode===221)&&dn(St)})};var Bs=()=>{an.add("autolink",St=>{mo(St),fo(St)})};Bs()}()),lK}var dK;function nX(){return dK||(dK=1,tX()),iK}nX();var mK={},fK={},gK;function oX(){return gK||(gK=1,function(){const an=Ze=>{let oe=Ze;return{get:()=>oe,set:mt=>{oe=mt}}};var Co=tinymce.util.Tools.resolve("tinymce.PluginManager"),Un=tinymce.util.Tools.resolve("tinymce.Env");const mo=Ze=>Ze.dispatch("ResizeEditor"),oo=Ze=>oe=>oe.options.get(Ze),In=Ze=>{const oe=Ze.options.register;oe("autoresize_overflow_padding",{processor:"number",default:1}),oe("autoresize_bottom_margin",{processor:"number",default:50})},fn=oo("min_height"),je=oo("max_height"),yn=oo("autoresize_overflow_padding"),Ro=oo("autoresize_bottom_margin"),Ko=Ze=>Ze.plugins.fullscreen&&Ze.plugins.fullscreen.isFullscreen(),jo=(Ze,oe)=>{const it=Ze.getBody();it&&(it.style.overflowY=oe?"":"hidden",oe||(it.scrollTop=0))},Wo=(Ze,oe,it,Zo)=>{var mt;const Z=parseInt((mt=Ze.getStyle(oe,it,Zo))!==null&&mt!==void 0?mt:"",10);return isNaN(Z)?0:Z},Yo=Ze=>{if((Ze==null?void 0:Ze.type.toLowerCase())==="setcontent"){const oe=Ze;return oe.selection===!0||oe.paste===!0}else return!1},Ps=(Ze,oe,it,Zo)=>{var mt;const Z=Ze.dom,Mt=Ze.getDoc();if(!Mt)return;if(Ko(Ze)){jo(Ze,!0);return}const ln=Mt.documentElement,On=Zo?Zo():yn(Ze),De=(mt=fn(Ze))!==null&&mt!==void 0?mt:Ze.getElement().offsetHeight;let ie=De;const Go=Wo(Z,ln,"margin-top",!0),eo=Wo(Z,ln,"margin-bottom",!0);let Bt=ln.offsetHeight+Go+eo+On;Bt<0&&(Bt=0);const A=Ze.getContainer().offsetHeight,To=Ze.getContentAreaContainer().offsetHeight,yt=A-To;Bt+yt>De&&(ie=Bt+yt);const Mo=je(Ze);Mo&&ie>Mo?(ie=Mo,jo(Ze,!0)):jo(Ze,!1);const dn=oe.get();if(dn.set&&(Ze.dom.setStyles(Ze.getDoc().documentElement,{"min-height":0}),Ze.dom.setStyles(Ze.getBody(),{"min-height":"inherit"})),ie!==dn.totalHeight&&(Bt-On!==dn.contentHeight||!dn.set)){const Qe=ie-dn.totalHeight;if(Z.setStyle(Ze.getContainer(),"height",ie+"px"),oe.set({totalHeight:ie,contentHeight:Bt,set:!0}),mo(Ze),Un.browser.isSafari()&&(Un.os.isMacOS()||Un.os.isiOS())){const fo=Ze.getWin();fo.scrollTo(fo.pageXOffset,fo.pageYOffset)}Ze.hasFocus()&&Yo(it)&&Ze.selection.scrollIntoView(),(Un.browser.isSafari()||Un.browser.isChromium())&&Qe<0&&Ps(Ze,oe,it,Zo)}},io=(Ze,oe)=>{const it=()=>Ro(Ze);Ze.on("init",Zo=>{const mt=yn(Ze),Z=Ze.dom;Z.setStyles(Ze.getDoc().documentElement,{height:"auto"}),Un.browser.isEdge()||Un.browser.isIE()?Z.setStyles(Ze.getBody(),{paddingLeft:mt,paddingRight:mt,"min-height":0}):Z.setStyles(Ze.getBody(),{paddingLeft:mt,paddingRight:mt}),Ps(Ze,oe,Zo,it)}),Ze.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",Zo=>{Ps(Ze,oe,Zo,it)})},Rt=(Ze,oe)=>{Ze.addCommand("mceAutoResize",()=>{Ps(Ze,oe)})};var jn=()=>{Co.add("autoresize",Ze=>{if(In(Ze),Ze.options.isSet("resize")||Ze.options.set("resize",!1),!Ze.inline){const oe=an({totalHeight:0,contentHeight:0,set:!1});Rt(Ze,oe),io(Ze,oe)}})};jn()}()),fK}var hK;function sX(){return hK||(hK=1,oX()),mK}sX();var pK={},bK={},vK;function rX(){return vK||(vK=1,function(){const an=Y=>{let ee=Y;return{get:()=>ee,set:wn=>{ee=wn}}};var Co=tinymce.util.Tools.resolve("tinymce.PluginManager");const Un=Y=>({isFullscreen:()=>Y.get()!==null}),mo=(Y,ee,ke)=>{var tt;return ke(Y,ee.prototype)?!0:((tt=Y.constructor)===null||tt===void 0?void 0:tt.name)===ee.name},oo=Y=>{const ee=typeof Y;return Y===null?"null":ee==="object"&&Array.isArray(Y)?"array":ee==="object"&&mo(Y,String,(ke,tt)=>tt.isPrototypeOf(ke))?"string":ee},In=Y=>ee=>oo(ee)===Y,fn=Y=>ee=>typeof ee===Y,je=Y=>ee=>Y===ee,yn=In("string"),Ro=In("object"),Ko=In("array"),jo=je(null),Wo=fn("boolean"),Yo=je(void 0),Ps=Y=>Y==null,io=Y=>!Ps(Y),Rt=fn("function"),jn=fn("number"),Ze=()=>{},oe=(Y,ee)=>(...ke)=>Y(ee.apply(null,ke)),it=(Y,ee)=>ke=>Y(ee(ke)),Zo=Y=>()=>Y;function mt(Y,...ee){return(...ke)=>{const tt=ee.concat(ke);return Y.apply(null,tt)}}const Z=Zo(!1),Mt=Zo(!0);class ln{constructor(ee,ke){this.tag=ee,this.value=ke}static some(ee){return new ln(!0,ee)}static none(){return ln.singletonNone}fold(ee,ke){return this.tag?ke(this.value):ee()}isSome(){return this.tag}isNone(){return!this.tag}map(ee){return this.tag?ln.some(ee(this.value)):ln.none()}bind(ee){return this.tag?ee(this.value):ln.none()}exists(ee){return this.tag&&ee(this.value)}forall(ee){return!this.tag||ee(this.value)}filter(ee){return!this.tag||ee(this.value)?this:ln.none()}getOr(ee){return this.tag?this.value:ee}or(ee){return this.tag?this:ee}getOrThunk(ee){return this.tag?this.value:ee()}orThunk(ee){return this.tag?this:ee()}getOrDie(ee){if(this.tag)return this.value;throw new Error(ee??"Called getOrDie on None")}static from(ee){return io(ee)?ln.some(ee):ln.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ee){this.tag&&ee(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ln.singletonNone=new ln(!1);const On=Array.prototype.push,De=(Y,ee)=>{const ke=Y.length,tt=new Array(ke);for(let wn=0;wn<ke;wn++){const $o=Y[wn];tt[wn]=ee($o,wn)}return tt},ie=(Y,ee)=>{for(let ke=0,tt=Y.length;ke<tt;ke++){const wn=Y[ke];ee(wn,ke)}},Go=(Y,ee)=>{const ke=[];for(let tt=0,wn=Y.length;tt<wn;tt++){const $o=Y[tt];ee($o,tt)&&ke.push($o)}return ke},eo=(Y,ee,ke)=>{for(let tt=0,wn=Y.length;tt<wn;tt++){const $o=Y[tt];if(ee($o,tt))return ln.some($o);if(ke($o,tt))break}return ln.none()},Bt=(Y,ee)=>eo(Y,ee,Z),A=Y=>{const ee=[];for(let ke=0,tt=Y.length;ke<tt;++ke){if(!Ko(Y[ke]))throw new Error("Arr.flatten item "+ke+" was not an array, input: "+Y);On.apply(ee,Y[ke])}return ee},To=(Y,ee)=>A(De(Y,ee)),yt=(Y,ee)=>ee>=0&&ee<Y.length?ln.some(Y[ee]):ln.none(),Mo=Y=>yt(Y,0),dn=(Y,ee)=>{for(let ke=0;ke<Y.length;ke++){const tt=ee(Y[ke],ke);if(tt.isSome())return tt}return ln.none()},Qe=(Y,ee,ke)=>Y.isSome()&&ee.isSome()?ln.some(ke(Y.getOrDie(),ee.getOrDie())):ln.none(),fo=Y=>{const ee=an(ln.none()),ke=()=>ee.get().each(Y);return{clear:()=>{ke(),ee.set(ln.none())},isSet:()=>ee.get().isSome(),get:()=>ee.get(),set:Is=>{ke(),ee.set(ln.some(Is))}}},Bs=()=>fo(Y=>Y.unbind()),St=()=>{const Y=fo(Ze);return{...Y,on:ke=>Y.get().each(ke)}},Tn=(Y,ee)=>{let ke=null;return{cancel:()=>{jo(ke)||(clearTimeout(ke),ke=null)},throttle:(...$o)=>{jo(ke)&&(ke=setTimeout(()=>{ke=null,Y.apply(null,$o)},ee))}}},Re=Object.keys,ot=(Y,ee)=>{const ke=Re(Y);for(let tt=0,wn=ke.length;tt<wn;tt++){const $o=ke[tt],po=Y[$o];ee(po,$o)}},F=typeof window<"u"?window:Function("return this;")(),_s=(Y,ee)=>{let ke=ee??F;for(let tt=0;tt<Y.length&&ke!==void 0&&ke!==null;++tt)ke=ke[Y[tt]];return ke},to=(Y,ee)=>{const ke=Y.split(".");return _s(ke,ee)},wo=(Y,ee)=>to(Y,ee),No=(Y,ee)=>{const ke=wo(Y,ee);if(ke==null)throw new Error(Y+" not available on this browser");return ke},Ic=Object.getPrototypeOf,We=Y=>No("HTMLElement",Y),Tt=Y=>{const ee=to("ownerDocument.defaultView",Y);return Ro(Y)&&(We(ee).prototype.isPrototypeOf(Y)||/^HTML\w*Element$/.test(Ic(Y).constructor.name))},et=9,fe=11,bo=1,ko=3,jt=Y=>Y.dom.nodeType,hs=Y=>ee=>jt(ee)===Y,Wn=Y=>Xs(Y)&&Tt(Y.dom),Xs=hs(bo),Ho=hs(ko),As=hs(fe),Oc=(Y,ee,ke)=>{if(yn(ke)||Wo(ke)||jn(ke))Y.setAttribute(ee,ke+"");else throw console.error("Invalid call to Attribute.set. Key ",ee,":: Value ",ke,":: Element ",Y),new Error("Attribute value was not simple")},Js=(Y,ee,ke)=>{Oc(Y.dom,ee,ke)},ps=(Y,ee)=>{const ke=Y.dom.getAttribute(ee);return ke===null?void 0:ke},os=(Y,ee)=>{Y.dom.removeAttribute(ee)},Nr=Y=>Y.dom.classList!==void 0,xs=(Y,ee)=>Nr(Y)&&Y.dom.classList.contains(ee),Ke=(Y,ee,ke=0,tt)=>{const wn=Y.indexOf(ee,ke);return wn!==-1?Yo(tt)?!0:wn+ee.length<=tt:!1},Gt=Y=>Y.style!==void 0&&Rt(Y.style.getPropertyValue),Ht=(Y,ee)=>{const tt=(ee||document).createElement("div");if(tt.innerHTML=Y,!tt.hasChildNodes()||tt.childNodes.length>1){const wn="HTML does not have a single root node";throw console.error(wn,Y),new Error(wn)}return bs(tt.childNodes[0])},Jt=(Y,ee)=>{const tt=(ee||document).createElement(Y);return bs(tt)},lo=(Y,ee)=>{const tt=(ee||document).createTextNode(Y);return bs(tt)},bs=Y=>{if(Y==null)throw new Error("Node cannot be null or undefined");return{dom:Y}},Yn={fromHtml:Ht,fromTag:Jt,fromText:lo,fromDom:bs,fromPoint:(Y,ee,ke)=>ln.from(Y.dom.elementFromPoint(ee,ke)).map(bs)},Er=(Y,ee)=>{const ke=Y.dom;if(ke.nodeType!==bo)return!1;{const tt=ke;if(tt.matches!==void 0)return tt.matches(ee);if(tt.msMatchesSelector!==void 0)return tt.msMatchesSelector(ee);if(tt.webkitMatchesSelector!==void 0)return tt.webkitMatchesSelector(ee);if(tt.mozMatchesSelector!==void 0)return tt.mozMatchesSelector(ee);throw new Error("Browser lacks native selectors")}},Ct=Y=>Y.nodeType!==bo&&Y.nodeType!==et&&Y.nodeType!==fe||Y.childElementCount===0,uo=(Y,ee)=>{const ke=document;return Ct(ke)?[]:De(ke.querySelectorAll(Y),Yn.fromDom)},dr=(Y,ee)=>Y.dom===ee.dom,vr=Y=>Yn.fromDom(Y.dom.ownerDocument),dc=Y=>ln.from(Y.dom.parentNode).map(Yn.fromDom),Dc=(Y,ee)=>{const ke=Rt(ee)?ee:Z;let tt=Y.dom;const wn=[];for(;tt.parentNode!==null&&tt.parentNode!==void 0;){const $o=tt.parentNode,po=Yn.fromDom($o);if(wn.push(po),ke(po)===!0)break;tt=$o}return wn},us=Y=>{const ee=ke=>Go(ke,tt=>!dr(Y,tt));return dc(Y).map(mc).map(ee).getOr([])},Qr=Y=>ln.from(Y.dom.nextSibling).map(Yn.fromDom),mc=Y=>De(Y.dom.childNodes,Yn.fromDom),is=Y=>As(Y)&&io(Y.dom.host),Cn=Y=>Yn.fromDom(Y.dom.getRootNode()),Ls=Y=>{const ee=Cn(Y);return is(ee)?ln.some(ee):ln.none()},qr=Y=>Yn.fromDom(Y.dom.host),Ca=Y=>{if(io(Y.target)){const ee=Yn.fromDom(Y.target);if(Xs(ee)&&ci(ee)&&Y.composed&&Y.composedPath){const ke=Y.composedPath();if(ke)return Mo(ke)}}return ln.from(Y.target)},ci=Y=>io(Y.dom.shadowRoot),mr=Y=>{const ee=Ho(Y)?Y.dom.parentNode:Y.dom;if(ee==null||ee.ownerDocument===null)return!1;const ke=ee.ownerDocument;return Ls(Yn.fromDom(ee)).fold(()=>ke.body.contains(ee),it(mr,qr))},vs=Y=>{const ee=Y.dom.body;if(ee==null)throw new Error("Body is not available yet");return Yn.fromDom(ee)},$s=(Y,ee,ke)=>{if(!yn(ke))throw console.error("Invalid call to CSS.set. Property ",ee,":: Value ",ke,":: Element ",Y),new Error("CSS value must be a string: "+ke);Gt(Y)&&Y.style.setProperty(ee,ke)},ec=(Y,ee,ke)=>{const tt=Y.dom;$s(tt,ee,ke)},Rc=(Y,ee)=>{const ke=Y.dom;ot(ee,(tt,wn)=>{$s(ke,wn,tt)})},Qs=(Y,ee)=>{const ke=Y.dom,wn=window.getComputedStyle(ke).getPropertyValue(ee);return wn===""&&!mr(Y)?le(ke,ee):wn},le=(Y,ee)=>Gt(Y)?Y.style.getPropertyValue(ee):"",re=(Y,ee,ke,tt,wn,$o,po)=>({target:Y,x:ee,y:ke,stop:tt,prevent:wn,kill:$o,raw:po}),Ne=Y=>{const ee=Yn.fromDom(Ca(Y).getOr(Y.target)),ke=()=>Y.stopPropagation(),tt=()=>Y.preventDefault(),wn=oe(tt,ke);return re(ee,Y.clientX,Y.clientY,ke,tt,wn,Y)},Ve=(Y,ee)=>ke=>{Y(ke)&&ee(Ne(ke))},xn=(Y,ee,ke,tt,wn)=>{const $o=Ve(ke,tt);return Y.dom.addEventListener(ee,$o,wn),{unbind:mt(so,Y,ee,$o,wn)}},Fn=(Y,ee,ke,tt)=>xn(Y,ee,ke,tt,!1),so=(Y,ee,ke,tt)=>{Y.dom.removeEventListener(ee,ke,tt)},Os=Mt,st=(Y,ee,ke)=>Fn(Y,ee,Os,ke),ze=Y=>{let ee=!1,ke;return(...tt)=>(ee||(ee=!0,ke=Y.apply(null,tt)),ke)},de=(Y,ee,ke,tt)=>{const wn=Y.isiOS()&&/ipad/i.test(ke)===!0,$o=Y.isiOS()&&!wn,po=Y.isiOS()||Y.isAndroid(),Is=po||tt("(pointer:coarse)"),zr=wn||!$o&&po&&tt("(min-device-width:768px)"),wa=$o||po&&!zr,Kc=ee.isSafari()&&Y.isiOS()&&/safari/i.test(ke)===!1,sr=!wa&&!zr&&!Kc;return{isiPad:Zo(wn),isiPhone:Zo($o),isTablet:Zo(zr),isPhone:Zo(wa),isTouch:Zo(Is),isAndroid:Y.isAndroid,isiOS:Y.isiOS,isWebView:Zo(Kc),isDesktop:Zo(sr)}},he=(Y,ee)=>{for(let ke=0;ke<Y.length;ke++){const tt=Y[ke];if(tt.test(ee))return tt}},ct=(Y,ee)=>{const ke=he(Y,ee);if(!ke)return{major:0,minor:0};const tt=wn=>Number(ee.replace(ke,"$"+wn));return gn(tt(1),tt(2))},pt=(Y,ee)=>{const ke=String(ee).toLowerCase();return Y.length===0?zt():ct(Y,ke)},zt=()=>gn(0,0),gn=(Y,ee)=>({major:Y,minor:ee}),hn={nu:gn,detect:pt,unknown:zt},on=(Y,ee)=>dn(ee.brands,ke=>{const tt=ke.brand.toLowerCase();return Bt(Y,wn=>{var $o;return tt===(($o=wn.brand)===null||$o===void 0?void 0:$o.toLowerCase())}).map(wn=>({current:wn.name,version:hn.nu(parseInt(ke.version,10),0)}))}),Rn=(Y,ee)=>{const ke=String(ee).toLowerCase();return Bt(Y,tt=>tt.search(ke))},Ln=(Y,ee)=>Rn(Y,ee).map(ke=>{const tt=hn.detect(ke.versionRegexes,ee);return{current:ke.name,version:tt}}),Po=(Y,ee)=>Rn(Y,ee).map(ke=>{const tt=hn.detect(ke.versionRegexes,ee);return{current:ke.name,version:tt}}),Hs=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ss=Y=>ee=>Ke(ee,Y),la=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:Y=>Ke(Y,"edge/")&&Ke(Y,"chrome")&&Ke(Y,"safari")&&Ke(Y,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Hs],search:Y=>Ke(Y,"chrome")&&!Ke(Y,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:Y=>Ke(Y,"msie")||Ke(Y,"trident")},{name:"Opera",versionRegexes:[Hs,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ss("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ss("firefox")},{name:"Safari",versionRegexes:[Hs,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:Y=>(Ke(Y,"safari")||Ke(Y,"mobile/"))&&Ke(Y,"applewebkit")}],vc=[{name:"Windows",search:ss("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:Y=>Ke(Y,"iphone")||Ke(Y,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ss("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ss("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ss("linux"),versionRegexes:[]},{name:"Solaris",search:ss("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ss("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ss("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Xn={browsers:Zo(la),oses:Zo(vc)},vo="Edge",So="Chromium",tc="IE",nc="Opera",yc="Firefox",Fs="Safari",Su=()=>Ba({current:void 0,version:hn.unknown()}),Ba=Y=>{const ee=Y.current,ke=Y.version,tt=wn=>()=>ee===wn;return{current:ee,version:ke,isEdge:tt(vo),isChromium:tt(So),isIE:tt(tc),isOpera:tt(nc),isFirefox:tt(yc),isSafari:tt(Fs)}},Ol={unknown:Su,nu:Ba},Bo="Windows",ai="iOS",er="Android",Dl="Linux",$a="macOS",ii="Solaris",oc="FreeBSD",ol="ChromeOS",Fa=()=>sl({current:void 0,version:hn.unknown()}),sl=Y=>{const ee=Y.current,ke=Y.version,tt=wn=>()=>ee===wn;return{current:ee,version:ke,isWindows:tt(Bo),isiOS:tt(ai),isAndroid:tt(er),isMacOS:tt($a),isLinux:tt(Dl),isSolaris:tt(ii),isFreeBSD:tt(oc),isChromeOS:tt(ol)}},zi={unknown:Fa,nu:sl},Lr={detect:(Y,ee,ke)=>{const tt=Xn.browsers(),wn=Xn.oses(),$o=ee.bind(zr=>on(tt,zr)).orThunk(()=>Ln(tt,Y)).fold(Ol.unknown,Ol.nu),po=Po(wn,Y).fold(zi.unknown,zi.nu),Is=de(po,$o,Y,ke);return{browser:$o,os:po,deviceType:Is}}},li=Y=>window.matchMedia(Y).matches;let Vi=ze(()=>Lr.detect(window.navigator.userAgent,ln.from(window.navigator.userAgentData),li));const rl=()=>Vi(),Rl=(Y,ee)=>({left:Y,top:ee,translate:(tt,wn)=>Rl(Y+tt,ee+wn)}),Ia=Rl,Or=Y=>{const ee=Y!==void 0?Y.dom:document,ke=ee.body.scrollLeft||ee.documentElement.scrollLeft,tt=ee.body.scrollTop||ee.documentElement.scrollTop;return Ia(ke,tt)},Dr=Y=>{const ee=Y===void 0?window:Y;return rl().browser.isFirefox()?ln.none():ln.from(ee.visualViewport)},jc=(Y,ee,ke,tt)=>({x:Y,y:ee,width:ke,height:tt,right:Y+ke,bottom:ee+tt}),cl=Y=>{const ee=Y===void 0?window:Y,ke=ee.document,tt=Or(Yn.fromDom(ke));return Dr(ee).fold(()=>{const wn=ee.document.documentElement,$o=wn.clientWidth,po=wn.clientHeight;return jc(tt.left,tt.top,$o,po)},wn=>jc(Math.max(wn.pageLeft,tt.left),Math.max(wn.pageTop,tt.top),wn.width,wn.height))},al=(Y,ee,ke)=>Dr(ke).map(tt=>{const wn=$o=>ee(Ne($o));return tt.addEventListener(Y,wn),{unbind:()=>tt.removeEventListener(Y,wn)}}).getOrThunk(()=>({unbind:Ze}));var Cc=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),U=tinymce.util.Tools.resolve("tinymce.Env");const se=(Y,ee)=>{Y.dispatch("FullscreenStateChanged",{state:ee}),Y.dispatch("ResizeEditor")},ye=Y=>ee=>ee.options.get(Y),Ge=Y=>{const ee=Y.options.register;ee("fullscreen_native",{processor:"boolean",default:!1})},Et=ye("fullscreen_native"),Xe=Y=>{const ee=Yn.fromDom(Y.getElement());return Ls(ee).map(qr).getOrThunk(()=>vs(vr(ee)))},cn=Y=>Y.fullscreenElement!==void 0?Y.fullscreenElement:Y.msFullscreenElement!==void 0?Y.msFullscreenElement:Y.webkitFullscreenElement!==void 0?Y.webkitFullscreenElement:null,ho=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",Gn=Y=>{const ee=Y.dom;ee.requestFullscreen?ee.requestFullscreen():ee.msRequestFullscreen?ee.msRequestFullscreen():ee.webkitRequestFullScreen&&ee.webkitRequestFullScreen()},$=Y=>{const ee=Y.dom;ee.exitFullscreen?ee.exitFullscreen():ee.msExitFullscreen?ee.msExitFullscreen():ee.webkitCancelFullScreen&&ee.webkitCancelFullScreen()},V=Y=>Y.dom===cn(vr(Y).dom),ue=(Y,ee,ke)=>Go(Dc(Y,ke),ee),Ae=(Y,ee)=>Go(us(Y),ee),nn=Y=>uo(Y),Nt=(Y,ee,ke)=>ue(Y,tt=>Er(tt,ee),ke),es=(Y,ee)=>Ae(Y,ke=>Er(ke,ee)),Hr="data-ephox-mobile-fullscreen-style",at="display:none!important;",Lc="position:absolute!important;",Es="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",ki="background-color:rgb(255,255,255)!important;",yr=U.os.isAndroid(),xo=Y=>{const ee=Qs(Y,"background-color");return ee!==void 0&&ee!==""?"background-color:"+ee+"!important":ki},Gc=(Y,ee,ke)=>{const tt=wa=>es(wa,"*:not(.tox-silver-sink)"),wn=wa=>Kc=>{const sr=ps(Kc,"style"),Rr=sr===void 0?"no-styles":sr.trim();Rr!==wa&&(Js(Kc,Hr,Rr),Rc(Kc,Y.parseStyle(wa)))},$o=Nt(ee,"*"),po=To($o,tt),Is=xo(ke);ie(po,wn(at)),ie($o,wn(Lc+Es+Is)),wn((yr===!0?"":Lc)+Es+Is)(ee)},sc=Y=>{const ee=nn("["+Hr+"]");ie(ee,ke=>{const tt=ps(ke,Hr);tt&&tt!=="no-styles"?Rc(ke,Y.parseStyle(tt)):os(ke,"style"),os(ke,Hr)})},qc=Cc.DOM,Pr=()=>cl(window),il=Y=>window.scrollTo(Y.x,Y.y),Nm=Dr().fold(()=>({bind:Ze,unbind:Ze}),Y=>{const ee=St(),ke=Bs(),tt=Bs(),wn=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},$o=()=>{window.requestAnimationFrame(()=>{ee.on(wa=>Rc(wa,{top:Y.offsetTop+"px",left:Y.offsetLeft+"px",height:Y.height+"px",width:Y.width+"px"}))})},po=Tn(()=>{wn(),$o()},50);return{bind:wa=>{ee.set(wa),po.throttle(),ke.set(al("resize",po.throttle)),tt.set(al("scroll",po.throttle))},unbind:()=>{ee.on(()=>{ke.clear(),tt.clear()}),ee.clear()}}}),xf=(Y,ee)=>{const ke=document.body,tt=document.documentElement,wn=Y.getContainer(),$o=Yn.fromDom(wn),po=Qr($o).filter(Sc=>Wn(Sc)&&xs(Sc,"tox-silver-sink")),Is=Xe(Y),zr=ee.get(),wa=Yn.fromDom(Y.getBody()),Kc=U.deviceType.isTouch(),sr=wn.style,Rr=Y.iframeElement,Kr=Rr==null?void 0:Rr.style,Hc=Sc=>{Sc(ke,"tox-fullscreen"),Sc(tt,"tox-fullscreen"),Sc(wn,"tox-fullscreen"),Ls($o).map(Ts=>qr(Ts).dom).each(Ts=>{Sc(Ts,"tox-fullscreen"),Sc(Ts,"tox-shadowhost")})},Tr=()=>{Kc&&sc(Y.dom),Hc(qc.removeClass),Nm.unbind(),ln.from(ee.get()).each(Sc=>Sc.fullscreenChangeHandler.unbind())};if(zr)zr.fullscreenChangeHandler.unbind(),Et(Y)&&V(Is)&&$(vr(Is)),Kr.width=zr.iframeWidth,Kr.height=zr.iframeHeight,sr.width=zr.containerWidth,sr.height=zr.containerHeight,sr.top=zr.containerTop,sr.left=zr.containerLeft,Qe(po,zr.sinkCssPosition,(Sc,Ts)=>{ec(Sc,"position",Ts)}),Tr(),il(zr.scrollPos),ee.set(null),se(Y,!1),Y.off("remove",Tr);else{const Sc=st(vr(Is),ho(),ul=>{Et(Y)&&!V(Is)&&ee.get()!==null&&xf(Y,ee)}),Ts={scrollPos:Pr(),containerWidth:sr.width,containerHeight:sr.height,containerTop:sr.top,containerLeft:sr.left,iframeWidth:Kr.width,iframeHeight:Kr.height,fullscreenChangeHandler:Sc,sinkCssPosition:po.map(ul=>Qs(ul,"position"))};Kc&&Gc(Y.dom,$o,wa),Kr.width=Kr.height="100%",sr.width=sr.height="",Hc(qc.addClass),po.each(ul=>{ec(ul,"position","fixed")}),Nm.bind($o),Y.on("remove",Tr),ee.set(Ts),Et(Y)&&Gn(Is),se(Y,!0)}},Zs=(Y,ee)=>{Y.addCommand("mceFullScreen",()=>{xf(Y,ee)})};var ll=tinymce.util.Tools.resolve("tinymce.util.VK");const rc=(Y,ee)=>{Y.on("init",()=>{Y.on("keydown",ke=>{ke.keyCode===ll.TAB&&!(ke.metaKey||ke.ctrlKey)&&ee.get()&&ke.preventDefault()})})},wc=(Y,ee)=>ke=>{ke.setActive(ee.get()!==null);const tt=wn=>ke.setActive(wn.state);return Y.on("FullscreenStateChanged",tt),()=>Y.off("FullscreenStateChanged",tt)},ua=(Y,ee)=>{const ke=()=>Y.execCommand("mceFullScreen");Y.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:ke,onSetup:wc(Y,ee),context:"any"}),Y.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:ke,onSetup:wc(Y,ee),shortcut:"Meta+Shift+F",context:"any"})};var Ml=()=>{Co.add("fullscreen",Y=>{const ee=an(null);return Y.inline||(Ge(Y),Zs(Y,ee),ua(Y,ee),rc(Y,ee),Y.addShortcut("Meta+Shift+F","","mceFullScreen")),Un(ee)})};Ml()}()),bK}var yK;function cX(){return yK||(yK=1,rX()),pK}cX();var CK={},wK={},SK;function aX(){return SK||(SK=1,function(){var an=tinymce.util.Tools.resolve("tinymce.PluginManager");const Co=Object.getPrototypeOf,Un=($,V,ue)=>{var Ae;return ue($,V.prototype)?!0:((Ae=$.constructor)===null||Ae===void 0?void 0:Ae.name)===V.name},mo=$=>{const V=typeof $;return $===null?"null":V==="object"&&Array.isArray($)?"array":V==="object"&&Un($,String,(ue,Ae)=>Ae.isPrototypeOf(ue))?"string":V},oo=$=>V=>mo(V)===$,In=$=>V=>typeof V===$,fn=$=>V=>$===V,je=($,V)=>Ro($)&&Un($,V,(ue,Ae)=>Co(ue)===Ae),yn=oo("string"),Ro=oo("object"),Ko=$=>je($,Object),jo=oo("array"),Wo=fn(null),Yo=In("boolean"),Ps=$=>$==null,io=$=>!Ps($),Rt=In("function"),jn=In("number"),Ze=($,V)=>{if(jo($)){for(let ue=0,Ae=$.length;ue<Ae;++ue)if(!V($[ue]))return!1;return!0}return!1},oe=()=>{};class it{constructor(V,ue){this.tag=V,this.value=ue}static some(V){return new it(!0,V)}static none(){return it.singletonNone}fold(V,ue){return this.tag?ue(this.value):V()}isSome(){return this.tag}isNone(){return!this.tag}map(V){return this.tag?it.some(V(this.value)):it.none()}bind(V){return this.tag?V(this.value):it.none()}exists(V){return this.tag&&V(this.value)}forall(V){return!this.tag||V(this.value)}filter(V){return!this.tag||V(this.value)?this:it.none()}getOr(V){return this.tag?this.value:V}or(V){return this.tag?this:V}getOrThunk(V){return this.tag?this.value:V()}orThunk(V){return this.tag?this:V()}getOrDie(V){if(this.tag)return this.value;throw new Error(V??"Called getOrDie on None")}static from(V){return io(V)?it.some(V):it.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(V){this.tag&&V(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}it.singletonNone=new it(!1);const Zo=Object.keys,mt=Object.hasOwnProperty,Z=($,V)=>{const ue=Zo($);for(let Ae=0,nn=ue.length;Ae<nn;Ae++){const Nt=ue[Ae],es=$[Nt];V(es,Nt)}},Mt=$=>(V,ue)=>{$[ue]=V},ln=($,V,ue,Ae)=>{Z($,(nn,Nt)=>{(V(nn,Nt)?ue:Ae)(nn,Nt)})},On=($,V)=>{const ue={};return ln($,V,Mt(ue),oe),ue},De=($,V)=>mt.call($,V),ie=($,V)=>De($,V)&&$[V]!==void 0&&$[V]!==null,Go=Array.prototype.push,eo=$=>{const V=[];for(let ue=0,Ae=$.length;ue<Ae;++ue){if(!jo($[ue]))throw new Error("Arr.flatten item "+ue+" was not an array, input: "+$);Go.apply(V,$[ue])}return V},Bt=($,V)=>V>=0&&V<$.length?it.some($[V]):it.none(),A=$=>Bt($,0),To=($,V)=>{for(let ue=0;ue<$.length;ue++){const Ae=V($[ue],ue);if(Ae.isSome())return Ae}return it.none()};typeof window<"u"||Function("return this;")();const yt=($,V,ue)=>{if(yn(ue)||Yo(ue)||jn(ue))$.setAttribute(V,ue+"");else throw console.error("Invalid call to Attribute.set. Key ",V,":: Value ",ue,":: Element ",$),new Error("Attribute value was not simple")},Mo=($,V,ue)=>{yt($.dom,V,ue)},dn=($,V)=>{$.dom.removeAttribute(V)},Qe=($,V)=>{const Ae=(V||document).createElement("div");if(Ae.innerHTML=$,!Ae.hasChildNodes()||Ae.childNodes.length>1){const nn="HTML does not have a single root node";throw console.error(nn,$),new Error(nn)}return St(Ae.childNodes[0])},fo=($,V)=>{const Ae=(V||document).createElement($);return St(Ae)},Bs=($,V)=>{const Ae=(V||document).createTextNode($);return St(Ae)},St=$=>{if($==null)throw new Error("Node cannot be null or undefined");return{dom:$}},Re={fromHtml:Qe,fromTag:fo,fromText:Bs,fromDom:St,fromPoint:($,V,ue)=>it.from($.dom.elementFromPoint(V,ue)).map(St)};var ot=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),F=tinymce.util.Tools.resolve("tinymce.util.URI");const _s=$=>$.length>0,to=$=>V=>V.options.get($),wo=$=>{const V=$.options.register;V("image_dimensions",{processor:"boolean",default:!0}),V("image_advtab",{processor:"boolean",default:!1}),V("image_uploadtab",{processor:"boolean",default:!0}),V("image_prepend_url",{processor:"string",default:""}),V("image_class_list",{processor:"object[]"}),V("image_description",{processor:"boolean",default:!0}),V("image_title",{processor:"boolean",default:!1}),V("image_caption",{processor:"boolean",default:!1}),V("image_list",{processor:ue=>{const Ae=ue===!1||yn(ue)||Ze(ue,Ro)||Rt(ue);return Ae?{value:ue,valid:Ae}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},No=to("image_dimensions"),Ic=to("image_advtab"),We=to("image_uploadtab"),Tt=to("image_prepend_url"),et=to("image_class_list"),fe=to("image_description"),bo=to("image_title"),ko=to("image_caption"),jt=to("image_list"),hs=to("a11y_advanced_options"),Wn=to("automatic_uploads"),Xs=$=>_s($.options.get("images_upload_url")),Ho=$=>io($.options.get("images_upload_handler")),As=($,V)=>Math.max(parseInt($,10),parseInt(V,10)),Oc=$=>new Promise(V=>{const ue=document.createElement("img"),Ae=Nt=>{ue.parentNode&&ue.parentNode.removeChild(ue),V(Nt)};ue.addEventListener("load",()=>{const Nt=As(ue.width,ue.clientWidth),es=As(ue.height,ue.clientHeight),Hr={width:Nt,height:es};Ae(Promise.resolve(Hr))}),ue.addEventListener("error",()=>{Ae(Promise.reject(`Failed to get image dimensions for: ${$}`))});const nn=ue.style;nn.visibility="hidden",nn.position="fixed",nn.bottom=nn.left="0px",nn.width=nn.height="auto",document.body.appendChild(ue),ue.src=$}),Js=$=>($&&($=$.replace(/px$/,"")),$),ps=$=>($.length>0&&/^[0-9]+$/.test($)&&($+="px"),$),os=$=>{if($.margin){const V=String($.margin).split(" ");switch(V.length){case 1:$["margin-top"]=$["margin-top"]||V[0],$["margin-right"]=$["margin-right"]||V[0],$["margin-bottom"]=$["margin-bottom"]||V[0],$["margin-left"]=$["margin-left"]||V[0];break;case 2:$["margin-top"]=$["margin-top"]||V[0],$["margin-right"]=$["margin-right"]||V[1],$["margin-bottom"]=$["margin-bottom"]||V[0],$["margin-left"]=$["margin-left"]||V[1];break;case 3:$["margin-top"]=$["margin-top"]||V[0],$["margin-right"]=$["margin-right"]||V[1],$["margin-bottom"]=$["margin-bottom"]||V[2],$["margin-left"]=$["margin-left"]||V[1];break;case 4:$["margin-top"]=$["margin-top"]||V[0],$["margin-right"]=$["margin-right"]||V[1],$["margin-bottom"]=$["margin-bottom"]||V[2],$["margin-left"]=$["margin-left"]||V[3]}delete $.margin}return $},Nr=($,V)=>{const ue=jt($);yn(ue)?fetch(ue).then(Ae=>{Ae.ok&&Ae.json().then(V)}):Rt(ue)?ue(V):V(ue)},xs=($,V,ue)=>{const Ae=()=>{ue.onload=ue.onerror=null,$.selection&&($.selection.select(ue),$.nodeChanged())};ue.onload=()=>{!V.width&&!V.height&&No($)&&$.dom.setAttribs(ue,{width:String(ue.clientWidth),height:String(ue.clientHeight)}),Ae()},ue.onerror=Ae},Ke=$=>new Promise((V,ue)=>{const Ae=new FileReader;Ae.onload=()=>{V(Ae.result)},Ae.onerror=()=>{var nn;ue((nn=Ae.error)===null||nn===void 0?void 0:nn.message)},Ae.readAsDataURL($)}),Gt=$=>$.nodeName==="IMG"&&($.hasAttribute("data-mce-object")||$.hasAttribute("data-mce-placeholder")),Ht=($,V)=>{const ue=$.options.get;return F.isDomSafe(V,"img",{allow_html_data_urls:ue("allow_html_data_urls"),allow_script_urls:ue("allow_script_urls"),allow_svg_data_urls:ue("allow_svg_data_urls")})},Jt=ot.DOM,lo=$=>$.style.marginLeft&&$.style.marginRight&&$.style.marginLeft===$.style.marginRight?Js($.style.marginLeft):"",bs=$=>$.style.marginTop&&$.style.marginBottom&&$.style.marginTop===$.style.marginBottom?Js($.style.marginTop):"",ur=$=>$.style.borderWidth?Js($.style.borderWidth):"",Yn=($,V)=>{var ue;return $.hasAttribute(V)&&(ue=$.getAttribute(V))!==null&&ue!==void 0?ue:""},Er=$=>$.parentNode!==null&&$.parentNode.nodeName==="FIGURE",Ct=($,V,ue)=>{ue===""||ue===null?$.removeAttribute(V):$.setAttribute(V,ue)},uo=$=>{const V=Jt.create("figure",{class:"image"});Jt.insertAfter(V,$),V.appendChild($),V.appendChild(Jt.create("figcaption",{contentEditable:"true"},"Caption")),V.contentEditable="false"},dr=$=>{const V=$.parentNode;io(V)&&(Jt.insertAfter($,V),Jt.remove(V))},vr=$=>{Er($)?dr($):uo($)},dc=($,V)=>{const ue=$.getAttribute("style"),Ae=V(ue!==null?ue:"");Ae.length>0?($.setAttribute("style",Ae),$.setAttribute("data-mce-style",Ae)):$.removeAttribute("style")},Dc=($,V)=>(ue,Ae,nn)=>{const Nt=ue.style;Nt[Ae]?(Nt[Ae]=ps(nn),dc(ue,V)):Ct(ue,Ae,nn)},us=($,V)=>$.style[V]?Js($.style[V]):Yn($,V),Qr=($,V)=>{const ue=ps(V);$.style.marginLeft=ue,$.style.marginRight=ue},mc=($,V)=>{const ue=ps(V);$.style.marginTop=ue,$.style.marginBottom=ue},is=($,V)=>{const ue=ps(V);$.style.borderWidth=ue},Cn=($,V)=>{$.style.borderStyle=V},Ls=$=>{var V;return(V=$.style.borderStyle)!==null&&V!==void 0?V:""},qr=$=>io($)&&$.nodeName==="FIGURE",Ca=$=>$.nodeName==="IMG",ci=$=>Jt.getAttrib($,"alt").length===0&&Jt.getAttrib($,"role")==="presentation",mr=$=>ci($)?"":Yn($,"alt"),vs=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),$s=($,V)=>{var ue;const Ae=document.createElement("img");return Ct(Ae,"style",V.style),(lo(Ae)||V.hspace!=="")&&Qr(Ae,V.hspace),(bs(Ae)||V.vspace!=="")&&mc(Ae,V.vspace),(ur(Ae)||V.border!=="")&&is(Ae,V.border),(Ls(Ae)||V.borderStyle!=="")&&Cn(Ae,V.borderStyle),$((ue=Ae.getAttribute("style"))!==null&&ue!==void 0?ue:"")},ec=($,V)=>{const ue=document.createElement("img");if(Ve($,{...V,caption:!1},ue),le(ue,V.alt,V.isDecorative),V.caption){const Ae=Jt.create("figure",{class:"image"});return Ae.appendChild(ue),Ae.appendChild(Jt.create("figcaption",{contentEditable:"true"},"Caption")),Ae.contentEditable="false",Ae}else return ue},Rc=($,V)=>({src:Yn(V,"src"),alt:mr(V),title:Yn(V,"title"),width:us(V,"width"),height:us(V,"height"),class:Yn(V,"class"),style:$(Yn(V,"style")),caption:Er(V),hspace:lo(V),vspace:bs(V),border:ur(V),borderStyle:Ls(V),isDecorative:ci(V)}),Qs=($,V,ue,Ae,nn)=>{ue[Ae]!==V[Ae]&&nn($,Ae,String(ue[Ae]))},le=($,V,ue)=>{if(ue){Jt.setAttrib($,"role","presentation");const Ae=Re.fromDom($);Mo(Ae,"alt","")}else{if(Wo(V)){const Ae=Re.fromDom($);dn(Ae,"alt")}else{const Ae=Re.fromDom($);Mo(Ae,"alt",V)}Jt.getAttrib($,"role")==="presentation"&&Jt.setAttrib($,"role","")}},re=($,V,ue)=>{(ue.alt!==V.alt||ue.isDecorative!==V.isDecorative)&&le($,ue.alt,ue.isDecorative)},Ne=($,V)=>(ue,Ae,nn)=>{$(ue,nn),dc(ue,V)},Ve=($,V,ue)=>{const Ae=Rc($,ue);Qs(ue,Ae,V,"caption",(nn,Nt,es)=>vr(nn)),Qs(ue,Ae,V,"src",Ct),Qs(ue,Ae,V,"title",Ct),Qs(ue,Ae,V,"width",Dc("width",$)),Qs(ue,Ae,V,"height",Dc("height",$)),Qs(ue,Ae,V,"class",Ct),Qs(ue,Ae,V,"style",Ne((nn,Nt)=>Ct(nn,"style",Nt),$)),Qs(ue,Ae,V,"hspace",Ne(Qr,$)),Qs(ue,Ae,V,"vspace",Ne(mc,$)),Qs(ue,Ae,V,"border",Ne(is,$)),Qs(ue,Ae,V,"borderStyle",Ne(Cn,$)),re(ue,Ae,V)},xn=($,V)=>{const ue=$.dom.styles.parse(V),Ae=os(ue),nn=$.dom.styles.parse($.dom.styles.serialize(Ae));return $.dom.styles.serialize(nn)},Fn=$=>{const V=$.selection.getNode(),ue=$.dom.getParent(V,"figure.image");return ue?$.dom.select("img",ue)[0]:V&&(V.nodeName!=="IMG"||Gt(V))?null:V},so=($,V)=>{var ue;const Ae=$.dom,nn=On($.schema.getTextBlockElements(),(es,Hr)=>!$.schema.isValidChild(Hr,"figure")),Nt=Ae.getParent(V.parentNode,es=>ie(nn,es.nodeName),$.getBody());return Nt&&(ue=Ae.split(Nt,V))!==null&&ue!==void 0?ue:V},Os=$=>{const V=Fn($);return V?Rc(ue=>xn($,ue),V):vs()},st=($,V)=>{const ue=ec(nn=>xn($,nn),V);$.dom.setAttrib(ue,"data-mce-id","__mcenew"),$.focus(),$.selection.setContent(ue.outerHTML);const Ae=$.dom.select('*[data-mce-id="__mcenew"]')[0];if($.dom.setAttrib(Ae,"data-mce-id",null),qr(Ae)){const nn=so($,Ae);$.selection.select(nn)}else $.selection.select(Ae)},ze=($,V)=>{$.dom.setAttrib(V,"src",V.getAttribute("src"))},de=($,V)=>{if(V){const ue=$.dom.is(V.parentNode,"figure.image")?V.parentNode:V;$.dom.remove(ue),$.focus(),$.nodeChanged(),$.dom.isEmpty($.getBody())&&($.setContent(""),$.selection.setCursorLocation())}},he=($,V)=>{const ue=Fn($);if(ue)if(Ve(Ae=>xn($,Ae),V,ue),ze($,ue),qr(ue.parentNode)){$.dom.setStyle(ue,"float","");const Ae=ue.parentNode;so($,Ae),$.selection.select(ue.parentNode)}else $.selection.select(ue),xs($,V,ue)},ct=($,V)=>{const ue=V.src;return{...V,src:Ht($,ue)?ue:""}},pt=($,V)=>{const ue=Fn($);if(ue){const nn={...Rc(es=>xn($,es),ue),...V},Nt=ct($,nn);nn.src?he($,Nt):de($,ue)}else V.src&&st($,{...vs(),...V})},hn=($=>(...V)=>{if(V.length===0)throw new Error("Can't merge zero objects");const ue={};for(let Ae=0;Ae<V.length;Ae++){const nn=V[Ae];for(const Nt in nn)De(nn,Nt)&&(ue[Nt]=$(ue[Nt],nn[Nt]))}return ue})(($,V)=>Ko($)&&Ko(V)?hn($,V):V);var on=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Rn=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ln=$=>yn($.value)?$.value:"",Po=$=>yn($.text)?$.text:yn($.title)?$.title:"",Hs=($,V)=>{const ue=[];return Rn.each($,Ae=>{const nn=Po(Ae);if(Ae.menu!==void 0){const Nt=Hs(Ae.menu,V);ue.push({text:nn,items:Nt})}else{const Nt=V(Ae);ue.push({text:nn,value:Nt})}}),ue},ss=($=Ln)=>V=>V?it.from(V).map(ue=>Hs(ue,$)):it.none(),la=$=>ss(Ln)($),vc=$=>De($,"items"),Xn=($,V)=>To($,ue=>vc(ue)?Xn(ue.items,V):ue.value===V?it.some(ue):it.none()),So={sanitizer:ss,sanitize:la,findEntry:($,V)=>$.bind(ue=>Xn(ue,V))},nc={makeTab:$=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},yc=$=>{const V=So.sanitizer(qc=>$.convertURL(qc.value||qc.url||"","src")),ue=new Promise(qc=>{Nr($,Pr=>{qc(V(Pr).map(il=>eo([[{text:"None",value:""}],il])))})}),Ae=So.sanitize(et($)),nn=Ic($),Nt=We($),es=Xs($),Hr=Ho($),at=Os($),Lc=fe($),Es=bo($),ki=No($),yr=ko($),xo=hs($),Gc=Wn($),sc=it.some(Tt($)).filter(qc=>yn(qc)&&qc.length>0);return ue.then(qc=>({image:at,imageList:qc,classList:Ae,hasAdvTab:nn,hasUploadTab:Nt,hasUploadUrl:es,hasUploadHandler:Hr,hasDescription:Lc,hasImageTitle:Es,hasDimensions:ki,hasImageCaption:yr,prependURL:sc,hasAccessibilityOptions:xo,automaticUploads:Gc}))},Fs=$=>{const V={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},ue=$.imageList.map(Es=>({name:"images",type:"listbox",label:"Image list",items:Es})),Ae={name:"alt",type:"input",label:"Alternative description",enabled:!($.hasAccessibilityOptions&&$.image.isDecorative)},nn={name:"title",type:"input",label:"Image title"},Nt={name:"dimensions",type:"sizeinput"},es={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},Hr=$.classList.map(Es=>({name:"classes",type:"listbox",label:"Class",items:Es})),at={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},Lc=Es=>Es?{type:"grid",columns:2}:{type:"panel"};return eo([[V],ue.toArray(),$.hasAccessibilityOptions&&$.hasDescription?[es]:[],$.hasDescription?[Ae]:[],$.hasImageTitle?[nn]:[],$.hasDimensions?[Nt]:[],[{...Lc($.classList.isSome()&&$.hasImageCaption),items:eo([Hr.toArray(),$.hasImageCaption?[at]:[]])}]])},Ba={makeTab:$=>({title:"General",name:"general",items:Fs($)}),makeItems:Fs},Bo={makeTab:$=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},ai=$=>({prevImage:So.findEntry($.imageList,$.image.src),prevAlt:$.image.alt,open:!0}),er=$=>({src:{value:$.src,meta:{}},images:$.src,alt:$.alt,title:$.title,dimensions:{width:$.width,height:$.height},classes:$.class,caption:$.caption,style:$.style,vspace:$.vspace,border:$.border,hspace:$.hspace,borderstyle:$.borderStyle,fileinput:[],isDecorative:$.isDecorative}),Dl=($,V)=>({src:$.src.value,alt:($.alt===null||$.alt.length===0)&&V?null:$.alt,title:$.title,width:$.dimensions.width,height:$.dimensions.height,class:$.classes,style:$.style,caption:$.caption,hspace:$.hspace,vspace:$.vspace,border:$.border,borderStyle:$.borderstyle,isDecorative:$.isDecorative}),$a=($,V)=>/^(?:[a-zA-Z]+:)?\/\//.test(V)?it.none():$.prependURL.bind(ue=>V.substring(0,ue.length)!==ue?it.some(ue+V):it.none()),ii=($,V)=>{const ue=V.getData();$a($,ue.src.value).each(Ae=>{V.setData({src:{value:Ae,meta:ue.src.meta}})})},oc=($,V,ue)=>{$.hasDescription&&yn(ue.alt)&&(V.alt=ue.alt),$.hasAccessibilityOptions&&(V.isDecorative=ue.isDecorative||V.isDecorative||!1),$.hasImageTitle&&yn(ue.title)&&(V.title=ue.title),$.hasDimensions&&(yn(ue.width)&&(V.dimensions.width=ue.width),yn(ue.height)&&(V.dimensions.height=ue.height)),yn(ue.class)&&So.findEntry($.classList,ue.class).each(Ae=>{V.classes=Ae.value}),$.hasImageCaption&&Yo(ue.caption)&&(V.caption=ue.caption),$.hasAdvTab&&(yn(ue.style)&&(V.style=ue.style),yn(ue.vspace)&&(V.vspace=ue.vspace),yn(ue.border)&&(V.border=ue.border),yn(ue.hspace)&&(V.hspace=ue.hspace),yn(ue.borderstyle)&&(V.borderstyle=ue.borderstyle))},ol=($,V)=>{const ue=V.getData(),Ae=ue.src.meta;if(Ae!==void 0){const nn=hn({},ue);oc($,nn,Ae),V.setData(nn)}},Fa=($,V,ue,Ae)=>{const nn=Ae.getData(),Nt=nn.src.value,es=nn.src.meta||{};!es.width&&!es.height&&V.hasDimensions&&(_s(Nt)?$.imageSize(Nt).then(Hr=>{ue.open&&Ae.setData({dimensions:Hr})}).catch(Hr=>console.error(Hr)):Ae.setData({dimensions:{width:"",height:""}}))},sl=($,V,ue)=>{const Ae=ue.getData(),nn=So.findEntry($.imageList,Ae.src.value);V.prevImage=nn,ue.setData({images:nn.map(Nt=>Nt.value).getOr("")})},zi=($,V,ue,Ae)=>{ii(V,Ae),ol(V,Ae),Fa($,V,ue,Ae),sl(V,ue,Ae)},xu=($,V,ue,Ae)=>{const nn=Ae.getData(),Nt=So.findEntry(V.imageList,nn.images);Nt.each(es=>{nn.alt===""||ue.prevImage.map(at=>at.text===nn.alt).getOr(!1)?es.value===""?Ae.setData({src:es,alt:ue.prevAlt}):Ae.setData({src:es,alt:es.text}):Ae.setData({src:es})}),ue.prevImage=Nt,zi($,V,ue,Ae)},Lr=($,V,ue,Ae)=>{const nn=Ae.getData();Ae.block("Uploading image"),A(nn.fileinput).fold(()=>{Ae.unblock()},Nt=>{const es=URL.createObjectURL(Nt),Hr=()=>{Ae.unblock(),URL.revokeObjectURL(es)},at=Lc=>{Ae.setData({src:{value:Lc,meta:{}}}),Ae.showTab("general"),zi($,V,ue,Ae),Ae.focus("src")};Ke(Nt).then(Lc=>{const Es=$.createBlobCache(Nt,es,Lc);V.automaticUploads?$.uploadImage(Es).then(ki=>{at(ki.url),Hr()}).catch(ki=>{Hr(),$.alertErr(ki,()=>{Ae.focus("fileinput")})}):($.addToBlobCache(Es),at(Es.blobUri()),Ae.unblock())})})},li=($,V,ue)=>(Ae,nn)=>{nn.name==="src"?zi($,V,ue,Ae):nn.name==="images"?xu($,V,ue,Ae):nn.name==="alt"?ue.prevAlt=Ae.getData().alt:nn.name==="fileinput"?Lr($,V,ue,Ae):nn.name==="isDecorative"&&Ae.setEnabled("alt",!Ae.getData().isDecorative)},Vi=$=>()=>{$.open=!1},rl=$=>$.hasAdvTab||$.hasUploadUrl||$.hasUploadHandler?{type:"tabpanel",tabs:eo([[Ba.makeTab($)],$.hasAdvTab?[nc.makeTab($)]:[],$.hasUploadTab&&($.hasUploadUrl||$.hasUploadHandler)?[Bo.makeTab($)]:[]])}:{type:"panel",items:Ba.makeItems($)},Rl=($,V,ue)=>Ae=>{const nn=hn(er(V.image),Ae.getData()),Nt={...nn,style:$s(ue.normalizeCss,Dl(nn,!1))};$.execCommand("mceUpdateImage",!1,Dl(Nt,V.hasAccessibilityOptions)),$.editorUpload.uploadImagesAuto(),Ae.close()},Ia=$=>V=>Ht($,V)?Oc($.documentBaseURI.toAbsolute(V)).then(ue=>({width:String(ue.width),height:String(ue.height)})):Promise.resolve({width:"",height:""}),Or=$=>(V,ue,Ae)=>{var nn;return $.editorUpload.blobCache.create({blob:V,blobUri:ue,name:(nn=V.name)===null||nn===void 0?void 0:nn.replace(/\.[^\.]+$/,""),filename:V.name,base64:Ae.split(",")[1]})},Dr=$=>V=>{$.editorUpload.blobCache.add(V)},jc=$=>(V,ue)=>{$.windowManager.alert(V,ue)},cl=$=>V=>xn($,V),al=$=>V=>$.dom.parseStyle(V),Cc=$=>(V,ue)=>$.dom.serializeStyle(V,ue),U=$=>V=>on($).upload([V],!1).then(ue=>{var Ae;return ue.length===0?Promise.reject("Failed to upload image"):ue[0].status===!1?Promise.reject((Ae=ue[0].error)===null||Ae===void 0?void 0:Ae.message):ue[0]}),se=$=>{const V={imageSize:Ia($),addToBlobCache:Dr($),createBlobCache:Or($),alertErr:jc($),normalizeCss:cl($),parseStyle:al($),serializeStyle:Cc($),uploadImage:U($)};return{open:()=>{yc($).then(Ae=>{const nn=ai(Ae);return{title:"Insert/Edit Image",size:"normal",body:rl(Ae),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:er(Ae.image),onSubmit:Rl($,Ae,V),onChange:li(V,Ae,nn),onClose:Vi(nn)}}).then($.windowManager.open)}}},ye=$=>{$.addCommand("mceImage",se($).open),$.addCommand("mceUpdateImage",(V,ue)=>{$.undoManager.transact(()=>pt($,ue))})},Ge=$=>{const V=$.attr("class");return io(V)&&/\bimage\b/.test(V)},Et=$=>V=>{let ue=V.length;const Ae=nn=>{nn.attr("contenteditable",$?"true":null)};for(;ue--;){const nn=V[ue];Ge(nn)&&(nn.attr("contenteditable",$?"false":null),Rn.each(nn.getAll("figcaption"),Ae))}},Xe=$=>{$.on("PreInit",()=>{$.parser.addNodeFilter("figure",Et(!0)),$.serializer.addNodeFilter("figure",Et(!1))})},cn=$=>V=>{const ue=()=>{V.setEnabled($.selection.isEditable())};return $.on("NodeChange",ue),ue(),()=>{$.off("NodeChange",ue)}},ho=$=>{$.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:se($).open,onSetup:V=>{V.setActive(io(Fn($)));const ue=$.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",V.setActive).unbind,Ae=cn($)(V);return()=>{ue(),Ae()}}}),$.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:se($).open,onSetup:cn($)}),$.ui.registry.addContextMenu("image",{update:V=>$.selection.isEditable()&&(qr(V)||Ca(V)&&!Gt(V))?["image"]:[]})};var Gn=()=>{an.add("image",$=>{wo($),Xe($),ho($),ye($)})};Gn()}()),wK}var xK;function iX(){return xK||(xK=1,aX()),CK}iX();var EK={},TK={},kK;function lX(){return kK||(kK=1,function(){var an=tinymce.util.Tools.resolve("tinymce.PluginManager");const Co=mt=>Z=>Z.options.get(mt),Un=mt=>{const Z=mt.options.register;Z("insertdatetime_dateformat",{processor:"string",default:mt.translate("%Y-%m-%d")}),Z("insertdatetime_timeformat",{processor:"string",default:mt.translate("%H:%M:%S")}),Z("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),Z("insertdatetime_element",{processor:"boolean",default:!1})},mo=Co("insertdatetime_dateformat"),oo=Co("insertdatetime_timeformat"),In=Co("insertdatetime_formats"),fn=Co("insertdatetime_element"),je=mt=>{const Z=In(mt);return Z.length>0?Z[0]:oo(mt)},yn="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),Ro="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Ko="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),jo="January February March April May June July August September October November December".split(" "),Wo=(mt,Z)=>{if(mt=""+mt,mt.length<Z)for(let Mt=0;Mt<Z-mt.length;Mt++)mt="0"+mt;return mt},Yo=(mt,Z,Mt=new Date)=>(Z=Z.replace("%D","%m/%d/%Y"),Z=Z.replace("%r","%I:%M:%S %p"),Z=Z.replace("%Y",""+Mt.getFullYear()),Z=Z.replace("%y",""+Mt.getYear()),Z=Z.replace("%m",Wo(Mt.getMonth()+1,2)),Z=Z.replace("%d",Wo(Mt.getDate(),2)),Z=Z.replace("%H",""+Wo(Mt.getHours(),2)),Z=Z.replace("%M",""+Wo(Mt.getMinutes(),2)),Z=Z.replace("%S",""+Wo(Mt.getSeconds(),2)),Z=Z.replace("%I",""+((Mt.getHours()+11)%12+1)),Z=Z.replace("%p",Mt.getHours()<12?"AM":"PM"),Z=Z.replace("%B",""+mt.translate(jo[Mt.getMonth()])),Z=Z.replace("%b",""+mt.translate(Ko[Mt.getMonth()])),Z=Z.replace("%A",""+mt.translate(Ro[Mt.getDay()])),Z=Z.replace("%a",""+mt.translate(yn[Mt.getDay()])),Z=Z.replace("%%","%"),Z),Ps=(mt,Z,Mt,ln)=>{const On=mt.dom.create("time",{datetime:Mt},ln);mt.dom.replace(On,Z),mt.selection.select(On,!0),mt.selection.collapse(!1)},io=(mt,Z)=>{if(fn(mt)&&mt.selection.isEditable()){const Mt=Yo(mt,Z);let ln;/%[HMSIp]/.test(Z)?ln=Yo(mt,"%Y-%m-%dT%H:%M"):ln=Yo(mt,"%Y-%m-%d");const On=mt.dom.getParent(mt.selection.getStart(),"time");On?Ps(mt,On,ln,Mt):mt.insertContent('<time datetime="'+ln+'">'+Mt+"</time>")}else mt.insertContent(Yo(mt,Z))},Rt=mt=>{mt.addCommand("mceInsertDate",(Z,Mt)=>{io(mt,Mt??mo(mt))}),mt.addCommand("mceInsertTime",(Z,Mt)=>{io(mt,Mt??oo(mt))})},jn=mt=>{let Z=mt;return{get:()=>Z,set:On=>{Z=On}}};var Ze=tinymce.util.Tools.resolve("tinymce.util.Tools");const oe=mt=>Z=>{const Mt=()=>{Z.setEnabled(mt.selection.isEditable())};return mt.on("NodeChange",Mt),Mt(),()=>{mt.off("NodeChange",Mt)}},it=mt=>{const Z=In(mt),Mt=jn(je(mt)),ln=De=>mt.execCommand("mceInsertDate",!1,De);mt.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:De=>De===Mt.get(),fetch:De=>{De(Ze.map(Z,ie=>({type:"choiceitem",text:Yo(mt,ie),value:ie})))},onAction:De=>{ln(Mt.get())},onItemAction:(De,ie)=>{Mt.set(ie),ln(ie)},onSetup:oe(mt)});const On=De=>()=>{Mt.set(De),ln(De)};mt.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>Ze.map(Z,De=>({type:"menuitem",text:Yo(mt,De),onAction:On(De)})),onSetup:oe(mt)})};var Zo=()=>{an.add("insertdatetime",mt=>{Un(mt),Rt(mt),it(mt)})};Zo()}()),TK}var _K;function uX(){return _K||(_K=1,lX()),EK}uX();var AK={},OK={},DK;function dX(){return DK||(DK=1,function(){var an=tinymce.util.Tools.resolve("tinymce.PluginManager");const Co=(U,se,ye)=>{var Ge;return ye(U,se.prototype)?!0:((Ge=U.constructor)===null||Ge===void 0?void 0:Ge.name)===se.name},Un=U=>{const se=typeof U;return U===null?"null":se==="object"&&Array.isArray(U)?"array":se==="object"&&Co(U,String,(ye,Ge)=>Ge.isPrototypeOf(ye))?"string":se},mo=U=>se=>Un(se)===U,oo=U=>se=>typeof se===U,In=U=>se=>U===se,fn=mo("string"),je=mo("object"),yn=mo("array"),Ro=In(null),Ko=oo("boolean"),jo=U=>U==null,Wo=U=>!jo(U),Yo=oo("function"),Ps=(U,se)=>{if(yn(U)){for(let ye=0,Ge=U.length;ye<Ge;++ye)if(!se(U[ye]))return!1;return!0}return!1},io=()=>{},Rt=U=>()=>U,jn=(U,se)=>U===se;class Ze{constructor(se,ye){this.tag=se,this.value=ye}static some(se){return new Ze(!0,se)}static none(){return Ze.singletonNone}fold(se,ye){return this.tag?ye(this.value):se()}isSome(){return this.tag}isNone(){return!this.tag}map(se){return this.tag?Ze.some(se(this.value)):Ze.none()}bind(se){return this.tag?se(this.value):Ze.none()}exists(se){return this.tag&&se(this.value)}forall(se){return!this.tag||se(this.value)}filter(se){return!this.tag||se(this.value)?this:Ze.none()}getOr(se){return this.tag?this.value:se}or(se){return this.tag?this:se}getOrThunk(se){return this.tag?this.value:se()}orThunk(se){return this.tag?this:se()}getOrDie(se){if(this.tag)return this.value;throw new Error(se??"Called getOrDie on None")}static from(se){return Wo(se)?Ze.some(se):Ze.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(se){this.tag&&se(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ze.singletonNone=new Ze(!1);const oe=Array.prototype.indexOf,it=Array.prototype.push,Zo=(U,se)=>oe.call(U,se),mt=(U,se)=>Zo(U,se)>-1,Z=(U,se)=>{const ye=U.length,Ge=new Array(ye);for(let Et=0;Et<ye;Et++){const Xe=U[Et];Ge[Et]=se(Xe,Et)}return Ge},Mt=(U,se)=>{for(let ye=0,Ge=U.length;ye<Ge;ye++){const Et=U[ye];se(Et,ye)}},ln=(U,se,ye)=>(Mt(U,(Ge,Et)=>{ye=se(ye,Ge,Et)}),ye),On=U=>{const se=[];for(let ye=0,Ge=U.length;ye<Ge;++ye){if(!yn(U[ye]))throw new Error("Arr.flatten item "+ye+" was not an array, input: "+U);it.apply(se,U[ye])}return se},De=(U,se)=>On(Z(U,se)),ie=(U,se)=>{for(let ye=0;ye<U.length;ye++){const Ge=se(U[ye],ye);if(Ge.isSome())return Ge}return Ze.none()},Go=(U,se,ye=jn)=>U.exists(Ge=>ye(Ge,se)),eo=U=>{const se=[],ye=Ge=>{se.push(Ge)};for(let Ge=0;Ge<U.length;Ge++)U[Ge].each(ye);return se},Bt=(U,se)=>U?Ze.some(se):Ze.none(),A=U=>se=>se.options.get(U),To=U=>{const se=U.options.register;se("link_assume_external_targets",{processor:ye=>{const Ge=fn(ye)||Ko(ye);return Ge?ye===!0?{value:1,valid:Ge}:ye==="http"||ye==="https"?{value:ye,valid:Ge}:{value:0,valid:Ge}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),se("link_context_toolbar",{processor:"boolean",default:!1}),se("link_list",{processor:ye=>fn(ye)||Yo(ye)||Ps(ye,je)}),se("link_default_target",{processor:"string"}),se("link_default_protocol",{processor:"string",default:"https"}),se("link_target_list",{processor:ye=>Ko(ye)||Ps(ye,je),default:!0}),se("link_rel_list",{processor:"object[]",default:[]}),se("link_class_list",{processor:"object[]",default:[]}),se("link_title",{processor:"boolean",default:!0}),se("allow_unsafe_link_target",{processor:"boolean",default:!1}),se("link_quicklink",{processor:"boolean",default:!1}),se("link_attributes_postprocess",{processor:"function"})},yt=A("link_assume_external_targets"),Mo=A("link_context_toolbar"),dn=A("link_list"),Qe=A("link_default_target"),fo=A("link_default_protocol"),Bs=A("link_target_list"),St=A("link_rel_list"),Tn=A("link_class_list"),Re=A("link_title"),ot=A("allow_unsafe_link_target"),F=A("link_quicklink"),_s=A("link_attributes_postprocess"),to=Object.keys,wo=Object.hasOwnProperty,No=(U,se)=>{const ye=to(U);for(let Ge=0,Et=ye.length;Ge<Et;Ge++){const Xe=ye[Ge],cn=U[Xe];se(cn,Xe)}},Ic=U=>(se,ye)=>{U[ye]=se},We=(U,se,ye,Ge)=>{No(U,(Et,Xe)=>{(se(Et,Xe)?ye:Ge)(Et,Xe)})},Tt=(U,se)=>{const ye={};return We(U,se,Ic(ye),io),ye},et=(U,se)=>wo.call(U,se),fe=(U,se)=>et(U,se)&&U[se]!==void 0&&U[se]!==null;var bo=tinymce.util.Tools.resolve("tinymce.util.URI"),ko=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),jt=tinymce.util.Tools.resolve("tinymce.util.Tools");const hs=U=>Wo(U)&&U.nodeName.toLowerCase()==="a",Wn=U=>hs(U)&&!!As(U),Xs=(U,se)=>{if(U.collapsed)return[];{const ye=U.cloneContents(),Ge=ye.firstChild,Et=new ko(Ge,ye),Xe=[];let cn=Ge;do se(cn)&&Xe.push(cn);while(cn=Et.next());return Xe}},Ho=U=>/^\w+:/i.test(U),As=U=>{var se,ye;return(ye=(se=U.getAttribute("data-mce-href"))!==null&&se!==void 0?se:U.getAttribute("href"))!==null&&ye!==void 0?ye:""},Oc=(U,se)=>{const ye=["noopener"],Ge=U?U.split(/\s+/):[],Et=Gn=>jt.trim(Gn.sort().join(" ")),Xe=Gn=>(Gn=cn(Gn),Gn.length>0?Gn.concat(ye):ye),cn=Gn=>Gn.filter($=>jt.inArray(ye,$)===-1),ho=se?Xe(Ge):cn(Ge);return ho.length>0?Et(ho):""},Js=U=>U.replace(/\uFEFF/g,""),ps=(U,se)=>(se=se||xs(U.selection.getRng())[0]||U.selection.getNode(),lo(se)?Ze.from(U.dom.select("a[href]",se)[0]):Ze.from(U.dom.getParent(se,"a[href]"))),os=(U,se)=>ps(U,se).isSome(),Nr=(U,se)=>{const ye=se.fold(()=>U.getContent({format:"text"}),Ge=>Ge.innerText||Ge.textContent||"");return Js(ye)},xs=U=>Xs(U,Wn),Ke=U=>jt.grep(U,Wn),Gt=U=>Ke(U).length>0,Ht=U=>xs(U).length>0,Jt=U=>{const se=U.schema.getTextInlineElements(),ye=Xe=>Xe.nodeType===1&&!hs(Xe)&&!et(se,Xe.nodeName.toLowerCase());if(ps(U).exists(Xe=>Xe.hasAttribute("data-mce-block")))return!1;const Et=U.selection.getRng();return Et.collapsed?!0:Xs(Et,ye).length===0},lo=U=>Wo(U)&&U.nodeName==="FIGURE"&&/\bimage\b/i.test(U.className),bs=U=>ln(["title","rel","class","target"],(ye,Ge)=>(U[Ge].each(Et=>{ye[Ge]=Et.length>0?Et:null}),ye),{href:U.href}),ur=(U,se)=>(se==="http"||se==="https")&&!Ho(U)?se+"://"+U:U,Yn=(U,se)=>{const ye={...se};if(St(U).length===0&&!ot(U)){const Ge=Oc(ye.rel,ye.target==="_blank");ye.rel=Ge||null}return Ze.from(ye.target).isNone()&&Bs(U)===!1&&(ye.target=Qe(U)),ye.href=ur(ye.href,yt(U)),ye},Er=(U,se,ye,Ge)=>{ye.each(Xe=>{et(se,"innerText")?se.innerText=Xe:se.textContent=Xe}),U.dom.setAttribs(se,Ge);const Et=U.dom.createRng();Et.setStartAfter(se),Et.setEndAfter(se),U.selection.setRng(Et)},Ct=(U,se,ye,Ge)=>{const Et=U.dom;lo(se)?is(Et,se,Ge):ye.fold(()=>{U.execCommand("mceInsertLink",!1,Ge);const Xe=U.selection.getEnd(),cn=Et.createRng();cn.setStartAfter(Xe),cn.setEndAfter(Xe),U.selection.setRng(cn)},Xe=>{U.insertContent(Et.createHTML("a",Ge,Et.encode(Xe)))})},uo=(U,se,ye)=>{const Ge=U.selection.getNode(),Et=ps(U,Ge),Xe=Yn(U,bs(ye)),cn=_s(U);Wo(cn)&&cn(Xe),U.undoManager.transact(()=>{ye.href===se.href&&se.attach(),Et.fold(()=>{Ct(U,Ge,ye.text,Xe)},ho=>{U.focus(),Er(U,ho,ye.text,Xe)})})},dr=U=>{const se=U.dom,ye=U.selection,Ge=ye.getBookmark(),Et=ye.getRng().cloneRange(),Xe=se.getParent(Et.startContainer,"a[href]",U.getBody()),cn=se.getParent(Et.endContainer,"a[href]",U.getBody());Xe&&Et.setStartBefore(Xe),cn&&Et.setEndAfter(cn),ye.setRng(Et),U.execCommand("unlink"),ye.moveToBookmark(Ge)},vr=U=>{U.undoManager.transact(()=>{const se=U.selection.getNode();lo(se)?mc(U,se):dr(U),U.focus()})},dc=U=>{const{class:se,href:ye,rel:Ge,target:Et,text:Xe,title:cn}=U;return Tt({class:se.getOrNull(),href:ye,rel:Ge.getOrNull(),target:Et.getOrNull(),text:Xe.getOrNull(),title:cn.getOrNull()},(ho,Gn)=>Ro(ho)===!1)},Dc=(U,se)=>{const ye=U.options.get,Ge={allow_html_data_urls:ye("allow_html_data_urls"),allow_script_urls:ye("allow_script_urls"),allow_svg_data_urls:ye("allow_svg_data_urls")},Et=se.href;return{...se,href:bo.isDomSafe(Et,"a",Ge)?Et:""}},us=(U,se,ye)=>{const Ge=Dc(U,ye);U.hasPlugin("rtc",!0)?U.execCommand("createlink",!1,dc(Ge)):uo(U,se,Ge)},Qr=U=>{U.hasPlugin("rtc",!0)?U.execCommand("unlink"):vr(U)},mc=(U,se)=>{var ye;const Ge=U.dom.select("img",se)[0];if(Ge){const Et=U.dom.getParents(Ge,"a[href]",se)[0];Et&&((ye=Et.parentNode)===null||ye===void 0||ye.insertBefore(Ge,Et),U.dom.remove(Et))}},is=(U,se,ye)=>{var Ge;const Et=U.select("img",se)[0];if(Et){const Xe=U.create("a",ye);(Ge=Et.parentNode)===null||Ge===void 0||Ge.insertBefore(Xe,Et),Xe.appendChild(Et)}},Cn=U=>fn(U.value)?U.value:"",Ls=U=>fn(U.text)?U.text:fn(U.title)?U.title:"",qr=(U,se)=>{const ye=[];return jt.each(U,Ge=>{const Et=Ls(Ge);if(Ge.menu!==void 0){const Xe=qr(Ge.menu,se);ye.push({text:Et,items:Xe})}else{const Xe=se(Ge);ye.push({text:Et,value:Xe})}}),ye},Ca=(U=Cn)=>se=>Ze.from(se).map(ye=>qr(ye,U)),vs={sanitize:U=>Ca(Cn)(U),sanitizeWith:Ca,createUi:(U,se)=>ye=>({name:U,type:"listbox",label:se,items:ye}),getValue:Cn},$s=U=>fe(U,"items"),ec=(U,se)=>ie(se,ye=>$s(ye)?ec(U,ye.items):Bt(ye.value===U,ye)),Rc=(U,se,ye,Ge)=>{const Et=Ge[se],Xe=U.length>0;return Et!==void 0?ec(Et,ye).map(cn=>({url:{value:cn.value,meta:{text:Xe?U:cn.text,attach:io}},text:Xe?U:cn.text})):Ze.none()},Qs=(U,se)=>se==="link"?U.link:se==="anchor"?U.anchor:Ze.none(),re={init:(U,se)=>{const ye={text:U.text,title:U.title},Ge=Gn=>{var $;return Bt(ye.title.length<=0,Ze.from(($=Gn.meta)===null||$===void 0?void 0:$.title).getOr(""))},Et=Gn=>{var $;return Bt(ye.text.length<=0,Ze.from(($=Gn.meta)===null||$===void 0?void 0:$.text).getOr(Gn.value))},Xe=Gn=>{const $=Et(Gn.url),V=Ge(Gn.url);return $.isSome()||V.isSome()?Ze.some({...$.map(ue=>({text:ue})).getOr({}),...V.map(ue=>({title:ue})).getOr({})}):Ze.none()},cn=(Gn,$)=>{const V=Qs(se,$).getOr([]);return Rc(ye.text,$,V,Gn)};return{onChange:(Gn,$)=>{const V=$.name;return V==="url"?Xe(Gn()):mt(["anchor","link"],V)?cn(Gn(),V):((V==="text"||V==="title")&&(ye[V]=Gn()[V]),Ze.none())}}},getDelta:Rc};var Ne=tinymce.util.Tools.resolve("tinymce.util.Delay");const Ve=(U,se,ye)=>{const Ge=U.selection.getRng();Ne.setEditorTimeout(U,()=>{U.windowManager.confirm(se,Et=>{U.selection.setRng(Ge),ye(Et)})})},xn=U=>{const se=U.href;return se.indexOf("@")>0&&se.indexOf("/")===-1&&se.indexOf("mailto:")===-1?Ze.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Ge=>({...Ge,href:"mailto:"+se})}):Ze.none()},Fn=(U,se)=>ye=>{const Ge=ye.href;return U===1&&!Ho(Ge)||U===0&&/^\s*www(\.|\d\.)/i.test(Ge)?Ze.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${se}:// prefix?`,preprocess:Xe=>({...Xe,href:se+"://"+Ge})}):Ze.none()},Os={preprocess:(U,se)=>ie([xn,Fn(yt(U),fo(U))],ye=>ye(se)).fold(()=>Promise.resolve(se),ye=>new Promise(Ge=>{Ve(U,ye.message,Et=>{Ge(Et?ye.preprocess(se):se)})}))},ze={getAnchors:U=>{const se=U.dom.select("a:not([href])"),ye=De(se,Ge=>{const Et=Ge.name||Ge.id;return Et?[{text:Et,value:"#"+Et}]:[]});return ye.length>0?Ze.some([{text:"None",value:""}].concat(ye)):Ze.none()}},he={getClasses:U=>{const se=Tn(U);return se.length>0?vs.sanitize(se):Ze.none()}},ct=U=>{try{return Ze.some(JSON.parse(U))}catch{return Ze.none()}},zt={getLinks:U=>{const se=Ge=>U.convertURL(Ge.value||Ge.url||"","href"),ye=dn(U);return new Promise(Ge=>{fn(ye)?fetch(ye).then(Et=>Et.ok?Et.text().then(ct):Promise.reject()).then(Ge,()=>Ge(Ze.none())):Yo(ye)?ye(Et=>Ge(Ze.some(Et))):Ge(Ze.from(ye))}).then(Ge=>Ge.bind(vs.sanitizeWith(se)).map(Et=>Et.length>0?[{text:"None",value:""}].concat(Et):Et))}},hn={getRels:(U,se)=>{const ye=St(U);if(ye.length>0){const Ge=Go(se,"_blank"),Et=ot(U)===!1,Xe=ho=>Oc(vs.getValue(ho),Ge);return(Et?vs.sanitizeWith(Xe):vs.sanitize)(ye)}return Ze.none()}},on=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Ln={getTargets:U=>{const se=Bs(U);return yn(se)?vs.sanitize(se).orThunk(()=>Ze.some(on)):se===!1?Ze.none():Ze.some(on)}},Po=(U,se,ye)=>{const Ge=U.getAttrib(se,ye);return Ge!==null&&Ge.length>0?Ze.some(Ge):Ze.none()},Hs=(U,se)=>{const ye=U.dom,Et=Jt(U)?Ze.some(Nr(U.selection,se)):Ze.none(),Xe=se.bind(V=>Ze.from(ye.getAttrib(V,"href"))),cn=se.bind(V=>Ze.from(ye.getAttrib(V,"target"))),ho=se.bind(V=>Po(ye,V,"rel")),Gn=se.bind(V=>Po(ye,V,"class")),$=se.bind(V=>Po(ye,V,"title"));return{url:Xe,text:Et,title:$,target:cn,rel:ho,linkClass:Gn}},la={collect:(U,se)=>zt.getLinks(U).then(ye=>{const Ge=Hs(U,se);return{anchor:Ge,catalogs:{targets:Ln.getTargets(U),rels:hn.getRels(U,Ge.target),classes:he.getClasses(U),anchor:ze.getAnchors(U),link:ye},optNode:se,flags:{titleEnabled:Re(U)}}})},vc=(U,se)=>ye=>{const Ge=ye.getData();if(!Ge.url.value){Qr(U),ye.close();return}const Et=ho=>Ze.from(Ge[ho]).filter(Gn=>!Go(se.anchor[ho],Gn)),Xe={href:Ge.url.value,text:Et("text"),target:Et("target"),rel:Et("rel"),class:Et("linkClass"),title:Et("title")},cn={href:Ge.url.value,attach:Ge.url.meta!==void 0&&Ge.url.meta.attach?Ge.url.meta.attach:io};Os.preprocess(U,Xe).then(ho=>{us(U,cn,ho)}),ye.close()},Xn=U=>{const se=ps(U);return la.collect(U,se)},vo=(U,se)=>{const ye=U.anchor,Ge=ye.url.getOr("");return{url:{value:Ge,meta:{original:{value:Ge}}},text:ye.text.getOr(""),title:ye.title.getOr(""),anchor:Ge,link:Ge,rel:ye.rel.getOr(""),target:ye.target.or(se).getOr(""),linkClass:ye.linkClass.getOr("")}},So=(U,se,ye)=>{const Ge=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],Et=U.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),Xe=U.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],cn=Ze.from(Qe(ye)),ho=vo(U,cn),Gn=U.catalogs,$=re.init(ho,Gn);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:On([Ge,Et,Xe,eo([Gn.anchor.map(vs.createUi("anchor","Anchors")),Gn.rels.map(vs.createUi("rel","Rel")),Gn.targets.map(vs.createUi("target","Open link in...")),Gn.link.map(vs.createUi("link","Link list")),Gn.classes.map(vs.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ho,onChange:(ue,{name:Ae})=>{$.onChange(ue.getData,{name:Ae}).each(nn=>{ue.setData(nn)})},onSubmit:se}},tc=U=>{Xn(U).then(ye=>{const Ge=vc(U,ye);return So(ye,Ge,U)}).then(ye=>{U.windowManager.open(ye)})},nc=U=>{U.addCommand("mceLink",(se,ye)=>{(ye==null?void 0:ye.dialog)===!0||!F(U)?tc(U):U.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},yc=U=>{U.addShortcut("Meta+K","",()=>{U.execCommand("mceLink")})},Fs=U=>{let se=U;return{get:()=>se,set:Et=>{se=Et}}},Su=U=>{const se=Fs(Ze.none()),ye=()=>se.get().each(U);return{clear:()=>{ye(),se.set(Ze.none())},isSet:()=>se.get().isSome(),get:()=>se.get(),set:ho=>{ye(),se.set(Ze.some(ho))}}},Ba=()=>{const U=Su(io);return{...U,on:ye=>U.get().each(ye)}},Ol=(U,se)=>U.substring(se),Bo=(U,se,ye)=>se===""||U.length>=se.length&&U.substr(ye,ye+se.length)===se,ai=(U,se)=>er(U,se)?Ol(U,se.length):U,er=(U,se)=>Bo(U,se,0);var Dl=tinymce.util.Tools.resolve("tinymce.util.VK");const $a=(U,se)=>{document.body.appendChild(U),U.dispatchEvent(se),document.body.removeChild(U)},ii=U=>{const se=document.createElement("a");se.target="_blank",se.href=U,se.rel="noreferrer noopener";const ye=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(ye),$a(se,ye)},oc=U=>U.altKey===!0&&U.shiftKey===!1&&U.ctrlKey===!1&&U.metaKey===!1,ol=(U,se)=>{if(se){const ye=As(se);if(/^#/.test(ye)){const Ge=U.dom.select(`${ye},[name="${ai(ye,"#")}"]`);Ge.length&&U.selection.scrollIntoView(Ge[0],!0)}else ii(se.href)}},Fa=U=>{const se=U.selection.getRng(),ye=se.startContainer;return Wn(ye)&&se.startContainer===se.endContainer&&U.dom.select("img",ye).length===1},sl=(U,se)=>{const ye=Ke(U.dom.getParents(se));return Bt(ye.length===1,ye[0])},zi=U=>{const se=xs(U.selection.getRng());return Bt(se.length>0,se[0]).or(sl(U,U.selection.getNode()))},xu=U=>U.selection.isCollapsed()||Fa(U)?sl(U,U.selection.getStart()):zi(U),Lr=U=>{const se=Ba(),ye=()=>se.get().or(xu(U)),Ge=()=>ye().each(Et=>ol(U,Et));return U.on("contextmenu",Et=>{sl(U,Et.target).each(se.set)}),U.on("SelectionChange",()=>{se.isSet()||xu(U).each(se.set)}),U.on("click",Et=>{se.clear();const Xe=Ke(U.dom.getParents(Et.target));Xe.length===1&&Dl.metaKeyPressed(Et)&&(Et.preventDefault(),ol(U,Xe[0]))}),U.on("keydown",Et=>{se.clear(),!Et.isDefaultPrevented()&&Et.keyCode===13&&oc(Et)&&ye().each(Xe=>{Et.preventDefault(),ol(U,Xe)})}),{gotoSelectedLink:Ge}},li=U=>()=>{U.execCommand("mceLink",!1,{dialog:!0})},Vi=(U,se)=>(U.on("NodeChange",se),()=>U.off("NodeChange",se)),rl=U=>se=>{const ye=()=>{se.setActive(!U.mode.isReadOnly()&&os(U,U.selection.getNode())),se.setEnabled(U.selection.isEditable())};return ye(),Vi(U,ye)},Rl=U=>se=>{const ye=()=>{se.setEnabled(U.selection.isEditable())};return ye(),Vi(U,ye)},Ia=U=>se=>{const ye=Xe=>Gt(Xe)||Ht(U.selection.getRng()),Ge=U.dom.getParents(U.selection.getStart()),Et=Xe=>{se.setEnabled(ye(Xe)&&U.selection.isEditable())};return Et(Ge),Vi(U,Xe=>Et(Xe.parents))},Or=(U,se)=>{U.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:li(U),onSetup:rl(U)}),U.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:se.gotoSelectedLink,onSetup:Ia(U)}),U.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Qr(U),onSetup:Ia(U)})},Dr=(U,se)=>{U.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:se.gotoSelectedLink,onSetup:Ia(U)}),U.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:li(U),onSetup:Rl(U)}),U.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Qr(U),onSetup:Ia(U)})},jc=U=>{const se="link unlink openlink",ye="link";U.ui.registry.addContextMenu("link",{update:Ge=>U.dom.isEditable(Ge)?Gt(U.dom.getParents(Ge,"a"))?se:ye:""})},cl=(U,se)=>{const ye=Xe=>{Xe.selection.collapse(!1)},Ge=Xe=>{const cn=U.selection.getNode();return Xe.setEnabled(os(U,cn)&&U.selection.isEditable()),io},Et=Xe=>{const cn=ps(U),ho=Jt(U);if(cn.isNone()&&ho){const Gn=Nr(U.selection,cn);return Bt(Gn.length===0,Xe)}else return Ze.none()};U.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:rl(U)},label:"Link",predicate:Xe=>Mo(U)&&os(U,Xe),initValue:()=>ps(U).fold(Rt(""),As),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:Xe=>{const cn=U.selection.getNode();return Xe.setActive(os(U,cn)),rl(U)(Xe)},onAction:Xe=>{const cn=Xe.getValue(),ho=Et(cn);us(U,{href:cn,attach:io},{href:cn,text:ho,title:Ze.none(),rel:Ze.none(),target:Ze.from(Qe(U)),class:Ze.none()}),ye(U),Xe.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Ge,onAction:Xe=>{Qr(U),Xe.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Ge,onAction:Xe=>{se.gotoSelectedLink(),Xe.hide()}}]})},al=U=>{const se=Lr(U);Or(U,se),Dr(U,se),jc(U),cl(U,se)};var Cc=()=>{an.add("link",U=>{To(U),nc(U),al(U),yc(U)})};Cc()}()),OK}var RK;function mX(){return RK||(RK=1,dX()),AK}mX();var MK={},NK={},PK;function fX(){return PK||(PK=1,function(){var an=tinymce.util.Tools.resolve("tinymce.PluginManager");const Co=(E,M,z)=>{var ae;return z(E,M.prototype)?!0:((ae=E.constructor)===null||ae===void 0?void 0:ae.name)===M.name},Un=E=>{const M=typeof E;return E===null?"null":M==="object"&&Array.isArray(E)?"array":M==="object"&&Co(E,String,(z,ae)=>ae.isPrototypeOf(z))?"string":M},mo=E=>M=>Un(M)===E,oo=E=>M=>typeof M===E,In=mo("string"),fn=mo("object"),je=mo("array"),yn=oo("boolean"),Ro=E=>E==null,Ko=E=>!Ro(E),jo=oo("function"),Wo=oo("number"),Yo=()=>{},Ps=(E,M)=>z=>E(M(z)),io=E=>()=>E,Rt=(E,M)=>E===M;function jn(E,...M){return(...z)=>{const ae=M.concat(z);return E.apply(null,ae)}}const Ze=E=>M=>!E(M),oe=io(!1);class it{constructor(M,z){this.tag=M,this.value=z}static some(M){return new it(!0,M)}static none(){return it.singletonNone}fold(M,z){return this.tag?z(this.value):M()}isSome(){return this.tag}isNone(){return!this.tag}map(M){return this.tag?it.some(M(this.value)):it.none()}bind(M){return this.tag?M(this.value):it.none()}exists(M){return this.tag&&M(this.value)}forall(M){return!this.tag||M(this.value)}filter(M){return!this.tag||M(this.value)?this:it.none()}getOr(M){return this.tag?this.value:M}or(M){return this.tag?this:M}getOrThunk(M){return this.tag?this.value:M()}orThunk(M){return this.tag?this:M()}getOrDie(M){if(this.tag)return this.value;throw new Error(M??"Called getOrDie on None")}static from(M){return Ko(M)?it.some(M):it.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(M){this.tag&&M(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}it.singletonNone=new it(!1);const Zo=Array.prototype.slice,mt=Array.prototype.indexOf,Z=Array.prototype.push,Mt=(E,M)=>mt.call(E,M),ln=(E,M)=>Mt(E,M)>-1,On=(E,M)=>{for(let z=0,ae=E.length;z<ae;z++){const be=E[z];if(M(be,z))return!0}return!1},De=(E,M)=>{const z=E.length,ae=new Array(z);for(let be=0;be<z;be++){const gt=E[be];ae[be]=M(gt,be)}return ae},ie=(E,M)=>{for(let z=0,ae=E.length;z<ae;z++){const be=E[z];M(be,z)}},Go=(E,M)=>{const z=[];for(let ae=0,be=E.length;ae<be;ae++){const gt=E[ae];M(gt,ae)&&z.push(gt)}return z},eo=(E,M)=>{if(E.length===0)return[];{let z=M(E[0]);const ae=[];let be=[];for(let gt=0,Bn=E.length;gt<Bn;gt++){const go=E[gt],ao=M(go);ao!==z&&(ae.push(be),be=[]),z=ao,be.push(go)}return be.length!==0&&ae.push(be),ae}},Bt=(E,M,z)=>(ie(E,(ae,be)=>{z=M(z,ae,be)}),z),A=(E,M,z)=>{for(let ae=0,be=E.length;ae<be;ae++){const gt=E[ae];if(M(gt,ae))return it.some(gt);if(z(gt,ae))break}return it.none()},To=(E,M)=>A(E,M,oe),yt=E=>{const M=[];for(let z=0,ae=E.length;z<ae;++z){if(!je(E[z]))throw new Error("Arr.flatten item "+z+" was not an array, input: "+E);Z.apply(M,E[z])}return M},Mo=(E,M)=>yt(De(E,M)),dn=E=>{const M=Zo.call(E,0);return M.reverse(),M},Qe=(E,M)=>M>=0&&M<E.length?it.some(E[M]):it.none(),fo=E=>Qe(E,0),Bs=E=>Qe(E,E.length-1),St=(E,M)=>{const z=[],ae=jo(M)?be=>On(z,gt=>M(gt,be)):be=>ln(z,be);for(let be=0,gt=E.length;be<gt;be++){const Bn=E[be];ae(Bn)||z.push(Bn)}return z},Tn=(E,M,z=Rt)=>E.exists(ae=>z(ae,M)),Re=(E,M,z=Rt)=>ot(E,M,z).getOr(E.isNone()&&M.isNone()),ot=(E,M,z)=>E.isSome()&&M.isSome()?it.some(z(E.getOrDie(),M.getOrDie())):it.none(),F=8,_s=11,to=1,wo=3,No=(E,M)=>{const ae=(M||document).createElement("div");if(ae.innerHTML=E,!ae.hasChildNodes()||ae.childNodes.length>1){const be="HTML does not have a single root node";throw console.error(be,E),new Error(be)}return Tt(ae.childNodes[0])},Ic=(E,M)=>{const ae=(M||document).createElement(E);return Tt(ae)},We=(E,M)=>{const ae=(M||document).createTextNode(E);return Tt(ae)},Tt=E=>{if(E==null)throw new Error("Node cannot be null or undefined");return{dom:E}},fe={fromHtml:No,fromTag:Ic,fromText:We,fromDom:Tt,fromPoint:(E,M,z)=>it.from(E.dom.elementFromPoint(M,z)).map(Tt)},bo=(E,M)=>{const z=E.dom;if(z.nodeType!==to)return!1;{const ae=z;if(ae.matches!==void 0)return ae.matches(M);if(ae.msMatchesSelector!==void 0)return ae.msMatchesSelector(M);if(ae.webkitMatchesSelector!==void 0)return ae.webkitMatchesSelector(M);if(ae.mozMatchesSelector!==void 0)return ae.mozMatchesSelector(M);throw new Error("Browser lacks native selectors")}},ko=(E,M)=>E.dom===M.dom,jt=(E,M)=>{const z=E.dom,ae=M.dom;return z===ae?!1:z.contains(ae)},hs=bo,Wn=typeof window<"u"?window:Function("return this;")(),Xs=(E,M)=>{let z=M??Wn;for(let ae=0;ae<E.length&&z!==void 0&&z!==null;++ae)z=z[E[ae]];return z},Ho=(E,M)=>{const z=E.split(".");return Xs(z,M)},As=(E,M)=>Ho(E,M),Oc=(E,M)=>{const z=As(E,M);if(z==null)throw new Error(E+" not available on this browser");return z},Js=Object.getPrototypeOf,ps=E=>Oc("HTMLElement",E),os=E=>{const M=Ho("ownerDocument.defaultView",E);return fn(E)&&(ps(M).prototype.isPrototypeOf(E)||/^HTML\w*Element$/.test(Js(E).constructor.name))},Nr=E=>E.dom.nodeName.toLowerCase(),xs=E=>E.dom.nodeType,Ke=E=>M=>xs(M)===E,Gt=E=>xs(E)===F||Nr(E)==="#comment",Ht=E=>Jt(E)&&os(E.dom),Jt=Ke(to),lo=Ke(wo),bs=Ke(_s),ur=E=>M=>Jt(M)&&Nr(M)===E,Yn=E=>it.from(E.dom.parentNode).map(fe.fromDom),Er=E=>it.from(E.dom.parentElement).map(fe.fromDom),Ct=E=>it.from(E.dom.nextSibling).map(fe.fromDom),uo=E=>De(E.dom.childNodes,fe.fromDom),dr=(E,M)=>{const z=E.dom.childNodes;return it.from(z[M]).map(fe.fromDom)},vr=E=>dr(E,0),dc=E=>dr(E,E.dom.childNodes.length-1),Dc=E=>bs(E)&&Ko(E.dom.host),us=E=>fe.fromDom(E.dom.getRootNode()),Qr=E=>{const M=us(E);return Dc(M)?it.some(M):it.none()},mc=E=>fe.fromDom(E.dom.host),is=E=>{const M=lo(E)?E.dom.parentNode:E.dom;if(M==null||M.ownerDocument===null)return!1;const z=M.ownerDocument;return Qr(fe.fromDom(M)).fold(()=>z.body.contains(M),Ps(is,mc))};var Cn=(E,M,z,ae,be)=>E(z,ae)?it.some(z):jo(be)&&be(z)?it.none():M(z,ae,be);const Ls=(E,M,z)=>{let ae=E.dom;const be=jo(z)?z:oe;for(;ae.parentNode;){ae=ae.parentNode;const gt=fe.fromDom(ae);if(M(gt))return it.some(gt);if(be(gt))break}return it.none()},qr=(E,M,z)=>Cn((be,gt)=>gt(be),Ls,E,M,z),Ca=(E,M,z)=>Ls(E,ae=>bo(ae,M),z),ci=(E,M,z)=>Cn((be,gt)=>bo(be,gt),Ca,E,M,z),mr=E=>ci(E,"[contenteditable]"),vs=(E,M=!1)=>is(E)?E.dom.isContentEditable:mr(E).fold(io(M),z=>$s(z)==="true"),$s=E=>E.dom.contentEditable,ec=(E,M)=>{Yn(E).each(ae=>{ae.dom.insertBefore(M.dom,E.dom)})},Rc=(E,M)=>{Ct(E).fold(()=>{Yn(E).each(be=>{le(be,M)})},ae=>{ec(ae,M)})},Qs=(E,M)=>{vr(E).fold(()=>{le(E,M)},ae=>{E.dom.insertBefore(M.dom,ae.dom)})},le=(E,M)=>{E.dom.appendChild(M.dom)},re=(E,M)=>{ie(M,z=>{ec(E,z)})},Ne=(E,M)=>{ie(M,z=>{le(E,z)})},Ve=E=>{E.dom.textContent="",ie(uo(E),M=>{xn(M)})},xn=E=>{const M=E.dom;M.parentNode!==null&&M.parentNode.removeChild(M)};var Fn=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),so=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Os=tinymce.util.Tools.resolve("tinymce.util.VK");const st=E=>De(E,fe.fromDom),ze=Object.keys,de=(E,M)=>{const z=ze(E);for(let ae=0,be=z.length;ae<be;ae++){const gt=z[ae],Bn=E[gt];M(Bn,gt)}},he=E=>(M,z)=>{E[z]=M},ct=(E,M,z,ae)=>{de(E,(be,gt)=>{(M(be,gt)?z:ae)(be,gt)})},pt=(E,M)=>{const z={};return ct(E,M,he(z),Yo),z},zt=(E,M,z)=>{if(In(z)||yn(z)||Wo(z))E.setAttribute(M,z+"");else throw console.error("Invalid call to Attribute.set. Key ",M,":: Value ",z,":: Element ",E),new Error("Attribute value was not simple")},gn=(E,M)=>{const z=E.dom;de(M,(ae,be)=>{zt(z,be,ae)})},hn=E=>Bt(E.dom.attributes,(M,z)=>(M[z.name]=z.value,M),{}),on=(E,M)=>fe.fromDom(E.dom.cloneNode(M)),Rn=E=>on(E,!0),Ln=(E,M)=>{const z=fe.fromTag(M),ae=hn(E);return gn(z,ae),z},Po=(E,M)=>{const z=Ln(E,M);Rc(E,z);const ae=uo(E);return Ne(z,ae),xn(E),z};var Hs=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ss=tinymce.util.Tools.resolve("tinymce.util.Tools");const la=E=>M=>Ko(M)&&M.nodeName.toLowerCase()===E,vc=E=>M=>Ko(M)&&E.test(M.nodeName),Xn=E=>Ko(E)&&E.nodeType===3,vo=E=>Ko(E)&&E.nodeType===1,So=vc(/^(OL|UL|DL)$/),tc=vc(/^(OL|UL)$/),nc=la("ol"),yc=vc(/^(LI|DT|DD)$/),Fs=vc(/^(DT|DD)$/),Su=vc(/^(TH|TD)$/),Ba=la("br"),Ol=E=>{var M;return((M=E.parentNode)===null||M===void 0?void 0:M.firstChild)===E},Bo=(E,M)=>Ko(M)&&M.nodeName in E.schema.getTextBlockElements(),ai=(E,M)=>Ko(E)&&E.nodeName in M,er=(E,M)=>Ko(M)&&M.nodeName in E.schema.getVoidElements(),Dl=(E,M)=>Ba(M)?E.isBlock(M.nextSibling)&&!Ba(M.previousSibling):!1,$a=(E,M,z)=>{const ae=E.isEmpty(M);return z&&E.select("span[data-mce-type=bookmark]",M).length>0?!1:ae},ii=(E,M)=>E.isChildOf(M,E.getRoot()),oc=E=>M=>M.options.get(E),ol=E=>{const M=E.options.register;M("lists_indent_on_tab",{processor:"boolean",default:!0})},Fa=oc("lists_indent_on_tab"),sl=oc("forced_root_block"),zi=oc("forced_root_block_attrs"),xu=(E,M,z={})=>{const ae=E.dom,be=E.schema.getBlockElements(),gt=ae.createFragment(),Bn=sl(E),go=zi(E);let ao,bn,cr=!1;for(bn=ae.create(Bn,{...go,...z.style?{style:z.style}:{}}),ai(M.firstChild,be)||gt.appendChild(bn);ao=M.firstChild;){const Br=ao.nodeName;!cr&&(Br!=="SPAN"||ao.getAttribute("data-mce-type")!=="bookmark")&&(cr=!0),ai(ao,be)?(gt.appendChild(ao),bn=null):(bn||(bn=ae.create(Bn,go),gt.appendChild(bn)),bn.appendChild(ao))}return!cr&&bn&&bn.appendChild(ae.create("br",{"data-mce-bogus":"1"})),gt},Lr=Hs.DOM,li=(E,M,z)=>{const ae=bn=>{const cr=bn.parentNode;cr&&ss.each(be,Br=>{cr.insertBefore(Br,z.parentNode)}),Lr.remove(bn)},be=Lr.select('span[data-mce-type="bookmark"]',M),gt=xu(E,z),Bn=Lr.createRng();Bn.setStartAfter(z),Bn.setEndAfter(M);const go=Bn.extractContents();for(let bn=go.firstChild;bn;bn=bn.firstChild)if(bn.nodeName==="LI"&&E.dom.isEmpty(bn)){Lr.remove(bn);break}E.dom.isEmpty(go)||Lr.insertAfter(go,M),Lr.insertAfter(gt,M);const ao=z.parentElement;ao&&$a(E.dom,ao)&&ae(ao),Lr.remove(z),$a(E.dom,M)&&Lr.remove(M)},Vi=ur("dd"),rl=ur("dt"),Rl=(E,M)=>{Vi(M)?Po(M,"dt"):rl(M)&&Er(M).each(z=>li(E,z.dom,M.dom))},Ia=E=>{rl(E)&&Po(E,"dd")},Or=(E,M,z)=>{M==="Indent"?ie(z,Ia):ie(z,ae=>Rl(E,ae))},Dr=(E,M)=>{if(Xn(E))return{container:E,offset:M};const z=Fn.getNode(E,M);return Xn(z)?{container:z,offset:M>=E.childNodes.length?z.data.length:0}:z.previousSibling&&Xn(z.previousSibling)?{container:z.previousSibling,offset:z.previousSibling.data.length}:z.nextSibling&&Xn(z.nextSibling)?{container:z.nextSibling,offset:0}:{container:E,offset:M}},jc=E=>{const M=E.cloneRange(),z=Dr(E.startContainer,E.startOffset);M.setStart(z.container,z.offset);const ae=Dr(E.endContainer,E.endOffset);return M.setEnd(ae.container,ae.offset),M},cl=["OL","UL","DL"],al=cl.join(","),Cc=(E,M)=>{const z=M||E.selection.getStart(!0);return E.dom.getParent(z,al,Gn(E,z))},U=(E,M)=>Ko(E)&&M.length===1&&M[0]===E,se=E=>Go(E.querySelectorAll(al),So),ye=E=>{const M=Cc(E),z=E.selection.getSelectedBlocks();return U(M,z)?se(M):Go(z,ae=>So(ae)&&M!==ae)},Ge=(E,M)=>{const z=ss.map(M,ae=>{const be=E.dom.getParent(ae,"li,dd,dt",Gn(E,ae));return be||ae});return St(z)},Et=E=>{const M=E.selection.getSelectedBlocks();return Go(Ge(E,M),yc)},Xe=E=>Go(Et(E),Fs),cn=(E,M)=>{const z=E.dom.getParents(M,"TD,TH");return z.length>0?z[0]:E.getBody()},ho=(E,M)=>!So(M)&&!yc(M)&&On(cl,z=>E.isValidChild(M.nodeName,z)),Gn=(E,M)=>{const z=E.dom.getParents(M,E.dom.isBlock),ae=gt=>gt.nodeName.toLowerCase()!==sl(E);return To(z,gt=>ae(gt)&&ho(E.schema,gt)).getOr(E.getBody())},$=E=>Yn(E).exists(M=>yc(M.dom)&&vr(M).exists(z=>!So(z.dom))&&dc(M).exists(z=>!So(z.dom))),V=(E,M)=>{const z=E.dom.getParents(M,"ol,ul",Gn(E,M));return Bs(z)},ue=E=>{const M=V(E,E.selection.getStart()),z=Go(E.selection.getSelectedBlocks(),tc);return M.toArray().concat(z)},Ae=E=>{const M=E.selection.getStart();return E.dom.getParents(M,"ol,ul",Gn(E,M))},nn=E=>{const M=ue(E),z=Ae(E);return To(z,ae=>$(fe.fromDom(ae))).fold(()=>Nt(E,M),ae=>[ae])},Nt=(E,M)=>{const z=De(M,ae=>V(E,ae).getOr(ae));return St(z)},es=E=>/\btox\-/.test(E.className),Hr=(E,M)=>A(E,So,Su).exists(z=>z.nodeName===M&&!es(z)),at=(E,M)=>M!==null&&!E.dom.isEditable(M),Lc=E=>{const M=Cc(E);return at(E,M)||!E.selection.isEditable()},Es=(E,M)=>{const z=E.dom.getParent(M,"ol,ul,dl");return at(E,z)||!E.selection.isEditable()},ki=(E,M)=>{const z=E.selection.getNode();return M({parents:E.dom.getParents(z),element:z}),E.on("NodeChange",M),()=>E.off("NodeChange",M)},yr=(E,M)=>{const ae=document.createDocumentFragment();return ie(E,be=>{ae.appendChild(be.dom)}),fe.fromDom(ae)},xo=(E,M,z)=>E.dispatch("ListMutation",{action:M,element:z}),sc=(E=>M=>M.replace(E,""))(/^\s+|\s+$/g),qc=E=>E.length>0,Pr=E=>!qc(E),il=E=>E.style!==void 0&&jo(E.style.getPropertyValue),Nm=(E,M,z)=>{if(!In(z))throw console.error("Invalid call to CSS.set. Property ",M,":: Value ",z,":: Element ",E),new Error("CSS value must be a string: "+z);il(E)&&E.style.setProperty(M,z)},xf=(E,M,z)=>{const ae=E.dom;Nm(ae,M,z)},Zs=E=>hs(E,"OL,UL"),ll=E=>hs(E,"LI"),rc=E=>vr(E).exists(Zs),wc=E=>dc(E).exists(Zs),ua=E=>"listAttributes"in E,Ml=E=>"isComment"in E,Y=E=>"isFragment"in E,ee=E=>E.depth>0,ke=E=>E.isSelected,tt=E=>{const M=uo(E),z=wc(E)?M.slice(0,-1):M;return De(z,Rn)},wn=(E,M,z)=>Yn(E).filter(Jt).map(ae=>({depth:M,dirty:!1,isSelected:z,content:tt(E),itemAttributes:hn(E),listAttributes:hn(ae),listType:Nr(ae),isInPreviousLi:!1})),$o=(E,M)=>{le(E.item,M.list)},po=E=>{for(let M=1;M<E.length;M++)$o(E[M-1],E[M])},Is=(E,M)=>{ot(Bs(E),fo(M),$o)},zr=(E,M)=>{const z={list:fe.fromTag(M,E),item:fe.fromTag("li",E)};return le(z.list,z.item),z},wa=(E,M,z)=>{const ae=[];for(let be=0;be<z;be++)ae.push(zr(E,ua(M)?M.listType:M.parentListType));return ae},Kc=(E,M)=>{for(let z=0;z<E.length-1;z++)xf(E[z].item,"list-style-type","none");Bs(E).each(z=>{ua(M)&&(gn(z.list,M.listAttributes),gn(z.item,M.itemAttributes)),Ne(z.item,M.content)})},sr=(E,M)=>{Nr(E.list)!==M.listType&&(E.list=Po(E.list,M.listType)),gn(E.list,M.listAttributes)},Rr=(E,M,z)=>{const ae=fe.fromTag("li",E);return gn(ae,M),Ne(ae,z),ae},Kr=(E,M)=>{le(E.list,M),E.item=M},Hc=(E,M,z)=>{const ae=M.slice(0,z.depth);return Bs(ae).each(be=>{if(ua(z)){const gt=Rr(E,z.itemAttributes,z.content);Kr(be,gt),sr(be,z)}else if(Y(z))Ne(be.item,z.content);else{const gt=fe.fromHtml(`<!--${z.content}-->`);le(be.list,gt)}}),ae},Tr=(E,M,z)=>{const ae=wa(E,z,z.depth-M.length);return po(ae),Kc(ae,z),Is(M,ae),M.concat(ae)},Sc=(E,M)=>{let z=it.none();const ae=Bt(M,(be,gt,Bn)=>Ml(gt)?Bn===0?(z=it.some(gt),be):Hc(E,be,gt):gt.depth>be.length?Tr(E,be,gt):Hc(E,be,gt),[]);return z.each(be=>{const gt=fe.fromHtml(`<!--${be.content}-->`);fo(ae).each(Bn=>{Qs(Bn.list,gt)})}),fo(ae).map(be=>be.list)},Ts=(E,M)=>{switch(E){case"Indent":M.depth++;break;case"Outdent":M.depth--;break;case"Flatten":M.depth=0}M.dirty=!0},ul=(E,M)=>{ua(E)&&ua(M)&&(E.listType=M.listType,E.listAttributes={...M.listAttributes})},Pm=E=>{E.listAttributes=pt(E.listAttributes,(M,z)=>z!=="start")},su=(E,M)=>{const z=E[M].depth,ae=gt=>gt.depth===z&&!gt.dirty,be=gt=>gt.depth<z;return A(dn(E.slice(0,M)),ae,be).orThunk(()=>A(E.slice(M+1),ae,be))},Hd=E=>(ie(E,(M,z)=>{su(E,z).fold(()=>{M.dirty&&ua(M)&&Pm(M)},ae=>ul(M,ae))}),E),zd=E=>{let M=E;return{get:()=>M,set:be=>{M=be}}},cd=(E,M,z,ae)=>{var be;if(Gt(ae))return[{depth:E+1,content:(be=ae.dom.nodeValue)!==null&&be!==void 0?be:"",dirty:!1,isSelected:!1,isComment:!0}];M.each(go=>{ko(go.start,ae)&&z.set(!0)});const gt=wn(ae,E,z.get());M.each(go=>{ko(go.end,ae)&&z.set(!1)});const Bn=dc(ae).filter(Zs).map(go=>_i(E,M,z,go)).getOr([]);return gt.toArray().concat(Bn)},ad=(E,M,z,ae)=>vr(ae).filter(Zs).fold(()=>cd(E,M,z,ae),be=>{const gt=Bt(uo(ae),(Bn,go,ao)=>{if(ao===0)return Bn;if(ll(go))return Bn.concat(cd(E,M,z,go));{const bn={isFragment:!0,depth:E,content:[go],isSelected:!1,dirty:!1,parentListType:Nr(be)};return Bn.concat(bn)}},[]);return _i(E,M,z,be).concat(gt)}),_i=(E,M,z,ae)=>Mo(uo(ae),be=>{const gt=Zs(be)?_i:ad,Bn=E+1;return gt(Bn,M,z,be)}),Sa=(E,M)=>{const z=zd(!1),ae=0;return De(E,be=>({sourceList:be,entries:_i(ae,M,z,be)}))},Sh=(E,M)=>{const z=Hd(M);return De(z,ae=>{const be=Ml(ae)?yr([fe.fromHtml(`<!--${ae.content}-->`)]):yr(ae.content),gt=ua(ae)?ae.itemAttributes:{};return fe.fromDom(xu(E,be.dom,gt))})},Nl=(E,M)=>{const z=Hd(M);return Sc(E.contentDocument,z).toArray()},Ef=(E,M)=>Mo(eo(M,ee),z=>fo(z).exists(ee)?Nl(E,z):Sh(E,z)),Vd=(E,M)=>{ie(Go(E,ke),z=>Ts(M,z))},vg=E=>{const M=De(Et(E),fe.fromDom);return ot(To(M,Ze(rc)),To(dn(M),Ze(rc)),(z,ae)=>({start:z,end:ae}))},Tf=(E,M,z)=>{const ae=Sa(M,vg(E));ie(ae,be=>{Vd(be.entries,z);const gt=Ef(E,be.entries);ie(gt,Bn=>{xo(E,z==="Indent"?"IndentList":"OutdentList",Bn.dom)}),re(be.sourceList,gt),xn(be.sourceList)})},Ud=(E,M)=>{const z=st(nn(E)),ae=st(Xe(E));let be=!1;if(z.length||ae.length){const gt=E.selection.getBookmark();Tf(E,z,M),Or(E,M,ae),E.selection.moveToBookmark(gt),E.selection.setRng(jc(E.selection.getRng())),E.nodeChanged(),be=!0}return be},kf=(E,M)=>!Lc(E)&&Ud(E,M),yg=E=>kf(E,"Indent"),id=E=>kf(E,"Outdent"),Cg=E=>kf(E,"Flatten"),me="\uFEFF",ld=E=>E===me,La=(E,M,z)=>Ls(E,M,z).isSome(),r1=(E,M)=>La(E,jn(ko,M));var xh=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Eu=Hs.DOM,ns=E=>{const M={},z=ae=>{let be=E[ae?"startContainer":"endContainer"],gt=E[ae?"startOffset":"endOffset"];if(vo(be)){const Bn=Eu.create("span",{"data-mce-type":"bookmark"});be.hasChildNodes()?(gt=Math.min(gt,be.childNodes.length-1),ae?be.insertBefore(Bn,be.childNodes[gt]):Eu.insertAfter(Bn,be.childNodes[gt])):be.appendChild(Bn),be=Bn,gt=0}M[ae?"startContainer":"endContainer"]=be,M[ae?"startOffset":"endOffset"]=gt};return z(!0),E.collapsed||z(),M},Mr=E=>{const M=ae=>{const be=go=>{var ao;let bn=(ao=go.parentNode)===null||ao===void 0?void 0:ao.firstChild,cr=0;for(;bn;){if(bn===go)return cr;(!vo(bn)||bn.getAttribute("data-mce-type")!=="bookmark")&&cr++,bn=bn.nextSibling}return-1};let gt=E[ae?"startContainer":"endContainer"],Bn=E[ae?"startOffset":"endOffset"];if(gt){if(vo(gt)&&gt.parentNode){const go=gt;Bn=be(gt),gt=gt.parentNode,Eu.remove(go),!gt.hasChildNodes()&&Eu.isBlock(gt)&&gt.appendChild(Eu.create("br"))}E[ae?"startContainer":"endContainer"]=gt,E[ae?"startOffset":"endOffset"]=Bn}};M(!0),M();const z=Eu.createRng();return z.setStart(E.startContainer,E.startOffset),E.endContainer&&z.setEnd(E.endContainer,E.endOffset),jc(z)},Yc=E=>{switch(E){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},ru=(E,M,z)=>{const ae=z["list-style-type"]?z["list-style-type"]:null;E.setStyle(M,"list-style-type",ae)},wg=(E,M)=>{ss.each(M,(z,ae)=>{E.setAttribute(ae,z)})},ud=(E,M,z)=>{wg(M,z["list-attributes"]),ss.each(E.select("li",M),ae=>{wg(ae,z["list-item-attributes"])})},xa=(E,M,z)=>{ru(E,M,z),ud(E,M,z)},_f=(E,M,z)=>{ss.each(z,ae=>E.setStyle(M,ae,""))},Af=(E,M)=>Ko(M)&&!ai(M,E.schema.getBlockElements()),Tu=(E,M,z,ae)=>{let be=M[z?"startContainer":"endContainer"];const gt=M[z?"startOffset":"endOffset"];vo(be)&&(be=be.childNodes[Math.min(gt,be.childNodes.length-1)]||be),!z&&Ba(be.nextSibling)&&(be=be.nextSibling);const Bn=ao=>{for(;!E.dom.isBlock(ao)&&ao.parentNode&&ae!==ao;)ao=ao.parentNode;return ao},go=(ao,bn)=>{var cr;const Br=new so(ao,Bn(ao)),Di=bn?"next":"prev";let fi;for(;fi=Br[Di]();)if(!(er(E,fi)||ld(fi.textContent)||((cr=fi.textContent)===null||cr===void 0?void 0:cr.length)===0))return it.some(fi);return it.none()};if(z&&Xn(be))if(ld(be.textContent))be=go(be,!1).getOr(be);else for(be.parentNode!==null&&Af(E,be.parentNode)&&(be=be.parentNode);be.previousSibling!==null&&(Af(E,be.previousSibling)||Xn(be.previousSibling));)be=be.previousSibling;if(!z&&Xn(be))if(ld(be.textContent))be=go(be,!0).getOr(be);else for(be.parentNode!==null&&Af(E,be.parentNode)&&(be=be.parentNode);be.nextSibling!==null&&(Af(E,be.nextSibling)||Xn(be.nextSibling));)be=be.nextSibling;for(;be.parentNode!==ae;){const ao=be.parentNode;if(Bo(E,be)||/^(TD|TH)$/.test(ao.nodeName))return be;be=ao}return be},ku=(E,M,z)=>{const ae=[],be=E.dom,gt=Tu(E,M,!0,z),Bn=Tu(E,M,!1,z);let go;const ao=[];for(let bn=gt;bn&&(ao.push(bn),bn!==Bn);bn=bn.nextSibling);return ss.each(ao,bn=>{var cr;if(Bo(E,bn)){ae.push(bn),go=null;return}if(be.isBlock(bn)||Ba(bn)){Ba(bn)&&be.remove(bn),go=null;return}const Br=bn.nextSibling;if(xh.isBookmarkNode(bn)&&(So(Br)||Bo(E,Br)||!Br&&bn.parentNode===z)){go=null;return}go||(go=be.create("p"),(cr=bn.parentNode)===null||cr===void 0||cr.insertBefore(go,bn),ae.push(go)),go.appendChild(bn)}),ae},Bm=(E,M,z)=>{const ae=E.getStyle(M,"list-style-type");let be=z?z["list-style-type"]:"";return be=be===null?"":be,ae===be},Ai=(E,M)=>{const z=E.selection.getStart(!0),ae=Tu(E,M,!0,E.getBody());return r1(fe.fromDom(ae),fe.fromDom(M.commonAncestorContainer))?M.commonAncestorContainer:z},$m=(E,M,z)=>{const ae=E.selection.getRng();let be="LI";const gt=Gn(E,Ai(E,ae)),Bn=E.dom;if(Bn.getContentEditable(E.selection.getNode())==="false")return;M=M.toUpperCase(),M==="DL"&&(be="DT");const go=ns(ae),ao=Go(ku(E,ae,gt),E.dom.isEditable);ss.each(ao,bn=>{let cr;const Br=bn.previousSibling,Di=bn.parentNode;yc(Di)||(Br&&So(Br)&&Br.nodeName===M&&Bm(Bn,Br,z)?(cr=Br,bn=Bn.rename(bn,be),Br.appendChild(bn)):(cr=Bn.create(M),Di.insertBefore(cr,bn),cr.appendChild(bn),bn=Bn.rename(bn,be)),_f(Bn,bn,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),xa(Bn,cr,z),dd(E.dom,cr))}),E.selection.setRng(Mr(go))},zc=(E,M)=>So(E)&&E.nodeName===(M==null?void 0:M.nodeName),_u=(E,M,z)=>{const ae=E.getStyle(M,"list-style-type",!0),be=E.getStyle(z,"list-style-type",!0);return ae===be},dl=(E,M)=>E.className===M.className,Ea=(E,M,z)=>zc(M,z)&&_u(E,M,z)&&dl(M,z),dd=(E,M)=>{let z,ae=M.nextSibling;if(Ea(E,M,ae)){const be=ae;for(;z=be.firstChild;)M.appendChild(z);E.remove(be)}if(ae=M.previousSibling,Ea(E,M,ae)){const be=ae;for(;z=be.lastChild;)M.insertBefore(z,M.firstChild);E.remove(be)}},c1=(E,M,z,ae)=>{if(M.nodeName!==z){const be=E.dom.rename(M,z);xa(E.dom,be,ae),xo(E,Yc(z),be)}else xa(E.dom,M,ae),xo(E,Yc(z),M)},Of=(E,M,z,ae)=>{if(M.classList.forEach((be,gt,Bn)=>{be.startsWith("tox-")&&(Bn.remove(be),Bn.length===0&&M.removeAttribute("class"))}),M.nodeName!==z){const be=E.dom.rename(M,z);xa(E.dom,be,ae),xo(E,Yc(z),be)}else xa(E.dom,M,ae),xo(E,Yc(z),M)},Pl=(E,M,z,ae,be)=>{const gt=So(M);if(gt&&M.nodeName===ae&&!Wd(be)&&!es(M))Cg(E);else{$m(E,ae,be);const Bn=ns(E.selection.getRng()),go=gt?[M,...z]:z,ao=gt&&es(M)?Of:c1;ss.each(go,bn=>{ao(E,bn,ae,be)}),E.selection.setRng(Mr(Bn))}},Wd=E=>"list-style-type"in E,Eh=(E,M,z,ae)=>{if(M!==E.getBody())if(M)if(M.nodeName===z&&!Wd(ae)&&!es(M))Cg(E);else{const be=ns(E.selection.getRng());es(M)&&M.classList.forEach((Bn,go,ao)=>{Bn.startsWith("tox-")&&(ao.remove(Bn),ao.length===0&&M.removeAttribute("class"))}),xa(E.dom,M,ae);const gt=E.dom.rename(M,z);dd(E.dom,gt),E.selection.setRng(Mr(be)),$m(E,z,ae),xo(E,Yc(z),gt)}else $m(E,z,ae),xo(E,Yc(z),M)},Df=(E,M,z)=>{const ae=Cc(E);if(Es(E,ae))return;const be=ye(E),gt=fn(z)?z:{};be.length>0?Pl(E,ae,be,M,gt):Eh(E,ae,M,gt)},Th=Hs.DOM,kh=(E,M)=>{const z=M.parentElement;if(z&&z.nodeName==="LI"&&z.firstChild===M){const ae=z.previousSibling;ae&&ae.nodeName==="LI"?(ae.appendChild(M),$a(E,z)&&Th.remove(z)):Th.setStyle(z,"listStyleType","none")}if(So(z)){const ae=z.previousSibling;ae&&ae.nodeName==="LI"&&ae.appendChild(M)}},_h=(E,M)=>{const z=ss.grep(E.select("ol,ul",M));ss.each(z,ae=>{kh(E,ae)})},Bl=(E,M,z,ae)=>{let be=M.startContainer;const gt=M.startOffset;if(Xn(be)&&(z?gt<be.data.length:gt>0))return be;const Bn=E.schema.getNonEmptyElements();vo(be)&&(be=Fn.getNode(be,gt));const go=new so(be,ae);z&&Dl(E.dom,be)&&go.next();const ao=z?go.next.bind(go):go.prev2.bind(go);for(;be=ao();)if(be.nodeName==="LI"&&!be.hasChildNodes()||Bn[be.nodeName]||Xn(be)&&be.data.length>0)return be;return null},Sg=(E,M)=>{const z=M.childNodes;return z.length===1&&!So(z[0])&&E.isBlock(z[0])},ml=E=>it.from(E).map(fe.fromDom).filter(Ht).exists(M=>vs(M)&&!ln(["details"],Nr(M))),kr=(E,M)=>{Sg(E,M)&&ml(M.firstChild)&&E.remove(M.firstChild,!0)},cc=(E,M,z)=>{let ae;const be=Sg(E,z)?z.firstChild:z;if(kr(E,M),!$a(E,M,!0))for(;ae=M.firstChild;)be.appendChild(ae)},ui=(E,M,z)=>{let ae;const be=M.parentNode;if(!ii(E,M)||!ii(E,z))return;So(z.lastChild)&&(ae=z.lastChild),be===z.lastChild&&Ba(be.previousSibling)&&E.remove(be.previousSibling);const gt=z.lastChild;gt&&Ba(gt)&&M.hasChildNodes()&&E.remove(gt),$a(E,z,!0)&&Ve(fe.fromDom(z)),cc(E,M,z),ae&&z.appendChild(ae);const go=jt(fe.fromDom(z),fe.fromDom(M))?E.getParents(M,So,z):[];E.remove(M),ie(go,ao=>{$a(E,ao)&&ao!==E.getRoot()&&E.remove(ao)})},Zd=(E,M,z)=>{Ve(fe.fromDom(z)),ui(E.dom,M,z),E.selection.setCursorLocation(z,0)},jd=(E,M,z,ae)=>{const be=E.dom;if(be.isEmpty(ae))Zd(E,z,ae);else{const gt=ns(M);ui(be,z,ae),E.selection.setRng(Mr(gt))}},xc=(E,M,z,ae)=>{const be=ns(M);ui(E.dom,z,ae);const gt=Mr(be);E.selection.setRng(gt)},pn=(E,M)=>{const z=E.dom,ae=E.selection,be=ae.getStart(),gt=cn(E,be),Bn=z.getParent(ae.getStart(),"LI",gt);if(Bn){const go=Bn.parentElement;if(go===E.getBody()&&$a(z,go))return!0;const ao=jc(ae.getRng()),bn=z.getParent(Bl(E,ao,M,gt),"LI",gt),cr=bn&&(M?z.isChildOf(Bn,bn):z.isChildOf(bn,Bn));if(bn&&bn!==Bn&&!cr)return E.undoManager.transact(()=>{M?jd(E,ao,bn,Bn):Ol(Bn)?id(E):xc(E,ao,Bn,bn)}),!0;if(cr&&!M&&bn!==Bn){const Br=ao.commonAncestorContainer.parentElement;return!Br||z.isChildOf(bn,Br)?!1:(E.undoManager.transact(()=>{const Di=ns(ao);cc(z,Br,bn),Br.remove();const fi=Mr(Di);E.selection.setRng(fi)}),!0)}else if(!bn&&!M&&ao.startOffset===0&&ao.endOffset===0)return E.undoManager.transact(()=>{Cg(E)}),!0}return!1},xg=(E,M,z)=>{const ae=E.getParent(M.parentNode,E.isBlock,z);E.remove(M),ae&&E.isEmpty(ae)&&E.remove(ae)},fl=(E,M)=>{const z=E.dom,ae=E.selection.getStart(),be=cn(E,ae),gt=z.getParent(ae,z.isBlock,be);if(gt&&z.isEmpty(gt,void 0,{checkRootAsContent:!0})){const Bn=jc(E.selection.getRng()),go=Bl(E,Bn,M,be),ao=z.getParent(go,"LI",be);if(go&&ao){const bn=fi=>ln(["td","th","caption"],Nr(fi)),cr=fi=>fi.dom===be,Br=qr(fe.fromDom(ao),bn,cr),Di=qr(fe.fromDom(Bn.startContainer),bn,cr);return Re(Br,Di,ko)?(E.undoManager.transact(()=>{const fi=ao.parentNode;xg(z,gt,be),dd(z,fi),E.selection.select(go,!0),E.selection.collapse(M)}),!0):!1}}return!1},di=(E,M)=>pn(E,M)||fl(E,M),ys=E=>{const M=E.selection.getStart(),z=cn(E,M);return E.dom.getParent(M,"LI,DT,DD",z)||Et(E).length>0},md=E=>ys(E)?(E.undoManager.transact(()=>{let M=!0;const z=()=>M=!1;E.on("input",z),E.execCommand("Delete"),E.off("input",z),M&&E.dispatch("input"),_h(E.dom,E.getBody())}),!0):!1,Fm=(E,M)=>{const z=E.selection;return!Es(E,z.getNode())&&(z.isCollapsed()?di(E,M):md(E))},Im=E=>{E.on("ExecCommand",M=>{const z=M.command.toLowerCase();(z==="delete"||z==="forwarddelete")&&ys(E)&&_h(E.dom,E.getBody())}),E.on("keydown",M=>{M.keyCode===Os.BACKSPACE?Fm(E,!1)&&M.preventDefault():M.keyCode===Os.DELETE&&Fm(E,!0)&&M.preventDefault()})},Ah=E=>({backspaceDelete:M=>{Fm(E,M)}}),ro=(E,M)=>{const z=Cc(E);z===null||Es(E,z)||E.undoManager.transact(()=>{fn(M.styles)&&E.dom.setStyles(z,M.styles),fn(M.attrs)&&de(M.attrs,(ae,be)=>E.dom.setAttrib(z,be,ae))})},Vr=E=>{const M=dn(sc(E).split("")),z=De(M,(ae,be)=>{const gt=ae.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,be)*gt});return Bt(z,(ae,be)=>ae+be,0)},Gd=E=>{if(E--,E<0)return"";{const M=E%26,z=Math.floor(E/26),ae=Gd(z),be=String.fromCharCode(65+M);return ae+be}},Xa=E=>/^[A-Z]+$/.test(E),Ta=E=>/^[a-z]+$/.test(E),mi=E=>/^[0-9]+$/.test(E),Mc=E=>mi(E)?2:Xa(E)?0:Ta(E)?1:Pr(E)?3:4,Ha=E=>{switch(Mc(E)){case 2:return it.some({listStyleType:it.none(),start:E});case 0:return it.some({listStyleType:it.some("upper-alpha"),start:Vr(E).toString()});case 1:return it.some({listStyleType:it.some("lower-alpha"),start:Vr(E).toString()});case 3:return it.some({listStyleType:it.none(),start:""});case 4:return it.none()}},Oi=E=>{const M=parseInt(E.start,10);return Tn(E.listStyleType,"upper-alpha")?Gd(M):Tn(E.listStyleType,"lower-alpha")?Gd(M).toLowerCase():E.start},qd=E=>{const M=Cc(E);!nc(M)||Es(E,M)||E.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Oi({start:E.dom.getAttrib(M,"start","1"),listStyleType:it.from(E.dom.getStyle(M,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:z=>{const ae=z.getData();Ha(ae.start).each(be=>{E.execCommand("mceListUpdate",!1,{attrs:{start:be.start==="1"?"":be.start},styles:{"list-style-type":be.listStyleType.getOr("")}})}),z.close()}})},Cr=(E,M)=>()=>{const z=Cc(E);return Ko(z)&&z.nodeName===M},Rf=E=>{E.addCommand("mceListProps",()=>{qd(E)})},Yr=E=>{E.on("BeforeExecCommand",M=>{const z=M.command.toLowerCase();z==="indent"?yg(E):z==="outdent"&&id(E)}),E.addCommand("InsertUnorderedList",(M,z)=>{Df(E,"UL",z)}),E.addCommand("InsertOrderedList",(M,z)=>{Df(E,"OL",z)}),E.addCommand("InsertDefinitionList",(M,z)=>{Df(E,"DL",z)}),E.addCommand("RemoveList",()=>{Cg(E)}),Rf(E),E.addCommand("mceListUpdate",(M,z)=>{fn(z)&&ro(E,z)}),E.addQueryStateHandler("InsertUnorderedList",Cr(E,"UL")),E.addQueryStateHandler("InsertOrderedList",Cr(E,"OL")),E.addQueryStateHandler("InsertDefinitionList",Cr(E,"DL"))};var $l=tinymce.util.Tools.resolve("tinymce.html.Node");const Fl=E=>E.type===3,zs=E=>E.length===0,Ja=E=>{const M=(be,gt)=>{const Bn=$l.create("li");ie(be,go=>Bn.append(go)),gt?E.insert(Bn,gt,!0):E.append(Bn)},z=(be,gt)=>Fl(gt)?[...be,gt]:!zs(be)&&!Fl(gt)?(M(be,gt),[]):be,ae=Bt(E.children(),z,[]);zs(ae)||M(ae)},Lm=E=>{E.on("PreInit",()=>{const{parser:M}=E;M.addNodeFilter("ul,ol",z=>ie(z,Ja))})},fd=E=>{E.on("keydown",M=>{M.keyCode!==Os.TAB||Os.metaKeyPressed(M)||E.undoManager.transact(()=>{(M.shiftKey?id(E):yg(E))&&M.preventDefault()})})},rr=E=>{Fa(E)&&fd(E),Im(E)},Au=(E,M)=>z=>{const ae=be=>{z.setActive(Hr(be.parents,M)),z.setEnabled(!Es(E,be.element)&&E.selection.isEditable())};return z.setEnabled(E.selection.isEditable()),ki(E,ae)},gl=E=>{const M=z=>()=>E.execCommand(z);E.hasPlugin("advlist")||(E.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:M("InsertOrderedList"),onSetup:Au(E,"OL")}),E.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:M("InsertUnorderedList"),onSetup:Au(E,"UL")}))},Fo=(E,M)=>z=>ki(E,be=>z.setEnabled(Hr(be.parents,M)&&!Es(E,be.element))),Kd=E=>{const M={text:"List properties...",icon:"ordered-list",onAction:()=>E.execCommand("mceListProps"),onSetup:Fo(E,"OL")};E.ui.registry.addMenuItem("listprops",M),E.ui.registry.addContextMenu("lists",{update:z=>{const ae=Cc(E,z);return nc(ae)?["listprops"]:[]}})};var Mf=()=>{an.add("lists",E=>(ol(E),Lm(E),E.hasPlugin("rtc",!0)?Rf(E):(rr(E),Yr(E)),gl(E),Kd(E),Ah(E)))};Mf()}()),NK}var BK;function gX(){return BK||(BK=1,fX()),MK}gX();var $K={},FK={},IK;function hX(){return IK||(IK=1,function(){var an=tinymce.util.Tools.resolve("tinymce.PluginManager");const Co=(le,re,Ne)=>{var Ve;return Ne(le,re.prototype)?!0:((Ve=le.constructor)===null||Ve===void 0?void 0:Ve.name)===re.name},Un=le=>{const re=typeof le;return le===null?"null":re==="object"&&Array.isArray(le)?"array":re==="object"&&Co(le,String,(Ne,Ve)=>Ve.isPrototypeOf(Ne))?"string":re},mo=le=>re=>Un(re)===le,oo=mo("string"),In=mo("object"),fn=mo("array"),je=le=>le==null,yn=le=>!je(le);class Ro{constructor(re,Ne){this.tag=re,this.value=Ne}static some(re){return new Ro(!0,re)}static none(){return Ro.singletonNone}fold(re,Ne){return this.tag?Ne(this.value):re()}isSome(){return this.tag}isNone(){return!this.tag}map(re){return this.tag?Ro.some(re(this.value)):Ro.none()}bind(re){return this.tag?re(this.value):Ro.none()}exists(re){return this.tag&&re(this.value)}forall(re){return!this.tag||re(this.value)}filter(re){return!this.tag||re(this.value)?this:Ro.none()}getOr(re){return this.tag?this.value:re}or(re){return this.tag?this:re}getOrThunk(re){return this.tag?this.value:re()}orThunk(re){return this.tag?this:re()}getOrDie(re){if(this.tag)return this.value;throw new Error(re??"Called getOrDie on None")}static from(re){return yn(re)?Ro.some(re):Ro.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(re){this.tag&&re(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ro.singletonNone=new Ro(!1);const Ko=Array.prototype.push,jo=(le,re)=>{for(let Ne=0,Ve=le.length;Ne<Ve;Ne++){const xn=le[Ne];re(xn,Ne)}},Wo=le=>{const re=[];for(let Ne=0,Ve=le.length;Ne<Ve;++Ne){if(!fn(le[Ne]))throw new Error("Arr.flatten item "+Ne+" was not an array, input: "+le);Ko.apply(re,le[Ne])}return re},Yo=le=>{let re=le;return{get:()=>re,set:xn=>{re=xn}}},Ps=Object.keys,io=Object.hasOwnProperty,Rt=(le,re)=>{const Ne=Ps(le);for(let Ve=0,xn=Ne.length;Ve<xn;Ve++){const Fn=Ne[Ve],so=le[Fn];re(so,Fn)}},jn=(le,re)=>Ze(le,re)?Ro.from(le[re]):Ro.none(),Ze=(le,re)=>io.call(le,re),oe=le=>re=>re.options.get(le),it=le=>{const re=le.options.register;re("audio_template_callback",{processor:"function"}),re("video_template_callback",{processor:"function"}),re("iframe_template_callback",{processor:"function"}),re("media_live_embeds",{processor:"boolean",default:!0}),re("media_filter_html",{processor:"boolean",default:!0}),re("media_url_resolver",{processor:"function"}),re("media_alt_source",{processor:"boolean",default:!0}),re("media_poster",{processor:"boolean",default:!0}),re("media_dimensions",{processor:"boolean",default:!0})},Zo=oe("audio_template_callback"),mt=oe("video_template_callback"),Z=oe("iframe_template_callback"),Mt=oe("media_live_embeds"),ln=oe("media_filter_html"),On=oe("media_url_resolver"),De=oe("media_alt_source"),ie=oe("media_poster"),Go=oe("media_dimensions");var eo=tinymce.util.Tools.resolve("tinymce.util.Tools"),Bt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),A=tinymce.util.Tools.resolve("tinymce.html.DomParser");const To=Bt.DOM,yt=le=>le.replace(/px$/,""),Mo=le=>{const re=le.attr("style"),Ne=re?To.parseStyle(re):{};return{type:"ephox-embed-iri",source:le.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:jn(Ne,"max-width").map(yt).getOr(""),height:jn(Ne,"max-height").map(yt).getOr("")}},dn=(le,re)=>{let Ne={};const xn=A({validate:!1,forced_root_block:!1},re).parse(le);for(let Fn=xn;Fn;Fn=Fn.walk())if(Fn.type===1){const so=Fn.name;if(Fn.attr("data-ephox-embed-iri")){Ne=Mo(Fn);break}else!Ne.source&&so==="param"&&(Ne.source=Fn.attr("movie")),(so==="iframe"||so==="object"||so==="embed"||so==="video"||so==="audio")&&(Ne.type||(Ne.type=so),Ne=eo.extend(Fn.attributes.map,Ne)),so==="source"&&(Ne.source?Ne.altsource||(Ne.altsource=Fn.attr("src")):Ne.source=Fn.attr("src")),so==="img"&&!Ne.poster&&(Ne.poster=Fn.attr("src"))}return Ne.source=Ne.source||Ne.src||"",Ne.altsource=Ne.altsource||"",Ne.poster=Ne.poster||"",Ne},Qe=le=>{var re;const Ne={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},Ve=(re=le.toLowerCase().split(".").pop())!==null&&re!==void 0?re:"";return jn(Ne,Ve).getOr("")};var fo=tinymce.util.Tools.resolve("tinymce.html.Node"),Bs=tinymce.util.Tools.resolve("tinymce.html.Serializer");const St=(le,re={})=>A({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...re},le),Tn=Bt.DOM,Re=le=>/^[0-9.]+$/.test(le)?le+"px":le,ot=(le,re)=>{const Ne=re.attr("style"),Ve=Ne?Tn.parseStyle(Ne):{};yn(le.width)&&(Ve["max-width"]=Re(le.width)),yn(le.height)&&(Ve["max-height"]=Re(le.height)),re.attr("style",Tn.serializeStyle(Ve))},F=["source","altsource"],_s=(le,re,Ne,Ve)=>{let xn=0,Fn=0;const so=St(Ve);so.addNodeFilter("source",st=>xn=st.length);const Os=so.parse(le);for(let st=Os;st;st=st.walk())if(st.type===1){const ze=st.name;if(st.attr("data-ephox-embed-iri")){ot(re,st);break}else{switch(ze){case"video":case"object":case"embed":case"img":case"iframe":re.height!==void 0&&re.width!==void 0&&(st.attr("width",re.width),st.attr("height",re.height));break}if(Ne)switch(ze){case"video":st.attr("poster",re.poster),st.attr("src",null);for(let he=xn;he<2;he++)if(re[F[he]]){const ct=new fo("source",1);ct.attr("src",re[F[he]]),ct.attr("type",re[F[he]+"mime"]||null),st.append(ct)}break;case"iframe":st.attr("src",re.source);break;case"object":const de=st.getAll("img").length>0;if(re.poster&&!de){st.attr("src",re.poster);const he=new fo("img",1);he.attr("src",re.poster),he.attr("width",re.width),he.attr("height",re.height),st.append(he)}break;case"source":if(Fn<2&&(st.attr("src",re[F[Fn]]),st.attr("type",re[F[Fn]+"mime"]||null),!re[F[Fn]])){st.remove();continue}Fn++;break;case"img":re.poster||st.remove();break}}}return Bs({},Ve).serialize(Os)},to=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],wo=le=>{const re=le.match(/^(https?:\/\/|www\.)(.+)$/i);return re&&re.length>1?re[1]==="www."?"https://":re[1]:"https://"},No=(le,re)=>{const Ne=wo(re),Ve=le.regex.exec(re);let xn=Ne+le.url;if(yn(Ve))for(let Fn=0;Fn<Ve.length;Fn++)xn=xn.replace("$"+Fn,()=>Ve[Fn]?Ve[Fn]:"");return xn.replace(/\?$/,"")},Ic=le=>{const re=to.filter(Ne=>Ne.regex.test(le));return re.length>0?eo.extend({},re[0],{url:No(re[0],le)}):null},We=(le,re)=>{if(re)return re(le);{const Ne=le.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+le.source+'" width="'+le.width+'" height="'+le.height+'"'+Ne+"></iframe>"}},Tt=le=>{let re='<object data="'+le.source+'" width="'+le.width+'" height="'+le.height+'" type="application/x-shockwave-flash">';return le.poster&&(re+='<img src="'+le.poster+'" width="'+le.width+'" height="'+le.height+'" />'),re+="</object>",re},et=(le,re)=>re?re(le):'<audio controls="controls" src="'+le.source+'">'+(le.altsource?`
<source src="`+le.altsource+'"'+(le.altsourcemime?' type="'+le.altsourcemime+'"':"")+` />
`:"")+"</audio>",fe=(le,re)=>re?re(le):'<video width="'+le.width+'" height="'+le.height+'"'+(le.poster?' poster="'+le.poster+'"':"")+` controls="controls">
<source src="`+le.source+'"'+(le.sourcemime?' type="'+le.sourcemime+'"':"")+` />
`+(le.altsource?'<source src="'+le.altsource+'"'+(le.altsourcemime?' type="'+le.altsourcemime+'"':"")+` />
`:"")+"</video>",bo=(le,re)=>{var Ne;const Ve=eo.extend({},re);if(!Ve.source&&(eo.extend(Ve,dn((Ne=Ve.embed)!==null&&Ne!==void 0?Ne:"",le.schema)),!Ve.source))return"";Ve.altsource||(Ve.altsource=""),Ve.poster||(Ve.poster=""),Ve.source=le.convertURL(Ve.source,"source"),Ve.altsource=le.convertURL(Ve.altsource,"source"),Ve.sourcemime=Qe(Ve.source),Ve.altsourcemime=Qe(Ve.altsource),Ve.poster=le.convertURL(Ve.poster,"poster");const xn=Ic(Ve.source);if(xn&&(Ve.source=xn.url,Ve.type=xn.type,Ve.allowfullscreen=xn.allowFullscreen,Ve.width=Ve.width||String(xn.w),Ve.height=Ve.height||String(xn.h)),Ve.embed)return _s(Ve.embed,Ve,!0,le.schema);{const Fn=Zo(le),so=mt(le),Os=Z(le);return Ve.width=Ve.width||"300",Ve.height=Ve.height||"150",eo.each(Ve,(st,ze)=>{Ve[ze]=le.dom.encode(""+st)}),Ve.type==="iframe"?We(Ve,Os):Ve.sourcemime==="application/x-shockwave-flash"?Tt(Ve):Ve.sourcemime.indexOf("audio")!==-1?et(Ve,Fn):fe(Ve,so)}},ko=le=>le.hasAttribute("data-mce-object")||le.hasAttribute("data-ephox-embed-iri"),jt=le=>{le.on("mousedown",re=>{const Ne=le.dom.getParent(re.target,".mce-preview-object");Ne&&le.dom.getAttrib(Ne,"data-mce-selected")==="2"&&re.stopImmediatePropagation()}),le.on("click keyup touchend",()=>{const re=le.selection.getNode();re&&le.dom.hasClass(re,"mce-preview-object")&&le.dom.getAttrib(re,"data-mce-selected")&&re.setAttribute("data-mce-selected","2")}),le.on("ObjectResized",re=>{const Ne=re.target;if(Ne.getAttribute("data-mce-object")){let Ve=Ne.getAttribute("data-mce-html");Ve&&(Ve=unescape(Ve),Ne.setAttribute("data-mce-html",escape(_s(Ve,{width:String(re.width),height:String(re.height)},!1,le.schema))))}})},hs={},Wn=(le,re,Ne)=>new Promise((Ve,xn)=>{const Fn=so=>(so.html&&(hs[le.source]=so),Ve({url:le.source,html:so.html?so.html:re(le)}));hs[le.source]?Fn(hs[le.source]):Ne({url:le.source}).then(Fn).catch(xn)}),Xs=(le,re)=>Promise.resolve({html:re(le),url:le.source}),Ho=le=>re=>bo(le,re),As=(le,re)=>{const Ne=On(le);return Ne?Wn(re,Ho(le),Ne):Xs(re,Ho(le))},Oc=le=>Ze(hs,le),Js=(le,re)=>jn(re,le).bind(Ne=>jn(Ne,"meta")),ps=(le,re,Ne)=>Ve=>{const xn=()=>jn(le,Ve),Fn=()=>jn(re,Ve),so=ze=>jn(ze,"value").bind(de=>de.length>0?Ro.some(de):Ro.none()),Os=()=>xn().bind(ze=>In(ze)?so(ze).orThunk(Fn):Fn().orThunk(()=>Ro.from(ze))),st=()=>Fn().orThunk(()=>xn().bind(ze=>In(ze)?so(ze):Ro.from(ze)));return{[Ve]:(Ve===Ne?Os():st()).getOr("")}},os=(le,re)=>{const Ne={};return jn(le,"dimensions").each(Ve=>{jo(["width","height"],xn=>{jn(re,xn).orThunk(()=>jn(Ve,xn)).each(Fn=>Ne[xn]=Fn)})}),Ne},Nr=(le,re)=>{const Ne=re&&re!=="dimensions"?Js(re,le).getOr({}):{},Ve=ps(le,Ne,re);return{...Ve("source"),...Ve("altsource"),...Ve("poster"),...Ve("embed"),...os(le,Ne)}},xs=le=>{const re={...le,source:{value:jn(le,"source").getOr("")},altsource:{value:jn(le,"altsource").getOr("")},poster:{value:jn(le,"poster").getOr("")}};return jo(["width","height"],Ne=>{jn(le,Ne).each(Ve=>{const xn=re.dimensions||{};xn[Ne]=Ve,re.dimensions=xn})}),re},Ke=le=>re=>{const Ne=re&&re.msg?"Media embed handler error: "+re.msg:"Media embed handler threw unknown error.";le.notificationManager.open({type:"error",text:Ne})},Gt=le=>{const re=le.selection.getNode(),Ne=ko(re)?le.serializer.serialize(re,{selection:!0}):"",Ve=dn(Ne,le.schema),Fn=(()=>{if(bs(Ve.source,Ve.type)){const so=le.dom.getRect(re);return{width:so.w.toString().replace(/px$/,""),height:so.h.toString().replace(/px$/,"")}}else return{}})();return{embed:Ne,...Ve,...Fn}},Ht=(le,re)=>Ne=>{if(oo(Ne.url)&&Ne.url.trim().length>0){const Ve=Ne.html,Fn={...dn(Ve,re.schema),source:Ne.url,embed:Ve};le.setData(xs(Fn))}},Jt=(le,re)=>{const Ne=le.dom.select("*[data-mce-object]");for(let Ve=0;Ve<re.length;Ve++)for(let xn=Ne.length-1;xn>=0;xn--)re[Ve]===Ne[xn]&&Ne.splice(xn,1);le.selection.select(Ne[0])},lo=(le,re)=>{const Ne=le.dom.select("*[data-mce-object]");le.insertContent(re),Jt(le,Ne),le.nodeChanged()},bs=(le,re)=>yn(re)&&re==="ephox-embed-iri"&&yn(Ic(le)),ur=(le,re)=>((Ve,xn)=>Ve.width!==xn.width||Ve.height!==xn.height)(le,re)&&bs(re.source,le.type),Yn=(le,re,Ne)=>{var Ve;re.embed=ur(le,re)&&Go(Ne)?bo(Ne,{...re,embed:""}):_s((Ve=re.embed)!==null&&Ve!==void 0?Ve:"",re,!1,Ne.schema),re.embed&&(le.source===re.source||Oc(re.source))?lo(Ne,re.embed):As(Ne,re).then(xn=>{lo(Ne,xn.html)}).catch(Ke(Ne))},Er=le=>{const re=Gt(le),Ne=Yo(re),Ve=xs(re),xn=(on,Rn)=>{const Ln=Nr(Rn.getData(),"source");on.source!==Ln.source&&(Ht(hn,le)({url:Ln.source,html:""}),As(le,Ln).then(Ht(hn,le)).catch(Ke(le)))},Fn=on=>{var Rn;const Ln=Nr(on.getData()),Po=dn((Rn=Ln.embed)!==null&&Rn!==void 0?Rn:"",le.schema);on.setData(xs(Po))},so=(on,Rn,Ln)=>{const Po=Nr(on.getData(),Rn),Hs=ur(Ln,Po)&&Go(le)?{...Po,embed:""}:Po,ss=bo(le,Hs);on.setData(xs({...Hs,embed:ss}))},Os=[{name:"source",type:"urlinput",filetype:"media",label:"Source",picker_text:"Browse files"}],st=Go(le)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],ze={title:"General",name:"general",items:Wo([Os,st])},he={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},ct=[];De(le)&&ct.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),ie(le)&&ct.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const pt={title:"Advanced",name:"advanced",items:ct},zt=[ze,he];ct.length>0&&zt.push(pt);const gn={type:"tabpanel",tabs:zt},hn=le.windowManager.open({title:"Insert/Edit Media",size:"normal",body:gn,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:on=>{const Rn=Nr(on.getData());Yn(Ne.get(),Rn,le),on.close()},onChange:(on,Rn)=>{switch(Rn.name){case"source":xn(Ne.get(),on);break;case"embed":Fn(on);break;case"dimensions":case"altsource":case"poster":so(on,Rn.name,Ne.get());break}Ne.set(Nr(on.getData()))},initialData:Ve})},Ct=le=>({showDialog:()=>{Er(le)}}),uo=le=>{const re=()=>{Er(le)};le.addCommand("mceMedia",re)},dr=(le,re,Ne)=>le.length>=re.length&&le.substr(Ne,Ne+re.length)===re,vr=(le,re)=>dr(le,re,0);var dc=tinymce.util.Tools.resolve("tinymce.Env");const Dc=le=>{const re=le.name;return re==="iframe"||re==="video"||re==="audio"},us=(le,re,Ne,Ve=null)=>{const xn=le.attr(Ne);return yn(xn)?xn:Ze(re,Ne)?null:Ve},Qr=(le,re,Ne)=>{const Ve=re.name==="img"||le.name==="video",xn=Ve?"300":null,Fn=le.name==="audio"?"30":"150",so=Ve?Fn:null;re.attr({width:us(le,Ne,"width",xn),height:us(le,Ne,"height",so)})},mc=(le,re,Ne,Ve)=>{const xn=St(le.schema).parse(Ve,{context:re});for(;xn.firstChild;)Ne.append(xn.firstChild)},is=(le,re)=>{const Ne=re.name,Ve=new fo("img",1);return Ls(le,re,Ve),Qr(re,Ve,{}),Ve.attr({style:re.attr("style"),src:dc.transparentSrc,"data-mce-object":Ne,class:"mce-object mce-object-"+Ne}),Ve},Cn=(le,re)=>{var Ne;const Ve=re.name,xn=new fo("span",1);xn.attr({contentEditable:"false",style:re.attr("style"),"data-mce-object":Ve,class:"mce-preview-object mce-object-"+Ve}),Ls(le,re,xn);const Fn=le.dom.parseStyle((Ne=re.attr("style"))!==null&&Ne!==void 0?Ne:""),so=new fo(Ve,1);if(Qr(re,so,Fn),so.attr({src:re.attr("src"),style:re.attr("style"),class:re.attr("class")}),Ve==="iframe")so.attr({allowfullscreen:re.attr("allowfullscreen"),frameborder:"0",sandbox:re.attr("sandbox"),referrerpolicy:re.attr("referrerpolicy")});else{jo(["controls","crossorigin","currentTime","loop","muted","poster","preload"],de=>{so.attr(de,re.attr(de))});const ze=xn.attr("data-mce-html");yn(ze)&&mc(le,Ve,so,unescape(ze))}const Os=new fo("span",1);return Os.attr("class","mce-shim"),xn.append(so),xn.append(Os),xn},Ls=(le,re,Ne)=>{var Ve;const xn=(Ve=re.attributes)!==null&&Ve!==void 0?Ve:[];let Fn=xn.length;for(;Fn--;){const ze=xn[Fn].name;let de=xn[Fn].value;ze!=="width"&&ze!=="height"&&ze!=="style"&&!vr(ze,"data-mce-")&&((ze==="data"||ze==="src")&&(de=le.convertURL(de,ze)),Ne.attr("data-mce-p-"+ze,de))}const so=Bs({inner:!0},le.schema),Os=new fo("div",1);jo(re.children(),ze=>Os.append(ze));const st=so.serialize(Os);st&&(Ne.attr("data-mce-html",escape(st)),Ne.empty())},qr=le=>{const re=le.attr("class");return oo(re)&&/\btiny-pageembed\b/.test(re)},Ca=le=>{let re=le;for(;re=re.parent;)if(re.attr("data-ephox-embed-iri")||qr(re))return!0;return!1},ci=le=>re=>{let Ne=re.length,Ve;for(;Ne--;)Ve=re[Ne],Ve.parent&&(Ve.parent.attr("data-mce-object")||(Dc(Ve)&&Mt(le)?Ca(Ve)||Ve.replace(Cn(le,Ve)):Ca(Ve)||Ve.replace(is(le,Ve))))},mr=(le,re,Ne)=>{const Ve=le.options.get,xn=Ve("xss_sanitization"),Fn=ln(le);return St(le.schema,{sanitize:xn,validate:Fn}).parse(Ne,{context:re})},vs=le=>{le.on("PreInit",()=>{const{schema:re,serializer:Ne,parser:Ve}=le,xn=re.getBoolAttrs();jo("webkitallowfullscreen mozallowfullscreen".split(" "),Fn=>{xn[Fn]={}}),Rt({embed:["wmode"]},(Fn,so)=>{const Os=re.getElementRule(so);Os&&jo(Fn,st=>{Os.attributes[st]={},Os.attributesOrder.push(st)})}),Ve.addNodeFilter("iframe,video,audio,object,embed",ci(le)),Ne.addAttributeFilter("data-mce-object",(Fn,so)=>{var Os;let st=Fn.length;for(;st--;){const ze=Fn[st];if(!ze.parent)continue;const de=ze.attr(so),he=new fo(de,1);if(de!=="audio"){const gn=ze.attr("class");gn&&gn.indexOf("mce-preview-object")!==-1&&ze.firstChild?he.attr({width:ze.firstChild.attr("width"),height:ze.firstChild.attr("height")}):he.attr({width:ze.attr("width"),height:ze.attr("height")})}he.attr({style:ze.attr("style")});const ct=(Os=ze.attributes)!==null&&Os!==void 0?Os:[];let pt=ct.length;for(;pt--;){const gn=ct[pt].name;gn.indexOf("data-mce-p-")===0&&he.attr(gn.substr(11),ct[pt].value)}const zt=ze.attr("data-mce-html");if(zt){const gn=mr(le,de,unescape(zt));jo(gn.children(),hn=>he.append(hn))}ze.replace(he)}})}),le.on("SetContent",()=>{const re=le.dom;jo(re.select("span.mce-preview-object"),Ne=>{re.select("span.mce-shim",Ne).length===0&&re.add(Ne,"span",{class:"mce-shim"})})})},$s=le=>{le.on("ResolveName",re=>{let Ne;re.target.nodeType===1&&(Ne=re.target.getAttribute("data-mce-object"))&&(re.name=Ne)})},ec=le=>re=>{const Ne=()=>{re.setEnabled(le.selection.isEditable())};return le.on("NodeChange",Ne),Ne(),()=>{le.off("NodeChange",Ne)}},Rc=le=>{const re=()=>le.execCommand("mceMedia");le.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:re,onSetup:Ne=>{const Ve=le.selection;Ne.setActive(ko(Ve.getNode()));const xn=Ve.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",Ne.setActive).unbind,Fn=ec(le)(Ne);return()=>{xn(),Fn()}}}),le.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:re,onSetup:ec(le)})};var Qs=()=>{an.add("media",le=>(it(le),uo(le),Rc(le),$s(le),vs(le),jt(le),Ct(le)))};Qs()}()),FK}var LK;function pX(){return LK||(LK=1,hX()),$K}pX();var HK={},zK={},VK;function bX(){return VK||(VK=1,function(){var an=tinymce.util.Tools.resolve("tinymce.PluginManager");const Un=(Ke=>Gt=>Ke===Gt)(void 0),mo=Ke=>Ke==null,oo=Ke=>!mo(Ke);class In{constructor(Gt,Ht){this.tag=Gt,this.value=Ht}static some(Gt){return new In(!0,Gt)}static none(){return In.singletonNone}fold(Gt,Ht){return this.tag?Ht(this.value):Gt()}isSome(){return this.tag}isNone(){return!this.tag}map(Gt){return this.tag?In.some(Gt(this.value)):In.none()}bind(Gt){return this.tag?Gt(this.value):In.none()}exists(Gt){return this.tag&&Gt(this.value)}forall(Gt){return!this.tag||Gt(this.value)}filter(Gt){return!this.tag||Gt(this.value)?this:In.none()}getOr(Gt){return this.tag?this.value:Gt}or(Gt){return this.tag?this:Gt}getOrThunk(Gt){return this.tag?this.value:Gt()}orThunk(Gt){return this.tag?this:Gt()}getOrDie(Gt){if(this.tag)return this.value;throw new Error(Gt??"Called getOrDie on None")}static from(Gt){return oo(Gt)?In.some(Gt):In.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Gt){this.tag&&Gt(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}In.singletonNone=new In(!1);const fn=Ke=>()=>Ke,je=fn(!1),yn=(Ke,Gt,Ht)=>{for(let Jt=0,lo=Ke.length;Jt<lo;Jt++){const bs=Ke[Jt];if(Gt(bs,Jt))return In.some(bs);if(Ht(bs,Jt))break}return In.none()},Ro=(Ke,Gt)=>yn(Ke,Gt,je),Ko=(Ke,Gt)=>{for(let Ht=0;Ht<Ke.length;Ht++){const Jt=Gt(Ke[Ht],Ht);if(Jt.isSome())return Jt}return In.none()};typeof window<"u"||Function("return this;")();const jo=Ke=>{let Gt=!1,Ht;return(...Jt)=>(Gt||(Gt=!0,Ht=Ke.apply(null,Jt)),Ht)},Wo=(Ke,Gt,Ht,Jt)=>{const lo=Ke.isiOS()&&/ipad/i.test(Ht)===!0,bs=Ke.isiOS()&&!lo,ur=Ke.isiOS()||Ke.isAndroid(),Yn=ur||Jt("(pointer:coarse)"),Er=lo||!bs&&ur&&Jt("(min-device-width:768px)"),Ct=bs||ur&&!Er,uo=Gt.isSafari()&&Ke.isiOS()&&/safari/i.test(Ht)===!1,dr=!Ct&&!Er&&!uo;return{isiPad:fn(lo),isiPhone:fn(bs),isTablet:fn(Er),isPhone:fn(Ct),isTouch:fn(Yn),isAndroid:Ke.isAndroid,isiOS:Ke.isiOS,isWebView:fn(uo),isDesktop:fn(dr)}},Yo=(Ke,Gt)=>{for(let Ht=0;Ht<Ke.length;Ht++){const Jt=Ke[Ht];if(Jt.test(Gt))return Jt}},Ps=(Ke,Gt)=>{const Ht=Yo(Ke,Gt);if(!Ht)return{major:0,minor:0};const Jt=lo=>Number(Gt.replace(Ht,"$"+lo));return jn(Jt(1),Jt(2))},io=(Ke,Gt)=>{const Ht=String(Gt).toLowerCase();return Ke.length===0?Rt():Ps(Ke,Ht)},Rt=()=>jn(0,0),jn=(Ke,Gt)=>({major:Ke,minor:Gt}),Ze={nu:jn,detect:io,unknown:Rt},oe=(Ke,Gt)=>Ko(Gt.brands,Ht=>{const Jt=Ht.brand.toLowerCase();return Ro(Ke,lo=>{var bs;return Jt===((bs=lo.brand)===null||bs===void 0?void 0:bs.toLowerCase())}).map(lo=>({current:lo.name,version:Ze.nu(parseInt(Ht.version,10),0)}))}),it=(Ke,Gt)=>{const Ht=String(Gt).toLowerCase();return Ro(Ke,Jt=>Jt.search(Ht))},Zo=(Ke,Gt)=>it(Ke,Gt).map(Ht=>{const Jt=Ze.detect(Ht.versionRegexes,Gt);return{current:Ht.name,version:Jt}}),mt=(Ke,Gt)=>it(Ke,Gt).map(Ht=>{const Jt=Ze.detect(Ht.versionRegexes,Gt);return{current:Ht.name,version:Jt}}),Z=(Ke,Gt,Ht=0,Jt)=>{const lo=Ke.indexOf(Gt,Ht);return lo!==-1?Un(Jt)?!0:lo+Gt.length<=Jt:!1},Mt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ln=Ke=>Gt=>Z(Gt,Ke),On=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:Ke=>Z(Ke,"edge/")&&Z(Ke,"chrome")&&Z(Ke,"safari")&&Z(Ke,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Mt],search:Ke=>Z(Ke,"chrome")&&!Z(Ke,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:Ke=>Z(Ke,"msie")||Z(Ke,"trident")},{name:"Opera",versionRegexes:[Mt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ln("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ln("firefox")},{name:"Safari",versionRegexes:[Mt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:Ke=>(Z(Ke,"safari")||Z(Ke,"mobile/"))&&Z(Ke,"applewebkit")}],De=[{name:"Windows",search:ln("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:Ke=>Z(Ke,"iphone")||Z(Ke,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ln("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ln("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ln("linux"),versionRegexes:[]},{name:"Solaris",search:ln("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ln("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ln("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ie={browsers:fn(On),oses:fn(De)},Go="Edge",eo="Chromium",Bt="IE",A="Opera",To="Firefox",yt="Safari",Mo=()=>dn({current:void 0,version:Ze.unknown()}),dn=Ke=>{const Gt=Ke.current,Ht=Ke.version,Jt=lo=>()=>Gt===lo;return{current:Gt,version:Ht,isEdge:Jt(Go),isChromium:Jt(eo),isIE:Jt(Bt),isOpera:Jt(A),isFirefox:Jt(To),isSafari:Jt(yt)}},Qe={unknown:Mo,nu:dn},fo="Windows",Bs="iOS",St="Android",Tn="Linux",Re="macOS",ot="Solaris",F="FreeBSD",_s="ChromeOS",to=()=>wo({current:void 0,version:Ze.unknown()}),wo=Ke=>{const Gt=Ke.current,Ht=Ke.version,Jt=lo=>()=>Gt===lo;return{current:Gt,version:Ht,isWindows:Jt(fo),isiOS:Jt(Bs),isAndroid:Jt(St),isMacOS:Jt(Re),isLinux:Jt(Tn),isSolaris:Jt(ot),isFreeBSD:Jt(F),isChromeOS:Jt(_s)}},No={unknown:to,nu:wo},We={detect:(Ke,Gt,Ht)=>{const Jt=ie.browsers(),lo=ie.oses(),bs=Gt.bind(Er=>oe(Jt,Er)).orThunk(()=>Zo(Jt,Ke)).fold(Qe.unknown,Qe.nu),ur=mt(lo,Ke).fold(No.unknown,No.nu),Yn=Wo(ur,bs,Ke,Ht);return{browser:bs,os:ur,deviceType:Yn}}},Tt=Ke=>window.matchMedia(Ke).matches;let et=jo(()=>We.detect(window.navigator.userAgent,In.from(window.navigator.userAgentData),Tt));const fe=()=>et(),bo=()=>fe().os.isMacOS(),ko=()=>fe().os.isiOS(),jt=()=>{const Ke=bo()||ko();return`<script>(${(Ht=>{document.addEventListener("click",Jt=>{for(let lo=Jt.target;lo;lo=lo.parentNode)if(lo.nodeName==="A"){const ur=lo.getAttribute("href");if(ur&&ur.startsWith("#")){Jt.preventDefault();const Er=document.getElementById(ur.substring(1));Er&&Er.scrollIntoView({behavior:"smooth"});return}(Ht?Jt.metaKey:Jt.ctrlKey&&!Jt.altKey)||Jt.preventDefault()}},!1)}).toString()})(${Ke})<\/script>`};var hs=tinymce.util.Tools.resolve("tinymce.util.Tools");const Wn=Ke=>Gt=>Gt.options.get(Ke),Xs=Wn("content_style"),Ho=Wn("content_css_cors"),As=Wn("body_class"),Oc=Wn("body_id"),Js=Ke=>{var Gt;let Ht="";const Jt=Ke.dom.encode,lo=(Gt=Xs(Ke))!==null&&Gt!==void 0?Gt:"";Ht+=`<base href="${Jt(Ke.documentBaseURI.getURI())}">`;const bs=Ho(Ke)?' crossorigin="anonymous"':"";hs.each(Ke.contentCSS,dr=>{Ht+='<link type="text/css" rel="stylesheet" href="'+Jt(Ke.documentBaseURI.toAbsolute(dr))+'"'+bs+">"}),lo&&(Ht+='<style type="text/css">'+lo+"</style>");const ur=Oc(Ke),Yn=As(Ke),Er=Ke.getBody().dir,Ct=Er?' dir="'+Jt(Er)+'"':"";return"<!DOCTYPE html><html><head>"+Ht+'</head><body id="'+Jt(ur)+'" class="mce-content-body '+Jt(Yn)+'"'+Ct+">"+Ke.getContent()+jt()+"</body></html>"},ps=Ke=>{const Gt=Js(Ke);Ke.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:Gt}}).focus("close")},os=Ke=>{Ke.addCommand("mcePreview",()=>{ps(Ke)})},Nr=Ke=>{const Gt=()=>Ke.execCommand("mcePreview");Ke.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:Gt,context:"any"}),Ke.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:Gt,context:"any"})};var xs=()=>{an.add("preview",Ke=>{os(Ke),Nr(Ke)})};xs()}()),zK}var UK;function vX(){return UK||(UK=1,bX()),HK}vX();var WK={},ZK={},jK;function yX(){return jK||(jK=1,function(){var an=tinymce.util.Tools.resolve("tinymce.PluginManager");const Co=(S,_,L)=>{var J;return L(S,_.prototype)?!0:((J=S.constructor)===null||J===void 0?void 0:J.name)===_.name},Un=S=>{const _=typeof S;return S===null?"null":_==="object"&&Array.isArray(S)?"array":_==="object"&&Co(S,String,(L,J)=>J.isPrototypeOf(L))?"string":_},mo=S=>_=>Un(_)===S,oo=S=>_=>typeof _===S,In=S=>_=>S===_,fn=mo("string"),je=mo("array"),yn=oo("boolean"),Ro=In(void 0),Ko=S=>S==null,jo=S=>!Ko(S),Wo=oo("function"),Yo=oo("number"),Ps=()=>{},io=(S,_)=>L=>S(_(L)),Rt=S=>()=>S,jn=S=>S,Ze=(S,_)=>S===_;function oe(S,..._){return(...L)=>{const J=_.concat(L);return S.apply(null,J)}}const it=S=>{S()},Zo=Rt(!1),mt=Rt(!0);class Z{constructor(_,L){this.tag=_,this.value=L}static some(_){return new Z(!0,_)}static none(){return Z.singletonNone}fold(_,L){return this.tag?L(this.value):_()}isSome(){return this.tag}isNone(){return!this.tag}map(_){return this.tag?Z.some(_(this.value)):Z.none()}bind(_){return this.tag?_(this.value):Z.none()}exists(_){return this.tag&&_(this.value)}forall(_){return!this.tag||_(this.value)}filter(_){return!this.tag||_(this.value)?this:Z.none()}getOr(_){return this.tag?this.value:_}or(_){return this.tag?this:_}getOrThunk(_){return this.tag?this.value:_()}orThunk(_){return this.tag?this:_()}getOrDie(_){if(this.tag)return this.value;throw new Error(_??"Called getOrDie on None")}static from(_){return jo(_)?Z.some(_):Z.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(_){this.tag&&_(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Z.singletonNone=new Z(!1);const Mt=Object.keys,ln=Object.hasOwnProperty,On=(S,_)=>{const L=Mt(S);for(let J=0,ve=L.length;J<ve;J++){const Je=L[J],Ot=S[Je];_(Ot,Je)}},De=S=>(_,L)=>{S[L]=_},ie=(S,_,L,J)=>{On(S,(ve,Je)=>{(_(ve,Je)?L:J)(ve,Je)})},Go=(S,_)=>{const L={};return ie(S,_,De(L),Ps),L},eo=(S,_)=>{const L=[];return On(S,(J,ve)=>{L.push(_(J,ve))}),L},Bt=S=>eo(S,jn),A=S=>Mt(S).length,To=(S,_)=>yt(S,_)?Z.from(S[_]):Z.none(),yt=(S,_)=>ln.call(S,_),Mo=(S,_)=>yt(S,_)&&S[_]!==void 0&&S[_]!==null,dn=S=>{for(const _ in S)if(ln.call(S,_))return!1;return!0},Qe=Array.prototype.indexOf,fo=Array.prototype.push,Bs=(S,_)=>Qe.call(S,_),St=(S,_)=>Bs(S,_)>-1,Tn=(S,_)=>{for(let L=0,J=S.length;L<J;L++){const ve=S[L];if(_(ve,L))return!0}return!1},Re=(S,_)=>{const L=[];for(let J=0;J<S;J++)L.push(_(J));return L},ot=(S,_)=>{const L=S.length,J=new Array(L);for(let ve=0;ve<L;ve++){const Je=S[ve];J[ve]=_(Je,ve)}return J},F=(S,_)=>{for(let L=0,J=S.length;L<J;L++){const ve=S[L];_(ve,L)}},_s=(S,_)=>{for(let L=S.length-1;L>=0;L--){const J=S[L];_(J,L)}},to=(S,_)=>{const L=[],J=[];for(let ve=0,Je=S.length;ve<Je;ve++){const Ot=S[ve];(_(Ot,ve)?L:J).push(Ot)}return{pass:L,fail:J}},wo=(S,_)=>{const L=[];for(let J=0,ve=S.length;J<ve;J++){const Je=S[J];_(Je,J)&&L.push(Je)}return L},No=(S,_,L)=>(_s(S,(J,ve)=>{L=_(L,J,ve)}),L),Ic=(S,_,L)=>(F(S,(J,ve)=>{L=_(L,J,ve)}),L),We=(S,_,L)=>{for(let J=0,ve=S.length;J<ve;J++){const Je=S[J];if(_(Je,J))return Z.some(Je);if(L(Je,J))break}return Z.none()},Tt=(S,_)=>We(S,_,Zo),et=S=>{const _=[];for(let L=0,J=S.length;L<J;++L){if(!je(S[L]))throw new Error("Arr.flatten item "+L+" was not an array, input: "+S);fo.apply(_,S[L])}return _},fe=(S,_)=>et(ot(S,_)),bo=(S,_)=>{for(let L=0,J=S.length;L<J;++L){const ve=S[L];if(_(ve,L)!==!0)return!1}return!0},ko=(S,_)=>{const L={};for(let J=0,ve=S.length;J<ve;J++){const Je=S[J];L[String(Je)]=_(Je,J)}return L},jt=(S,_)=>_>=0&&_<S.length?Z.some(S[_]):Z.none(),hs=S=>jt(S,0),Wn=S=>jt(S,S.length-1),Xs=(S,_)=>{for(let L=0;L<S.length;L++){const J=_(S[L],L);if(J.isSome())return J}return Z.none()},Ho=8,As=9,Oc=11,Js=1,ps=3,os=(S,_)=>{const J=(_||document).createElement("div");if(J.innerHTML=S,!J.hasChildNodes()||J.childNodes.length>1){const ve="HTML does not have a single root node";throw console.error(ve,S),new Error(ve)}return Ke(J.childNodes[0])},Nr=(S,_)=>{const J=(_||document).createElement(S);return Ke(J)},xs=(S,_)=>{const J=(_||document).createTextNode(S);return Ke(J)},Ke=S=>{if(S==null)throw new Error("Node cannot be null or undefined");return{dom:S}},Ht={fromHtml:os,fromTag:Nr,fromText:xs,fromDom:Ke,fromPoint:(S,_,L)=>Z.from(S.dom.elementFromPoint(_,L)).map(Ke)},Jt=(S,_)=>{const L=S.dom;if(L.nodeType!==Js)return!1;{const J=L;if(J.matches!==void 0)return J.matches(_);if(J.msMatchesSelector!==void 0)return J.msMatchesSelector(_);if(J.webkitMatchesSelector!==void 0)return J.webkitMatchesSelector(_);if(J.mozMatchesSelector!==void 0)return J.mozMatchesSelector(_);throw new Error("Browser lacks native selectors")}},lo=S=>S.nodeType!==Js&&S.nodeType!==As&&S.nodeType!==Oc||S.childElementCount===0,bs=(S,_)=>{const L=_===void 0?document:_.dom;return lo(L)?[]:ot(L.querySelectorAll(S),Ht.fromDom)},ur=(S,_)=>{const L=_===void 0?document:_.dom;return lo(L)?Z.none():Z.from(L.querySelector(S)).map(Ht.fromDom)},Yn=(S,_)=>S.dom===_.dom,Er=Jt;typeof window<"u"||Function("return this;")();const Ct=S=>S.dom.nodeName.toLowerCase(),uo=S=>S.dom.nodeType,dr=S=>_=>uo(_)===S,vr=S=>uo(S)===Ho||Ct(S)==="#comment",dc=dr(Js),Dc=dr(ps),us=dr(As),Qr=dr(Oc),mc=S=>_=>dc(_)&&Ct(_)===S,is=S=>Ht.fromDom(S.dom.ownerDocument),Cn=S=>us(S)?S:is(S),Ls=S=>Z.from(S.dom.parentNode).map(Ht.fromDom),qr=(S,_)=>{const L=Wo(_)?_:Zo;let J=S.dom;const ve=[];for(;J.parentNode!==null&&J.parentNode!==void 0;){const Je=J.parentNode,Ot=Ht.fromDom(Je);if(ve.push(Ot),L(Ot)===!0)break;J=Je}return ve},Ca=S=>Z.from(S.dom.previousSibling).map(Ht.fromDom),ci=S=>Z.from(S.dom.nextSibling).map(Ht.fromDom),mr=S=>ot(S.dom.childNodes,Ht.fromDom),vs=(S,_)=>{const L=S.dom.childNodes;return Z.from(L[_]).map(Ht.fromDom)},$s=S=>vs(S,0),ec=S=>Qr(S)&&jo(S.dom.host),Rc=S=>Ht.fromDom(S.dom.getRootNode()),Qs=S=>{const _=Rc(S);return ec(_)?Z.some(_):Z.none()},le=S=>Ht.fromDom(S.dom.host),re=S=>{const _=Dc(S)?S.dom.parentNode:S.dom;if(_==null||_.ownerDocument===null)return!1;const L=_.ownerDocument;return Qs(Ht.fromDom(_)).fold(()=>L.body.contains(_),io(re,le))};var Ne=(S,_,L,J,ve)=>S(L,J)?Z.some(L):Wo(ve)&&ve(L)?Z.none():_(L,J,ve);const Ve=(S,_,L)=>{let J=S.dom;const ve=Wo(L)?L:Zo;for(;J.parentNode;){J=J.parentNode;const Je=Ht.fromDom(J);if(_(Je))return Z.some(Je);if(ve(Je))break}return Z.none()},xn=(S,_,L)=>Ne((ve,Je)=>Je(ve),Ve,S,_,L),Fn=(S,_)=>{const L=ve=>_(Ht.fromDom(ve));return Tt(S.dom.childNodes,L).map(Ht.fromDom)},so=(S,_,L)=>Ve(S,J=>Jt(J,_),L),Os=(S,_)=>Fn(S,L=>Jt(L,_)),st=(S,_)=>ur(_,S),ze=(S,_,L)=>Ne((ve,Je)=>Jt(ve,Je),so,S,_,L),de=S=>ze(S,"[contenteditable]"),he=(S,_=!1)=>re(S)?S.dom.isContentEditable:de(S).fold(Rt(_),L=>ct(L)==="true"),ct=S=>S.dom.contentEditable,pt=S=>S.nodeName.toLowerCase(),zt=S=>Ht.fromDom(S.getBody()),gn=S=>_=>Yn(_,zt(S)),hn=S=>S?S.replace(/px$/,""):"",on=S=>/^\d+(\.\d+)?$/.test(S)?S+"px":S,Rn=S=>Ht.fromDom(S.selection.getStart()),Ln=S=>Ht.fromDom(S.selection.getEnd()),Po=S=>xn(S,mc("table")).forall(he),Hs=(S,_)=>wo(mr(S),_),ss=(S,_)=>{let L=[];return F(mr(S),J=>{_(J)&&(L=L.concat([J])),L=L.concat(ss(J,_))}),L},la=(S,_)=>Hs(S,L=>Jt(L,_)),vc=(S,_)=>bs(_,S),Xn=(S,_,L)=>{if(fn(L)||yn(L)||Yo(L))S.setAttribute(_,L+"");else throw console.error("Invalid call to Attribute.set. Key ",_,":: Value ",L,":: Element ",S),new Error("Attribute value was not simple")},vo=(S,_,L)=>{Xn(S.dom,_,L)},So=(S,_)=>{const L=S.dom;On(_,(J,ve)=>{Xn(L,ve,J)})},tc=(S,_)=>{const L=S.dom.getAttribute(_);return L===null?void 0:L},nc=(S,_)=>Z.from(tc(S,_)),yc=(S,_)=>{S.dom.removeAttribute(_)},Fs=S=>Ic(S.dom.attributes,(_,L)=>(_[L.name]=L.value,_),{}),Su=(S,_,L=Ze)=>S.exists(J=>L(J,_)),Ba=S=>{const _=[],L=J=>{_.push(J)};for(let J=0;J<S.length;J++)S[J].each(L);return _},Ol=(S,_,L)=>S.isSome()&&_.isSome()?Z.some(L(S.getOrDie(),_.getOrDie())):Z.none(),Bo=S=>S.bind(jn),ai=(S,_)=>S?Z.some(_):Z.none(),er=(S,_)=>S.substring(_),Dl=(S,_,L)=>_===""||S.length>=_.length&&S.substr(L,L+_.length)===_,$a=(S,_)=>ii(S,_)?er(S,_.length):S,ii=(S,_)=>Dl(S,_,0),ol=(S=>_=>_.replace(S,""))(/^\s+|\s+$/g),Fa=S=>S.length>0,sl=S=>!Fa(S),zi=(S,_=10)=>{const L=parseInt(S,_);return isNaN(L)?Z.none():Z.some(L)},xu=S=>{const _=parseFloat(S);return isNaN(_)?Z.none():Z.some(_)},Lr=S=>S.style!==void 0&&Wo(S.style.getPropertyValue),li=(S,_,L)=>{if(!fn(L))throw console.error("Invalid call to CSS.set. Property ",_,":: Value ",L,":: Element ",S),new Error("CSS value must be a string: "+L);Lr(S)&&S.style.setProperty(_,L)},Vi=(S,_)=>{Lr(S)&&S.style.removeProperty(_)},rl=(S,_,L)=>{const J=S.dom;li(J,_,L)},Rl=(S,_)=>{const L=S.dom,ve=window.getComputedStyle(L).getPropertyValue(_);return ve===""&&!re(S)?Ia(L,_):ve},Ia=(S,_)=>Lr(S)?S.style.getPropertyValue(_):"",Or=(S,_)=>{const L=S.dom,J=Ia(L,_);return Z.from(J).filter(ve=>ve.length>0)},Dr=(S,_)=>{const L=S.dom;Vi(L,_),Su(nc(S,"style").map(ol),"")&&yc(S,"style")},jc=(S,_,L=0)=>nc(S,_).map(J=>parseInt(J,10)).getOr(L),cl=(S,_)=>al(S,_,mt),al=(S,_,L)=>fe(mr(S),J=>Jt(J,_)?L(J)?[J]:[]:al(J,_,L)),Cc=["tfoot","thead","tbody","colgroup"],U=S=>St(Cc,S),se=(S,_)=>({rows:S,columns:_}),ye=(S,_,L)=>({element:S,rowspan:_,colspan:L}),Ge=(S,_,L,J,ve,Je)=>({element:S,rowspan:_,colspan:L,row:J,column:ve,isLocked:Je}),Et=(S,_,L)=>({element:S,cells:_,section:L}),Xe=(S,_,L,J)=>({startRow:S,startCol:_,finishRow:L,finishCol:J}),cn=(S,_,L)=>({element:S,colspan:_,column:L}),ho=(S,_)=>({element:S,columns:_}),Gn=(S,_,L=Zo)=>{if(L(_))return Z.none();if(St(S,Ct(_)))return Z.some(_);const J=ve=>Jt(ve,"table")||L(ve);return so(_,S.join(","),J)},$=(S,_)=>Gn(["td","th"],S,_),V=S=>cl(S,"th,td"),ue=S=>Jt(S,"colgroup")?la(S,"col"):fe(Nt(S),_=>la(_,"col")),Ae=(S,_)=>ze(S,"table",_),nn=S=>cl(S,"tr"),Nt=S=>Ae(S).fold(Rt([]),_=>la(_,"colgroup")),es=(S,_)=>ot(S,L=>{if(Ct(L)==="colgroup"){const J=ot(ue(L),ve=>{const Je=jc(ve,"span",1);return ye(ve,1,Je)});return Et(L,J,"colgroup")}else{const J=ot(V(L),ve=>{const Je=jc(ve,"rowspan",1),Ot=jc(ve,"colspan",1);return ye(ve,Je,Ot)});return Et(L,J,_(L))}}),Hr=S=>Ls(S).map(_=>{const L=Ct(_);return U(L)?L:"tbody"}).getOr("tbody"),at=S=>{const _=nn(S),J=[...Nt(S),..._];return es(J,Hr)},Lc="data-snooker-locked-cols",Es=S=>nc(S,Lc).bind(_=>Z.from(_.match(/\d+/g))).map(_=>ko(_,mt)),ki=(S,_)=>S+","+_,yr=(S,_,L)=>Z.from(S.access[ki(_,L)]),xo=(S,_,L)=>{const J=Gc(S,ve=>L(_,ve.element));return J.length>0?Z.some(J[0]):Z.none()},Gc=(S,_)=>{const L=fe(S.all,J=>J.cells);return wo(L,_)},sc=S=>{const _={};let L=0;return F(S.cells,J=>{const ve=J.colspan;Re(ve,Je=>{const Ot=L+Je;_[Ot]=cn(J.element,ve,Ot)}),L+=ve}),_},qc=S=>{const _={},L=[],ve=hs(S).map(hi=>hi.element).bind(Ae).bind(Es).getOr({});let Je=0,Ot=0,un=0;const{pass:Jn,fail:Eo}=to(S,hi=>hi.section==="colgroup");F(Eo,hi=>{const bl=[];F(hi.cells,hd=>{let Ri=0;for(;_[ki(un,Ri)]!==void 0;)Ri++;const Qd=Mo(ve,Ri.toString()),Um=Ge(hd.element,hd.rowspan,hd.colspan,un,Ri,Qd);for(let Wm=0;Wm<hd.colspan;Wm++)for(let ei=0;ei<hd.rowspan;ei++){const Fh=un+ei,Zm=Ri+Wm,Ih=ki(Fh,Zm);_[Ih]=Um,Ot=Math.max(Ot,Zm+1)}bl.push(Um)}),Je++,L.push(Et(hi.element,bl,hi.section)),un++});const{columns:Ds,colgroups:Rs}=Wn(Jn).map(hi=>{const bl=sc(hi);return{colgroups:[ho(hi.element,Bt(bl))],columns:bl}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:se(Je,Ot),access:_,all:L,columns:Ds,colgroups:Rs}},ll={fromTable:S=>{const _=at(S);return qc(_)},generate:qc,getAt:yr,findItem:xo,filterItems:Gc,justCells:S=>fe(S.all,_=>_.cells),justColumns:S=>Bt(S.columns),hasColumns:S=>Mt(S.columns).length>0,getColumnAt:(S,_)=>Z.from(S.columns[_])};var rc=tinymce.util.Tools.resolve("tinymce.util.Tools");const wc=(S,_,L)=>{const J=S.select("td,th",_);let ve;for(let Je=0;Je<J.length;Je++){const Ot=S.getStyle(J[Je],L);if(Ro(ve)&&(ve=Ot),ve!==Ot)return""}return ve},ua=(S,_,L)=>{rc.each("left center right".split(" "),J=>{J!==L&&S.formatter.remove("align"+J,{},_)}),L&&S.formatter.apply("align"+L,{},_)},Ml=(S,_,L)=>{rc.each("top middle bottom".split(" "),J=>{J!==L&&S.formatter.remove("valign"+J,{},_)}),L&&S.formatter.apply("valign"+L,{},_)},Y=(S,_,L)=>{S.dispatch("TableModified",{...L,table:_})},ee=(S,_)=>xu(S).getOr(_),ke=(S,_,L)=>ee(Rl(S,_),L),tt=(S,_,L,J)=>{const ve=ke(S,`padding-${L}`,0),Je=ke(S,`padding-${J}`,0),Ot=ke(S,`border-${L}-width`,0),un=ke(S,`border-${J}-width`,0);return _-ve-Je-Ot-un},wn=(S,_)=>{const L=S.dom,J=L.getBoundingClientRect().width||L.offsetWidth;return tt(S,J,"left","right")},po=S=>wn(S);var Is=tinymce.util.Tools.resolve("tinymce.Env");const zr="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",wa=Re(5,S=>{const _=`${S+1}px`;return{title:_,value:_}}),Kc=ot(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],S=>({title:S,value:S.toLowerCase()})),sr="100%",Rr=S=>{var _;const L=S.dom,J=(_=L.getParent(S.selection.getStart(),L.isBlock))!==null&&_!==void 0?_:S.getBody();return po(Ht.fromDom(J))+"px"},Kr=(S,_)=>Ud(S)||!_i(S)?_:Tf(S)?{..._,width:Rr(S)}:{..._,width:sr},Hc=(S,_)=>Ud(S)||_i(S)?_:Tf(S)?{..._,width:Rr(S)}:{..._,width:sr},Tr=S=>_=>_.options.get(S),Sc=S=>{const _=S.options.register;_("table_border_widths",{processor:"object[]",default:wa}),_("table_border_styles",{processor:"object[]",default:Kc}),_("table_cell_advtab",{processor:"boolean",default:!0}),_("table_row_advtab",{processor:"boolean",default:!0}),_("table_advtab",{processor:"boolean",default:!0}),_("table_appearance_options",{processor:"boolean",default:!0}),_("table_grid",{processor:"boolean",default:!Is.deviceType.isTouch()}),_("table_cell_class_list",{processor:"object[]",default:[]}),_("table_row_class_list",{processor:"object[]",default:[]}),_("table_class_list",{processor:"object[]",default:[]}),_("table_toolbar",{processor:"string",default:zr}),_("table_background_color_map",{processor:"object[]",default:[]}),_("table_border_color_map",{processor:"object[]",default:[]})},Ts=Tr("table_sizing_mode"),ul=Tr("table_border_widths"),Pm=Tr("table_border_styles"),su=Tr("table_cell_advtab"),Hd=Tr("table_row_advtab"),zd=Tr("table_advtab"),cd=Tr("table_appearance_options"),ad=Tr("table_grid"),_i=Tr("table_style_by_css"),Sa=Tr("table_cell_class_list"),Sh=Tr("table_row_class_list"),Nl=Tr("table_class_list"),Ef=Tr("table_toolbar"),Vd=Tr("table_background_color_map"),vg=Tr("table_border_color_map"),Tf=S=>Ts(S)==="fixed",Ud=S=>Ts(S)==="responsive",kf=S=>{const _=S.options,L=_.get("table_default_styles");return _.isSet("table_default_styles")?L:Kr(S,L)},yg=S=>{const _=S.options,L=_.get("table_default_attributes");return _.isSet("table_default_attributes")?L:Hc(S,L)},id=(S,_)=>_.column>=S.startCol&&_.column+_.colspan-1<=S.finishCol&&_.row>=S.startRow&&_.row+_.rowspan-1<=S.finishRow,Cg=(S,_)=>{let L=!0;const J=oe(id,_);for(let ve=_.startRow;ve<=_.finishRow;ve++)for(let Je=_.startCol;Je<=_.finishCol;Je++)L=L&&ll.getAt(S,ve,Je).exists(J);return L?Z.some(_):Z.none()},me=(S,_)=>Xe(Math.min(S.row,_.row),Math.min(S.column,_.column),Math.max(S.row+S.rowspan-1,_.row+_.rowspan-1),Math.max(S.column+S.colspan-1,_.column+_.colspan-1)),ld=(S,_,L)=>{const J=ll.findItem(S,_,Yn),ve=ll.findItem(S,L,Yn);return J.bind(Je=>ve.map(Ot=>me(Je,Ot)))},La=(S,_,L)=>ld(S,_,L).bind(J=>Cg(S,J)),r1=(S,_,L)=>{const J=xh(S);return La(J,_,L)},xh=ll.fromTable,Eu=(S,_)=>{Ls(S).each(J=>{J.dom.insertBefore(_.dom,S.dom)})},ns=(S,_)=>{ci(S).fold(()=>{Ls(S).each(ve=>{Yc(ve,_)})},J=>{Eu(J,_)})},Mr=(S,_)=>{$s(S).fold(()=>{Yc(S,_)},J=>{S.dom.insertBefore(_.dom,J.dom)})},Yc=(S,_)=>{S.dom.appendChild(_.dom)},ru=(S,_)=>{Eu(S,_),Yc(_,S)},wg=(S,_)=>{F(_,(L,J)=>{const ve=J===0?S:_[J-1];ns(ve,L)})},ud=(S,_)=>{F(_,L=>{Yc(S,L)})},xa=S=>{const _=S.dom;_.parentNode!==null&&_.parentNode.removeChild(_)},_f=S=>{const _=mr(S);_.length>0&&wg(S,_),xa(S)},Tu=((S,_)=>{const L=Je=>{if(!S(Je))throw new Error("Can only get "+_+" value of a "+_+" node");return J(Je).getOr("")},J=Je=>S(Je)?Z.from(Je.dom.nodeValue):Z.none();return{get:L,getOption:J,set:(Je,Ot)=>{if(!S(Je))throw new Error("Can only set raw "+_+" value of a "+_+" node");Je.dom.nodeValue=Ot}}})(Dc,"text"),ku=S=>Tu.get(S),Bm=(S,_)=>Tu.set(S,_);var Ai=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],$m=()=>{const S=Eo=>Ht.fromDom(Eo.dom.cloneNode(!1)),_=Eo=>Cn(Eo).dom,L=Eo=>dc(Eo)?Ct(Eo)==="body"?!0:St(Ai,Ct(Eo)):!1,J=Eo=>dc(Eo)?St(["br","img","hr","input"],Ct(Eo)):!1,ve=Eo=>dc(Eo)&&tc(Eo,"contenteditable")==="false",Je=(Eo,Ds)=>Eo.dom.compareDocumentPosition(Ds.dom),Ot=(Eo,Ds)=>{const Rs=Fs(Eo);So(Ds,Rs)},un=Eo=>{const Ds=Ct(Eo);return St(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Ds)},Jn=Eo=>dc(Eo)?nc(Eo,"lang"):Z.none();return{up:Rt({selector:so,closest:ze,predicate:Ve,all:qr}),down:Rt({selector:vc,predicate:ss}),styles:Rt({get:Rl,getRaw:Or,set:rl,remove:Dr}),attrs:Rt({get:tc,set:vo,remove:yc,copyTo:Ot}),insert:Rt({before:Eu,after:ns,afterAll:wg,append:Yc,appendAll:ud,prepend:Mr,wrap:ru}),remove:Rt({unwrap:_f,remove:xa}),create:Rt({nu:Ht.fromTag,clone:S,text:Ht.fromText}),query:Rt({comparePosition:Je,prevSibling:Ca,nextSibling:ci}),property:Rt({children:mr,name:Ct,parent:Ls,document:_,isText:Dc,isComment:vr,isElement:dc,isSpecial:un,getLanguage:Jn,getText:ku,setText:Bm,isBoundary:L,isEmptyTag:J,isNonEditable:ve}),eq:Yn,is:Er}};const zc=(S,_,L,J)=>{const ve=L[0],Je=L.slice(1);return J(S,_,ve,Je)},_u=(S,_,L)=>L.length>0?zc(S,_,L,dl):Z.none(),dl=(S,_,L,J)=>{const ve=_(S,L);return No(J,(Je,Ot)=>{const un=_(S,Ot);return Ea(S,Je,un)},ve)},Ea=(S,_,L)=>_.bind(J=>L.filter(oe(S.eq,J))),dd=_u,c1=$m(),Of=(S,_)=>dd(c1,(L,J)=>S(J),_),Pl=S=>so(S,"table"),Wd=(S,_)=>{const L=vc(S,_);return L.length>0?Z.some(L):Z.none()},Eh=(S,_,L)=>st(S,_).bind(J=>st(S,L).bind(ve=>Of(Pl,[J,ve]).map(Je=>({first:J,last:ve,table:Je})))),Df=(S,_)=>Wd(S,_),Th=(S,_,L)=>Eh(S,_,L).bind(J=>{const ve=Jn=>Yn(S,Jn),Je="thead,tfoot,tbody,table",Ot=so(J.first,Je,ve),un=so(J.last,Je,ve);return Ot.bind(Jn=>un.bind(Eo=>Yn(Jn,Eo)?r1(J.table,J.first,J.last):Z.none()))}),kh=S=>ot(S,Ht.fromDom),_h="data-mce-selected",Bl="data-mce-first-selected",Sg="td["+Bl+"],th["+Bl+"]",ml="data-mce-last-selected",kr="td["+ml+"],th["+ml+"]",cc={selected:_h,firstSelectedSelector:Sg,lastSelectedSelector:kr},ui=S=>Ae(S).bind(_=>Df(_,cc.firstSelectedSelector)).fold(Rt(S),_=>_[0]),Zd=S=>(_,L)=>{const J=Ct(_),ve=J==="col"||J==="colgroup"?ui(_):_;return ze(ve,S,L)},jd=Zd("th,td,caption"),xc=Zd("th,td"),pn=S=>kh(S.model.table.getSelectedCells()),xg=(S,_)=>{const L=xc(S),J=L.bind(ve=>Ae(ve)).map(ve=>nn(ve));return Ol(L,J,(ve,Je)=>wo(Je,Ot=>Tn(kh(Ot.dom.cells),un=>tc(un,_)==="1"||Yn(un,ve)))).getOr([])},fl=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],di=S=>({value:Im(S)}),ys=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,md=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Fm=S=>ys.test(S)||md.test(S),Im=S=>$a(S,"#").toUpperCase(),Ah=S=>Fm(S)?Z.some({value:Im(S)}):Z.none(),ro=S=>{const _=S.toString(16);return(_.length===1?"0"+_:_).toUpperCase()},Vr=S=>{const _=ro(S.red)+ro(S.green)+ro(S.blue);return di(_)},Gd=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Xa=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Ta=(S,_,L,J)=>({red:S,green:_,blue:L,alpha:J}),mi=(S,_,L,J)=>{const ve=parseInt(S,10),Je=parseInt(_,10),Ot=parseInt(L,10),un=parseFloat(J);return Ta(ve,Je,Ot,un)},Mc=S=>{const _=Gd.exec(S);if(_!==null)return Z.some(mi(_[1],_[2],_[3],"1"));const L=Xa.exec(S);return L!==null?Z.some(mi(L[1],L[2],L[3],L[4])):Z.none()},Ha=S=>Ah(S).orThunk(()=>Mc(S).map(Vr)).getOrThunk(()=>{const _=document.createElement("canvas");_.height=1,_.width=1;const L=_.getContext("2d");L.clearRect(0,0,_.width,_.height),L.fillStyle="#FFFFFF",L.fillStyle=S,L.fillRect(0,0,1,1);const J=L.getImageData(0,0,1,1).data,ve=J[0],Je=J[1],Ot=J[2],un=J[3];return Vr(Ta(ve,Je,Ot,un))}),Oi=S=>Mc(S).map(Vr).map(_=>"#"+_.value).getOr(S),qd=S=>{let _=S;return{get:()=>_,set:ve=>{_=ve}}},Cr=S=>{const _=qd(Z.none()),L=()=>_.get().each(S);return{clear:()=>{L(),_.set(Z.none())},isSet:()=>_.get().isSome(),get:()=>_.get(),set:un=>{L(),_.set(Z.some(un))}}},Rf=()=>Cr(S=>S.unbind()),Yr=(S,_,L)=>J=>{const ve=Rf(),Je=sl(L),Ot=()=>{const un=pn(S),Jn=Eo=>S.formatter.match(_,{value:L},Eo.dom,Je);Je?(J.setActive(!Tn(un,Jn)),ve.set(S.formatter.formatChanged(_,Eo=>J.setActive(!Eo),!0))):(J.setActive(bo(un,Jn)),ve.set(S.formatter.formatChanged(_,J.setActive,!1,{value:L})))};return S.initialized?Ot():S.on("init",Ot),ve.clear},$l=S=>Mo(S,"menu"),Fl=S=>ot(S,_=>{const L=_.text||_.title||"";return $l(_)?{text:L,items:Fl(_.menu)}:{text:L,value:_.value}}),zs=S=>S.length?Z.some(Fl([{text:"Select...",value:"mce-no-match"},...S])):Z.none(),Ja=(S,_,L,J)=>ot(_,ve=>{const Je=ve.text||ve.title;return $l(ve)?{type:"nestedmenuitem",text:Je,getSubmenuItems:()=>Ja(S,ve.menu,L,J)}:{text:Je,type:"togglemenuitem",onAction:()=>J(ve.value),onSetup:Yr(S,L,ve.value)}}),Lm=(S,_)=>L=>{S.execCommand("mceTableApplyCellStyle",!1,{[_]:L})},fd=S=>fe(S,_=>$l(_)?[{..._,menu:fd(_.menu)}]:Fa(_.value)?[_]:[]),rr=(S,_,L,J)=>ve=>ve(Ja(S,_,L,J)),Au=(S,_,L)=>{const J=ot(_,ve=>({text:ve.title,value:"#"+Ha(ve.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:J.length>0?J:void 0,allowCustomColors:!1},onAction:ve=>{const Je=ve.value==="remove"?"":ve.value;S.execCommand("mceTableApplyCellStyle",!1,{[L]:Je})}}]},gl=S=>()=>{const L=S.queryCommandValue("mceTableRowType")==="header"?"body":"header";S.execCommand("mceTableRowType",!1,{type:L})},Fo=S=>()=>{const L=S.queryCommandValue("mceTableColType")==="th"?"td":"th";S.execCommand("mceTableColType",!1,{type:L})},Kd=S=>zs(Sa(S)).map(_=>({name:"class",type:"listbox",label:"Class",items:_})),Mf=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:fl}],E=S=>Mf.concat(Kd(S).toArray()),M=(S,_)=>{const J=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(Fl(Pm(S)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:_==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(J):J}},ae={normal:(S,_)=>{const L=S.dom;return{setAttrib:(Ot,un)=>{L.setAttrib(_,Ot,un)},setStyle:(Ot,un)=>{L.setStyle(_,Ot,un)},setFormat:(Ot,un)=>{un===""?S.formatter.remove(Ot,{value:null},_,!0):S.formatter.apply(Ot,{value:un},_)}}}},be=mc("th"),gt=(S,_)=>S&&_?"sectionCells":S?"section":"cells",Bn=S=>{const _=S.section==="thead",L=Su(go(S.cells),"th");return S.section==="tfoot"?{type:"footer"}:_||L?{type:"header",subType:gt(_,L)}:{type:"body"}},go=S=>{const _=wo(S,L=>be(L.element));return _.length===0?Z.some("td"):_.length===S.length?Z.some("th"):Z.none()},ao=S=>{const _=ot(S,ve=>Bn(ve).type),L=St(_,"header"),J=St(_,"footer");if(!L&&!J)return Z.some("body");{const ve=St(_,"body");return L&&!ve&&!J?Z.some("header"):!L&&!ve&&J?Z.some("footer"):Z.none()}},bn=S=>{let _=!1,L;return(...J)=>(_||(_=!0,L=S.apply(null,J)),L)},cr=(S,_)=>Xs(S.all,L=>Tt(L.cells,J=>Yn(_,J.element))),Br=(S,_,L)=>{const J=ot(_.selection,Je=>$(Je).bind(Ot=>cr(S,Ot)).filter(L)),ve=Ba(J);return ai(ve.length>0,ve)},Di=(S,_)=>_.mergable,fi=(S,_)=>_.unmergable,Oh=(S,_)=>Br(S,_,mt),Hm=(S,_)=>cr(S,_).exists(L=>!L.isLocked),Eg=(S,_)=>bo(_,L=>Hm(S,L)),ka=(S,_)=>Di(S,_).filter(L=>Eg(S,L.cells)),Dh=(S,_)=>fi(S,_).filter(L=>Eg(S,L));({...{generate:S=>{if(!je(S))throw new Error("cases must be an array");if(S.length===0)throw new Error("there must be at least one case");const _=[],L={};return F(S,(J,ve)=>{const Je=Mt(J);if(Je.length!==1)throw new Error("one and only one name per case");const Ot=Je[0],un=J[Ot];if(L[Ot]!==void 0)throw new Error("duplicate key detected:"+Ot);if(Ot==="cata")throw new Error("cannot have a case named cata (sorry)");if(!je(un))throw new Error("case arguments must be an array");_.push(Ot),L[Ot]=(...Jn)=>{const Eo=Jn.length;if(Eo!==un.length)throw new Error("Wrong number of arguments to case "+Ot+". Expected "+un.length+" ("+un+"), got "+Eo);return{fold:(...Rs)=>{if(Rs.length!==S.length)throw new Error("Wrong number of arguments to fold. Expected "+S.length+", got "+Rs.length);return Rs[ve].apply(null,Jn)},match:Rs=>{const wr=Mt(Rs);if(_.length!==wr.length)throw new Error("Wrong number of arguments to match. Expected: "+_.join(",")+`
Actual: `+wr.join(","));if(!bo(_,bl=>St(wr,bl)))throw new Error("Not all branches were specified when using match. Specified: "+wr.join(", ")+`
Required: `+_.join(", "));return Rs[Ot].apply(null,Jn)},log:Rs=>{console.log(Rs,{constructors:_,constructor:Ot,params:Jn})}}}}),L}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const fc=(S,_)=>{const L=ll.fromTable(S);return Oh(L,_).bind(ve=>{const Je=ve[ve.length-1],Ot=ve[0].row,un=Je.row+Je.rowspan,Jn=L.all.slice(Ot,un);return ao(Jn)}).getOr("")},Nf=S=>ii(S,"rgb")?Oi(S):S,_a=S=>{const _=Ht.fromDom(S);return{borderwidth:Or(_,"border-width").getOr(""),borderstyle:Or(_,"border-style").getOr(""),bordercolor:Or(_,"border-color").map(Nf).getOr(""),backgroundcolor:Or(_,"background-color").map(Nf).getOr("")}},Vn=S=>{const _=S[0],L=S.slice(1);return F(L,J=>{F(Mt(_),ve=>{On(J,(Je,Ot)=>{const un=_[ve];un!==""&&ve===Ot&&un!==Je&&(_[ve]=ve==="class"?"mce-no-match":"")})})}),_},hl=(S,_,L,J)=>Tt(S,ve=>!Ro(L.formatter.matchNode(J,_+ve))).getOr(""),Yd=oe(hl,["left","center","right"],"align"),Nh=oe(hl,["top","middle","bottom"],"valign"),Y0=(S,_)=>{const L=kf(S),J=yg(S),ve=()=>({borderstyle:To(L,"border-style").getOr(""),bordercolor:Nf(To(L,"border-color").getOr("")),backgroundcolor:Nf(To(L,"background-color").getOr(""))}),Je={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},Ot=()=>{const Ds=L["border-width"];return _i(S)&&Ds?{border:Ds}:To(J,"border").fold(()=>({}),Rs=>({border:Rs}))},un=_?ve():{},Jn=()=>{const Ds=To(L,"border-spacing").or(To(J,"cellspacing")).fold(()=>({}),wr=>({cellspacing:wr})),Rs=To(L,"border-padding").or(To(J,"cellpadding")).fold(()=>({}),wr=>({cellpadding:wr}));return{...Ds,...Rs}};return{...Je,...L,...J,...un,...Ot(),...Jn()}},Ph=S=>Ae(Ht.fromDom(S)).map(_=>{const L={selection:kh(S.cells)};return fc(_,L)}).getOr(""),Il=(S,_,L)=>{const J=(un,Jn)=>{const Eo=Or(Ht.fromDom(Jn),"border-width");return _i(S)&&Eo.isSome()?Eo.getOr(""):un.getAttrib(Jn,"border")||wc(S.dom,Jn,"border-width")||wc(S.dom,Jn,"border")||""},ve=S.dom,Je=_i(S)?ve.getStyle(_,"border-spacing")||ve.getAttrib(_,"cellspacing"):ve.getAttrib(_,"cellspacing")||ve.getStyle(_,"border-spacing"),Ot=_i(S)?wc(ve,_,"padding")||ve.getAttrib(_,"cellpadding"):ve.getAttrib(_,"cellpadding")||wc(ve,_,"padding");return{width:ve.getStyle(_,"width")||ve.getAttrib(_,"width"),height:ve.getStyle(_,"height")||ve.getAttrib(_,"height"),cellspacing:Je??"",cellpadding:Ot??"",border:J(ve,_),caption:!!ve.select("caption",_)[0],class:ve.getAttrib(_,"class",""),align:Yd(S,_),...L?_a(_):{}}},Ou=(S,_,L)=>{const J=S.dom;return{height:J.getStyle(_,"height")||J.getAttrib(_,"height"),class:J.getAttrib(_,"class",""),type:Ph(_),align:Yd(S,_),...L?_a(_):{}}},Xd=(S,_,L,J)=>{const ve=S.dom,Je=J.getOr(_);return{width:((un,Jn)=>ve.getStyle(un,Jn)||ve.getAttrib(un,Jn))(Je,"width"),scope:ve.getAttrib(_,"scope"),celltype:pt(_),class:ve.getAttrib(_,"class",""),halign:Yd(S,_),valign:Nh(S,_),...L?_a(_):{}}},Vt=(S,_)=>{const L=ll.fromTable(S),J=ll.justCells(L),ve=wo(J,Je=>Tn(_,Ot=>Yn(Je.element,Ot)));return ot(ve,Je=>({element:Je.element.dom,column:ll.getColumnAt(L,Je.column).map(Ot=>Ot.element.dom)}))},pl=(S,_,L,J)=>{J("scope")&&S.setAttrib("scope",L.scope),J("class")&&L.class!=="mce-no-match"&&S.setAttrib("class",L.class),J("width")&&_.setStyle("width",on(L.width))},a1=(S,_,L)=>{L("backgroundcolor")&&S.setFormat("tablecellbackgroundcolor",_.backgroundcolor),L("bordercolor")&&S.setFormat("tablecellbordercolor",_.bordercolor),L("borderstyle")&&S.setFormat("tablecellborderstyle",_.borderstyle),L("borderwidth")&&S.setFormat("tablecellborderwidth",on(_.borderwidth))},zm=(S,_,L,J)=>{const ve=_.length===1;F(_,Je=>{const Ot=Je.element,un=ve?mt:J,Jn=ae.normal(S,Ot),Eo=Je.column.map(Ds=>ae.normal(S,Ds)).getOr(Jn);pl(Jn,Eo,L,un),su(S)&&a1(Jn,L,un),J("halign")&&ua(S,Ot,L.halign),J("valign")&&Ml(S,Ot,L.valign)})},Ll=(S,_)=>{S.execCommand("mceTableCellType",!1,{type:_.celltype,no_events:!0})},Tg=(S,_,L,J)=>{const ve=Go(J,(Je,Ot)=>L[Ot]!==Je);A(ve)>0&&_.length>=1&&Ae(_[0]).each(Je=>{const Ot=Vt(Je,_),un=A(Go(ve,(Eo,Ds)=>Ds!=="scope"&&Ds!=="celltype"))>0,Jn=yt(ve,"celltype");(un||yt(ve,"scope"))&&zm(S,Ot,J,oe(yt,ve)),Jn&&Ll(S,J),Y(S,Je.dom,{structure:Jn,style:un})})},Jd=(S,_,L,J)=>{const ve=J.getData();J.close(),S.undoManager.transact(()=>{Tg(S,_,L,ve),S.focus()})},Vm=(S,_)=>{const L=Ae(_[0]).map(J=>ot(Vt(J,_),ve=>Xd(S,ve.element,su(S),ve.column)));return Vn(L.getOrDie())},kg=S=>{const _=pn(S);if(_.length===0)return;const L=Vm(S,_),J={type:"tabpanel",tabs:[{title:"General",name:"general",items:E(S)},M(S,"cell")]},ve={type:"panel",items:[{type:"grid",columns:2,items:E(S)}]};S.windowManager.open({title:"Cell Properties",size:"normal",body:su(S)?J:ve,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:L,onSubmit:oe(Jd,S,_,L)})},cu=S=>zs(Sh(S)).map(_=>({name:"class",type:"listbox",label:"Class",items:_})),X0=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],_r=S=>X0.concat(cu(S).toArray()),wt=(S,_,L)=>{L("class")&&_.class!=="mce-no-match"&&S.setAttrib("class",_.class),L("height")&&S.setStyle("height",on(_.height))},Qa=(S,_,L)=>{L("backgroundcolor")&&S.setStyle("background-color",_.backgroundcolor),L("bordercolor")&&S.setStyle("border-color",_.bordercolor),L("borderstyle")&&S.setStyle("border-style",_.borderstyle)},au=(S,_,L,J)=>{const Je=_.length===1?mt:J;F(_,Ot=>{const un=la(Ht.fromDom(Ot),"td,th"),Jn=ae.normal(S,Ot);wt(Jn,L,Je),Hd(S)&&Qa(Jn,L,Je),J("height")&&F(un,Eo=>{S.dom.setStyle(Eo.dom,"height",null)}),J("align")&&ua(S,Ot,L.align)})},Nc=(S,_)=>{S.execCommand("mceTableRowType",!1,{type:_.type,no_events:!0})},Pf=(S,_,L,J)=>{const ve=Go(J,(Je,Ot)=>L[Ot]!==Je);if(A(ve)>0){const Je=yt(ve,"type"),Ot=Je?A(ve)>1:!0;Ot&&au(S,_,J,oe(yt,ve)),Je&&Nc(S,J),Ae(Ht.fromDom(_[0])).each(un=>Y(S,un.dom,{structure:Je,style:Ot}))}},Pc=(S,_,L,J)=>{const ve=J.getData();J.close(),S.undoManager.transact(()=>{Pf(S,_,L,ve),S.focus()})},ls=S=>{const _=xg(Rn(S),cc.selected);if(_.length===0)return;const L=ot(_,Ot=>Ou(S,Ot.dom,Hd(S))),J=Vn(L),ve={type:"tabpanel",tabs:[{title:"General",name:"general",items:_r(S)},M(S,"row")]},Je={type:"panel",items:[{type:"grid",columns:2,items:_r(S)}]};S.windowManager.open({title:"Row Properties",size:"normal",body:Hd(S)?ve:Je,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:J,onSubmit:oe(Pc,S,ot(_,Ot=>Ot.dom),J)})},Bh=(S,_,L)=>{const J=L?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],ve=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],Je=cd(S)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],Ot=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],un=_.length>0?[{name:"class",type:"listbox",label:"Class",items:_}]:[];return J.concat(ve).concat(Je).concat(Ot).concat(un)},nt=(S,_,L,J)=>{if(_.tagName==="TD"||_.tagName==="TH")fn(L)&&jo(J)?S.setStyle(_,L,J):S.setStyles(_,L);else if(_.children)for(let ve=0;ve<_.children.length;ve++)nt(S,_.children[ve],L,J)},ds=(S,_,L,J)=>{const ve=S.dom,Je={},Ot={},un=_i(S),Jn=zd(S),Eo=parseFloat(L.border)===0;if(!Ro(L.class)&&L.class!=="mce-no-match"&&(Je.class=L.class),Ot.height=on(L.height),un?Ot.width=on(L.width):ve.getAttrib(_,"width")&&(Je.width=hn(L.width)),un?(Eo?(Je.border=0,Ot["border-width"]=""):(Ot["border-width"]=on(L.border),Je.border=1),Ot["border-spacing"]=on(L.cellspacing)):(Je.border=Eo?0:L.border,Je.cellpadding=L.cellpadding,Je.cellspacing=L.cellspacing),un&&_.children){const Ds={};if(Eo?Ds["border-width"]="":J.border&&(Ds["border-width"]=on(L.border)),J.cellpadding&&(Ds.padding=on(L.cellpadding)),Jn&&J.bordercolor&&(Ds["border-color"]=L.bordercolor),!dn(Ds))for(let Rs=0;Rs<_.children.length;Rs++)nt(ve,_.children[Rs],Ds)}if(Jn){const Ds=L;Ot["background-color"]=Ds.backgroundcolor,Ot["border-color"]=Ds.bordercolor,Ot["border-style"]=Ds.borderstyle}ve.setStyles(_,{...kf(S),...Ot}),ve.setAttribs(_,{...yg(S),...Je})},i1=(S,_,L,J)=>{const ve=S.dom,Je=J.getData(),Ot=Go(Je,(un,Jn)=>L[Jn]!==un);J.close(),S.undoManager.transact(()=>{if(!_){const un=zi(Je.cols).getOr(1),Jn=zi(Je.rows).getOr(1);S.execCommand("mceInsertTable",!1,{rows:Jn,columns:un}),_=xc(Rn(S),gn(S)).bind(Eo=>Ae(Eo,gn(S))).map(Eo=>Eo.dom).getOrDie()}if(A(Ot)>0){const un={border:yt(Ot,"border"),bordercolor:yt(Ot,"bordercolor"),cellpadding:yt(Ot,"cellpadding")};ds(S,_,Je,un);const Jn=ve.select("caption",_)[0];(Jn&&!Je.caption||!Jn&&Je.caption)&&S.execCommand("mceTableToggleCaption"),ua(S,_,Je.align)}if(S.focus(),S.addVisual(),A(Ot)>0){const un=yt(Ot,"caption"),Jn=un?A(Ot)>1:!0;Y(S,_,{structure:un,style:Jn})}})},Xr=(S,_)=>{const L=S.dom;let J,ve=Y0(S,zd(S));_?(ve.cols="1",ve.rows="1",zd(S)&&(ve.borderstyle="",ve.bordercolor="",ve.backgroundcolor="")):(J=L.getParent(S.selection.getStart(),"table",S.getBody()),J?ve=Il(S,J,zd(S)):zd(S)&&(ve.borderstyle="",ve.bordercolor="",ve.backgroundcolor=""));const Je=zs(Nl(S));Je.isSome()&&ve.class&&(ve.class=ve.class.replace(/\s*mce\-item\-table\s*/g,""));const Ot={type:"grid",columns:2,items:Bh(S,Je.getOr([]),_)},un=()=>({type:"panel",items:[Ot]}),Jn=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[Ot]},M(S,"table")]}),Eo=zd(S)?Jn():un();S.windowManager.open({title:"Table Properties",size:"normal",body:Eo,onSubmit:oe(i1,S,J,ve),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ve})},Hl=S=>{const _=L=>{Po(Rn(S))&&L()};On({mceTableProps:oe(Xr,S,!1),mceTableRowProps:oe(ls,S),mceTableCellProps:oe(kg,S),mceInsertTableDialog:oe(Xr,S,!0)},(L,J)=>S.addCommand(J,()=>_(L)))},Xc=(S,_)=>Os(S,_).isSome(),ay=jn,Du=S=>{const _=(J,ve)=>nc(J,ve).exists(Je=>parseInt(Je,10)>1),L=J=>_(J,"rowspan")||_(J,"colspan");return S.length>0&&bo(S,L)?Z.some(S):Z.none()},J0=(S,_,L)=>_.length<=1?Z.none():Th(S,L.firstSelectedSelector,L.lastSelectedSelector).map(J=>({bounds:J,cells:_})),gi=S=>({element:S,mergable:Z.none(),unmergable:Z.none(),selection:[S]}),ms=(S,_,L)=>({element:L,mergable:J0(_,S,cc),unmergable:Du(S),selection:ay(S)}),Ru=S=>{const _=qd(Z.none()),L=qd([]);let J=Z.none();const ve=mc("caption"),Je=zo=>J.forall(fr=>!fr[zo]),Ot=()=>jd(Rn(S),gn(S)),un=()=>jd(Ln(S),gn(S)),Jn=()=>Ot().bind(zo=>Bo(Ol(Ae(zo),un().bind(Ae),(fr,Ec)=>Yn(fr,Ec)?ve(zo)?Z.some(gi(zo)):Z.some(ms(pn(S),fr,zo)):Z.none()))),Eo=zo=>Ae(zo.element).map(Ec=>{const vl=ll.fromTable(Ec),Mi=Oh(vl,zo).getOr([]),Lh=Ic(Mi,(em,tm)=>(tm.isLocked&&(em.onAny=!0,tm.column===0?em.onFirst=!0:tm.column+tm.colspan>=vl.grid.columns&&(em.onLast=!0)),em),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:ka(vl,zo).isSome(),unmergeable:Dh(vl,zo).isSome(),locked:Lh}}),Ds=()=>{_.set(bn(Jn)()),J=_.get().bind(Eo),F(L.get(),it)},Rs=zo=>(zo(),L.set(L.get().concat([zo])),()=>{L.set(wo(L.get(),fr=>fr!==zo))}),wr=(zo,fr)=>Rs(()=>_.get().fold(()=>{zo.setEnabled(!1)},Ec=>{zo.setEnabled(!fr(Ec)&&S.selection.isEditable())})),hi=(zo,fr,Ec)=>Rs(()=>_.get().fold(()=>{zo.setEnabled(!1),zo.setActive(!1)},vl=>{zo.setEnabled(!fr(vl)&&S.selection.isEditable()),zo.setActive(Ec(vl))})),bl=zo=>J.exists(fr=>fr.locked[zo]),hd=zo=>wr(zo,fr=>!1),Ri=zo=>wr(zo,fr=>ve(fr.element)),Qd=zo=>fr=>wr(fr,Ec=>ve(Ec.element)||bl(zo)),Um=zo=>fr=>wr(fr,Ec=>ve(Ec.element)||zo().isNone()),Wm=(zo,fr)=>Ec=>wr(Ec,vl=>ve(vl.element)||zo().isNone()||bl(fr)),ei=zo=>wr(zo,fr=>Je("mergeable")),Fh=zo=>wr(zo,fr=>Je("unmergeable")),Zm=zo=>hi(zo,Zo,fr=>Ae(fr.element,gn(S)).exists(vl=>Xc(vl,"caption"))),Ih=(zo,fr)=>Ec=>hi(Ec,vl=>ve(vl.element),()=>S.queryCommandValue(zo)===fr),Q0=Ih("mceTableRowType","header"),Vc=Ih("mceTableColType","th");return S.on("NodeChange ExecCommand TableSelectorChange",Ds),{onSetupTable:hd,onSetupCellOrRow:Ri,onSetupColumn:Qd,onSetupPasteable:Um,onSetupPasteableColumn:Wm,onSetupMergeable:ei,onSetupUnmergeable:Fh,resetTargets:Ds,onSetupTableWithCaption:Zm,onSetupTableRowHeaders:Q0,onSetupTableColumnHeaders:Vc,targets:_.get}};var _g=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const $r="x-tinymce/dom-table-",$h=$r+"rows",gd=$r+"columns",l1=S=>{var _;const L=(_=_g.read())!==null&&_!==void 0?_:[];return Xs(L,J=>Z.from(J.getType(S)))},Aa=()=>l1($h),Ui=()=>l1(gd),Ee=S=>_=>{const L=()=>{_.setEnabled(S.selection.isEditable())};return S.on("NodeChange",L),L(),()=>{S.off("NodeChange",L)}},Wi=(S,_)=>{S.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:Ee(S),fetch:un=>un("inserttable | cell row column | advtablesort | tableprops deletetable")});const L=un=>()=>S.execCommand(un),J=(un,Jn)=>{S.queryCommandSupported(Jn.command)&&S.ui.registry.addButton(un,{...Jn,onAction:Wo(Jn.onAction)?Jn.onAction:L(Jn.command)})},ve=(un,Jn)=>{S.queryCommandSupported(Jn.command)&&S.ui.registry.addToggleButton(un,{...Jn,onAction:Wo(Jn.onAction)?Jn.onAction:L(Jn.command)})};J("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:_.onSetupTable}),J("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:_.onSetupTable}),J("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:_.onSetupCellOrRow}),J("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:_.onSetupMergeable}),J("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:_.onSetupUnmergeable}),J("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:_.onSetupCellOrRow}),J("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:_.onSetupCellOrRow}),J("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:_.onSetupCellOrRow}),J("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:_.onSetupCellOrRow}),J("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:_.onSetupColumn("onFirst")}),J("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:_.onSetupColumn("onLast")}),J("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:_.onSetupColumn("onAny")}),J("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:_.onSetupCellOrRow}),J("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:_.onSetupCellOrRow}),J("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:_.onSetupPasteable(Aa)}),J("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:_.onSetupPasteable(Aa)}),J("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:_.onSetupColumn("onAny")}),J("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:_.onSetupColumn("onAny")}),J("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:_.onSetupPasteableColumn(Ui,"onFirst")}),J("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:_.onSetupPasteableColumn(Ui,"onLast")}),J("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:Ee(S)});const Je=fd(Nl(S));Je.length!==0&&S.queryCommandSupported("mceTableToggleClass")&&S.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:rr(S,Je,"tableclass",un=>S.execCommand("mceTableToggleClass",!1,un)),onSetup:_.onSetupTable});const Ot=fd(Sa(S));Ot.length!==0&&S.queryCommandSupported("mceTableCellToggleClass")&&S.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:rr(S,Ot,"tablecellclass",un=>S.execCommand("mceTableCellToggleClass",!1,un)),onSetup:_.onSetupCellOrRow}),S.queryCommandSupported("mceTableApplyCellStyle")&&(S.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:rr(S,fl,"tablecellverticalalign",Lm(S,"vertical-align")),onSetup:_.onSetupCellOrRow}),S.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:rr(S,ul(S),"tablecellborderwidth",Lm(S,"border-width")),onSetup:_.onSetupCellOrRow}),S.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:rr(S,Pm(S),"tablecellborderstyle",Lm(S,"border-style")),onSetup:_.onSetupCellOrRow}),S.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:un=>un(Au(S,Vd(S),"background-color")),onSetup:_.onSetupCellOrRow}),S.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:un=>un(Au(S,vg(S),"border-color")),onSetup:_.onSetupCellOrRow})),ve("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:_.onSetupTableWithCaption}),ve("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:gl(S),onSetup:_.onSetupTableRowHeaders}),ve("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Fo(S),onSetup:_.onSetupTableColumnHeaders})},Bc=S=>{const _=J=>S.dom.is(J,"table")&&S.getBody().contains(J)&&S.dom.isEditable(J.parentNode),L=Ef(S);L.length>0&&S.ui.registry.addContextToolbar("table",{predicate:_,items:L,scope:"node",position:"node"})},ar=S=>_=>{const L=()=>{_.setEnabled(S.selection.isEditable())};return S.on("NodeChange",L),L(),()=>{S.off("NodeChange",L)}},zl=(S,_)=>{const L=Rs=>()=>S.execCommand(Rs),J=(Rs,wr)=>S.queryCommandSupported(wr.command)?(S.ui.registry.addMenuItem(Rs,{...wr,onAction:Wo(wr.onAction)?wr.onAction:L(wr.command)}),!0):!1,ve=(Rs,wr)=>{S.queryCommandSupported(wr.command)&&S.ui.registry.addToggleMenuItem(Rs,{...wr,onAction:Wo(wr.onAction)?wr.onAction:L(wr.command)})},Je=Rs=>{S.execCommand("mceInsertTable",!1,{rows:Rs.numRows,columns:Rs.numColumns})},Ot=[J("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:_.onSetupCellOrRow}),J("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:_.onSetupCellOrRow}),J("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:_.onSetupCellOrRow}),J("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:_.onSetupCellOrRow}),J("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:_.onSetupCellOrRow}),J("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:_.onSetupCellOrRow}),J("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:_.onSetupPasteable(Aa)}),J("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:_.onSetupPasteable(Aa)})],un=[J("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:_.onSetupColumn("onFirst")}),J("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:_.onSetupColumn("onLast")}),J("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:_.onSetupColumn("onAny")}),J("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:_.onSetupColumn("onAny")}),J("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:_.onSetupColumn("onAny")}),J("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:_.onSetupPasteableColumn(Ui,"onFirst")}),J("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:_.onSetupPasteableColumn(Ui,"onLast")})],Jn=[J("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:_.onSetupCellOrRow}),J("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:_.onSetupMergeable}),J("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:_.onSetupUnmergeable})];ad(S)?S.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:Je}],onSetup:ar(S)}):S.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:L("mceInsertTableDialog"),onSetup:ar(S)}),S.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:L("mceInsertTableDialog"),onSetup:ar(S)}),J("tableprops",{text:"Table properties",onSetup:_.onSetupTable,command:"mceTableProps"}),J("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:_.onSetupTable,command:"mceTableDelete"}),St(Ot,!0)&&S.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:Rt("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),St(un,!0)&&S.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:Rt("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),St(Jn,!0)&&S.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:Rt("tablecellprops tablemergecells tablesplitcells")}),S.ui.registry.addContextMenu("table",{update:()=>(_.resetTargets(),_.targets().fold(Rt(""),Rs=>Ct(Rs.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const Eo=fd(Nl(S));Eo.length!==0&&S.queryCommandSupported("mceTableToggleClass")&&S.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>Ja(S,Eo,"tableclass",Rs=>S.execCommand("mceTableToggleClass",!1,Rs)),onSetup:_.onSetupTable});const Ds=fd(Sa(S));Ds.length!==0&&S.queryCommandSupported("mceTableCellToggleClass")&&S.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>Ja(S,Ds,"tablecellclass",Rs=>S.execCommand("mceTableCellToggleClass",!1,Rs)),onSetup:_.onSetupCellOrRow}),S.queryCommandSupported("mceTableApplyCellStyle")&&(S.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>Ja(S,fl,"tablecellverticalalign",Lm(S,"vertical-align")),onSetup:_.onSetupCellOrRow}),S.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>Ja(S,ul(S),"tablecellborderwidth",Lm(S,"border-width")),onSetup:_.onSetupCellOrRow}),S.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>Ja(S,Pm(S),"tablecellborderstyle",Lm(S,"border-style")),onSetup:_.onSetupCellOrRow}),S.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>Au(S,Vd(S),"background-color"),onSetup:_.onSetupCellOrRow}),S.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>Au(S,vg(S),"border-color"),onSetup:_.onSetupCellOrRow})),ve("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:_.onSetupTableWithCaption}),ve("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:gl(S),onSetup:_.onSetupTableRowHeaders}),ve("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Fo(S),onSetup:_.onSetupTableRowHeaders})},Ur=S=>{const _=Ru(S);Sc(S),Hl(S),zl(S,_),Wi(S,_),Bc(S)};var js=()=>{an.add("table",Ur)};js()}()),ZK}var GK;function CX(){return GK||(GK=1,yX()),WK}CX();var qK={},KK={},YK;function wX(){return YK||(YK=1,function(){var an=tinymce.util.Tools.resolve("tinymce.PluginManager");const Un=(We=>Tt=>We===Tt)(null),mo=We=>We,oo=(We,Tt)=>{const et=We.length,fe=new Array(et);for(let bo=0;bo<et;bo++){const ko=We[bo];fe[bo]=Tt(ko,bo)}return fe},fn={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\uFEFF￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:"[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]"},je={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},yn=[new RegExp(fn.aletter),new RegExp(fn.midnumlet),new RegExp(fn.midletter),new RegExp(fn.midnum),new RegExp(fn.numeric),new RegExp(fn.cr),new RegExp(fn.lf),new RegExp(fn.newline),new RegExp(fn.extend),new RegExp(fn.format),new RegExp(fn.katakana),new RegExp(fn.extendnumlet),new RegExp("@")],Ro="",Ko=new RegExp("^"+fn.punctuation+"$"),jo=/^\s+$/,Wo=yn,Yo=je.OTHER,Ps=We=>{let Tt=Yo;const et=Wo.length;for(let fe=0;fe<et;++fe){const bo=Wo[fe];if(bo&&bo.test(We)){Tt=fe;break}}return Tt},io=We=>{const Tt={};return et=>{if(Tt[et])return Tt[et];{const fe=We(et);return Tt[et]=fe,fe}}},Rt=We=>{const Tt=io(Ps);return oo(We,Tt)},jn=(We,Tt)=>{const et=We[Tt],fe=We[Tt+1];if(Tt<0||Tt>We.length-1&&Tt!==0||et===je.ALETTER&&fe===je.ALETTER)return!1;const bo=We[Tt+2];if(et===je.ALETTER&&(fe===je.MIDLETTER||fe===je.MIDNUMLET||fe===je.AT)&&bo===je.ALETTER)return!1;const ko=We[Tt-1];return(et===je.MIDLETTER||et===je.MIDNUMLET||fe===je.AT)&&fe===je.ALETTER&&ko===je.ALETTER||(et===je.NUMERIC||et===je.ALETTER)&&(fe===je.NUMERIC||fe===je.ALETTER)||(et===je.MIDNUM||et===je.MIDNUMLET)&&fe===je.NUMERIC&&ko===je.NUMERIC||et===je.NUMERIC&&(fe===je.MIDNUM||fe===je.MIDNUMLET)&&bo===je.NUMERIC||(et===je.EXTEND||et===je.FORMAT)&&(fe===je.ALETTER||fe===je.NUMERIC||fe===je.KATAKANA||fe===je.EXTEND||fe===je.FORMAT)||(fe===je.EXTEND||fe===je.FORMAT&&(bo===je.ALETTER||bo===je.NUMERIC||bo===je.KATAKANA||bo===je.EXTEND||bo===je.FORMAT))&&(et===je.ALETTER||et===je.NUMERIC||et===je.KATAKANA||et===je.EXTEND||et===je.FORMAT)||et===je.CR&&fe===je.LF?!1:et===je.NEWLINE||et===je.CR||et===je.LF||fe===je.NEWLINE||fe===je.CR||fe===je.LF?!0:!(et===je.KATAKANA&&fe===je.KATAKANA||fe===je.EXTENDNUMLET&&(et===je.ALETTER||et===je.NUMERIC||et===je.KATAKANA||et===je.EXTENDNUMLET)||et===je.EXTENDNUMLET&&(fe===je.ALETTER||fe===je.NUMERIC||fe===je.KATAKANA)||et===je.AT)},Ze=Ro,oe=jo,it=Ko,Zo=We=>We==="http"||We==="https",mt=(We,Tt)=>{let et;for(et=Tt;et<We.length&&!oe.test(We[et]);et++);return et},Z=(We,Tt)=>{const et=mt(We,Tt+1);return We.slice(Tt+1,et).join(Ze).substr(0,3)==="://"?et:Tt},Mt=(We,Tt,et,fe)=>{const bo=[],ko=[];let jt=[];for(let hs=0;hs<et.length;++hs)if(jt.push(We[hs]),jn(et,hs)){const Wn=Tt[hs];if((fe.includeWhitespace||!oe.test(Wn))&&(fe.includePunctuation||!it.test(Wn))){const Xs=hs-jt.length+1,Ho=hs+1,As=Tt.slice(Xs,Ho).join(Ze);if(Zo(As)){const Oc=Z(Tt,hs),Js=We.slice(Ho,Oc);Array.prototype.push.apply(jt,Js),hs=Oc}Tt[hs+1]==="."&&/^([a-zA-Z]\.)+$/.test(As+".")?(jt.push(We[hs+1]),ko.push({start:Xs,end:Ho+1})):ko.push({start:Xs,end:Ho}),bo.push(jt)}jt=[]}return{words:bo,indices:ko}},ln=()=>({includeWhitespace:!1,includePunctuation:!1}),On=(We,Tt,et)=>{et={...ln(),...et};const fe=oo(We,Tt),bo=Rt(fe);return Mt(We,fe,bo,et)},ie=(We,Tt,et)=>On(We,Tt,et).words,Go=We=>We.replace(/\uFEFF/g,"");var eo=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const Bt=(We,Tt)=>{const et=Tt.getBlockElements(),fe=Tt.getVoidElements(),bo=Xs=>et[Xs.nodeName]||fe[Xs.nodeName],ko=[];let jt="";const hs=new eo(We,We);let Wn;for(;Wn=hs.next();)Wn.nodeType===3?jt+=Go(Wn.data):bo(Wn)&&jt.length&&(ko.push(jt),jt="");return jt.length&&ko.push(jt),ko},A=We=>We.replace(/\u200B/g,""),To=We=>We.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,yt=(We,Tt)=>{const et=A(Bt(We,Tt).join(`
`));return ie(et.split(""),mo).length},Mo=(We,Tt)=>{const et=Bt(We,Tt).join("");return To(et)},dn=(We,Tt)=>{const et=Bt(We,Tt).join("").replace(/\s/g,"");return To(et)},Qe=(We,Tt)=>()=>Tt(We.getBody(),We.schema),fo=(We,Tt)=>()=>Tt(We.selection.getRng().cloneContents(),We.schema),Bs=We=>Qe(We,yt),St=We=>({body:{getWordCount:Bs(We),getCharacterCount:Qe(We,Mo),getCharacterCountWithoutSpaces:Qe(We,dn)},selection:{getWordCount:fo(We,yt),getCharacterCount:fo(We,Mo),getCharacterCountWithoutSpaces:fo(We,dn)},getCount:Bs(We)}),Tn=(We,Tt)=>{We.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(Tt.body.getWordCount()),String(Tt.selection.getWordCount())],["Characters (no spaces)",String(Tt.body.getCharacterCountWithoutSpaces()),String(Tt.selection.getCharacterCountWithoutSpaces())],["Characters",String(Tt.body.getCharacterCount()),String(Tt.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},Re=(We,Tt)=>{We.addCommand("mceWordCount",()=>Tn(We,Tt))},ot=(We,Tt)=>{let et=null;return{cancel:()=>{Un(et)||(clearTimeout(et),et=null)},throttle:(...ko)=>{Un(et)&&(et=setTimeout(()=>{et=null,We.apply(null,ko)},Tt))}}};var F=tinymce.util.Tools.resolve("tinymce.util.Delay");const _s=(We,Tt)=>{We.dispatch("wordCountUpdate",{wordCount:{words:Tt.body.getWordCount(),characters:Tt.body.getCharacterCount(),charactersWithoutSpaces:Tt.body.getCharacterCountWithoutSpaces()}})},to=(We,Tt)=>{_s(We,Tt)},wo=(We,Tt,et)=>{const fe=ot(()=>to(We,Tt),et);We.on("init",()=>{to(We,Tt),F.setEditorTimeout(We,()=>{We.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",fe.throttle)},0),We.on("remove",fe.cancel)})},No=We=>{const Tt=()=>We.execCommand("mceWordCount");We.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:Tt,context:"any"}),We.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:Tt,context:"any"})};var Ic=(We=300)=>{an.add("wordcount",Tt=>{const et=St(Tt);return Re(Tt,et),No(Tt),wo(Tt,et,We),et})};Ic()}()),KK}var XK;function SX(){return XK||(XK=1,wX()),qK}SX();var JK={},QK={},eY;function xX(){return eY||(eY=1,function(){var an=tinymce.util.Tools.resolve("tinymce.PluginManager");const Co=(je,yn)=>{je.focus(),je.undoManager.transact(()=>{je.setContent(yn)}),je.selection.setCursorLocation(),je.nodeChanged()},Un=je=>je.getContent({source_view:!0}),mo=je=>{const yn=Un(je);je.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:yn},onSubmit:Ro=>{Co(je,Ro.getData().code),Ro.close()}})},oo=je=>{je.addCommand("mceCodeEditor",()=>{mo(je)})},In=je=>{const yn=()=>je.execCommand("mceCodeEditor");je.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:yn}),je.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:yn})};var fn=()=>{an.add("code",je=>(oo(je),In(je),{}))};fn()}()),QK}var tY;function EX(){return tY||(tY=1,xX()),JK}EX();var nY={},oY={},sY;function TX(){return sY||(sY=1,function(){const an=de=>{let he=de;return{get:()=>he,set:zt=>{he=zt}}};var Co=tinymce.util.Tools.resolve("tinymce.PluginManager");const Un=(de,he,ct)=>{var pt;return ct(de,he.prototype)?!0:((pt=de.constructor)===null||pt===void 0?void 0:pt.name)===he.name},mo=de=>{const he=typeof de;return de===null?"null":he==="object"&&Array.isArray(de)?"array":he==="object"&&Un(de,String,(ct,pt)=>pt.isPrototypeOf(ct))?"string":he},oo=de=>he=>mo(he)===de,In=de=>he=>typeof he===de,fn=oo("string"),je=oo("array"),yn=In("boolean"),Ro=de=>de==null,Ko=de=>!Ro(de),jo=In("number"),Wo=()=>{},Yo=de=>()=>de,Ps=Yo(!0),Rt=Yo("[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]");class jn{constructor(he,ct){this.tag=he,this.value=ct}static some(he){return new jn(!0,he)}static none(){return jn.singletonNone}fold(he,ct){return this.tag?ct(this.value):he()}isSome(){return this.tag}isNone(){return!this.tag}map(he){return this.tag?jn.some(he(this.value)):jn.none()}bind(he){return this.tag?he(this.value):jn.none()}exists(he){return this.tag&&he(this.value)}forall(he){return!this.tag||he(this.value)}filter(he){return!this.tag||he(this.value)?this:jn.none()}getOr(he){return this.tag?this.value:he}or(he){return this.tag?this:he}getOrThunk(he){return this.tag?this.value:he()}orThunk(he){return this.tag?this:he()}getOrDie(he){if(this.tag)return this.value;throw new Error(he??"Called getOrDie on None")}static from(he){return Ko(he)?jn.some(he):jn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(he){this.tag&&he(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}jn.singletonNone=new jn(!1);const Ze=Rt;var oe=tinymce.util.Tools.resolve("tinymce.Env"),it=tinymce.util.Tools.resolve("tinymce.util.Tools");const Zo=Array.prototype.slice,mt=Array.prototype.push,Z=(de,he)=>{const ct=de.length,pt=new Array(ct);for(let zt=0;zt<ct;zt++){const gn=de[zt];pt[zt]=he(gn,zt)}return pt},Mt=(de,he)=>{for(let ct=0,pt=de.length;ct<pt;ct++){const zt=de[ct];he(zt,ct)}},ln=(de,he)=>{for(let ct=de.length-1;ct>=0;ct--){const pt=de[ct];he(pt,ct)}},On=(de,he)=>{if(de.length===0)return[];{let ct=he(de[0]);const pt=[];let zt=[];for(let gn=0,hn=de.length;gn<hn;gn++){const on=de[gn],Rn=he(on);Rn!==ct&&(pt.push(zt),zt=[]),ct=Rn,zt.push(on)}return zt.length!==0&&pt.push(zt),pt}},De=(de,he,ct)=>(Mt(de,(pt,zt)=>{ct=he(ct,pt,zt)}),ct),ie=de=>{const he=[];for(let ct=0,pt=de.length;ct<pt;++ct){if(!je(de[ct]))throw new Error("Arr.flatten item "+ct+" was not an array, input: "+de);mt.apply(he,de[ct])}return he},Go=(de,he)=>ie(Z(de,he)),eo=(de,he)=>{const ct=Zo.call(de,0);return ct.sort(he),ct},Bt=Object.hasOwnProperty,A=(de,he)=>Bt.call(de,he);typeof window<"u"||Function("return this;")();const To=9,yt=11,Mo=1,dn=3,Qe=de=>de.dom.nodeType,Bs=(de=>he=>Qe(he)===de)(dn),St=(de,he,ct)=>{if(fn(ct)||yn(ct)||jo(ct))de.setAttribute(he,ct+"");else throw console.error("Invalid call to Attribute.set. Key ",he,":: Value ",ct,":: Element ",de),new Error("Attribute value was not simple")},Tn=(de,he,ct)=>{St(de.dom,he,ct)},Re=(de,he)=>{const pt=(he||document).createElement("div");if(pt.innerHTML=de,!pt.hasChildNodes()||pt.childNodes.length>1){const zt="HTML does not have a single root node";throw console.error(zt,de),new Error(zt)}return _s(pt.childNodes[0])},ot=(de,he)=>{const pt=(he||document).createElement(de);return _s(pt)},F=(de,he)=>{const pt=(he||document).createTextNode(de);return _s(pt)},_s=de=>{if(de==null)throw new Error("Node cannot be null or undefined");return{dom:de}},wo={fromHtml:Re,fromTag:ot,fromText:F,fromDom:_s,fromPoint:(de,he,ct)=>jn.from(de.dom.elementFromPoint(he,ct)).map(_s)},No=de=>de.nodeType!==Mo&&de.nodeType!==To&&de.nodeType!==yt||de.childElementCount===0,Ic=(de,he)=>{const ct=he===void 0?document:he.dom;return No(ct)?[]:Z(ct.querySelectorAll(de),wo.fromDom)},We=de=>jn.from(de.dom.parentNode).map(wo.fromDom),Tt=de=>Z(de.dom.childNodes,wo.fromDom),et=(de,he)=>({element:de,offset:he}),fe=(de,he)=>{const ct=Tt(de);return ct.length>0&&he<ct.length?et(ct[he],0):et(de,he)},bo=(de,he)=>{We(de).each(pt=>{pt.dom.insertBefore(he.dom,de.dom)})},ko=(de,he)=>{de.dom.appendChild(he.dom)},jt=(de,he)=>{bo(de,he),ko(he,de)},Wn=((de,he)=>{const ct=gn=>{if(!de(gn))throw new Error("Can only get "+he+" value of a "+he+" node");return pt(gn).getOr("")},pt=gn=>de(gn)?jn.from(gn.dom.nodeValue):jn.none();return{get:ct,getOption:pt,set:(gn,hn)=>{if(!de(gn))throw new Error("Can only set raw "+he+" value of a "+he+" node");gn.dom.nodeValue=hn}}})(Bs,"text"),Xs=de=>Wn.get(de),Ho=(de,he,ct)=>(de.compareDocumentPosition(he)&ct)!==0,As=(de,he)=>Ho(de,he,Node.DOCUMENT_POSITION_PRECEDING),Oc=(de,he)=>Ic(he,de);var Js=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const ps=(de,he)=>de.isBlock(he)||A(de.schema.getVoidElements(),he.nodeName),os=(de,he)=>!de.isEditable(he),Nr=(de,he)=>de.getContentEditable(he)==="true"&&he.parentNode&&!de.isEditable(he.parentNode),xs=(de,he)=>!de.isBlock(he)&&A(de.schema.getWhitespaceElements(),he.nodeName),Ke=(de,he)=>ps(de,he)||os(de,he)||xs(de,he)||Nr(de,he),Gt=de=>de.nodeType===3,Ht=()=>({sOffset:0,fOffset:0,elements:[]}),Jt=(de,he)=>fe(wo.fromDom(de),he),lo=(de,he,ct,pt,zt,gn=!0)=>{let hn=gn?he(!1):ct;for(;hn;){const on=os(de,hn);if(on||xs(de,hn)){if(on?pt.cef(hn):pt.boundary(hn))break;hn=he(!0);continue}else if(ps(de,hn)){if(pt.boundary(hn))break}else Gt(hn)&&pt.text(hn);if(hn===zt)break;hn=he(!1)}},bs=(de,he,ct,pt,zt)=>{var gn;if(Ke(de,ct))return;const hn=(gn=de.getParent(pt,de.isBlock))!==null&&gn!==void 0?gn:de.getRoot(),on=new Js(ct,hn),Rn=zt?on.next.bind(on):on.prev.bind(on);lo(de,Rn,ct,{boundary:Ps,cef:Ps,text:Ln=>{zt?he.fOffset+=Ln.length:he.sOffset+=Ln.length,he.elements.push(wo.fromDom(Ln))}})},ur=(de,he,ct,pt,zt,gn=!0)=>{const hn=new Js(ct,he),on=[];let Rn=Ht();bs(de,Rn,ct,he,!1);const Ln=()=>(Rn.elements.length>0&&(on.push(Rn),Rn=Ht()),!1);return lo(de,hn.next.bind(hn),ct,{boundary:Ln,cef:Po=>(Ln(),zt&&on.push(...zt.cef(Po)),!1),text:Po=>{Rn.elements.push(wo.fromDom(Po)),zt&&zt.text(Po,Rn)}},pt,gn),pt&&bs(de,Rn,pt,he,!0),Ln(),on},Yn=(de,he)=>{const ct=Jt(he.startContainer,he.startOffset),pt=ct.element.dom,zt=Jt(he.endContainer,he.endOffset),gn=zt.element.dom;return ur(de,he.commonAncestorContainer,pt,gn,{text:(hn,on)=>{hn===gn?on.fOffset+=hn.length-zt.offset:hn===pt&&(on.sOffset+=ct.offset)},cef:hn=>{const on=Go(Oc(wo.fromDom(hn),"*[contenteditable=true]"),Rn=>{const Ln=Rn.dom;return ur(de,Ln,Ln)});return eo(on,(Rn,Ln)=>As(Rn.elements[0].dom,Ln.elements[0].dom)?1:-1)}},!1)},Er=(de,he)=>he.collapsed?[]:Yn(de,he),Ct=(de,he)=>{const ct=de.createRng();return ct.selectNode(he),Er(de,ct)},uo=(de,he)=>Go(he,ct=>Ct(de,ct)),dr=(de,he,ct=0,pt=de.length)=>{const zt=he.regex;zt.lastIndex=ct;const gn=[];let hn;for(;hn=zt.exec(de);){const on=hn[he.matchIndex],Rn=hn.index+hn[0].indexOf(on),Ln=Rn+on.length;if(Ln>pt)break;gn.push({start:Rn,finish:Ln}),zt.lastIndex=Ln}return gn},vr=(de,he)=>{const ct=De(de,(pt,zt)=>{const gn=Xs(zt),hn=pt.last,on=hn+gn.length,Rn=Go(he,(Ln,Po)=>Ln.start<on&&Ln.finish>hn?[{element:zt,start:Math.max(hn,Ln.start)-hn,finish:Math.min(on,Ln.finish)-hn,matchId:Po}]:[]);return{results:pt.results.concat(Rn),last:on}},{results:[],last:0}).results;return On(ct,pt=>pt.matchId)},dc=(de,he)=>Go(he,ct=>{const pt=ct.elements,zt=Z(pt,Xs).join(""),gn=dr(zt,de,ct.sOffset,zt.length-ct.fOffset);return vr(pt,gn)}),Dc=(de,he)=>{ln(de,(ct,pt)=>{ln(ct,zt=>{const gn=wo.fromDom(he.cloneNode(!1));Tn(gn,"data-mce-index",pt);const hn=zt.element.dom;if(hn.length===zt.finish&&zt.start===0)jt(zt.element,gn);else{hn.length!==zt.finish&&hn.splitText(zt.finish);const on=hn.splitText(zt.start);jt(wo.fromDom(on),gn)}})})},us=(de,he,ct,pt)=>{const zt=Ct(de,ct),gn=dc(he,zt);return Dc(gn,pt),gn.length},Qr=(de,he,ct,pt)=>{const zt=ct.getBookmark(),gn=de.select("td[data-mce-selected],th[data-mce-selected]"),hn=gn.length>0?uo(de,gn):Er(de,ct.getRng()),on=dc(he,hn);return Dc(on,pt),ct.moveToBookmark(zt),on.length},mc=de=>de.getAttribute("data-mce-index"),is=(de,he,ct,pt)=>{const zt=de.dom.create("span",{"data-mce-bogus":1});zt.className="mce-match-marker";const gn=de.getBody();return Qs(de,he,!1),pt?Qr(de.dom,ct,de.selection,zt):us(de.dom,ct,gn,zt)},Cn=de=>{var he;const ct=de.parentNode;de.firstChild&&ct.insertBefore(de.firstChild,de),(he=de.parentNode)===null||he===void 0||he.removeChild(de)},Ls=(de,he)=>{const ct=[],pt=it.toArray(de.getBody().getElementsByTagName("span"));if(pt.length)for(let zt=0;zt<pt.length;zt++){const gn=mc(pt[zt]);gn===null||!gn.length||gn===he.toString()&&ct.push(pt[zt])}return ct},qr=(de,he,ct)=>{const pt=he.get();let zt=pt.index;const gn=de.dom;ct?zt+1===pt.count?zt=0:zt++:zt-1===-1?zt=pt.count-1:zt--,gn.removeClass(Ls(de,pt.index),"mce-match-marker-selected");const hn=Ls(de,zt);return hn.length?(gn.addClass(Ls(de,zt),"mce-match-marker-selected"),de.selection.scrollIntoView(hn[0]),zt):-1},Ca=(de,he)=>{const ct=he.parentNode;de.remove(he),ct&&de.isEmpty(ct)&&de.remove(ct)},ci=(de,he)=>{const pt="("+de.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return he?`(?:^|\\s|${Ze()})`+pt+`(?=$|\\s|${Ze()})`:pt},mr=(de,he,ct,pt,zt,gn)=>{const hn=de.selection,on=ci(ct,zt),Rn=hn.isForward(),Ln={regex:new RegExp(on,pt?"g":"gi"),matchIndex:1},Po=is(de,he,Ln,gn);if(oe.browser.isSafari()&&hn.setRng(hn.getRng(),Rn),Po){const Hs=qr(de,he,!0);he.set({index:Hs,count:Po,text:ct,matchCase:pt,wholeWord:zt,inSelection:gn})}return Po},vs=(de,he)=>{const ct=qr(de,he,!0);he.set({...he.get(),index:ct})},$s=(de,he)=>{const ct=qr(de,he,!1);he.set({...he.get(),index:ct})},ec=de=>{const he=mc(de);return he!==null&&he.length>0},Rc=(de,he,ct,pt,zt)=>{const gn=he.get(),hn=gn.index;let on,Rn=hn;pt=pt!==!1;const Ln=de.getBody(),Po=it.grep(it.toArray(Ln.getElementsByTagName("span")),ec);for(let Hs=0;Hs<Po.length;Hs++){const ss=mc(Po[Hs]);let la=on=parseInt(ss,10);if(zt||la===gn.index){for(ct.length?(Po[Hs].innerText=ct,Cn(Po[Hs])):Ca(de.dom,Po[Hs]);Po[++Hs];)if(la=parseInt(mc(Po[Hs]),10),la===on)Ca(de.dom,Po[Hs]);else{Hs--;break}pt&&Rn--}else on>hn&&Po[Hs].setAttribute("data-mce-index",String(on-1))}return he.set({...gn,count:zt?0:gn.count-1,index:Rn}),pt?vs(de,he):$s(de,he),!zt&&he.get().count>0},Qs=(de,he,ct)=>{let pt,zt;const gn=he.get(),hn=it.toArray(de.getBody().getElementsByTagName("span"));for(let on=0;on<hn.length;on++){const Rn=mc(hn[on]);Rn!==null&&Rn.length&&(Rn===gn.index.toString()&&(pt||(pt=hn[on].firstChild),zt=hn[on].firstChild),Cn(hn[on]))}if(he.set({...gn,index:-1,count:0,text:""}),pt&&zt){const on=de.dom.createRng();return on.setStart(pt,0),on.setEnd(zt,zt.data.length),ct!==!1&&de.selection.setRng(on),on}else return},le=(de,he)=>he.get().count>1,re=(de,he)=>he.get().count>1,Ne=(de,he)=>({done:on=>Qs(de,he,on),find:(on,Rn,Ln,Po=!1)=>mr(de,he,on,Rn,Ln,Po),next:()=>vs(de,he),prev:()=>$s(de,he),replace:(on,Rn,Ln)=>Rc(de,he,on,Rn,Ln)}),Ve=de=>{const he=an(jn.none()),ct=()=>he.get().each(de);return{clear:()=>{ct(),he.set(jn.none())},isSet:()=>he.get().isSome(),get:()=>he.get(),set:on=>{ct(),he.set(jn.some(on))}}},xn=()=>{const de=Ve(Wo);return{...de,on:ct=>de.get().each(ct)}},Fn=(de,he)=>{const ct=xn();de.undoManager.add();const pt=it.trim(de.selection.getContent({format:"text"})),zt=Xn=>{Xn.setEnabled("next",le(de,he)),Xn.setEnabled("prev",re(de,he))},gn=Xn=>{const vo=Xn.getData(),So=he.get();he.set({...So,matchCase:vo.matchcase,wholeWord:vo.wholewords,inSelection:vo.inselection})},hn=(Xn,vo)=>{Mt(["replace","replaceall","prev","next"],nc=>Xn.setEnabled(nc,!vo))},on=(Xn,vo)=>{vo.redial(vc(Xn,vo.getData()))},Rn=(Xn,vo)=>{oe.browser.isSafari()&&oe.deviceType.isTouch()&&(vo==="find"||vo==="replace"||vo==="replaceall")&&Xn.focus(vo)},Ln=Xn=>{Qs(de,he,!1),hn(Xn,!0),zt(Xn)},Po=Xn=>{const vo=Xn.getData(),So=he.get();if(!vo.findtext.length){Ln(Xn);return}if(So.text===vo.findtext&&So.matchCase===vo.matchcase&&So.wholeWord===vo.wholewords)vs(de,he);else{const tc=mr(de,he,vo.findtext,vo.matchcase,vo.wholewords,vo.inselection);tc<=0&&on(!0,Xn),hn(Xn,tc===0)}zt(Xn)},Hs=he.get(),ss={findtext:pt,replacetext:"",wholewords:Hs.wholeWord,matchcase:Hs.matchCase,inselection:Hs.inSelection},la=Xn=>{const vo=[{type:"label",label:"Find",for:"findtext",items:[{type:"bar",items:[{type:"input",name:"findtext",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",enabled:!1,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",enabled:!1,borderless:!0}]}]},{type:"input",name:"replacetext",label:"Replace with",inputMode:"search"}];return Xn&&vo.push({type:"alertbanner",level:"error",text:"Could not find the specified string.",icon:"warning"}),vo},vc=(Xn,vo)=>({title:"Find and Replace",size:"normal",body:{type:"panel",items:la(Xn)},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",enabled:!1},{type:"custom",name:"replaceall",text:"Replace all",enabled:!1}],initialData:vo,onChange:(So,tc)=>{Xn&&on(!1,So),tc.name==="findtext"&&he.get().count>0&&Ln(So)},onAction:(So,tc)=>{const nc=So.getData();switch(tc.name){case"find":Po(So);break;case"replace":Rc(de,he,nc.replacetext)?zt(So):Ln(So);break;case"replaceall":Rc(de,he,nc.replacetext,!0,!0),Ln(So);break;case"prev":$s(de,he),zt(So);break;case"next":vs(de,he),zt(So);break;case"matchcase":case"wholewords":case"inselection":on(!1,So),gn(So),Ln(So);break}Rn(So,tc.name)},onSubmit:So=>{Po(So),Rn(So,"find")},onClose:()=>{de.focus(),Qs(de,he),de.undoManager.add()}});ct.set(de.windowManager.open(vc(!1,ss),{inline:"toolbar"}))},so=(de,he)=>{de.addCommand("SearchReplace",()=>{Fn(de,he)})},Os=(de,he)=>()=>{Fn(de,he)},st=(de,he)=>{de.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:Os(de,he),icon:"search"}),de.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:Os(de,he),icon:"search",shortcut:"Meta+F"}),de.shortcuts.add("Meta+F","",Os(de,he))};var ze=()=>{Co.add("searchreplace",de=>{const he=an({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return so(de,he),st(de,he),Ne(de,he)})};ze()}()),oY}var rY;function kX(){return rY||(rY=1,TX()),nY}kX();const _X={style:{"margin-bottom":"0"}},AX=["innerHTML"],lY=cY({__name:"tinymce",setup(an){const Co=_Y(),Un=fG({language_url:"tinymce/langs/zh-Hans.js",language:"zh-Hans",skin_url:Co.settings.app.colorScheme==="light"?"tinymce/skins/ui/oxide":"tinymce/skins/ui/oxide-dark",content_css:Co.settings.app.colorScheme==="light"?"tinymce/skins/content/default/content.min.css":"tinymce/skins/content/dark/content.min.css",min_height:250,max_height:600,selector:"textarea",plugins:"autolink autoresize fullscreen image insertdatetime link lists media preview table wordcount code searchreplace",toolbar:"undo redo | blocks | bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | forecolor backcolor removeformat | link image media table insertdatetime searchreplace | preview code fullscreen",branding:!1,menubar:!1,toolbar_mode:"sliding",insertdatetime_formats:["%Y年%m月%d日","%H点%M分%S秒","%Y-%m-%d","%H:%M:%S"],images_upload_handler:In=>new Promise(fn=>{const je=`data:image/jpeg;base64,${In.base64()}`;fn(je)})}),mo=fG("<h1>Kpu-web</h1>");aY(()=>{XY.init({})});function oo(In){window.open(In,"_blank")}return(In,fn)=>{const je=iG("ElTag"),yn=iG("el-link"),Ro=DY,Ko=iG("ElButton"),jo=wY,Wo=CY;return OY(),AY("div",null,[ry(NY),ry(jo,{title:"TinyMCE 编辑器"},{content:$w(()=>[lG("p",null,[fn[3]||(fn[3]=z4(" 安装命令：")),ry(je,null,{default:$w(()=>fn[2]||(fn[2]=[z4("pnpm add tinymce @tinymce/tinymce-vue")])),_:1})]),lG("p",_X,[fn[5]||(fn[5]=z4(" 安装成功后，在框架 /public 目录下创建 tinymce 文件夹，并将 /node_modules/tinymce 目录下的 skins 文件夹复制到 /public/tinymce 目录下；然后在到 TinyMCE 官网 ")),ry(yn,{type:"primary",href:"https://www.tiny.cloud/get-tiny/language-packages/",target:"_blank"},{default:$w(()=>fn[4]||(fn[4]=[z4(" 下载中文语言包 ")])),_:1}),fn[6]||(fn[6]=z4(" ，解压并放到 /public/tinymce 目录下。 "))])]),default:$w(()=>[ry(Ko,{onClick:fn[0]||(fn[0]=Yo=>oo("https://github.com/tinymce/tinymce"))},{icon:$w(()=>[ry(Ro,{name:"i-ep:link"})]),default:$w(()=>[fn[7]||(fn[7]=z4(" 访问 TinyMCE "))]),_:1})]),_:1}),ry(Wo,null,{default:$w(()=>[ry(_I(qY),{modelValue:_I(mo),"onUpdate:modelValue":fn[1]||(fn[1]=Yo=>RY(mo)?mo.value=Yo:null),init:_I(Un)},null,8,["modelValue","init"]),lG("div",{class:"preview",innerHTML:_I(mo)},null,8,AX)]),_:1})])}}});typeof Xq=="function"&&Xq(lY);const BX=MY(lY,[["__scopeId","data-v-fbc87afa"]]);export{BX as default};
