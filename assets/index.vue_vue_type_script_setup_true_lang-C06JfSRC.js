
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{d as _,D as A,B as $,E as L,r as k,A as V,z as K,f,o as r,w as u,y as m,j as e,c as B,H as N,b,i as C,O as w,P as U,F as P,K as S,L as v,M as x,N as E,Q as j,R as D,S as W,U as G,h as O,q as T,V as H,p as q,v as Q}from"./bootstrap-DTzpk8a9.js";import{_ as X,a as Y,b as J,c as Z,d as ee,e as te,f as oe,g as ae}from"./MenuLabel-v4UIozEX.js";const[F,se]=V("ContextMenuRoot"),ne=_({inheritAttrs:!1,__name:"ContextMenuRoot",props:{dir:{},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(a,{emit:s}){const o=a,n=s,{dir:l,modal:d}=A(o);$();const t=L(l),i=k(!1),h=k();return se({open:i,onOpenChange:c=>{i.value=c},dir:t,modal:d,triggerElement:h}),K(i,c=>{n("update:open",c)}),(c,y)=>(r(),f(e(X),{open:i.value,"onUpdate:open":y[0]||(y[0]=g=>i.value=g),dir:e(t),modal:e(d)},{default:u(()=>[m(c.$slots,"default")]),_:3},8,["open","dir","modal"]))}});function I(a){return a.pointerType!=="mouse"}const re=_({inheritAttrs:!1,__name:"ContextMenuTrigger",props:{disabled:{type:Boolean,default:!1},asChild:{type:Boolean},as:{default:"span"}},setup(a){const s=a,{disabled:o}=A(s),{forwardRef:n,currentElement:l}=$(),d=F(),t=k({x:0,y:0}),i=B(()=>({getBoundingClientRect:()=>({width:0,height:0,left:t.value.x,right:t.value.x,top:t.value.y,bottom:t.value.y,...t.value})})),h=k(0);function c(){window.clearTimeout(h.value)}function y(p){t.value={x:p.clientX,y:p.clientY},d.onOpenChange(!0)}async function g(p){o.value||(await S(),p.defaultPrevented||(c(),y(p),p.preventDefault()))}async function z(p){o.value||(await S(),I(p)&&!p.defaultPrevented&&(c(),h.value=window.setTimeout(()=>y(p),700)))}async function M(p){o.value||(await S(),I(p)&&!p.defaultPrevented&&c())}return N(()=>{l.value&&(d.triggerElement.value=l.value)}),(p,ve)=>(r(),b(P,null,[C(e(Y),{as:"template",reference:i.value},null,8,["reference"]),C(e(U),w({ref:e(n),as:p.as,"as-child":p.asChild,"data-state":e(d).open.value?"open":"closed","data-disabled":e(o)?"":void 0,style:{WebkitTouchCallout:"none",pointerEvents:"auto"}},p.$attrs,{onContextmenu:g,onPointerdown:z,onPointermove:M,onPointercancel:M,onPointerup:M}),{default:u(()=>[m(p.$slots,"default")]),_:3},16,["as","as-child","data-state","data-disabled"])],64))}}),le=_({__name:"ContextMenuPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(a){const s=a;return(o,n)=>(r(),f(e(J),v(x(s)),{default:u(()=>[m(o.$slots,"default")]),_:3},16))}}),ie=_({__name:"ContextMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},alignOffset:{default:0},avoidCollisions:{type:Boolean,default:!0},collisionBoundary:{default:()=>[]},collisionPadding:{default:0},sticky:{default:"partial"},hideWhenDetached:{type:Boolean,default:!1},positionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(a,{emit:s}){const l=E(a,s);$();const d=F(),t=k(!1);return(i,h)=>(r(),f(e(Z),w(e(l),{side:"right","side-offset":2,align:"start","update-position-strategy":"always",style:{"--reka-context-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-context-menu-content-available-width":"var(--reka-popper-available-width)","--reka-context-menu-content-available-height":"var(--reka-popper-available-height)","--reka-context-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-context-menu-trigger-height":"var(--reka-popper-anchor-height)"},onCloseAutoFocus:h[0]||(h[0]=c=>{!c.defaultPrevented&&t.value&&c.preventDefault(),t.value=!1}),onInteractOutside:h[1]||(h[1]=c=>{c.detail.originalEvent.button===2&&c.target===e(d).triggerElement.value&&c.preventDefault(),!c.defaultPrevented&&!e(d).modal.value&&(t.value=!0)})}),{default:u(()=>[m(i.$slots,"default")]),_:3},16))}}),ue=_({__name:"ContextMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(a,{emit:s}){const o=a,l=j(s);return $(),(d,t)=>(r(),f(e(ee),v(x({...o,...e(l)})),{default:u(()=>[m(d.$slots,"default")]),_:3},16))}}),de=_({__name:"ContextMenuGroup",props:{asChild:{type:Boolean},as:{}},setup(a){const s=a;return $(),(o,n)=>(r(),f(e(te),v(x(s)),{default:u(()=>[m(o.$slots,"default")]),_:3},16))}}),ce=_({__name:"ContextMenuSeparator",props:{asChild:{type:Boolean},as:{}},setup(a){const s=a;return $(),(o,n)=>(r(),f(e(oe),v(x(s)),{default:u(()=>[m(o.$slots,"default")]),_:3},16))}}),pe=_({__name:"ContextMenuLabel",props:{asChild:{type:Boolean},as:{}},setup(a){const s=a;return $(),(o,n)=>(r(),f(e(ae),v(x(s)),{default:u(()=>[m(o.$slots,"default")]),_:3},16))}}),fe=_({__name:"ContextMenu",props:{dir:{},modal:{type:Boolean}},emits:["update:open"],setup(a,{emit:s}){const l=E(a,s);return(d,t)=>(r(),f(e(ne),v(x(e(l))),{default:u(()=>[m(d.$slots,"default")]),_:3},16))}}),me=_({__name:"ContextMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(a,{emit:s}){const o=a,n=s,l=B(()=>{const{class:t,...i}=o;return i}),d=E(l,n);return(t,i)=>(r(),f(e(le),null,{default:u(()=>[C(e(ie),w(e(d),{class:e(D)("z-50 min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",o.class)}),{default:u(()=>[m(t.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),_e=_({__name:"ContextMenuGroup",props:{asChild:{type:Boolean},as:{}},setup(a){const s=a;return(o,n)=>(r(),f(e(de),v(x(s)),{default:u(()=>[m(o.$slots,"default")]),_:3},16))}}),he=_({__name:"ContextMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},emits:["select"],setup(a,{emit:s}){const o=a,n=s,l=B(()=>{const{class:t,...i}=o;return i}),d=E(l,n);return(t,i)=>(r(),f(e(ue),w(e(d),{class:e(D)("relative flex cursor-default select-none items-center rounded-sm gap-2 px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t.inset&&"pl-8",o.class)}),{default:u(()=>[m(t.$slots,"default")]),_:3},16,["class"]))}}),ye=_({__name:"ContextMenuLabel",props:{asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(a){const s=a,o=B(()=>{const{class:n,...l}=s;return l});return(n,l)=>(r(),f(e(pe),w(o.value,{class:e(D)("px-2 py-1.5 text-sm font-semibold text-foreground",n.inset&&"pl-8",s.class)}),{default:u(()=>[m(n.$slots,"default")]),_:3},16,["class"]))}}),R=_({__name:"ContextMenuSeparator",props:{asChild:{type:Boolean},as:{},class:{}},setup(a){const s=a,o=B(()=>{const{class:n,...l}=s;return l});return(n,l)=>(r(),f(e(ce),w(o.value,{class:e(D)("-mx-1 my-1 h-px bg-border",s.class)}),null,16,["class"]))}}),ge=_({__name:"ContextMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(a){const o=W(a);return(n,l)=>(r(),f(e(re),v(x(e(o))),{default:u(()=>[m(n.$slots,"default")]),_:3},16))}}),Ce={key:0,class:"size-4 flex-center"},$e=_({name:"KContextMenu",__name:"index",props:{items:{}},setup(a){const s=a,o=G(),n=B(()=>s.items.map(t=>t.filter(i=>!i.hide)).filter(t=>t.length)),l=B(()=>n.value.some(t=>t.some(i=>i.icon)));function d(t){var i;(i=t.handle)==null||i.call(t)}return(t,i)=>{const h=q;return r(),f(e(fe),{modal:!1},{default:u(()=>[C(e(ge),{"as-child":""},{default:u(()=>[m(t.$slots,"default")]),_:3}),C(e(me),{class:"z-2050"},{default:u(()=>[o.label?(r(),b(P,{key:0},[C(e(ye),null,{default:u(()=>[m(t.$slots,"label")]),_:3}),C(e(R))],64)):O("",!0),(r(!0),b(P,null,T(e(n),(c,y)=>(r(),b(P,{key:y},[C(e(_e),null,{default:u(()=>[(r(!0),b(P,null,T(c,(g,z)=>(r(),f(e(he),{key:z,disabled:g.disabled,class:"cursor-pointer",onClick:M=>d(g)},{default:u(()=>[e(l)?(r(),b("div",Ce,[g.icon?(r(),f(h,{key:0,name:g.icon,size:16},null,8,["name"])):O("",!0)])):O("",!0),H(" "+Q(g.label),1)]),_:2},1032,["disabled","onClick"]))),128))]),_:2},1024),y!==e(n).length-1?(r(),f(e(R),{key:0})):O("",!0)],64))),128))]),_:3})]),_:3})}}});export{$e as _};
