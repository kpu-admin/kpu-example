
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{_ as ge}from"./index.vue_vue_type_script_setup_true_lang-DCSa_W1a.js";import{_ as Se}from"./index.vue_vue_type_script_setup_true_lang-CvxDANHv.js";import{U as _e,r as B,c as _,z as A,H as G,ag as ee,f as Me,ai as k,o as j,a4 as we,ad as b,ah as ye,b as ne,y as Ee,s as ke,j as S,ac as Re,K as V,d as be,l as J,i as p,w as c,V as g,p as Ne,e as Be,t as Oe}from"./bootstrap-DTzpk8a9.js";import Ce from"./alert-B1ZQreqZ.js";import{b as Q}from"./route-block-B_A1xBdJ.js";import"./index-Ce4LrBVu.js";const Z={__name:"splitpanes",props:{horizontal:{type:Boolean,default:!1},pushOtherPanes:{type:Boolean,default:!0},maximizePanes:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean,default:!1}},emits:["ready","resize","resized","pane-click","pane-maximize","pane-add","pane-remove","splitter-click","splitter-dblclick"],setup(I,{emit:R}){const f=R,o=I,y=_e(),l=B([]),M=_(()=>l.value.reduce((e,n)=>(e[~~n.id]=n)&&e,{})),z=_(()=>l.value.length),v=B(null),w=B(!1),d=B({mouseDown:!1,dragging:!1,activeSplitter:null,cursorOffset:0}),P=B({splitter:null,timeoutId:null}),O=_(()=>({[`splitpanes splitpanes--${o.horizontal?"horizontal":"vertical"}`]:!0,"splitpanes--dragging":d.value.dragging})),C=()=>{document.addEventListener("mousemove",r,{passive:!1}),document.addEventListener("mouseup",E),"ontouchstart"in window&&(document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("touchend",E))},L=()=>{document.removeEventListener("mousemove",r,{passive:!1}),document.removeEventListener("mouseup",E),"ontouchstart"in window&&(document.removeEventListener("touchmove",r,{passive:!1}),document.removeEventListener("touchend",E))},T=(e,n)=>{const i=e.target.closest(".splitpanes__splitter");if(i){const{left:t,top:a}=i.getBoundingClientRect(),{clientX:s,clientY:u}="ontouchstart"in window&&e.touches?e.touches[0]:e;d.value.cursorOffset=o.horizontal?u-a:s-t}C(),d.value.mouseDown=!0,d.value.activeSplitter=n},r=e=>{d.value.mouseDown&&(e.preventDefault(),d.value.dragging=!0,requestAnimationFrame(()=>{se(ie(e)),h("resize",{event:e},!0)}))},E=e=>{d.value.dragging&&h("resized",{event:e},!0),d.value.mouseDown=!1,d.value.activeSplitter=null,setTimeout(()=>{d.value.dragging=!1,L()},100)},F=(e,n)=>{"ontouchstart"in window&&(e.preventDefault(),P.value.splitter===n?(clearTimeout(P.value.timeoutId),P.value.timeoutId=null,q(e,n),P.value.splitter=null):(P.value.splitter=n,P.value.timeoutId=setTimeout(()=>P.value.splitter=null,500))),d.value.dragging||h("splitter-click",{event:e,index:n},!0)},q=(e,n)=>{if(h("splitter-dblclick",{event:e,index:n},!0),o.maximizePanes){let i=0;l.value=l.value.map((t,a)=>(t.size=a===n?t.max:t.min,a!==n&&(i+=t.min),t)),l.value[n].size-=i,h("pane-maximize",{event:e,index:n,pane:l.value[n]}),h("resized",{event:e,index:n},!0)}},ae=(e,n)=>{h("pane-click",{event:e,index:M.value[n].index,pane:M.value[n]})},ie=e=>{const n=v.value.getBoundingClientRect(),{clientX:i,clientY:t}="ontouchstart"in window&&e.touches?e.touches[0]:e;return{x:i-(o.horizontal?0:d.value.cursorOffset)-n.left,y:t-(o.horizontal?d.value.cursorOffset:0)-n.top}},le=e=>{e=e[o.horizontal?"y":"x"];const n=v.value[o.horizontal?"clientHeight":"clientWidth"];return o.rtl&&!o.horizontal&&(e=n-e),e*100/n},se=e=>{const n=d.value.activeSplitter;let i={prevPanesSize:H(n),nextPanesSize:D(n),prevReachedMinPanes:0,nextReachedMinPanes:0};const t=0+(o.pushOtherPanes?0:i.prevPanesSize),a=100-(o.pushOtherPanes?0:i.nextPanesSize),s=Math.max(Math.min(le(e),a),t);let u=[n,n+1],m=l.value[u[0]]||null,x=l.value[u[1]]||null;const X=m.max<100&&s>=m.max+i.prevPanesSize,Pe=x.max<100&&s<=100-(x.max+D(n+1));if(X||Pe){X?(m.size=m.max,x.size=Math.max(100-m.max-i.prevPanesSize-i.nextPanesSize,0)):(m.size=Math.max(100-x.max-i.prevPanesSize-D(n+1),0),x.size=x.max);return}if(o.pushOtherPanes){const Y=oe(i,s);if(!Y)return;({sums:i,panesToResize:u}=Y),m=l.value[u[0]]||null,x=l.value[u[1]]||null}m!==null&&(m.size=Math.min(Math.max(s-i.prevPanesSize-i.prevReachedMinPanes,m.min),m.max)),x!==null&&(x.size=Math.min(Math.max(100-s-i.nextPanesSize-i.nextReachedMinPanes,x.min),x.max))},oe=(e,n)=>{const i=d.value.activeSplitter,t=[i,i+1];return n<e.prevPanesSize+l.value[t[0]].min&&(t[0]=ue(i).index,e.prevReachedMinPanes=0,t[0]<i&&l.value.forEach((a,s)=>{s>t[0]&&s<=i&&(a.size=a.min,e.prevReachedMinPanes+=a.min)}),e.prevPanesSize=H(t[0]),t[0]===void 0)?(e.prevReachedMinPanes=0,l.value[0].size=l.value[0].min,l.value.forEach((a,s)=>{s>0&&s<=i&&(a.size=a.min,e.prevReachedMinPanes+=a.min)}),l.value[t[1]].size=100-e.prevReachedMinPanes-l.value[0].min-e.prevPanesSize-e.nextPanesSize,null):n>100-e.nextPanesSize-l.value[t[1]].min&&(t[1]=re(i).index,e.nextReachedMinPanes=0,t[1]>i+1&&l.value.forEach((a,s)=>{s>i&&s<t[1]&&(a.size=a.min,e.nextReachedMinPanes+=a.min)}),e.nextPanesSize=D(t[1]-1),t[1]===void 0)?(e.nextReachedMinPanes=0,l.value.forEach((a,s)=>{s<z.value-1&&s>=i+1&&(a.size=a.min,e.nextReachedMinPanes+=a.min)}),l.value[t[0]].size=100-e.prevPanesSize-D(t[0]-1),null):{sums:e,panesToResize:t}},H=e=>l.value.reduce((n,i,t)=>n+(t<e?i.size:0),0),D=e=>l.value.reduce((n,i,t)=>n+(t>e+1?i.size:0),0),ue=e=>[...l.value].reverse().find(n=>n.index<e&&n.size>n.min)||{},re=e=>l.value.find(n=>n.index>e+1&&n.size>n.min)||{},de=()=>{var e;const n=Array.from(((e=v.value)==null?void 0:e.children)||[]);for(const i of n){const t=i.classList.contains("splitpanes__pane"),a=i.classList.contains("splitpanes__splitter");!t&&!a&&(i.remove(),console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed."))}},W=(e,n,i=!1)=>{const t=e-1,a=document.createElement("div");a.classList.add("splitpanes__splitter"),i||(a.onmousedown=s=>T(s,t),typeof window<"u"&&"ontouchstart"in window&&(a.ontouchstart=s=>T(s,t)),a.onclick=s=>F(s,t+1)),a.ondblclick=s=>q(s,t+1),n.parentNode.insertBefore(a,n)},ve=e=>{e.onmousedown=void 0,e.onclick=void 0,e.ondblclick=void 0,e.remove()},$=()=>{var e;const n=Array.from(((e=v.value)==null?void 0:e.children)||[]);for(const t of n)t.className.includes("splitpanes__splitter")&&ve(t);let i=0;for(const t of n)t.className.includes("splitpanes__pane")&&(!i&&o.firstSplitter?W(i,t,!0):i&&W(i,t),i++)},me=({uid:e,...n})=>{const i=M.value[e];for(const[t,a]of Object.entries(n))i[t]=a},pe=e=>{var n;let i=-1;Array.from(((n=v.value)==null?void 0:n.children)||[]).some(t=>(t.className.includes("splitpanes__pane")&&i++,t.isSameNode(e.el))),l.value.splice(i,0,{...e,index:i}),l.value.forEach((t,a)=>t.index=a),w.value&&V(()=>{$(),K({addedPane:l.value[i]}),h("pane-add",{pane:l.value[i]})})},ce=e=>{const n=l.value.findIndex(t=>t.id===e);l.value[n].el=null;const i=l.value.splice(n,1)[0];l.value.forEach((t,a)=>t.index=a),V(()=>{$(),h("pane-remove",{pane:i}),K({removedPane:{...i}})})},K=(e={})=>{!e.addedPane&&!e.removedPane?ze():l.value.some(n=>n.givenSize!==null||n.min||n.max<100)?he(e):fe(),w.value&&h("resized")},fe=()=>{const e=100/z.value;let n=0;const i=[],t=[];for(const a of l.value)a.size=Math.max(Math.min(e,a.max),a.min),n-=a.size,a.size>=a.max&&i.push(a.id),a.size<=a.min&&t.push(a.id);n>.1&&U(n,i,t)},ze=()=>{let e=100;const n=[],i=[];let t=0;for(const s of l.value)e-=s.size,s.givenSize!==null&&t++,s.size>=s.max&&n.push(s.id),s.size<=s.min&&i.push(s.id);let a=100;if(e>.1){for(const s of l.value)s.givenSize===null&&(s.size=Math.max(Math.min(e/(z.value-t),s.max),s.min)),a-=s.size;a>.1&&U(a,n,i)}},he=({addedPane:e,removedPane:n}={})=>{let i=100/z.value,t=0;const a=[],s=[];((e==null?void 0:e.givenSize)??null)!==null&&(i=(100-e.givenSize)/(z.value-1));for(const u of l.value)t-=u.size,u.size>=u.max&&a.push(u.id),u.size<=u.min&&s.push(u.id);if(!(Math.abs(t)<.1)){for(const u of l.value)(e==null?void 0:e.givenSize)!==null&&(e==null?void 0:e.id)===u.id||(u.size=Math.max(Math.min(i,u.max),u.min)),t-=u.size,u.size>=u.max&&a.push(u.id),u.size<=u.min&&s.push(u.id);t>.1&&U(t,a,s)}},U=(e,n,i)=>{let t;e>0?t=e/(z.value-n.length):t=e/(z.value-i.length),l.value.forEach((a,s)=>{if(e>0&&!n.includes(a.id)){const u=Math.max(Math.min(a.size+t,a.max),a.min),m=u-a.size;e-=m,a.size=u}else if(!i.includes(a.id)){const u=Math.max(Math.min(a.size+t,a.max),a.min),m=u-a.size;e-=m,a.size=u}}),Math.abs(e)>.1&&V(()=>{w.value&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")})},h=(e,n=void 0,i=!1)=>{const t=(n==null?void 0:n.index)??d.value.activeSplitter??null;f(e,{...n,...t!==null&&{index:t},...i&&t!==null&&{prevPane:l.value[t-(o.firstSplitter?1:0)],nextPane:l.value[t+(o.firstSplitter?0:1)]},panes:l.value.map(a=>({min:a.min,max:a.max,size:a.size}))})};A(()=>o.firstSplitter,()=>$()),G(()=>{de(),$(),K(),h("ready"),w.value=!0}),ee(()=>w.value=!1);const xe=()=>{var e;return Re("div",{ref:v,class:O.value},(e=y.default)==null?void 0:e.call(y))};return k("panes",l),k("indexedPanes",M),k("horizontal",_(()=>o.horizontal)),k("requestUpdate",me),k("onPaneAdd",pe),k("onPaneRemove",ce),k("onPaneClick",ae),(e,n)=>(j(),Me(we(xe)))}},N={__name:"pane",props:{size:{type:[Number,String]},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},setup(I){var R;const f=I,o=b("requestUpdate"),y=b("onPaneAdd"),l=b("horizontal"),M=b("onPaneRemove"),z=b("onPaneClick"),v=(R=ye())==null?void 0:R.uid,w=b("indexedPanes"),d=_(()=>w.value[v]),P=B(null),O=_(()=>{const r=isNaN(f.size)||f.size===void 0?0:parseFloat(f.size);return Math.max(Math.min(r,L.value),C.value)}),C=_(()=>{const r=parseFloat(f.minSize);return isNaN(r)?0:r}),L=_(()=>{const r=parseFloat(f.maxSize);return isNaN(r)?100:r}),T=_(()=>{var r;return`${l.value?"height":"width"}: ${(r=d.value)==null?void 0:r.size}%`});return A(()=>O.value,r=>o({uid:v,size:r})),A(()=>C.value,r=>o({uid:v,min:r})),A(()=>L.value,r=>o({uid:v,max:r})),G(()=>{y({id:v,el:P.value,min:C.value,max:L.value,givenSize:f.size===void 0?null:O.value,size:O.value})}),ee(()=>M(v)),(r,E)=>(j(),ne("div",{ref_key:"paneEl",ref:P,class:"splitpanes__pane",onClick:E[0]||(E[0]=F=>S(z)(F,r._.uid)),style:ke(T.value)},[Ee(r.$slots,"default")],4))}},Le={style:{"margin-bottom":"0"}},te=be({__name:"splitpanes",setup(I){function R(f){window.open(f,"_blank")}return(f,o)=>{const y=J("ElTag"),l=Ne,M=J("ElButton"),z=Se,v=ge;return j(),ne("div",null,[p(Ce),p(z,{title:"拆分面板"},{content:c(()=>[Be("p",Le,[o[3]||(o[3]=g(" 安装命令：")),p(y,null,{default:c(()=>o[1]||(o[1]=[g("pnpm add splitpanes")])),_:1}),o[4]||(o[4]=g()),p(y,null,{default:c(()=>o[2]||(o[2]=[g("pnpm add @types/splitpanes -D")])),_:1})])]),default:c(()=>[p(M,{onClick:o[0]||(o[0]=w=>R("https://github.com/antoniandre/splitpanes"))},{icon:c(()=>[p(l,{name:"i-ep:link"})]),default:c(()=>[o[5]||(o[5]=g(" 访问 splitpanes "))]),_:1})]),_:1}),p(v,null,{default:c(()=>[p(S(Z),{class:"default-theme",style:{height:"400px"}},{default:c(()=>[p(S(N),{"min-size":"20"},{default:c(()=>o[6]||(o[6]=[g(" 1 ")])),_:1}),p(S(N),null,{default:c(()=>[p(S(Z),{horizontal:""},{default:c(()=>[p(S(N),null,{default:c(()=>o[7]||(o[7]=[g("2")])),_:1}),p(S(N),null,{default:c(()=>o[8]||(o[8]=[g("3")])),_:1}),p(S(N),null,{default:c(()=>o[9]||(o[9]=[g("4")])),_:1})]),_:1})]),_:1}),p(S(N),null,{default:c(()=>o[10]||(o[10]=[g(" 5 ")])),_:1})]),_:1})]),_:1})])}}});typeof Q=="function"&&Q(te);const Ke=Oe(te,[["__scopeId","data-v-64e61038"]]);export{Ke as default};
